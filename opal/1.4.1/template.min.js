Opal.modules.template=function(Opal){var $nesting=[],nil=Opal.nil,$klass=Opal.klass,$hash2=Opal.hash2,$truthy=Opal.truthy,$defs=Opal.defs,$send=Opal.send,$to_a=Opal.to_a,$rb_minus=Opal.rb_minus,$def=Opal.def,$alias=Opal.alias;return Opal.add_stubs("[],[]=,-,keys,attr_reader,instance_exec,new,to_proc,<<,join"),function($base,$super,$parent_nesting){var self=$klass($base,null,"Template"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;return $proto.name=$proto.body=nil,self._cache=$hash2([],{}),$defs(self,"$[]",(function(name){var $ret_or_1;return null==this._cache&&(this._cache=nil),$truthy($ret_or_1=this._cache["$[]"](name))?$ret_or_1:this._cache["$[]"]("templates/"+name)}),1),$defs(self,"$[]=",(function(name,instance){var $writer;return null==this._cache&&(this._cache=nil),$writer=[name,instance],$send(this._cache,"[]=",$to_a($writer)),$writer[$rb_minus($writer.length,1)]}),2),$defs(self,"$paths",(function(){return null==this._cache&&(this._cache=nil),this._cache.$keys()}),0),self.$attr_reader("body"),$def(self,"$initialize",(function $$initialize(name){var $a,$writer,body=$$initialize.$$p||nil;return delete $$initialize.$$p,$a=[name,body],this.name=$a[0],this.body=$a[1],$writer=[name,this],$send($$("Template"),"[]=",$to_a($writer)),$writer[$rb_minus($writer.length,1)]}),1),$def(self,"$inspect",(function(){return"#<Template: '"+this.name+"'>"}),0),$def(self,"$render",(function(ctx){return null==ctx&&(ctx=this),$send(ctx,"instance_exec",[$$("OutputBuffer").$new()],this.body.$to_proc())}),-1),function($base,$super){var self=$klass($base,null,"OutputBuffer");return self.$$prototype.buffer=nil,$def(self,"$initialize",(function(){return this.buffer=[]}),0),$def(self,"$append",(function(str){return this.buffer["$<<"](str)}),1),$def(self,"$join",(function(){return this.buffer.$join()}),0),$alias(self,"append=","append")}($nesting[0])}($nesting[0],0,$nesting)};
