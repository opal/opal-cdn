Opal.modules.e2mmap=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.$$$,Opal.$$),$module=Opal.module,$send2=Opal.send2,$find_super=Opal.find_super,$truthy=Opal.truthy,$send=Opal.send,$alias=Opal.alias,$hash2=Opal.hash2,$gvars=Opal.gvars;return Opal.add_stubs(["$<","$bind","$module_eval","$Raise","$class","$extend","$def_e2message","$def_exception","$instance_eval","$[]=","$-","$new","$const_defined?","$remove_const","$const_set","$e2mm_message","$nil?","$caller","$=~","$[]","$quote","$shift","$raise","$sprintf","$Fail","$inspect","$each","$ancestors"]),function(self,$Exception2MessageMapper_e2mm_message$15){var $Exception2MessageMapper_extend_object$1,self=$module(self,"Exception2MessageMapper"),$nesting=[self].concat($Exception2MessageMapper_e2mm_message$15);return Opal.const_set($nesting[0],"E2MM",$$($nesting,"Exception2MessageMapper")),Opal.defs($$($nesting,"E2MM"),"$extend_object",$Exception2MessageMapper_extend_object$1=function(cl){var $zuper_ii,lhs,rhs=$Exception2MessageMapper_extend_object$1.$$p,$zuper=nil,$zuper_i=nil;for(rhs&&($Exception2MessageMapper_extend_object$1.$$p=null),$zuper_i=0,$zuper_ii=arguments.length,$zuper=new Array($zuper_ii);$zuper_i<$zuper_ii;$zuper_i++)$zuper[$zuper_i]=arguments[$zuper_i];return $send2(this,$find_super(this,"extend_object",$Exception2MessageMapper_extend_object$1,!1,!0),"extend_object",$zuper,rhs),$truthy((lhs=cl,rhs=$$($nesting,"E2MM"),"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)))?nil:cl.$bind(this)},$Exception2MessageMapper_extend_object$1.$$arity=1),Opal.def(self,"$bind",$Exception2MessageMapper_e2mm_message$15=function(){var $$3;return $send(this,"module_eval",[],(($$3=function(){var $Raise$4,$included$5=null==$$3.$$s?this:$$3.$$s;return Opal.def($included$5,"$Raise",$Raise$4=function($a,$b){var err,rest=Opal.slice.call(arguments,0,arguments.length);return 0<rest.length&&(err=rest[0],rest.splice(0,1)),null==err&&(err=nil),rest=rest,$send($$($nesting,"Exception2MessageMapper"),"Raise",[this.$class(),err].concat(Opal.to_a(rest)))},$Raise$4.$$arity=-1),$alias($included$5,"Fail","Raise"),function(self,$parent_nesting){[self].concat($parent_nesting),Opal.udef(self,"$included")}(Opal.get_singleton_class($included$5),$nesting),Opal.defs($included$5,"$included",$included$5=function(mod){return mod.$extend($$($nesting,"Exception2MessageMapper"))},$included$5.$$arity=1),nil&&"included"}).$$s=this,$$3.$$arity=0,$$3))},$Exception2MessageMapper_e2mm_message$15.$$arity=1),Opal.def(self,"$Raise",$Exception2MessageMapper_e2mm_message$15=function($a,$b){var err,self=this,rest=Opal.slice.call(arguments,0,arguments.length);return 0<rest.length&&(err=rest[0],rest.splice(0,1)),null==err&&(err=nil),rest=rest,$send($$($nesting,"E2MM"),"Raise",[self,err].concat(Opal.to_a(rest)))},$Exception2MessageMapper_e2mm_message$15.$$arity=-1),$alias(self,"Fail","Raise"),$alias(self,"fail","Raise"),Opal.def(self,"$def_e2message",$Exception2MessageMapper_e2mm_message$15=function(c,m){return $$($nesting,"E2MM").$def_e2message(this,c,m)},$Exception2MessageMapper_e2mm_message$15.$$arity=2),Opal.def(self,"$def_exception",$Exception2MessageMapper_e2mm_message$15=function(n,m,s){return null==s&&(s=$$($nesting,"StandardError")),$$($nesting,"E2MM").$def_exception(this,n,m,s)},$Exception2MessageMapper_e2mm_message$15.$$arity=-3),self.MessageMap=$hash2([],{}),Opal.defs($$($nesting,"E2MM"),"$def_e2message",$Exception2MessageMapper_e2mm_message$15=function(k,c,m){var $$10;return $send($$($nesting,"E2MM"),"instance_eval",[],(($$10=function(){var $writer,self=null==$$10.$$s?this:$$10.$$s;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,c],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$10.$$arity=0,$$10)),c},$Exception2MessageMapper_e2mm_message$15.$$arity=3),Opal.defs($$($nesting,"E2MM"),"$def_exception",$Exception2MessageMapper_e2mm_message$15=function(k,n,m,s){var $$12,$$13,e;return null==s&&(s=$$($nesting,"StandardError")),e=$$($nesting,"Class").$new(s),$send($$($nesting,"E2MM"),"instance_eval",[],(($$12=function(){var $writer,self=null==$$12.$$s?this:$$12.$$s;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,e],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$12.$$arity=0,$$12)),$truthy(k["$const_defined?"](n,!1))&&$send(k,"module_eval",[],(($$13=function(){return(null==$$13.$$s?this:$$13.$$s).$remove_const(n)}).$$s=this,$$13.$$arity=0,$$13)),k.$const_set(n,e)},$Exception2MessageMapper_e2mm_message$15.$$arity=-4),Opal.defs($$($nesting,"E2MM"),"$Raise",$Exception2MessageMapper_e2mm_message$15=function($a,$b,$c){var klass,err,rest,self=this,form=nil,b=nil;return null==$gvars["@"]&&($gvars["@"]=nil),0<(rest=Opal.slice.call(arguments,0,arguments.length)).length&&(klass=rest[0],rest.splice(0,1)),null==klass&&(klass=$$($nesting,"E2MM")),0<rest.length&&(err=rest[0],rest.splice(0,1)),null==err&&(err=nil),rest=rest,$truthy(form=self.$e2mm_message(klass,err))?(b=$truthy($gvars["@"]["$nil?"]())?self.$caller(1):$gvars["@"],$truthy(b["$[]"](0)["$=~"](Opal.regexp(["^",$$($nesting,"Regexp").$quote("./e2mmap.rb"),":"])))&&b.$shift(),self.$raise(err,$send(self,"sprintf",[form].concat(Opal.to_a(rest))),b)):$$($nesting,"E2MM").$Fail($$($nesting,"E2MM"),$$($nesting,"ErrNotRegisteredException"),err.$inspect())},$Exception2MessageMapper_e2mm_message$15.$$arity=-1),function(self,$parent_nesting){[self].concat($parent_nesting),$alias(self,"Fail","Raise")}(Opal.get_singleton_class($$($nesting,"E2MM")),$nesting),Opal.defs($$($nesting,"E2MM"),"$e2mm_message",$Exception2MessageMapper_e2mm_message$15=function(klass,exp){try{var $$16;return $send(klass.$ancestors(),"each",[],(($$16=function(c){var mes,self=null==$$16.$$s?this:$$16.$$s;if(null==self.MessageMap&&(self.MessageMap=nil),null==c&&(c=nil),!$truthy(mes=self.MessageMap["$[]"]([c,exp])))return nil;Opal.ret(mes)}).$$s=this,$$16.$$arity=1,$$16)),nil}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Exception2MessageMapper_e2mm_message$15.$$arity=2),function(self,$parent_nesting){[self].concat($parent_nesting),$alias(self,"message","e2mm_message")}(Opal.get_singleton_class(self),$nesting),$$($nesting,"E2MM").$def_exception($$($nesting,"E2MM"),"ErrNotRegisteredException","not registered exception(%s)")}($nesting[0],$nesting)},Opal.modules["matrix/eigenvalue_decomposition"]=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_divide(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs/rhs:lhs["$/"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_lt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)}function $rb_ge(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<=lhs:lhs["$>="](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$klass=Opal.klass,$truthy=Opal.truthy,$send=Opal.send,$alias=Opal.alias;return Opal.add_stubs(["$is_a?","$raise","$class","$row_count","$new","$symmetric?","$to_a","$tridiagonalize","$diagonalize","$reduce_to_hessenberg","$hessenberg_to_real_schur","$send","$transpose","$build_eigenvectors","$inverse","$dup","$each_with_index","$==","$Complex","$[]","$[]=","$-","$map","$diagonal","$eigenvalues","$v","$d","$v_inv","$alias_method","$private","$>","$+","$-@","$abs","$/","$*","$times","$downto","$sqrt","$upto","$!=","$max","$<","$<=","$hypot","$>=","$min","$cdiv"]),function($base,$nesting){$nesting=[$klass($base,null,"Matrix")].concat($nesting);return function($EigenvalueDecomposition_hessenberg_to_real_schur$63,$EigenvalueDecomposition_reduce_to_hessenberg$46){var $EigenvalueDecomposition_hessenberg_to_real_schur$63=$klass($EigenvalueDecomposition_hessenberg_to_real_schur$63,null,"EigenvalueDecomposition"),$nesting=[$EigenvalueDecomposition_hessenberg_to_real_schur$63].concat($EigenvalueDecomposition_reduce_to_hessenberg$46);return $EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.size=$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.symmetric=$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.d=$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.e=$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.v=$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$prototype.h=nil,Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$initialize",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(a){var $$2;return $truthy(a["$is_a?"]($$($nesting,"Matrix")))||this.$raise($$($nesting,"TypeError"),"Expected Matrix but got "+a.$class()),this.size=a.$row_count(),this.d=$$($nesting,"Array").$new(this.size,0),this.e=$$($nesting,"Array").$new(this.size,0),$truthy(this.symmetric=a["$symmetric?"]())?(this.v=a.$to_a(),this.$tridiagonalize(),this.$diagonalize()):(this.v=$send($$($nesting,"Array"),"new",[this.size],(($$2=function(){var self=null==$$2.$$s?this:$$2.$$s;return null==self.size&&(self.size=nil),$$($nesting,"Array").$new(self.size,0)}).$$s=this,$$2.$$arity=0,$$2)),this.h=a.$to_a(),this.ort=$$($nesting,"Array").$new(this.size,0),this.$reduce_to_hessenberg(),this.$hessenberg_to_real_schur())},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=1),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$eigenvector_matrix",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){return $$($nesting,"Matrix").$send("new",this.$build_eigenvectors().$transpose())},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),$alias($EigenvalueDecomposition_hessenberg_to_real_schur$63,"v","eigenvector_matrix"),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$eigenvector_matrix_inv",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var r=nil,r=$$($nesting,"Matrix").$send("new",this.$build_eigenvectors());return $truthy(this.symmetric)||(r=r.$transpose().$inverse()),r},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),$alias($EigenvalueDecomposition_hessenberg_to_real_schur$63,"v_inv","eigenvector_matrix_inv"),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$eigenvalues",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$6,values=nil,values=this.d.$dup();return $send(this.e,"each_with_index",[],(($$6=function(imag,i){var $writer,self=null==$$6.$$s?this:$$6.$$s;return null==imag&&(imag=nil),null==i&&(i=nil),imag["$=="](0)?nil:($writer=[i,self.$Complex(values["$[]"](i),imag)],$send(values,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)])}).$$s=this,$$6.$$arity=2,$$6)),values},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$eigenvectors",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$8;return $send(this.$build_eigenvectors(),"map",[],(($$8=function(ev){null==$$8.$$s||$$8.$$s;return null==ev&&(ev=nil),$$($nesting,"Vector").$send("new",ev)}).$$s=this,$$8.$$arity=1,$$8))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$eigenvalue_matrix",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){return $send($$($nesting,"Matrix"),"diagonal",Opal.to_a(this.$eigenvalues()))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),$alias($EigenvalueDecomposition_hessenberg_to_real_schur$63,"d","eigenvalue_matrix"),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$to_ary",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){return[this.$v(),this.$d(),this.$v_inv()]},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),$EigenvalueDecomposition_hessenberg_to_real_schur$63.$alias_method("to_a","to_ary"),$EigenvalueDecomposition_hessenberg_to_real_schur$63.$private(),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$build_eigenvectors",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$12;return $send(this.e.$each_with_index(),"map",[],(($$12=function(imag,i){var $$13,$$14,$$15,self=null==$$12.$$s?this:$$12.$$s;return null==self.size&&(self.size=nil),null==imag&&(imag=nil),null==i&&(i=nil),imag["$=="](0)?$send($$($nesting,"Array"),"new",[self.size],(($$13=function(j){var self=null==$$13.$$s?this:$$13.$$s;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.v["$[]"](j)["$[]"](i)}).$$s=self,$$13.$$arity=1,$$13)):$truthy($rb_gt(imag,0))?$send($$($nesting,"Array"),"new",[self.size],(($$14=function(j){var self=null==$$14.$$s?this:$$14.$$s;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.$Complex(self.v["$[]"](j)["$[]"](i),self.v["$[]"](j)["$[]"]($rb_plus(i,1)))}).$$s=self,$$14.$$arity=1,$$14)):$send($$($nesting,"Array"),"new",[self.size],(($$15=function(j){var self=null==$$15.$$s?this:$$15.$$s;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.$Complex(self.v["$[]"](j)["$[]"]($rb_minus(i,1)),self.v["$[]"](j)["$[]"](i)["$-@"]())}).$$s=self,$$15.$$arity=1,$$15))}).$$s=this,$$12.$$arity=2,$$12))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$cdiv",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(xr,xi,yr,yi){var r=nil,d=nil;return $truthy($rb_gt(yr.$abs(),yi.$abs()))?(d=$rb_plus(yr,$rb_times(r=$rb_divide(yi,yr),yi)),[$rb_divide($rb_plus(xr,$rb_times(r,xi)),d),$rb_divide($rb_minus(xi,$rb_times(r,xr)),d)]):(d=$rb_plus(yi,$rb_times(r=$rb_divide(yr,yi),yr)),[$rb_divide($rb_plus($rb_times(r,xr),xi),d),$rb_divide($rb_minus($rb_times(r,xi),xr),d)])},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=4),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$tridiagonalize",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$18,$$19,$$30,$$36,$writer;return $send(this.size,"times",[],(($$18=function(j){var $writer,self=null==$$18.$$s?this:$$18.$$s;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(self.size,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$18.$$arity=1,$$18)),$send($rb_minus(this.size,1),"downto",[1],(($$19=function(i){var $$20,$$21,$$22,$$23,$$24,$$26,$$27,$$28,hh,self=null==$$19.$$s?this:$$19.$$s,scale=nil,h=nil,$writer=nil,f=nil,g=nil;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==i&&(i=nil),h=scale=0,$send(i,"times",[],(($$20=function(k){var self=null==$$20.$$s?this:$$20.$$s;return null==self.d&&(self.d=nil),null==k&&(k=nil),scale=$rb_plus(scale,self.d["$[]"](k).$abs())}).$$s=self,$$20.$$arity=1,$$20)),$truthy(scale["$=="](0))?($writer=[i,self.d["$[]"]($rb_minus(i,1))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(i,"times",[],(($$21=function(j){var self=null==$$21.$$s?this:$$21.$$s;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(i,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,0],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$21.$$arity=1,$$21))):($send(i,"times",[],(($$22=function(k){var self=null==$$22.$$s?this:$$22.$$s;return null==self.d&&(self.d=nil),null==k&&(k=nil),$writer=[k,$rb_divide(self.d["$[]"](k),scale)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=$rb_plus(h,$rb_times(self.d["$[]"](k),self.d["$[]"](k)))}).$$s=self,$$22.$$arity=1,$$22)),f=self.d["$[]"]($rb_minus(i,1)),g=$$($nesting,"Math").$sqrt(h),$truthy($rb_gt(f,0))&&(g=g["$-@"]()),$writer=[i,$rb_times(scale,g)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=$rb_minus(h,$rb_times(f,g)),$writer=[$rb_minus(i,1),$rb_minus(f,g)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(i,"times",[],(($$23=function(j){var self=null==$$23.$$s?this:$$23.$$s;return null==self.e&&(self.e=nil),null==j&&(j=nil),$writer=[j,0],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$23.$$arity=1,$$23)),$send(i,"times",[],(($$24=function(j){var $$25,self=null==$$24.$$s?this:$$24.$$s;return null==self.d&&(self.d=nil),null==self.v&&(self.v=nil),null==self.e&&(self.e=nil),null==j&&(j=nil),f=self.d["$[]"](j),$writer=[i,f],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],g=$rb_plus(self.e["$[]"](j),$rb_times(self.v["$[]"](j)["$[]"](j),f)),$send($rb_plus(j,1),"upto",[$rb_minus(i,1)],(($$25=function(k){var self=null==$$25.$$s?this:$$25.$$s;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==k&&(k=nil),g=$rb_plus(g,$rb_times(self.v["$[]"](k)["$[]"](j),self.d["$[]"](k))),$writer=[k,$rb_plus(self.e["$[]"](k),$rb_times(self.v["$[]"](k)["$[]"](j),f))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$25.$$arity=1,$$25)),$writer=[j,g],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$24.$$arity=1,$$24)),f=0,$send(i,"times",[],(($$26=function(j){var self=null==$$26.$$s?this:$$26.$$s;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,$rb_divide(self.e["$[]"](j),h)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],f=$rb_plus(f,$rb_times(self.e["$[]"](j),self.d["$[]"](j)))}).$$s=self,$$26.$$arity=1,$$26)),hh=$rb_divide(f,$rb_plus(h,h)),$send(i,"times",[],(($$27=function(j){var self=null==$$27.$$s?this:$$27.$$s;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,$rb_minus(self.e["$[]"](j),$rb_times(hh,self.d["$[]"](j)))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$27.$$arity=1,$$27)),$send(i,"times",[],(($$28=function(j){var $$29,self=null==$$28.$$s?this:$$28.$$s;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.v&&(self.v=nil),null==j&&(j=nil),f=self.d["$[]"](j),g=self.e["$[]"](j),$send(j,"upto",[$rb_minus(i,1)],(($$29=function(k){var self=null==$$29.$$s?this:$$29.$$s,$binary_op_recvr_tmp_3=nil;return null==self.v&&(self.v=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$binary_op_recvr_tmp_3=self.v["$[]"](k),$writer=[j,$rb_minus($binary_op_recvr_tmp_3["$[]"](j),$rb_plus($rb_times(f,self.e["$[]"](k)),$rb_times(g,self.d["$[]"](k))))],$send($binary_op_recvr_tmp_3,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$29.$$arity=1,$$29)),$writer=[j,self.v["$[]"]($rb_minus(i,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$28.$$arity=1,$$28))),$writer=[i,h],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$19.$$arity=1,$$19)),$send(0,"upto",[$rb_minus($rb_minus(this.size,1),1)],(($$30=function(i){var $$31,$$32,$$35,self=null==$$30.$$s?this:$$30.$$s,$writer=nil,h=nil;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),$writer=[i,self.v["$[]"](i)["$[]"](i)],$send(self.v["$[]"]($rb_minus(self.size,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,1],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=self.d["$[]"]($rb_plus(i,1)),$truthy(h["$!="](0))&&($send(0,"upto",[i],(($$31=function(k){var self=null==$$31.$$s?this:$$31.$$s;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$writer=[k,$rb_divide(self.v["$[]"](k)["$[]"]($rb_plus(i,1)),h)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$31.$$arity=1,$$31)),$send(0,"upto",[i],(($$32=function(j){var $$33,$$34,self=null==$$32.$$s?this:$$32.$$s,g=nil;return null==j&&(j=nil),$send(g=0,"upto",[i],(($$33=function(k){var self=null==$$33.$$s?this:$$33.$$s;return null==self.v&&(self.v=nil),null==k&&(k=nil),g=$rb_plus(g,$rb_times(self.v["$[]"](k)["$[]"]($rb_plus(i,1)),self.v["$[]"](k)["$[]"](j)))}).$$s=self,$$33.$$arity=1,$$33)),$send(0,"upto",[i],(($$34=function(k){var self=null==$$34.$$s?this:$$34.$$s,$binary_op_recvr_tmp_4=nil;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$binary_op_recvr_tmp_4=self.v["$[]"](k),$writer=[j,$rb_minus($binary_op_recvr_tmp_4["$[]"](j),$rb_times(g,self.d["$[]"](k)))],$send($binary_op_recvr_tmp_4,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$34.$$arity=1,$$34))}).$$s=self,$$32.$$arity=1,$$32))),$send(0,"upto",[i],(($$35=function(k){var self=null==$$35.$$s?this:$$35.$$s;return null==self.v&&(self.v=nil),null==k&&(k=nil),$writer=[$rb_plus(i,1),0],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$35.$$arity=1,$$35))}).$$s=this,$$30.$$arity=1,$$30)),$send(this.size,"times",[],(($$36=function(j){var $writer,self=null==$$36.$$s?this:$$36.$$s;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(self.size,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),$writer=[j,0],$send(self.v["$[]"]($rb_minus(self.size,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$36.$$arity=1,$$36)),$writer=[$rb_minus(this.size,1),1],$send(this.v["$[]"]($rb_minus(this.size,1)),"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),$writer=[0,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$diagonalize",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$38,$$39,$$43,eps,$writer=nil,f=nil,tst1=nil;return $send(1,"upto",[$rb_minus(this.size,1)],(($$38=function(i){var $writer,self=null==$$38.$$s?this:$$38.$$s;return null==self.e&&(self.e=nil),null==i&&(i=nil),$writer=[$rb_minus(i,1),self.e["$[]"](i)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$38.$$arity=1,$$38)),$writer=[$rb_minus(this.size,1),0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],tst1=f=0,eps=$$$($$($nesting,"Float"),"EPSILON"),$send(this.size,"times",[],(($$39=function(l){var $$40,$$41,g,dl1,el1,lhs,rhs,self=null==$$39.$$s?this:$$39.$$s,m=nil,iter=nil,p=nil,r=nil,h=nil,c=nil,c2=nil,c3=nil,s=nil,s2=nil;for(null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.size&&(self.size=nil),null==l&&(l=nil),tst1=[tst1,$rb_plus(self.d["$[]"](l).$abs(),self.e["$[]"](l).$abs())].$max(),m=l;$truthy($rb_lt(m,self.size))&&!$truthy((lhs=self.e["$[]"](m).$abs(),rhs=$rb_times(eps,tst1),"number"==typeof lhs&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)));)m=$rb_plus(m,1);if($truthy($rb_gt(m,l)))for(iter=0;iter=$rb_plus(iter,1),g=self.d["$[]"](l),p=$rb_divide($rb_minus(self.d["$[]"]($rb_plus(l,1)),g),$rb_times(2,self.e["$[]"](l))),r=$$($nesting,"Math").$hypot(p,1),$truthy($rb_lt(p,0))&&(r=r["$-@"]()),$writer=[l,$rb_divide(self.e["$[]"](l),$rb_plus(p,r))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(l,1),$rb_times(self.e["$[]"](l),$rb_plus(p,r))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],dl1=self.d["$[]"]($rb_plus(l,1)),h=$rb_minus(g,self.d["$[]"](l)),$send($rb_plus(l,2),"upto",[$rb_minus(self.size,1)],(($$40=function(i){var self=null==$$40.$$s?this:$$40.$$s;return null==self.d&&(self.d=nil),null==i&&(i=nil),$writer=[i,$rb_minus(self.d["$[]"](i),h)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$40.$$arity=1,$$40)),f=$rb_plus(f,h),p=self.d["$[]"](m),c3=c2=c=1,el1=self.e["$[]"]($rb_plus(l,1)),s2=s=0,$send($rb_minus(m,1),"downto",[l],(($$41=function(i){var $$42,self=null==$$41.$$s?this:$$41.$$s;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==self.size&&(self.size=nil),null==i&&(i=nil),c3=c2,s2=s,g=$rb_times(c2=c,self.e["$[]"](i)),h=$rb_times(c,p),r=$$($nesting,"Math").$hypot(p,self.e["$[]"](i)),$writer=[$rb_plus(i,1),$rb_times(s,r)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],s=$rb_divide(self.e["$[]"](i),r),c=$rb_divide(p,r),p=$rb_minus($rb_times(c,self.d["$[]"](i)),$rb_times(s,g)),$writer=[$rb_plus(i,1),$rb_plus(h,$rb_times(s,$rb_plus($rb_times(c,g),$rb_times(s,self.d["$[]"](i)))))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(self.size,"times",[],(($$42=function(k){var self=null==$$42.$$s?this:$$42.$$s;return null==self.v&&(self.v=nil),null==k&&(k=nil),h=self.v["$[]"](k)["$[]"]($rb_plus(i,1)),$writer=[$rb_plus(i,1),$rb_plus($rb_times(s,self.v["$[]"](k)["$[]"](i)),$rb_times(c,h))],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,$rb_minus($rb_times(c,self.v["$[]"](k)["$[]"](i)),$rb_times(s,h))],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$42.$$arity=1,$$42))}).$$s=self,$$41.$$arity=1,$$41)),p=$rb_divide($rb_times($rb_times($rb_times($rb_times(s["$-@"](),s2),c3),el1),self.e["$[]"](l)),dl1),$writer=[l,$rb_times(s,p)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[l,$rb_times(c,p)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy($rb_gt(self.e["$[]"](l).$abs(),$rb_times(eps,tst1))););return $writer=[l,$rb_plus(self.d["$[]"](l),f)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[l,0],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$39.$$arity=1,$$39)),$send(0,"upto",[$rb_minus(this.size,2)],(($$43=function(i){var $$44,$$45,self=null==$$43.$$s?this:$$43.$$s,k=nil,p=nil;return null==self.d&&(self.d=nil),null==self.size&&(self.size=nil),null==i&&(i=nil),k=i,p=self.d["$[]"](i),$send($rb_plus(i,1),"upto",[$rb_minus(self.size,1)],(($$44=function(j){var self=null==$$44.$$s?this:$$44.$$s;return null==self.d&&(self.d=nil),null==j&&(j=nil),$truthy($rb_lt(self.d["$[]"](j),p))?(k=j,p=self.d["$[]"](j)):nil}).$$s=self,$$44.$$arity=1,$$44)),$truthy(k["$!="](i))?($writer=[k,self.d["$[]"](i)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,p],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(self.size,"times",[],(($$45=function(j){var self=null==$$45.$$s?this:$$45.$$s;return null==self.v&&(self.v=nil),null==j&&(j=nil),p=self.v["$[]"](j)["$[]"](i),$writer=[i,self.v["$[]"](j)["$[]"](k)],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[k,p],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$45.$$arity=1,$$45))):nil}).$$s=this,$$43.$$arity=1,$$43))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$reduce_to_hessenberg",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$47,$$56,$$58,high=$rb_minus(this.size,1);return $send(1,"upto",[$rb_minus(high,1)],(($$47=function(m){var $$48,$$49,$$50,$$53,self=null==$$47.$$s?this:$$47.$$s,scale=nil,h=nil,g=nil,$writer=nil;return null==self.ort&&(self.ort=nil),null==self.size&&(self.size=nil),null==self.h&&(self.h=nil),null==m&&(m=nil),scale=0,$send(m,"upto",[high],(($$48=function(i){var self=null==$$48.$$s?this:$$48.$$s;return null==self.h&&(self.h=nil),null==i&&(i=nil),scale=$rb_plus(scale,self.h["$[]"](i)["$[]"]($rb_minus(m,1)).$abs())}).$$s=self,$$48.$$arity=1,$$48)),$truthy(scale["$!="](0))?(h=0,$send(high,"downto",[m],(($$49=function(i){var $writer,self=null==$$49.$$s?this:$$49.$$s;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$writer=[i,$rb_divide(self.h["$[]"](i)["$[]"]($rb_minus(m,1)),scale)],$send(self.ort,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),h=$rb_plus(h,$rb_times(self.ort["$[]"](i),self.ort["$[]"](i)))}).$$s=self,$$49.$$arity=1,$$49)),g=$$($nesting,"Math").$sqrt(h),$truthy($rb_gt(self.ort["$[]"](m),0))&&(g=g["$-@"]()),h=$rb_minus(h,$rb_times(self.ort["$[]"](m),g)),$writer=[m,$rb_minus(self.ort["$[]"](m),g)],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(m,"upto",[$rb_minus(self.size,1)],(($$50=function(j){var $$51,$$52,self=null==$$50.$$s?this:$$50.$$s,f=nil;return null==j&&(j=nil),f=0,$send(high,"downto",[m],(($$51=function(i){var self=null==$$51.$$s?this:$$51.$$s;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==i&&(i=nil),f=$rb_plus(f,$rb_times(self.ort["$[]"](i),self.h["$[]"](i)["$[]"](j)))}).$$s=self,$$51.$$arity=1,$$51)),f=$rb_divide(f,h),$send(m,"upto",[high],(($$52=function(i){var self=null==$$52.$$s?this:$$52.$$s,$binary_op_recvr_tmp_5=nil;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$binary_op_recvr_tmp_5=self.h["$[]"](i),$writer=[j,$rb_minus($binary_op_recvr_tmp_5["$[]"](j),$rb_times(f,self.ort["$[]"](i)))],$send($binary_op_recvr_tmp_5,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$52.$$arity=1,$$52))}).$$s=self,$$50.$$arity=1,$$50)),$send(0,"upto",[high],(($$53=function(i){var $$54,$$55,self=null==$$53.$$s?this:$$53.$$s,f=nil;return null==i&&(i=nil),f=0,$send(high,"downto",[m],(($$54=function(j){var self=null==$$54.$$s?this:$$54.$$s;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==j&&(j=nil),f=$rb_plus(f,$rb_times(self.ort["$[]"](j),self.h["$[]"](i)["$[]"](j)))}).$$s=self,$$54.$$arity=1,$$54)),f=$rb_divide(f,h),$send(m,"upto",[high],(($$55=function(j){var self=null==$$55.$$s?this:$$55.$$s,$binary_op_recvr_tmp_6=nil;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==j&&(j=nil),$binary_op_recvr_tmp_6=self.h["$[]"](i),$writer=[j,$rb_minus($binary_op_recvr_tmp_6["$[]"](j),$rb_times(f,self.ort["$[]"](j)))],$send($binary_op_recvr_tmp_6,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$55.$$arity=1,$$55))}).$$s=self,$$53.$$arity=1,$$53)),$writer=[m,$rb_times(scale,self.ort["$[]"](m))],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(m,1),$rb_times(scale,g)],$send(self.h["$[]"](m),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):nil}).$$s=this,$$47.$$arity=1,$$47)),$send(this.size,"times",[],(($$56=function(i){var $$57,self=null==$$56.$$s?this:$$56.$$s;return null==self.size&&(self.size=nil),null==i&&(i=nil),$send(self.size,"times",[],(($$57=function(j){var $writer,self=null==$$57.$$s?this:$$57.$$s;return null==self.v&&(self.v=nil),null==j&&(j=nil),$writer=[j,i["$=="](j)?1:0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$57.$$arity=1,$$57))}).$$s=this,$$56.$$arity=1,$$56)),$send($rb_minus(high,1),"downto",[1],(($$58=function(m){var $$59,$$60,self=null==$$58.$$s?this:$$58.$$s;return null==self.h&&(self.h=nil),null==m&&(m=nil),$truthy(self.h["$[]"](m)["$[]"]($rb_minus(m,1))["$!="](0))?($send($rb_plus(m,1),"upto",[high],(($$59=function(i){var $writer,self=null==$$59.$$s?this:$$59.$$s;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$writer=[i,self.h["$[]"](i)["$[]"]($rb_minus(m,1))],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$59.$$arity=1,$$59)),$send(m,"upto",[high],(($$60=function(j){var $$61,$$62,self=null==$$60.$$s?this:$$60.$$s,g=nil;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==j&&(j=nil),g=0,$send(m,"upto",[high],(($$61=function(i){var self=null==$$61.$$s?this:$$61.$$s;return null==self.ort&&(self.ort=nil),null==self.v&&(self.v=nil),null==i&&(i=nil),g=$rb_plus(g,$rb_times(self.ort["$[]"](i),self.v["$[]"](i)["$[]"](j)))}).$$s=self,$$61.$$arity=1,$$61)),g=$rb_divide($rb_divide(g,self.ort["$[]"](m)),self.h["$[]"](m)["$[]"]($rb_minus(m,1))),$send(m,"upto",[high],(($$62=function(i){var $writer,self=null==$$62.$$s?this:$$62.$$s,$binary_op_recvr_tmp_7=nil;return null==self.v&&(self.v=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$binary_op_recvr_tmp_7=self.v["$[]"](i),$writer=[j,$rb_plus($binary_op_recvr_tmp_7["$[]"](j),$rb_times(g,self.ort["$[]"](i)))],$send($binary_op_recvr_tmp_7,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$62.$$arity=1,$$62))}).$$s=self,$$60.$$arity=1,$$60))):nil}).$$s=this,$$58.$$arity=1,$$58))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def($EigenvalueDecomposition_hessenberg_to_real_schur$63,"$hessenberg_to_real_schur",$EigenvalueDecomposition_hessenberg_to_real_schur$63=function(){var $$64,$$66,$$67,$$68,$$69,$$70,$$71,$$72,$$76,$$83,$$85,nn=nil,n=nil,high=nil,exshift=nil,p=nil,q=nil,r=nil,s=nil,z=nil,norm=nil,iter=nil,l=nil,$writer=nil,w=nil,x=nil,y=nil,m=nil,n=$rb_minus(nn=this.size,1),high=$rb_minus(nn,1),eps=$$$($$($nesting,"Float"),"EPSILON"),exshift=0,p=q=r=s=z=0,norm=0;for($send(nn,"times",[],(($$64=function(i){var $$65,$writer,self=null==$$64.$$s?this:$$64.$$s,$ret_or_1=nil;return null==self.h&&(self.h=nil),null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==i&&(i=nil),$truthy($truthy($ret_or_1=$rb_lt(i,0))?$ret_or_1:$rb_gt(i,high))&&($writer=[i,self.h["$[]"](i)["$[]"](i)],$send(self.d,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),$writer=[i,0],$send(self.e,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1)),$send([$rb_minus(i,1),0].$max(),"upto",[$rb_minus(nn,1)],(($$65=function(j){var self=null==$$65.$$s?this:$$65.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),norm=$rb_plus(norm,self.h["$[]"](i)["$[]"](j).$abs())}).$$s=self,$$65.$$arity=1,$$65))}).$$s=this,$$64.$$arity=1,$$64)),iter=0;$truthy($rb_ge(n,0));){for(l=n;$truthy($rb_gt(l,0))&&(s=$rb_plus(this.h["$[]"]($rb_minus(l,1))["$[]"]($rb_minus(l,1)).$abs(),this.h["$[]"](l)["$[]"](l).$abs()),$truthy(s["$=="](0))&&(s=norm),!$truthy($rb_lt(this.h["$[]"](l)["$[]"]($rb_minus(l,1)).$abs(),$rb_times(eps,s))));)l=$rb_minus(l,1);if($truthy(l["$=="](n)))$writer=[n,$rb_plus(this.h["$[]"](n)["$[]"](n),exshift)],$send(this.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,this.h["$[]"](n)["$[]"](n)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],n=$rb_minus(n,1),iter=0;else if($truthy(l["$=="]($rb_minus(n,1))))w=$rb_times(this.h["$[]"](n)["$[]"]($rb_minus(n,1)),this.h["$[]"]($rb_minus(n,1))["$[]"](n)),p=$rb_divide($rb_minus(this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),this.h["$[]"](n)["$[]"](n)),2),q=$rb_plus($rb_times(p,p),w),z=$$($nesting,"Math").$sqrt(q.$abs()),$writer=[n,$rb_plus(this.h["$[]"](n)["$[]"](n),exshift)],$send(this.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),$rb_plus(this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),exshift)],$send(this.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],x=this.h["$[]"](n)["$[]"](n),$truthy($rb_ge(q,0))?(z=($truthy($rb_ge(p,0))?$rb_plus:$rb_minus)(p,z),$writer=[$rb_minus(n,1),$rb_plus(x,z)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,this.d["$[]"]($rb_minus(n,1))],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy(z["$!="](0))&&($writer=[n,$rb_minus(x,$rb_divide(w,z))],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[$rb_minus(n,1),0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],x=this.h["$[]"](n)["$[]"]($rb_minus(n,1)),s=$rb_plus(x.$abs(),z.$abs()),p=$rb_divide(x,s),q=$rb_divide(z,s),r=$$($nesting,"Math").$sqrt($rb_plus($rb_times(p,p),$rb_times(q,q))),p=$rb_divide(p,r),q=$rb_divide(q,r),$send($rb_minus(n,1),"upto",[$rb_minus(nn,1)],(($$66=function(j){var self=null==$$66.$$s?this:$$66.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),z=self.h["$[]"]($rb_minus(n,1))["$[]"](j),$writer=[j,$rb_plus($rb_times(q,z),$rb_times(p,self.h["$[]"](n)["$[]"](j)))],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,$rb_minus($rb_times(q,self.h["$[]"](n)["$[]"](j)),$rb_times(p,z))],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$66.$$arity=1,$$66)),$send(0,"upto",[n],(($$67=function(i){var self=null==$$67.$$s?this:$$67.$$s;return null==self.h&&(self.h=nil),null==i&&(i=nil),z=self.h["$[]"](i)["$[]"]($rb_minus(n,1)),$writer=[$rb_minus(n,1),$rb_plus($rb_times(q,z),$rb_times(p,self.h["$[]"](i)["$[]"](n)))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_minus($rb_times(q,self.h["$[]"](i)["$[]"](n)),$rb_times(p,z))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$67.$$arity=1,$$67)),$send(0,"upto",[high],(($$68=function(i){var self=null==$$68.$$s?this:$$68.$$s;return null==self.v&&(self.v=nil),null==i&&(i=nil),z=self.v["$[]"](i)["$[]"]($rb_minus(n,1)),$writer=[$rb_minus(n,1),$rb_plus($rb_times(q,z),$rb_times(p,self.v["$[]"](i)["$[]"](n)))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_minus($rb_times(q,self.v["$[]"](i)["$[]"](n)),$rb_times(p,z))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$68.$$arity=1,$$68))):($writer=[$rb_minus(n,1),$rb_plus(x,p)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_plus(x,p)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),z],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,z["$-@"]()],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),n=$rb_minus(n,2),iter=0;else{for(x=this.h["$[]"](n)["$[]"](n),w=y=0,$truthy($rb_lt(l,n))&&(y=this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),w=$rb_times(this.h["$[]"](n)["$[]"]($rb_minus(n,1)),this.h["$[]"]($rb_minus(n,1))["$[]"](n))),$truthy(iter["$=="](10))&&(exshift=$rb_plus(exshift,x),$send(0,"upto",[n],(($$69=function(i){var self=null==$$69.$$s?this:$$69.$$s,$binary_op_recvr_tmp_8=nil;return null==self.h&&(self.h=nil),null==i&&(i=nil),$binary_op_recvr_tmp_8=self.h["$[]"](i),$writer=[i,$rb_minus($binary_op_recvr_tmp_8["$[]"](i),x)],$send($binary_op_recvr_tmp_8,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$69.$$arity=1,$$69)),s=$rb_plus(this.h["$[]"](n)["$[]"]($rb_minus(n,1)).$abs(),this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,2)).$abs()),x=y=$rb_times(.75,s),w=$rb_times($rb_times(-.4375,s),s)),$truthy(iter["$=="](30))&&(s=$rb_times(s=$rb_divide($rb_minus(y,x),2),$rb_plus(s,w)),$truthy($rb_gt(s,0))&&(s=$$($nesting,"Math").$sqrt(s),$truthy($rb_lt(y,x))&&(s=s["$-@"]()),s=$rb_minus(x,$rb_divide(w,$rb_plus($rb_divide($rb_minus(y,x),2),s))),$send(0,"upto",[n],(($$70=function(i){var self=null==$$70.$$s?this:$$70.$$s,$binary_op_recvr_tmp_9=nil;return null==self.h&&(self.h=nil),null==i&&(i=nil),$binary_op_recvr_tmp_9=self.h["$[]"](i),$writer=[i,$rb_minus($binary_op_recvr_tmp_9["$[]"](i),s)],$send($binary_op_recvr_tmp_9,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$70.$$arity=1,$$70)),exshift=$rb_plus(exshift,s),x=y=w=.964)),iter=$rb_plus(iter,1),m=$rb_minus(n,2);$truthy($rb_ge(m,l))&&(z=this.h["$[]"](m)["$[]"](m),r=$rb_minus(x,z),s=$rb_minus(y,z),p=$rb_plus($rb_divide($rb_minus($rb_times(r,s),w),this.h["$[]"]($rb_plus(m,1))["$[]"](m)),this.h["$[]"](m)["$[]"]($rb_plus(m,1))),q=$rb_minus($rb_minus($rb_minus(this.h["$[]"]($rb_plus(m,1))["$[]"]($rb_plus(m,1)),z),r),s),r=this.h["$[]"]($rb_plus(m,2))["$[]"]($rb_plus(m,1)),s=$rb_plus($rb_plus(p.$abs(),q.$abs()),r.$abs()),p=$rb_divide(p,s),q=$rb_divide(q,s),r=$rb_divide(r,s),!$truthy(m["$=="](l)))&&!$truthy($rb_lt($rb_times(this.h["$[]"](m)["$[]"]($rb_minus(m,1)).$abs(),$rb_plus(q.$abs(),r.$abs())),$rb_times(eps,$rb_times(p.$abs(),$rb_plus($rb_plus(this.h["$[]"]($rb_minus(m,1))["$[]"]($rb_minus(m,1)).$abs(),z.$abs()),this.h["$[]"]($rb_plus(m,1))["$[]"]($rb_plus(m,1)).$abs())))));)m=$rb_minus(m,1);$send($rb_plus(m,2),"upto",[n],(($$71=function(i){var self=null==$$71.$$s?this:$$71.$$s;return null==self.h&&(self.h=nil),null==i&&(i=nil),$writer=[$rb_minus(i,2),0],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy($rb_gt(i,$rb_plus(m,2)))?($writer=[$rb_minus(i,3),0],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):nil}).$$s=this,$$71.$$arity=1,$$71)),$send(m,"upto",[$rb_minus(n,1)],(($$72=function(k){var $$73,$$74,$$75,notlast,self=null==$$72.$$s?this:$$72.$$s;if(null==self.h&&(self.h=nil),null==k&&(k=nil),notlast=k["$!="]($rb_minus(n,1)),$truthy(k["$!="](m))){if(p=self.h["$[]"](k)["$[]"]($rb_minus(k,1)),q=self.h["$[]"]($rb_plus(k,1))["$[]"]($rb_minus(k,1)),r=$truthy(notlast)?self.h["$[]"]($rb_plus(k,2))["$[]"]($rb_minus(k,1)):0,(x=$rb_plus($rb_plus(p.$abs(),q.$abs()),r.$abs()))["$=="](0))return nil;p=$rb_divide(p,x),q=$rb_divide(q,x),r=$rb_divide(r,x)}return s=$$($nesting,"Math").$sqrt($rb_plus($rb_plus($rb_times(p,p),$rb_times(q,q)),$rb_times(r,r))),$truthy($rb_lt(p,0))&&(s=s["$-@"]()),$truthy(s["$!="](0))?($truthy(k["$!="](m))?($writer=[$rb_minus(k,1),$rb_times(s["$-@"](),x)],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):$truthy(l["$!="](m))&&($writer=[$rb_minus(k,1),self.h["$[]"](k)["$[]"]($rb_minus(k,1))["$-@"]()],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),p=$rb_plus(p,s),x=$rb_divide(p,s),y=$rb_divide(q,s),z=$rb_divide(r,s),q=$rb_divide(q,p),r=$rb_divide(r,p),$send(k,"upto",[$rb_minus(nn,1)],(($$73=function(j){var self=null==$$73.$$s?this:$$73.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),p=$rb_plus(self.h["$[]"](k)["$[]"](j),$rb_times(q,self.h["$[]"]($rb_plus(k,1))["$[]"](j))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(r,self.h["$[]"]($rb_plus(k,2))["$[]"](j))),$writer=[j,$rb_minus(self.h["$[]"]($rb_plus(k,2))["$[]"](j),$rb_times(p,z))],$send(self.h["$[]"]($rb_plus(k,2)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[j,$rb_minus(self.h["$[]"](k)["$[]"](j),$rb_times(p,x))],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,$rb_minus(self.h["$[]"]($rb_plus(k,1))["$[]"](j),$rb_times(p,y))],$send(self.h["$[]"]($rb_plus(k,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$73.$$arity=1,$$73)),$send(0,"upto",[[n,$rb_plus(k,3)].$min()],(($$74=function(i){var self=null==$$74.$$s?this:$$74.$$s;return null==self.h&&(self.h=nil),null==i&&(i=nil),p=$rb_plus($rb_times(x,self.h["$[]"](i)["$[]"](k)),$rb_times(y,self.h["$[]"](i)["$[]"]($rb_plus(k,1)))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(z,self.h["$[]"](i)["$[]"]($rb_plus(k,2)))),$writer=[$rb_plus(k,2),$rb_minus(self.h["$[]"](i)["$[]"]($rb_plus(k,2)),$rb_times(p,r))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[k,$rb_minus(self.h["$[]"](i)["$[]"](k),p)],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(k,1),$rb_minus(self.h["$[]"](i)["$[]"]($rb_plus(k,1)),$rb_times(p,q))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$74.$$arity=1,$$74)),$send(0,"upto",[high],(($$75=function(i){var self=null==$$75.$$s?this:$$75.$$s;return null==self.v&&(self.v=nil),null==i&&(i=nil),p=$rb_plus($rb_times(x,self.v["$[]"](i)["$[]"](k)),$rb_times(y,self.v["$[]"](i)["$[]"]($rb_plus(k,1)))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(z,self.v["$[]"](i)["$[]"]($rb_plus(k,2)))),$writer=[$rb_plus(k,2),$rb_minus(self.v["$[]"](i)["$[]"]($rb_plus(k,2)),$rb_times(p,r))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[k,$rb_minus(self.v["$[]"](i)["$[]"](k),p)],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(k,1),$rb_minus(self.v["$[]"](i)["$[]"]($rb_plus(k,1)),$rb_times(p,q))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$75.$$arity=1,$$75))):nil}).$$s=this,$$72.$$arity=1,$$72))}}return $truthy(norm["$=="](0))?nil:($send($rb_minus(nn,1),"downto",[0],(($$76=function(k){var $$77,$c,$$80,self=null==$$76.$$s?this:$$76.$$s,cdivr=nil,cdivi=nil;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.h&&(self.h=nil),null==k&&(k=nil),p=self.d["$[]"](k),q=self.e["$[]"](k),$truthy(q["$=="](0))?($writer=[l=k,1],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_minus(k,1),"downto",[0],(($$77=function(i){var $$78,$$79,self=null==$$77.$$s?this:$$77.$$s,t=nil;return null==self.h&&(self.h=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),w=$rb_minus(self.h["$[]"](i)["$[]"](i),p),r=0,$send(l,"upto",[k],(($$78=function(j){var self=null==$$78.$$s?this:$$78.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),r=$rb_plus(r,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"](k)))}).$$s=self,$$78.$$arity=1,$$78)),$truthy($rb_lt(self.e["$[]"](i),0))?(z=w,s=r):(l=i,$truthy(self.e["$[]"](i)["$=="](0))?($writer=$truthy(w["$!="](0))?[k,$rb_divide(r["$-@"](),w)]:[k,$rb_divide(r["$-@"](),$rb_times(eps,norm))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer))):(x=self.h["$[]"](i)["$[]"]($rb_plus(i,1)),y=self.h["$[]"]($rb_plus(i,1))["$[]"](i),q=$rb_plus($rb_times($rb_minus(self.d["$[]"](i),p),$rb_minus(self.d["$[]"](i),p)),$rb_times(self.e["$[]"](i),self.e["$[]"](i))),t=$rb_divide($rb_minus($rb_times(x,s),$rb_times(z,r)),q),$writer=[k,t],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=$truthy($rb_gt(x.$abs(),z.$abs()))?[k,$rb_divide($rb_minus(r["$-@"](),$rb_times(w,t)),x)]:[k,$rb_divide($rb_minus(s["$-@"](),$rb_times(y,t)),z)],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer))),$writer[$rb_minus($writer.length,1)],t=self.h["$[]"](i)["$[]"](k).$abs(),$truthy($rb_gt($rb_times($rb_times(eps,t),t),1))?$send(i,"upto",[k],(($$79=function(j){var self=null==$$79.$$s?this:$$79.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),$writer=[k,$rb_divide(self.h["$[]"](j)["$[]"](k),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$79.$$arity=1,$$79)):nil)}).$$s=self,$$77.$$arity=1,$$77))):$truthy($rb_lt(q,0))?(l=$rb_minus(n,1),$writer=$truthy($rb_gt(self.h["$[]"](n)["$[]"]($rb_minus(n,1)).$abs(),self.h["$[]"]($rb_minus(n,1))["$[]"](n).$abs()))?($writer=[$rb_minus(n,1),$rb_divide(q,self.h["$[]"](n)["$[]"]($rb_minus(n,1)))],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,$rb_divide($rb_minus(self.h["$[]"](n)["$[]"](n),p)["$-@"](),self.h["$[]"](n)["$[]"]($rb_minus(n,1)))]):($c=self.$cdiv(0,self.h["$[]"]($rb_minus(n,1))["$[]"](n)["$-@"](),$rb_minus(self.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),p),q),$c=Opal.to_ary($c),cdivr=null==$c[0]?nil:$c[0],cdivi=null==$c[1]?nil:$c[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,cdivi]),$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),0],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,1],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_minus(n,2),"downto",[0],(($$80=function(i){var $$81,$e,$f,$$82,t,self=null==$$80.$$s?this:$$80.$$s,ra=nil,sa=nil,vr=nil,vi=nil,$ret_or_2=nil;return null==self.h&&(self.h=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),sa=ra=0,$send(l,"upto",[n],(($$81=function(j){var self=null==$$81.$$s?this:$$81.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),ra=$rb_plus(ra,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"]($rb_minus(n,1)))),sa=$rb_plus(sa,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"](n)))}).$$s=self,$$81.$$arity=1,$$81)),w=$rb_minus(self.h["$[]"](i)["$[]"](i),p),$truthy($rb_lt(self.e["$[]"](i),0))?(z=w,r=ra,s=sa):(l=i,$truthy(self.e["$[]"](i)["$=="](0))?($f=self.$cdiv(ra["$-@"](),sa["$-@"](),w,q),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,cdivi],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer))):(x=self.h["$[]"](i)["$[]"]($rb_plus(i,1)),y=self.h["$[]"]($rb_plus(i,1))["$[]"](i),vr=$rb_minus($rb_plus($rb_times($rb_minus(self.d["$[]"](i),p),$rb_minus(self.d["$[]"](i),p)),$rb_times(self.e["$[]"](i),self.e["$[]"](i))),$rb_times(q,q)),vi=$rb_times($rb_times($rb_minus(self.d["$[]"](i),p),2),q),$truthy($truthy($ret_or_2=vr["$=="](0))?vi["$=="](0):$ret_or_2)&&(vr=$rb_times($rb_times(eps,norm),$rb_plus($rb_plus($rb_plus($rb_plus(w.$abs(),q.$abs()),x.$abs()),y.$abs()),z.$abs()))),$f=self.$cdiv($rb_plus($rb_minus($rb_times(x,r),$rb_times(z,ra)),$rb_times(q,sa)),$rb_minus($rb_minus($rb_times(x,s),$rb_times(z,sa)),$rb_times(q,ra)),vr,vi),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,cdivi],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=$truthy($rb_gt(x.$abs(),$rb_plus(z.$abs(),q.$abs())))?($writer=[$rb_minus(n,1),$rb_divide($rb_plus($rb_minus(ra["$-@"](),$rb_times(w,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),$rb_times(q,self.h["$[]"](i)["$[]"](n))),x)],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,$rb_divide($rb_minus($rb_minus(sa["$-@"](),$rb_times(w,self.h["$[]"](i)["$[]"](n))),$rb_times(q,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),x)]):($f=self.$cdiv($rb_minus(r["$-@"](),$rb_times(y,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),$rb_minus(s["$-@"](),$rb_times(y,self.h["$[]"](i)["$[]"](n))),z,q),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,cdivi]),$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer))),$writer[$rb_minus($writer.length,1)],t=[self.h["$[]"](i)["$[]"]($rb_minus(n,1)).$abs(),self.h["$[]"](i)["$[]"](n).$abs()].$max(),$truthy($rb_gt($rb_times($rb_times(eps,t),t),1))?$send(i,"upto",[n],(($$82=function(j){var self=null==$$82.$$s?this:$$82.$$s;return null==self.h&&(self.h=nil),null==j&&(j=nil),$writer=[$rb_minus(n,1),$rb_divide(self.h["$[]"](j)["$[]"]($rb_minus(n,1)),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_divide(self.h["$[]"](j)["$[]"](n),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$82.$$arity=1,$$82)):nil)}).$$s=self,$$80.$$arity=1,$$80))):nil}).$$s=this,$$76.$$arity=1,$$76)),$send(nn,"times",[],(($$83=function(i){var $$84,self=null==$$83.$$s?this:$$83.$$s,$ret_or_3=nil;return null==i&&(i=nil),$truthy($truthy($ret_or_3=$rb_lt(i,0))?$ret_or_3:$rb_gt(i,high))?$send(i,"upto",[$rb_minus(nn,1)],(($$84=function(j){var self=null==$$84.$$s?this:$$84.$$s;return null==self.h&&(self.h=nil),null==self.v&&(self.v=nil),null==j&&(j=nil),$writer=[j,self.h["$[]"](i)["$[]"](j)],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$84.$$arity=1,$$84)):nil}).$$s=this,$$83.$$arity=1,$$83)),$send($rb_minus(nn,1),"downto",[0],(($$85=function(j){var $$86,self=null==$$85.$$s?this:$$85.$$s;return null==j&&(j=nil),$send(0,"upto",[high],(($$86=function(i){var $$87,self=null==$$86.$$s?this:$$86.$$s;return null==self.v&&(self.v=nil),null==i&&(i=nil),$send(z=0,"upto",[[j,high].$min()],(($$87=function(k){var self=null==$$87.$$s?this:$$87.$$s;return null==self.v&&(self.v=nil),null==self.h&&(self.h=nil),null==k&&(k=nil),z=$rb_plus(z,$rb_times(self.v["$[]"](i)["$[]"](k),self.h["$[]"](k)["$[]"](j)))}).$$s=self,$$87.$$arity=1,$$87)),$writer=[j,z],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$86.$$arity=1,$$86))}).$$s=this,$$85.$$arity=1,$$85)))},$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$arity=0),nil&&"hessenberg_to_real_schur"}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["matrix/lup_decomposition"]=function(Opal){function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy;return Opal.add_stubs(["$include","$build","$min","$>","$[]","$==","$<=","$new","$each_with_index","$[]=","$-","$send","$l","$u","$p","$alias_method","$attr_reader","$times","$!=","$Raise","$*","$singular?","$is_a?","$row_count","$column_count","$map","$to_a","$row","$upto","$+","$downto","$quo","$convert_to_array","$size","$values_at","$elements","$raise","$class","$abs","$-@","$<"]),function($base,$nesting){$nesting=[$klass($base,null,"Matrix")].concat($nesting);return function($LUPDecomposition_initialize$26,$LUPDecomposition_solve$13){var $LUPDecomposition_initialize$26=$klass($LUPDecomposition_initialize$26,null,"LUPDecomposition"),$nesting=[$LUPDecomposition_initialize$26].concat($LUPDecomposition_solve$13);return $LUPDecomposition_initialize$26.$$prototype.row_count=$LUPDecomposition_initialize$26.$$prototype.column_count=$LUPDecomposition_initialize$26.$$prototype.pivots=$LUPDecomposition_initialize$26.$$prototype.pivot_sign=nil,$LUPDecomposition_initialize$26.$include($$$($$($nesting,"Matrix"),"ConversionHelper")),Opal.def($LUPDecomposition_initialize$26,"$l",$LUPDecomposition_solve$13=function(){var $$2;return $send($$($nesting,"Matrix"),"build",[this.row_count,[this.column_count,this.row_count].$min()],(($$2=function(i,j){var self=null==$$2.$$s?this:$$2.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),null==j&&(j=nil),$truthy($rb_gt(i,j))?self.lu["$[]"](i)["$[]"](j):$truthy(i["$=="](j))?1:0}).$$s=this,$$2.$$arity=2,$$2))},$LUPDecomposition_solve$13.$$arity=0),Opal.def($LUPDecomposition_initialize$26,"$u",$LUPDecomposition_solve$13=function(){var $$4;return $send($$($nesting,"Matrix"),"build",[[this.column_count,this.row_count].$min(),this.column_count],(($$4=function(i,j){var lhs,rhs,self=null==$$4.$$s?this:$$4.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),null==j&&(j=nil),$truthy((rhs=j,"number"==typeof(lhs=i)&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)))?self.lu["$[]"](i)["$[]"](j):0}).$$s=this,$$4.$$arity=2,$$4))},$LUPDecomposition_solve$13.$$arity=0),Opal.def($LUPDecomposition_initialize$26,"$p",$LUPDecomposition_solve$13=function(){var $$6,$$7,rows=nil,rows=$send($$($nesting,"Array"),"new",[this.row_count],(($$6=function(){var self=null==$$6.$$s?this:$$6.$$s;return null==self.row_count&&(self.row_count=nil),$$($nesting,"Array").$new(self.row_count,0)}).$$s=this,$$6.$$arity=0,$$6));return $send(this.pivots,"each_with_index",[],(($$7=function(p,i){var $writer;null==$$7.$$s||$$7.$$s;return null==p&&(p=nil),null==i&&(i=nil),$writer=[p,1],$send(rows["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$7.$$arity=2,$$7)),$$($nesting,"Matrix").$send("new",rows,this.row_count)},$LUPDecomposition_solve$13.$$arity=0),Opal.def($LUPDecomposition_initialize$26,"$to_ary",$LUPDecomposition_solve$13=function(){return[this.$l(),this.$u(),this.$p()]},$LUPDecomposition_solve$13.$$arity=0),$LUPDecomposition_initialize$26.$alias_method("to_a","to_ary"),$LUPDecomposition_initialize$26.$attr_reader("pivots"),Opal.def($LUPDecomposition_initialize$26,"$singular?",$LUPDecomposition_solve$13=function(){try{var $$10;return $send(this.column_count,"times",[],(($$10=function(j){var self=null==$$10.$$s?this:$$10.$$s;if(null==self.lu&&(self.lu=nil),null==j&&(j=nil),!$truthy(self.lu["$[]"](j)["$[]"](j)["$=="](0)))return nil;Opal.ret(!0)}).$$s=this,$$10.$$arity=1,$$10)),!1}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$LUPDecomposition_solve$13.$$arity=0),Opal.def($LUPDecomposition_initialize$26,"$det",$LUPDecomposition_solve$13=function(){var $$12,d=nil;return $truthy(this.row_count["$!="](this.column_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),d=this.pivot_sign,$send(this.column_count,"times",[],(($$12=function(j){var self=null==$$12.$$s?this:$$12.$$s;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),d=$rb_times(d,self.lu["$[]"](j)["$[]"](j))}).$$s=this,$$12.$$arity=1,$$12)),d},$LUPDecomposition_solve$13.$$arity=0),$LUPDecomposition_initialize$26.$alias_method("determinant","det"),Opal.def($LUPDecomposition_initialize$26,"$solve",$LUPDecomposition_solve$13=function(b){var $$14,$$15,$$18,$$22,$$24,nx,m=nil;return $truthy(this["$singular?"]())&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrNotRegular"),"Matrix is singular."),$truthy(b["$is_a?"]($$($nesting,"Matrix")))?($truthy(b.$row_count()["$!="](this.row_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),nx=b.$column_count(),m=$send(this.pivots,"map",[],(($$14=function(row){null==$$14.$$s||$$14.$$s;return null==row&&(row=nil),b.$row(row).$to_a()}).$$s=this,$$14.$$arity=1,$$14)),$send(this.column_count,"times",[],(($$15=function(k){var $$16,self=null==$$15.$$s?this:$$15.$$s;return null==self.column_count&&(self.column_count=nil),null==k&&(k=nil),$send($rb_plus(k,1),"upto",[$rb_minus(self.column_count,1)],(($$16=function(i){var $$17,self=null==$$16.$$s?this:$$16.$$s;return null==i&&(i=nil),$send(nx,"times",[],(($$17=function(j){var $writer,self=null==$$17.$$s?this:$$17.$$s,$binary_op_recvr_tmp_10=nil;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,$rb_minus(($binary_op_recvr_tmp_10=m["$[]"](i))["$[]"](j),$rb_times(m["$[]"](k)["$[]"](j),self.lu["$[]"](i)["$[]"](k)))],$send($binary_op_recvr_tmp_10,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$17.$$arity=1,$$17))}).$$s=self,$$16.$$arity=1,$$16))}).$$s=this,$$15.$$arity=1,$$15)),$send($rb_minus(this.column_count,1),"downto",[0],(($$18=function(k){var $$19,$$20,self=null==$$18.$$s?this:$$18.$$s;return null==k&&(k=nil),$send(nx,"times",[],(($$19=function(j){var $writer,self=null==$$19.$$s?this:$$19.$$s;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,m["$[]"](k)["$[]"](j).$quo(self.lu["$[]"](k)["$[]"](k))],$send(m["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$19.$$arity=1,$$19)),$send(k,"times",[],(($$20=function(i){var $$21,self=null==$$20.$$s?this:$$20.$$s;return null==i&&(i=nil),$send(nx,"times",[],(($$21=function(j){var $writer,self=null==$$21.$$s?this:$$21.$$s,$binary_op_recvr_tmp_11=nil;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,$rb_minus(($binary_op_recvr_tmp_11=m["$[]"](i))["$[]"](j),$rb_times(m["$[]"](k)["$[]"](j),self.lu["$[]"](i)["$[]"](k)))],$send($binary_op_recvr_tmp_11,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$21.$$arity=1,$$21))}).$$s=self,$$20.$$arity=1,$$20))}).$$s=this,$$18.$$arity=1,$$18)),$$($nesting,"Matrix").$send("new",m,nx)):(b=this.$convert_to_array(b),$truthy(b.$size()["$!="](this.row_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),m=$send(b,"values_at",Opal.to_a(this.pivots)),$send(this.column_count,"times",[],(($$22=function(k){var $$23,self=null==$$22.$$s?this:$$22.$$s;return null==self.column_count&&(self.column_count=nil),null==k&&(k=nil),$send($rb_plus(k,1),"upto",[$rb_minus(self.column_count,1)],(($$23=function(i){var $writer,self=null==$$23.$$s?this:$$23.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,$rb_minus(m["$[]"](i),$rb_times(m["$[]"](k),self.lu["$[]"](i)["$[]"](k)))],$send(m,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$23.$$arity=1,$$23))}).$$s=this,$$22.$$arity=1,$$22)),$send($rb_minus(this.column_count,1),"downto",[0],(($$24=function(k){var $$25,$writer,self=null==$$24.$$s?this:$$24.$$s;return null==self.lu&&(self.lu=nil),null==k&&(k=nil),$writer=[k,m["$[]"](k).$quo(self.lu["$[]"](k)["$[]"](k))],$send(m,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),$send(k,"times",[],(($$25=function(i){var self=null==$$25.$$s?this:$$25.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,$rb_minus(m["$[]"](i),$rb_times(m["$[]"](k),self.lu["$[]"](i)["$[]"](k)))],$send(m,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$25.$$arity=1,$$25))}).$$s=this,$$24.$$arity=1,$$24)),$$($nesting,"Vector").$elements(m,!1))},$LUPDecomposition_solve$13.$$arity=1),Opal.def($LUPDecomposition_initialize$26,"$initialize",$LUPDecomposition_initialize$26=function(a){var $$27,$$28,lu_col_j=nil;return $truthy(a["$is_a?"]($$($nesting,"Matrix")))||this.$raise($$($nesting,"TypeError"),"Expected Matrix but got "+a.$class()),this.lu=a.$to_a(),this.row_count=a.$row_count(),this.column_count=a.$column_count(),this.pivots=$$($nesting,"Array").$new(this.row_count),$send(this.row_count,"times",[],(($$27=function(i){var $writer,self=null==$$27.$$s?this:$$27.$$s;return null==self.pivots&&(self.pivots=nil),null==i&&(i=nil),$writer=[i,i],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$27.$$arity=1,$$27)),this.pivot_sign=1,lu_col_j=$$($nesting,"Array").$new(this.row_count),$send(this.column_count,"times",[],(($$28=function(j){var $$29,$$30,$$32,$$33,$$34,lhs,self=null==$$28.$$s?this:$$28.$$s,p=nil,rhs=nil,$writer=nil,$ret_or_1=nil;return null==self.row_count&&(self.row_count=nil),null==self.column_count&&(self.column_count=nil),null==self.pivots&&(self.pivots=nil),null==self.pivot_sign&&(self.pivot_sign=nil),null==self.lu&&(self.lu=nil),null==j&&(j=nil),$send(self.row_count,"times",[],(($$29=function(i){var $writer,self=null==$$29.$$s?this:$$29.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,self.lu["$[]"](i)["$[]"](j)],$send(lu_col_j,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$29.$$arity=1,$$29)),$send(self.row_count,"times",[],(($$30=function(i){var $$31,kmax,$writer,self=null==$$30.$$s?this:$$30.$$s,lu_row_i=nil,s=nil;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),lu_row_i=self.lu["$[]"](i),kmax=[i,j].$min(),s=0,$send(kmax,"times",[],(($$31=function(k){null==$$31.$$s||$$31.$$s;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(lu_row_i["$[]"](k),lu_col_j["$[]"](k)))}).$$s=self,$$31.$$arity=1,$$31)),$writer=[j,($writer=[i,$rb_minus(lu_col_j["$[]"](i),s)],$send(lu_col_j,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)])],$send(lu_row_i,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$30.$$arity=1,$$30)),$send($rb_plus(p=j,1),"upto",[$rb_minus(self.row_count,1)],(($$32=function(i){null==$$32.$$s||$$32.$$s;return null==i&&(i=nil),$truthy($rb_gt(lu_col_j["$[]"](i).$abs(),lu_col_j["$[]"](p).$abs()))?p=i:nil}).$$s=self,$$32.$$arity=1,$$32)),$truthy(p["$!="](j))&&($send(self.column_count,"times",[],(($$33=function(k){var t,$writer,self=null==$$33.$$s?this:$$33.$$s;return null==self.lu&&(self.lu=nil),null==k&&(k=nil),t=self.lu["$[]"](p)["$[]"](k),$writer=[k,self.lu["$[]"](j)["$[]"](k)],$send(self.lu["$[]"](p),"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),$writer=[k,t],$send(self.lu["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$33.$$arity=1,$$33)),rhs=self.pivots["$[]"](p),$writer=[p,self.pivots["$[]"](j)],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,rhs],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],self.pivot_sign=self.pivot_sign["$-@"]()),$truthy($truthy((lhs=j,rhs=self.row_count,$ret_or_1="number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)))?self.lu["$[]"](j)["$[]"](j)["$!="](0):$ret_or_1)?$send($rb_plus(j,1),"upto",[$rb_minus(self.row_count,1)],(($$34=function(i){var self=null==$$34.$$s?this:$$34.$$s;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[j,self.lu["$[]"](i)["$[]"](j).$quo(self.lu["$[]"](j)["$[]"](j))],$send(self.lu["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$34.$$arity=1,$$34)):nil}).$$s=this,$$28.$$arity=1,$$28))},$LUPDecomposition_initialize$26.$$arity=1),nil&&"initialize"}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules.matrix=function(Opal){function $rb_lt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_ge(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<=lhs:lhs["$>="](rhs)}function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_le(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)}function $rb_divide(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs/rhs:lhs["$/"](rhs)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$alias=Opal.alias,$hash2=Opal.hash2;return Opal.add_stubs(["$require","$extend","$def_e2message","$def_exception","$include","$autoload","$private_class_method","$attr_reader","$protected","$rows","$convert_to_array","$map!","$size","$[]","$each","$==","$raise","$new","$transpose","$coerce_to_int","$<","$to_enum","$empty","$[]=","$-","$diagonal","$scalar","$!=","$*","$coerce_to_matrix","$map","$send","$to_proc","$column_count","$concat","$row_count","$each_with_index","$+","$empty?","$method","$first","$Raise","$combine","$class","$private","$fetch","$alias_method","$elements","$>=","$-@","$times","$collect","$new_matrix","$===","$upto","$min","$inspect","$freeze","$>","$include?","$last","$pop","$end","$exclude_end?","$<=","$to_a","$delete_at","$square?","$determinant","$first_minor","$**","$build","$cofactor","$!","$inject","$with_index","$all?","$conj","$singular?","$eql?","$hash","$column_vector","$column","$apply_through_coercion","$/","$inverse","$I","$abs","$quo","$identity","$loop","$zero?","$>>","$eigensystem","$+@","$determinant_bareiss","$find","$warn","$hstack","$rank","$round","$vstack","$real","$imag","$row","$join","$to_s","$dup","$to_ary","$message","$is_a?","$coerce","$length","$public_send","$kind_of?","$respond_to?","$__send__","$coerce_to","$count","$independent?","$collect2","$each2","$basis","$laplace_expansion","$sqrt","$abs2","$magnitude","$acos","$inner_product","$row_vector"]),self.$require("e2mmap.rb"),function(self,$nesting){self=$module(self,"ExceptionForMatrix"),$nesting=[self].concat($nesting),self.$extend($$($nesting,"Exception2MessageMapper")),self.$def_e2message($$($nesting,"TypeError"),"wrong argument type %s (expected %s)"),self.$def_e2message($$($nesting,"ArgumentError"),"Wrong # of arguments(%d for %d)"),self.$def_exception("ErrDimensionMismatch","#{self.name} dimension mismatch"),self.$def_exception("ErrNotRegular","Not Regular Matrix"),self.$def_exception("ErrOperationNotDefined","Operation(%s) can\\'t be defined: %s op %s"),self.$def_exception("ErrOperationNotImplemented","Sorry, Operation(%s) not implemented: %s op %s")}($nesting[0],$nesting),function(self,$Matrix_inspect$190){var $Matrix_build$6,$Matrix_combine$23,$Matrix_combine$28,$Matrix_row$35,$Matrix_column$38,$Matrix_collect$41,$Matrix_each$43,$Matrix_each_with_index$57,$Matrix_index$72,$nesting=[self=$klass(self,null,"Matrix")].concat($Matrix_inspect$190);self.$$prototype.rows=nil,self.$include($$($nesting,"Enumerable")),self.$include($$($nesting,"ExceptionForMatrix")),self.$autoload("EigenvalueDecomposition","matrix/eigenvalue_decomposition"),self.$autoload("LUPDecomposition","matrix/lup_decomposition"),self.$private_class_method("new"),self.$attr_reader("rows"),self.$protected("rows"),Opal.defs($$($nesting,"Matrix"),"$[]",$Matrix_inspect$190=function($a){var $post_args=Opal.slice.call(arguments,0,arguments.length);return this.$rows($post_args,!1)},$Matrix_inspect$190.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$rows",$Matrix_inspect$190=function(rows,copy){var $$3,$$4,size,$ret_or_1=nil;return null==copy&&(copy=!0),rows=this.$convert_to_array(rows,copy),$send(rows,"map!",[],(($$3=function(row){var self=null==$$3.$$s?this:$$3.$$s;return null==row&&(row=nil),self.$convert_to_array(row,copy)}).$$s=this,$$3.$$arity=1,$$3)),size=($truthy($ret_or_1=rows["$[]"](0))?$ret_or_1:[]).$size(),$send(rows,"each",[],(($$4=function(row){var self=null==$$4.$$s?this:$$4.$$s;return null==row&&(row=nil),row.$size()["$=="](size)?nil:self.$raise($$($nesting,"ErrDimensionMismatch"),"row size differs ("+row.$size()+" should be "+size+")")}).$$s=this,$$4.$$arity=1,$$4)),this.$new(rows,size)},$Matrix_inspect$190.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$columns",$Matrix_inspect$190=function(columns){return this.$rows(columns,!1).$transpose()},$Matrix_inspect$190.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$build",$Matrix_build$6=function(row_count,column_count){var $$7,rows,$iter=$Matrix_build$6.$$p,$yield=$iter||nil,$ret_or_2=nil;return $iter&&($Matrix_build$6.$$p=null),null==column_count&&(column_count=row_count),row_count=$$($nesting,"CoercionHelper").$coerce_to_int(row_count),column_count=$$($nesting,"CoercionHelper").$coerce_to_int(column_count),$truthy($truthy($ret_or_2=$rb_lt(row_count,0))?$ret_or_2:$rb_lt(column_count,0))&&this.$raise($$($nesting,"ArgumentError")),$yield===nil?this.$to_enum("build",row_count,column_count):(rows=$send($$($nesting,"Array"),"new",[row_count],(($$7=function(i){var $$8,self=null==$$7.$$s?this:$$7.$$s;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[column_count],(($$8=function(j){null==$$8.$$s||$$8.$$s;return null==j&&(j=nil),Opal.yieldX($yield,[i,j])}).$$s=self,$$8.$$arity=1,$$8))}).$$s=this,$$7.$$arity=1,$$7)),this.$new(rows,column_count))},$Matrix_build$6.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$diagonal",$Matrix_inspect$190=function($a){var $$10,rows,size=nil,values=Opal.slice.call(arguments,0,arguments.length);return(size=values.$size())["$=="](0)?$$($nesting,"Matrix").$empty():(rows=$send($$($nesting,"Array"),"new",[size],(($$10=function(j){var row,$writer;null==$$10.$$s||$$10.$$s;return null==j&&(j=nil),row=$$($nesting,"Array").$new(size,0),$writer=[j,values["$[]"](j)],$send(row,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),row}).$$s=this,$$10.$$arity=1,$$10)),this.$new(rows))},$Matrix_inspect$190.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$scalar",$Matrix_inspect$190=function(n,value){return $send(this,"diagonal",Opal.to_a($$($nesting,"Array").$new(n,value)))},$Matrix_inspect$190.$$arity=2),Opal.defs($$($nesting,"Matrix"),"$identity",$Matrix_inspect$190=function(n){return this.$scalar(n,1)},$Matrix_inspect$190.$$arity=1),function(self,$parent_nesting){[self].concat($parent_nesting),$alias(self,"unit","identity"),$alias(self,"I","identity")}(Opal.get_singleton_class($$($nesting,"Matrix")),$nesting),Opal.defs($$($nesting,"Matrix"),"$zero",$Matrix_inspect$190=function(row_count,column_count){var $$14,rows;return null==column_count&&(column_count=row_count),rows=$send($$($nesting,"Array"),"new",[row_count],(($$14=function(){null==$$14.$$s||$$14.$$s;return $$($nesting,"Array").$new(column_count,0)}).$$s=this,$$14.$$arity=0,$$14)),this.$new(rows,column_count)},$Matrix_inspect$190.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$row_vector",$Matrix_inspect$190=function(row){return row=this.$convert_to_array(row),this.$new([row])},$Matrix_inspect$190.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$column_vector",$Matrix_inspect$190=function(column){return column=this.$convert_to_array(column),this.$new([column].$transpose(),1)},$Matrix_inspect$190.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$empty",$Matrix_inspect$190=function(row_count,column_count){var $ret_or_3=nil,$ret_or_4=nil;return null==row_count&&(row_count=0),null==column_count&&(column_count=0),$truthy($truthy($ret_or_3=column_count["$!="](0))?row_count["$!="](0):$ret_or_3)&&this.$raise($$($nesting,"ArgumentError"),"One size must be 0"),$truthy($truthy($ret_or_4=$rb_lt(column_count,0))?$ret_or_4:$rb_lt(row_count,0))&&this.$raise($$($nesting,"ArgumentError"),"Negative size"),this.$new($rb_times([[]],row_count),column_count)},$Matrix_inspect$190.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$vstack",$Matrix_inspect$190=function(x,$a){var $$19,result=nil,matrices=Opal.slice.call(arguments,1,arguments.length);return x=$$($nesting,"CoercionHelper").$coerce_to_matrix(x),result=$send(x.$send("rows"),"map",[],"dup".$to_proc()),$send(matrices,"each",[],(($$19=function(m){var self=null==$$19.$$s?this:$$19.$$s;return null==m&&(m=nil),m=$$($nesting,"CoercionHelper").$coerce_to_matrix(m),$truthy(m.$column_count()["$!="](x.$column_count()))&&self.$raise($$($nesting,"ErrDimensionMismatch"),"The given matrices must have "+x.$column_count()+" columns, but one has "+m.$column_count()),result.$concat(m.$send("rows"))}).$$s=this,$$19.$$arity=1,$$19)),this.$new(result,x.$column_count())},$Matrix_inspect$190.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$hstack",$Matrix_inspect$190=function(x,$a){var $$21,result,total_column_count=nil,matrices=Opal.slice.call(arguments,1,arguments.length);return x=$$($nesting,"CoercionHelper").$coerce_to_matrix(x),result=$send(x.$send("rows"),"map",[],"dup".$to_proc()),total_column_count=x.$column_count(),$send(matrices,"each",[],(($$21=function(m){var $$22,self=null==$$21.$$s?this:$$21.$$s;return null==m&&(m=nil),m=$$($nesting,"CoercionHelper").$coerce_to_matrix(m),$truthy(m.$row_count()["$!="](x.$row_count()))&&self.$raise($$($nesting,"ErrDimensionMismatch"),"The given matrices must have "+x.$row_count()+" rows, but one has "+m.$row_count()),$send(result,"each_with_index",[],(($$22=function(row,i){null==$$22.$$s||$$22.$$s;return null==row&&(row=nil),null==i&&(i=nil),row.$concat(m.$send("rows")["$[]"](i))}).$$s=self,$$22.$$arity=2,$$22)),total_column_count=$rb_plus(total_column_count,m.$column_count())}).$$s=this,$$21.$$arity=1,$$21)),this.$new(result,total_column_count)},$Matrix_inspect$190.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$combine",$Matrix_combine$23=function($a){var matrices,$$24,$$25,rows,$post_args=$Matrix_combine$23.$$p,$yield=$post_args||nil,x=nil;return $post_args&&($Matrix_combine$23.$$p=null),$post_args=Opal.slice.call(arguments,0,arguments.length),matrices=$post_args,$yield===nil?$send(this,"to_enum",["combine"].concat(Opal.to_a(matrices))):$truthy(matrices["$empty?"]())?$$($nesting,"Matrix").$empty():($send(matrices,"map!",[],$$($nesting,"CoercionHelper").$method("coerce_to_matrix").$to_proc()),x=matrices.$first(),$send(matrices,"each",[],(($$24=function(m){null==$$24.$$s||$$24.$$s;var $ret_or_5=nil;return null==m&&(m=nil),$truthy($truthy($ret_or_5=x.$row_count()["$=="](m.$row_count()))?x.$column_count()["$=="](m.$column_count()):$ret_or_5)?nil:$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=this,$$24.$$arity=1,$$24)),rows=$send($$($nesting,"Array"),"new",[x.$row_count()],(($$25=function(i){var $$26,self=null==$$25.$$s?this:$$25.$$s;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[x.$column_count()],(($$26=function(j){var $$27,self=null==$$26.$$s?this:$$26.$$s;return null==j&&(j=nil),Opal.yield1($yield,$send(matrices,"map",[],(($$27=function(m){null==$$27.$$s||$$27.$$s;return null==m&&(m=nil),m["$[]"](i,j)}).$$s=self,$$27.$$arity=1,$$27)))}).$$s=self,$$26.$$arity=1,$$26))}).$$s=this,$$25.$$arity=1,$$25)),this.$new(rows,x.$column_count()))},$Matrix_combine$23.$$arity=-1),Opal.def(self,"$combine",$Matrix_combine$28=function($a){var matrices=$Matrix_combine$28.$$p,block=matrices||nil,self=this;return matrices&&($Matrix_combine$28.$$p=null),matrices&&($Matrix_combine$28.$$p=null),matrices=Opal.slice.call(arguments,0,arguments.length),$send($$($nesting,"Matrix"),"combine",[self].concat(Opal.to_a(matrices)),block.$to_proc())},$Matrix_combine$28.$$arity=-1),Opal.def(self,"$initialize",$Matrix_inspect$190=function(rows,column_count){return null==column_count&&(column_count=rows["$[]"](0).$size()),this.rows=rows,this.column_count=column_count},$Matrix_inspect$190.$$arity=-2),Opal.def(self,"$new_matrix",$Matrix_inspect$190=function(rows,column_count){return null==column_count&&(column_count=rows["$[]"](0).$size()),this.$class().$send("new",rows,column_count)},$Matrix_inspect$190.$$arity=-2),self.$private("new_matrix"),Opal.def(self,"$[]",$Matrix_inspect$190=function(i,j){try{var $$32;return $send(this.rows,"fetch",[i],(($$32=function(){null==$$32.$$s||$$32.$$s;Opal.ret(nil)}).$$s=this,$$32.$$arity=0,$$32))["$[]"](j)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=2),$alias(self,"element","[]"),$alias(self,"component","[]"),Opal.def(self,"$[]=",$Matrix_inspect$190=function(i,j,v){var $writer=[j,v];return $send(this.rows["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Matrix_inspect$190.$$arity=3),$alias(self,"set_element","[]="),$alias(self,"set_component","[]="),self.$private("[]=","set_element","set_component"),Opal.def(self,"$row_count",$Matrix_inspect$190=function(){return this.rows.$size()},$Matrix_inspect$190.$$arity=0),self.$alias_method("row_size","row_count"),self.$attr_reader("column_count"),self.$alias_method("column_size","column_count"),Opal.def(self,"$row",$Matrix_row$35=function(i){try{var $$36,$$37,$iter=$Matrix_row$35.$$p,block=$iter||nil;return $iter&&($Matrix_row$35.$$p=null),$iter&&($Matrix_row$35.$$p=null),block!==nil?($send($send(this.rows,"fetch",[i],(($$36=function(){var self=null==$$36.$$s?this:$$36.$$s;Opal.ret(self)}).$$s=this,$$36.$$arity=0,$$36)),"each",[],block.$to_proc()),this):$$($nesting,"Vector").$elements($send(this.rows,"fetch",[i],(($$37=function(){null==$$37.$$s||$$37.$$s;Opal.ret(nil)}).$$s=this,$$37.$$arity=0,$$37)))}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_row$35.$$arity=1),Opal.def(self,"$column",$Matrix_column$38=function(j){var $$39,$$40,col,$iter=$Matrix_column$38.$$p,$yield=$iter||nil,self=this,$ret_or_6=nil,$ret_or_7=nil;return $iter&&($Matrix_column$38.$$p=null),$yield!==nil?($truthy($truthy($ret_or_6=$rb_ge(j,self.$column_count()))?$ret_or_6:$rb_lt(j,self.$column_count()["$-@"]()))||$send(self.$row_count(),"times",[],(($$39=function(i){var self=null==$$39.$$s?this:$$39.$$s;return null==self.rows&&(self.rows=nil),null==i&&(i=nil),Opal.yield1($yield,self.rows["$[]"](i)["$[]"](j))}).$$s=self,$$39.$$arity=1,$$39)),self):$truthy($truthy($ret_or_7=$rb_ge(j,self.$column_count()))?$ret_or_7:$rb_lt(j,self.$column_count()["$-@"]()))?nil:(col=$send($$($nesting,"Array"),"new",[self.$row_count()],(($$40=function(i){var self=null==$$40.$$s?this:$$40.$$s;return null==self.rows&&(self.rows=nil),null==i&&(i=nil),self.rows["$[]"](i)["$[]"](j)}).$$s=self,$$40.$$arity=1,$$40)),$$($nesting,"Vector").$elements(col,!1))},$Matrix_column$38.$$arity=1),Opal.def(self,"$collect",$Matrix_collect$41=function(){var $$42,rows,$iter=$Matrix_collect$41.$$p,block=$iter||nil;return $iter&&($Matrix_collect$41.$$p=null),$iter&&($Matrix_collect$41.$$p=null),block===nil?this.$to_enum("collect"):(rows=$send(this.rows,"collect",[],(($$42=function(row){null==$$42.$$s||$$42.$$s;return null==row&&(row=nil),$send(row,"collect",[],block.$to_proc())}).$$s=this,$$42.$$arity=1,$$42)),this.$new_matrix(rows,this.$column_count()))},$Matrix_collect$41.$$arity=0),$alias(self,"map","collect"),Opal.def(self,"$each",$Matrix_each$43=function(which){try{var $$44,$$45,$$47,$$49,$$51,$$53,$$55,$case,$iter=$Matrix_each$43.$$p,$yield=$iter||nil,last=nil,block=nil;return($iter&&($Matrix_each$43.$$p=null),null==which&&(which="all"),$yield===nil)?this.$to_enum("each",which):(last=$rb_minus(this.$column_count(),1),"all"["$==="]($case=which)?(block=$$($nesting,"Proc").$new(),$send(this.rows,"each",[],(($$44=function(row){null==$$44.$$s||$$44.$$s;return null==row&&(row=nil),$send(row,"each",[],block.$to_proc())}).$$s=this,$$44.$$arity=1,$$44))):"diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$45=function(row,row_index){var $$46,self=null==$$45.$$s?this:$$45.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),Opal.yield1($yield,$send(row,"fetch",[row_index],(($$46=function(){var self=null==$$46.$$s?this:$$46.$$s;Opal.ret(self)}).$$s=self,$$46.$$arity=0,$$46)))}).$$s=this,$$45.$$arity=2,$$45)):"off_diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$47=function(row,row_index){var $$48,self=null==$$47.$$s?this:$$47.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(self.$column_count(),"times",[],(($$48=function(col_index){null==$$48.$$s||$$48.$$s;return null==col_index&&(col_index=nil),row_index["$=="](col_index)?nil:Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$48.$$arity=1,$$48))}).$$s=this,$$47.$$arity=2,$$47)):"lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$49=function(row,row_index){var $$50,self=null==$$49.$$s?this:$$49.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(0,"upto",[[row_index,last].$min()],(($$50=function(col_index){null==$$50.$$s||$$50.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$50.$$arity=1,$$50))}).$$s=this,$$49.$$arity=2,$$49)):"strict_lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$51=function(row,row_index){var $$52,self=null==$$51.$$s?this:$$51.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send([row_index,self.$column_count()].$min(),"times",[],(($$52=function(col_index){null==$$52.$$s||$$52.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$52.$$arity=1,$$52))}).$$s=this,$$51.$$arity=2,$$51)):"strict_upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$53=function(row,row_index){var $$54,self=null==$$53.$$s?this:$$53.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send($rb_plus(row_index,1),"upto",[last],(($$54=function(col_index){null==$$54.$$s||$$54.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$54.$$arity=1,$$54))}).$$s=this,$$53.$$arity=2,$$53)):"upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$55=function(row,row_index){var $$56,self=null==$$55.$$s?this:$$55.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row_index,"upto",[last],(($$56=function(col_index){null==$$56.$$s||$$56.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$56.$$arity=1,$$56))}).$$s=this,$$55.$$arity=2,$$55)):this.$raise($$($nesting,"ArgumentError"),"expected "+which.$inspect()+" to be one of :all, :diagonal, :off_diagonal, :lower, :strict_lower, :strict_upper or :upper"),this)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_each$43.$$arity=-1),Opal.def(self,"$each_with_index",$Matrix_each_with_index$57=function(which){try{var $$58,$$60,$$62,$$64,$$66,$$68,$$70,$case,$iter=$Matrix_each_with_index$57.$$p,$yield=$iter||nil,last=nil;return($iter&&($Matrix_each_with_index$57.$$p=null),null==which&&(which="all"),$yield===nil)?this.$to_enum("each_with_index",which):(last=$rb_minus(this.$column_count(),1),"all"["$==="]($case=which)?$send(this.rows,"each_with_index",[],(($$58=function(row,row_index){var $$59,self=null==$$58.$$s?this:$$58.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row,"each_with_index",[],(($$59=function(e,col_index){null==$$59.$$s||$$59.$$s;return null==e&&(e=nil),null==col_index&&(col_index=nil),Opal.yieldX($yield,[e,row_index,col_index])}).$$s=self,$$59.$$arity=2,$$59))}).$$s=this,$$58.$$arity=2,$$58)):"diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$60=function(row,row_index){var $$61,self=null==$$60.$$s?this:$$60.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),Opal.yieldX($yield,[$send(row,"fetch",[row_index],(($$61=function(){var self=null==$$61.$$s?this:$$61.$$s;Opal.ret(self)}).$$s=self,$$61.$$arity=0,$$61)),row_index,row_index])}).$$s=this,$$60.$$arity=2,$$60)):"off_diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$62=function(row,row_index){var $$63,self=null==$$62.$$s?this:$$62.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(self.$column_count(),"times",[],(($$63=function(col_index){null==$$63.$$s||$$63.$$s;return null==col_index&&(col_index=nil),row_index["$=="](col_index)?nil:Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$63.$$arity=1,$$63))}).$$s=this,$$62.$$arity=2,$$62)):"lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$64=function(row,row_index){var $$65,self=null==$$64.$$s?this:$$64.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(0,"upto",[[row_index,last].$min()],(($$65=function(col_index){null==$$65.$$s||$$65.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$65.$$arity=1,$$65))}).$$s=this,$$64.$$arity=2,$$64)):"strict_lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$66=function(row,row_index){var $$67,self=null==$$66.$$s?this:$$66.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send([row_index,self.$column_count()].$min(),"times",[],(($$67=function(col_index){null==$$67.$$s||$$67.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$67.$$arity=1,$$67))}).$$s=this,$$66.$$arity=2,$$66)):"strict_upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$68=function(row,row_index){var $$69,self=null==$$68.$$s?this:$$68.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send($rb_plus(row_index,1),"upto",[last],(($$69=function(col_index){null==$$69.$$s||$$69.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$69.$$arity=1,$$69))}).$$s=this,$$68.$$arity=2,$$68)):"upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$70=function(row,row_index){var $$71,self=null==$$70.$$s?this:$$70.$$s;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row_index,"upto",[last],(($$71=function(col_index){null==$$71.$$s||$$71.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$71.$$arity=1,$$71))}).$$s=this,$$70.$$arity=2,$$70)):this.$raise($$($nesting,"ArgumentError"),"expected "+which.$inspect()+" to be one of :all, :diagonal, :off_diagonal, :lower, :strict_lower, :strict_upper or :upper"),this)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_each_with_index$57.$$arity=-1),Opal.const_set($nesting[0],"SELECTORS",$hash2(["all","diagonal","off_diagonal","lower","strict_lower","strict_upper","upper"],{all:!0,diagonal:!0,off_diagonal:!0,lower:!0,strict_lower:!0,strict_upper:!0,upper:!0}).$freeze()),Opal.def(self,"$index",$Matrix_index$72=function($a){try{var $$73,$$74,value,args=$Matrix_index$72.$$p,$yield=args||nil,which=nil,$ret_or_8=nil,$ret_or_9=nil;return(args&&($Matrix_index$72.$$p=null),args=Opal.slice.call(arguments,0,arguments.length),$truthy($rb_gt((args=args).$size(),2))&&this.$raise($$($nesting,"ArgumentError"),"wrong number of arguments("+args.$size()+" for 0-2)"),which=$truthy($truthy($ret_or_8=args.$size()["$=="](2))?$ret_or_8:$$($nesting,"SELECTORS")["$include?"](args.$last()))?args.$pop():"all",$truthy($truthy($ret_or_9=$yield!==nil)?$ret_or_9:args.$size()["$=="](1)))?(args.$size()["$=="](1)?(value=args.$first(),$send(this,"each_with_index",[which],(($$73=function(e,row_index,col_index){null==$$73.$$s||$$73.$$s;if(null==e&&(e=nil),null==row_index&&(row_index=nil),null==col_index&&(col_index=nil),!e["$=="](value))return nil;Opal.ret([row_index,col_index])}).$$s=this,$$73.$$arity=3,$$73))):$send(this,"each_with_index",[which],(($$74=function(e,row_index,col_index){null==$$74.$$s||$$74.$$s;if(null==e&&(e=nil),null==row_index&&(row_index=nil),null==col_index&&(col_index=nil),!$truthy(Opal.yield1($yield,e)))return nil;Opal.ret([row_index,col_index])}).$$s=this,$$74.$$arity=3,$$74)),nil):$send(this,"to_enum",["find_index",which].concat(Opal.to_a(args)))}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_index$72.$$arity=-1),self.$alias_method("find_index","index"),Opal.def(self,"$minor",$Matrix_inspect$190=function($a){var $b,$c,$$76,rows,self=this,row_range=nil,col_range=nil,from_row=nil,to_row=nil,size_row=nil,from_col=nil,to_col=nil,size_col=nil,$ret_or_10=nil,$ret_or_11=nil,$ret_or_12=nil,$ret_or_13=nil,param=Opal.slice.call(arguments,0,arguments.length),$case=param.$size();if(2["$==="]($case))$c=param,row_range=null==($b=Opal.to_ary($c))[0]?nil:$b[0],col_range=null==$b[1]?nil:$b[1],from_row=row_range.$first(),$truthy($rb_lt(from_row,0))&&(from_row=$rb_plus(from_row,self.$row_count())),to_row=row_range.$end(),$truthy($rb_lt(to_row,0))&&(to_row=$rb_plus(to_row,self.$row_count())),$truthy(row_range["$exclude_end?"]())||(to_row=$rb_plus(to_row,1)),size_row=$rb_minus(to_row,from_row),from_col=col_range.$first(),$truthy($rb_lt(from_col,0))&&(from_col=$rb_plus(from_col,self.$column_count())),to_col=col_range.$end(),$truthy($rb_lt(to_col,0))&&(to_col=$rb_plus(to_col,self.$column_count())),$truthy(col_range["$exclude_end?"]())||(to_col=$rb_plus(to_col,1)),size_col=$rb_minus(to_col,from_col);else if(4["$==="]($case)){if($c=param,$b=Opal.to_ary($c),from_row=null==$b[0]?nil:$b[0],size_row=null==$b[1]?nil:$b[1],from_col=null==$b[2]?nil:$b[2],size_col=null==$b[3]?nil:$b[3],$truthy($truthy($ret_or_10=$rb_lt(size_row,0))?$ret_or_10:$rb_lt(size_col,0)))return nil;$truthy($rb_lt(from_row,0))&&(from_row=$rb_plus(from_row,self.$row_count())),$truthy($rb_lt(from_col,0))&&(from_col=$rb_plus(from_col,self.$column_count()))}else self.$raise($$($nesting,"ArgumentError"),param.$inspect());return $truthy($truthy($ret_or_11=$truthy($ret_or_12=$truthy($ret_or_13=$rb_gt(from_row,self.$row_count()))?$ret_or_13:$rb_gt(from_col,self.$column_count()))?$ret_or_12:$rb_lt(from_row,0))?$ret_or_11:$rb_lt(from_col,0))?nil:(rows=$send(self.rows["$[]"](from_row,size_row),"collect",[],(($$76=function(row){null==$$76.$$s||$$76.$$s;return null==row&&(row=nil),row["$[]"](from_col,size_col)}).$$s=self,$$76.$$arity=1,$$76)),self.$new_matrix(rows,[$rb_minus(self.$column_count(),from_col),size_col].$min()))},$Matrix_inspect$190.$$arity=-1),Opal.def(self,"$first_minor",$Matrix_inspect$190=function(row,column){var $$78,self=this,$ret_or_14=nil,$ret_or_15=nil,arrays=nil;return $truthy(self["$empty?"]())&&self.$raise($$($nesting,"RuntimeError"),"first_minor of empty matrix is not defined"),$truthy($truthy($ret_or_14=$rb_le(0,row))?$rb_lt(row,self.$row_count()):$ret_or_14)||self.$raise($$($nesting,"ArgumentError"),"invalid row ("+row.$inspect()+" for 0.."+$rb_minus(self.$row_count(),1)+")"),$truthy($truthy($ret_or_15=$rb_le(0,column))?$rb_lt(column,self.$column_count()):$ret_or_15)||self.$raise($$($nesting,"ArgumentError"),"invalid column ("+column.$inspect()+" for 0.."+$rb_minus(self.$column_count(),1)+")"),(arrays=self.$to_a()).$delete_at(row),$send(arrays,"each",[],(($$78=function(array){null==$$78.$$s||$$78.$$s;return null==array&&(array=nil),array.$delete_at(column)}).$$s=self,$$78.$$arity=1,$$78)),self.$new_matrix(arrays,$rb_minus(self.$column_count(),1))},$Matrix_inspect$190.$$arity=2),Opal.def(self,"$cofactor",$Matrix_inspect$190=function(row,column){return $truthy(this["$empty?"]())&&this.$raise($$($nesting,"RuntimeError"),"cofactor of empty matrix is not defined"),$truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$rb_times(this.$first_minor(row,column).$determinant(),(-1)["$**"]($rb_plus(row,column)))},$Matrix_inspect$190.$$arity=2),Opal.def(self,"$adjugate",$Matrix_inspect$190=function(){var $$81;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send($$($nesting,"Matrix"),"build",[this.$row_count(),this.$column_count()],(($$81=function(row,column){var self=null==$$81.$$s?this:$$81.$$s;return null==row&&(row=nil),null==column&&(column=nil),self.$cofactor(column,row)}).$$s=this,$$81.$$arity=2,$$81))},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$laplace_expansion",$Matrix_inspect$190=function(column){var row,$$83,self=this,num=nil,$ret_or_16=nil,$ret_or_17=nil,$ret_or_18=nil,$ret_or_19=nil;if(null==column)column=$hash2([],{});else if(!column.$$is_hash)throw Opal.ArgumentError.$new("expected kwargs");return null==(row=column.$$smap.row)&&(row=nil),null==(column=column.$$smap.column)&&(column=nil),num=$truthy($ret_or_16=row)?$ret_or_16:column,$truthy($truthy($ret_or_17=num["$!"]())?$ret_or_17:$truthy($ret_or_18=row)?column:$ret_or_18)&&self.$raise($$($nesting,"ArgumentError"),"exactly one the row or column arguments must be specified"),$truthy(self["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$truthy(self["$empty?"]())&&self.$raise($$($nesting,"RuntimeError"),"laplace_expansion of empty matrix is not defined"),$truthy($truthy($ret_or_19=$rb_le(0,num))?$rb_lt(num,self.$row_count()):$ret_or_19)||self.$raise($$($nesting,"ArgumentError"),"invalid num ("+num.$inspect()+" for 0.."+$rb_minus(self.$row_count(),1)+")"),$send(self.$send($truthy(row)?"row":"column",num).$map(),"with_index",[],(($$83=function(e,k){var self=null==$$83.$$s?this:$$83.$$s;return null==e&&(e=nil),null==k&&(k=nil),$rb_times(e,$send(self,"cofactor",Opal.to_a($truthy(row)?[num,k]:[k,num])))}).$$s=self,$$83.$$arity=2,$$83)).$inject("+")},$Matrix_inspect$190.$$arity=-1),self.$alias_method("cofactor_expansion","laplace_expansion"),Opal.def(self,"$diagonal?",$Matrix_inspect$190=function(){return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$each("off_diagonal"),"all?",[],"zero?".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$empty?",$Matrix_inspect$190=function(){var $ret_or_20;return $truthy($ret_or_20=this.$column_count()["$=="](0))?$ret_or_20:this.$row_count()["$=="](0)},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$hermitian?",$Matrix_inspect$190=function(){var $$87;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$each_with_index("upper"),"all?",[],(($$87=function(e,row,col){var self=null==$$87.$$s?this:$$87.$$s;return null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),e["$=="](self.$rows()["$[]"](col)["$[]"](row).$conj())}).$$s=this,$$87.$$arity=3,$$87))},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$lower_triangular?",$Matrix_inspect$190=function(){return $send(this.$each("strict_upper"),"all?",[],"zero?".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$normal?",$Matrix_inspect$190=function(){try{var $$90;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$90=function(row_i,i){var $$91,self=null==$$90.$$s?this:$$90.$$s;return null==row_i&&(row_i=nil),null==i&&(i=nil),$send(self.$rows(),"each_with_index",[],(($$91=function(row_j,j){var $$92,self=null==$$91.$$s?this:$$91.$$s,s=nil;if(null==row_j&&(row_j=nil),null==j&&(j=nil),s=0,$send(self.$rows(),"each_with_index",[],(($$92=function(row_k,k){null==$$92.$$s||$$92.$$s;return null==row_k&&(row_k=nil),null==k&&(k=nil),s=$rb_plus(s,$rb_minus($rb_times(row_i["$[]"](k),row_j["$[]"](k).$conj()),$rb_times(row_k["$[]"](i).$conj(),row_k["$[]"](j))))}).$$s=self,$$92.$$arity=2,$$92)),s["$=="](0))return nil;Opal.ret(!1)}).$$s=self,$$91.$$arity=2,$$91))}).$$s=this,$$90.$$arity=2,$$90)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$orthogonal?",$Matrix_inspect$190=function(){try{var $$94;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$94=function(row,i){var $$95,self=null==$$94.$$s?this:$$94.$$s;return null==row&&(row=nil),null==i&&(i=nil),$send(self.$column_count(),"times",[],(($$95=function(j){var $$96,self=null==$$95.$$s?this:$$95.$$s,s=nil;if(null==j&&(j=nil),s=0,$send(self.$row_count(),"times",[],(($$96=function(k){var self=null==$$96.$$s?this:$$96.$$s;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(row["$[]"](k),self.$rows()["$[]"](k)["$[]"](j)))}).$$s=self,$$96.$$arity=1,$$96)),s["$=="](i["$=="](j)?1:0))return nil;Opal.ret(!1)}).$$s=self,$$95.$$arity=1,$$95))}).$$s=this,$$94.$$arity=2,$$94)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$permutation?",$Matrix_inspect$190=function(){try{var $$98,cols=nil;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),cols=$$($nesting,"Array").$new(this.$column_count()),$send(this.$rows(),"each_with_index",[],(($$98=function(row,i){var $$99,self=null==$$98.$$s?this:$$98.$$s,found=nil;if(null==row&&(row=nil),null==i&&(i=nil),found=!1,$send(row,"each_with_index",[],(($$99=function(e,j){null==$$99.$$s||$$99.$$s;var $writer,$ret_or_21=nil;return null==e&&(e=nil),null==j&&(j=nil),e["$=="](1)?($truthy($truthy($ret_or_21=found)?$ret_or_21:cols["$[]"](j))&&Opal.ret(!1),$writer=[j,!0],$send(cols,"[]=",Opal.to_a($writer)),found=$writer[$rb_minus($writer.length,1)]):$truthy(e["$!="](0))?void Opal.ret(!1):nil}).$$s=self,$$99.$$arity=2,$$99)),$truthy(found))return nil;Opal.ret(!1)}).$$s=this,$$98.$$arity=2,$$98)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$real?",$Matrix_inspect$190=function(){return $send(this,"all?",[],"real?".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$regular?",$Matrix_inspect$190=function(){return this["$singular?"]()["$!"]()},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$singular?",$Matrix_inspect$190=function(){return this.$determinant()["$=="](0)},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$square?",$Matrix_inspect$190=function(){return this.$column_count()["$=="](this.$row_count())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$symmetric?",$Matrix_inspect$190=function(){try{var $$105;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this,"each_with_index",["strict_upper"],(($$105=function(e,row,col){var self=null==$$105.$$s?this:$$105.$$s;if(null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),!$truthy(e["$!="](self.$rows()["$[]"](col)["$[]"](row))))return nil;Opal.ret(!1)}).$$s=this,$$105.$$arity=3,$$105)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$antisymmetric?",$Matrix_inspect$190=function(){try{var $$107;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this,"each_with_index",["upper"],(($$107=function(e,row,col){var self=null==$$107.$$s?this:$$107.$$s;if(null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),e["$=="](self.$rows()["$[]"](col)["$[]"](row)["$-@"]()))return nil;Opal.ret(!1)}).$$s=this,$$107.$$arity=3,$$107)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$unitary?",$Matrix_inspect$190=function(){try{var $$109;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$109=function(row,i){var $$110,self=null==$$109.$$s?this:$$109.$$s;return null==row&&(row=nil),null==i&&(i=nil),$send(self.$column_count(),"times",[],(($$110=function(j){var $$111,self=null==$$110.$$s?this:$$110.$$s,s=nil;if(null==j&&(j=nil),s=0,$send(self.$row_count(),"times",[],(($$111=function(k){var self=null==$$111.$$s?this:$$111.$$s;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(row["$[]"](k).$conj(),self.$rows()["$[]"](k)["$[]"](j)))}).$$s=self,$$111.$$arity=1,$$111)),s["$=="](i["$=="](j)?1:0))return nil;Opal.ret(!1)}).$$s=self,$$110.$$arity=1,$$110))}).$$s=this,$$109.$$arity=2,$$109)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$upper_triangular?",$Matrix_inspect$190=function(){return $send(this.$each("strict_lower"),"all?",[],"zero?".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$zero?",$Matrix_inspect$190=function(){return $send(this,"all?",[],"zero?".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$==",$Matrix_inspect$190=function(other){var self=this,$ret_or_22=nil;return!!$truthy($truthy($ret_or_22=$$($nesting,"Matrix")["$==="](other))?self.$column_count()["$=="](other.$column_count()):$ret_or_22)&&self.$rows()["$=="](other.$rows())},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$eql?",$Matrix_inspect$190=function(other){var self=this,$ret_or_23=nil;return!!$truthy($truthy($ret_or_23=$$($nesting,"Matrix")["$==="](other))?self.$column_count()["$=="](other.$column_count()):$ret_or_23)&&self.$rows()["$eql?"](other.$rows())},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$clone",$Matrix_inspect$190=function(){return this.$new_matrix($send(this.rows,"map",[],"dup".$to_proc()),this.$column_count())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$hash",$Matrix_inspect$190=function(){return this.rows.$hash()},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$*",$Matrix_inspect$190=function(m){var $$119,$$121,$case,self=this,rows=nil;return $case=m,$$($nesting,"Numeric")["$==="]($case)?(rows=$send(self.rows,"collect",[],(($$119=function(row){var $$120,self=null==$$119.$$s?this:$$119.$$s;return null==row&&(row=nil),$send(row,"collect",[],(($$120=function(e){null==$$120.$$s||$$120.$$s;return null==e&&(e=nil),$rb_times(e,m)}).$$s=self,$$120.$$arity=1,$$120))}).$$s=self,$$119.$$arity=1,$$119)),self.$new_matrix(rows,self.$column_count())):$$($nesting,"Vector")["$==="]($case)?(m=self.$class().$column_vector(m),$rb_times(self,m).$column(0)):$$($nesting,"Matrix")["$==="]($case)?($truthy(self.$column_count()["$!="](m.$row_count()))&&$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[self.$row_count()],(($$121=function(i){var $$122,self=null==$$121.$$s?this:$$121.$$s;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[m.$column_count()],(($$122=function(j){var $$123,self=null==$$122.$$s?this:$$122.$$s;return null==j&&(j=nil),$send(Opal.Range.$new(0,self.$column_count(),!0),"inject",[0],(($$123=function(vij,k){var self=null==$$123.$$s?this:$$123.$$s;return null==vij&&(vij=nil),null==k&&(k=nil),$rb_plus(vij,$rb_times(self["$[]"](i,k),m["$[]"](k,j)))}).$$s=self,$$123.$$arity=2,$$123))}).$$s=self,$$122.$$arity=1,$$122))}).$$s=self,$$121.$$arity=1,$$121)),self.$new_matrix(rows,m.$column_count())):self.$apply_through_coercion(m,"*")},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$+",$Matrix_inspect$190=function(m){var $$125,rows,self=this,$ret_or_24=nil,$case=m;if($$($nesting,"Numeric")["$==="]($case))$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"+",self.$class(),m.$class());else if($$($nesting,"Vector")["$==="]($case))m=self.$class().$column_vector(m);else if(!$$($nesting,"Matrix")["$==="]($case))return self.$apply_through_coercion(m,"+");return $truthy($truthy($ret_or_24=self.$row_count()["$=="](m.$row_count()))?self.$column_count()["$=="](m.$column_count()):$ret_or_24)||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[self.$row_count()],(($$125=function(i){var $$126,self=null==$$125.$$s?this:$$125.$$s;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[self.$column_count()],(($$126=function(j){var self=null==$$126.$$s?this:$$126.$$s;return null==j&&(j=nil),$rb_plus(self["$[]"](i,j),m["$[]"](i,j))}).$$s=self,$$126.$$arity=1,$$126))}).$$s=self,$$125.$$arity=1,$$125)),self.$new_matrix(rows,self.$column_count())},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$-",$Matrix_inspect$190=function(m){var $$128,rows,self=this,$ret_or_25=nil,$case=m;if($$($nesting,"Numeric")["$==="]($case))$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"-",self.$class(),m.$class());else if($$($nesting,"Vector")["$==="]($case))m=self.$class().$column_vector(m);else if(!$$($nesting,"Matrix")["$==="]($case))return self.$apply_through_coercion(m,"-");return $truthy($truthy($ret_or_25=self.$row_count()["$=="](m.$row_count()))?self.$column_count()["$=="](m.$column_count()):$ret_or_25)||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[self.$row_count()],(($$128=function(i){var $$129,self=null==$$128.$$s?this:$$128.$$s;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[self.$column_count()],(($$129=function(j){var self=null==$$129.$$s?this:$$129.$$s;return null==j&&(j=nil),$rb_minus(self["$[]"](i,j),m["$[]"](i,j))}).$$s=self,$$129.$$arity=1,$$129))}).$$s=self,$$128.$$arity=1,$$128)),self.$new_matrix(rows,self.$column_count())},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$/",$Matrix_inspect$190=function(other){var $$131,$case,rows,self=this;return $case=other,$$($nesting,"Numeric")["$==="]($case)?(rows=$send(self.rows,"collect",[],(($$131=function(row){var $$132,self=null==$$131.$$s?this:$$131.$$s;return null==row&&(row=nil),$send(row,"collect",[],(($$132=function(e){null==$$132.$$s||$$132.$$s;return null==e&&(e=nil),$rb_divide(e,other)}).$$s=self,$$132.$$arity=1,$$132))}).$$s=self,$$131.$$arity=1,$$131)),self.$new_matrix(rows,self.$column_count())):$$($nesting,"Matrix")["$==="]($case)?$rb_times(self,other.$inverse()):self.$apply_through_coercion(other,"/")},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$hadamard_product",$Matrix_inspect$190=function(m){var $$134;return $send(this,"combine",[m],(($$134=function(a,b){null==$$134.$$s||$$134.$$s;return null==a&&(a=nil),null==b&&(b=nil),$rb_times(a,b)}).$$s=this,$$134.$$arity=2,$$134))},$Matrix_inspect$190.$$arity=1),self.$alias_method("entrywise_product","hadamard_product"),Opal.def(self,"$inverse",$Matrix_inspect$190=function(){return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),this.$class().$I(this.$row_count()).$send("inverse_from",this)},$Matrix_inspect$190.$$arity=0),$alias(self,"inv","inverse"),Opal.def(self,"$inverse_from",$Matrix_inspect$190=function(src){var $$137,a=nil,last=$rb_minus(this.$row_count(),1),a=src.$to_a();return $send(0,"upto",[last],(($$137=function(k){var $$138,$a,$$139,$$142,$$143,self=null==$$137.$$s?this:$$137.$$s,i=nil,akk=nil;return null==self.rows&&(self.rows=nil),null==k&&(k=nil),i=k,akk=a["$[]"](k)["$[]"](k).$abs(),$send($rb_plus(k,1),"upto",[last],(($$138=function(j){var v;null==$$138.$$s||$$138.$$s;return null==j&&(j=nil),v=a["$[]"](j)["$[]"](k).$abs(),$truthy($rb_gt(v,akk))?(i=j,akk=v):nil}).$$s=self,$$138.$$arity=1,$$138)),akk["$=="](0)&&$$($nesting,"Matrix").$Raise($$($nesting,"ErrNotRegular")),$truthy(i["$!="](k))&&($a=[a["$[]"](k),a["$[]"](i)],a["$[]="](i,$a[0]),a["$[]="](k,$a[1]),$a=[self.rows["$[]"](k),self.rows["$[]"](i)],self.rows["$[]="](i,$a[0]),self.rows["$[]="](k,$a[1])),akk=a["$[]"](k)["$[]"](k),$send(0,"upto",[last],(($$139=function(ii){var $$140,$$141,q,self=null==$$139.$$s?this:$$139.$$s,$writer=nil;return null==ii&&(ii=nil),ii["$=="](k)?nil:(q=a["$[]"](ii)["$[]"](k).$quo(akk),$writer=[k,0],$send(a["$[]"](ii),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_plus(k,1),"upto",[last],(($$140=function(j){null==$$140.$$s||$$140.$$s;var $binary_op_recvr_tmp_1=nil;return null==j&&(j=nil),$binary_op_recvr_tmp_1=a["$[]"](ii),$writer=[j,$rb_minus($binary_op_recvr_tmp_1["$[]"](j),$rb_times(a["$[]"](k)["$[]"](j),q))],$send($binary_op_recvr_tmp_1,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$140.$$arity=1,$$140)),$send(0,"upto",[last],(($$141=function(j){var self=null==$$141.$$s?this:$$141.$$s,$binary_op_recvr_tmp_2=nil;return null==self.rows&&(self.rows=nil),null==j&&(j=nil),$binary_op_recvr_tmp_2=self.rows["$[]"](ii),$writer=[j,$rb_minus($binary_op_recvr_tmp_2["$[]"](j),$rb_times(self.rows["$[]"](k)["$[]"](j),q))],$send($binary_op_recvr_tmp_2,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$141.$$arity=1,$$141)))}).$$s=self,$$139.$$arity=1,$$139)),$send($rb_plus(k,1),"upto",[last],(($$142=function(j){var $writer;null==$$142.$$s||$$142.$$s;return null==j&&(j=nil),$writer=[j,a["$[]"](k)["$[]"](j).$quo(akk)],$send(a["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$142.$$arity=1,$$142)),$send(0,"upto",[last],(($$143=function(j){var $writer,self=null==$$143.$$s?this:$$143.$$s;return null==self.rows&&(self.rows=nil),null==j&&(j=nil),$writer=[j,self.rows["$[]"](k)["$[]"](j).$quo(akk)],$send(self.rows["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$143.$$arity=1,$$143))}).$$s=this,$$137.$$arity=1,$$137)),this},$Matrix_inspect$190.$$arity=1),self.$private("inverse_from"),Opal.def(self,"$**",$Matrix_inspect$190=function(other){try{var $$145,$a,$$146,$case,v,v_inv,self=this,x=nil,z=nil,d=nil;return function(){if($case=other,$$($nesting,"Integer")["$==="]($case)){if(x=self,$truthy($rb_le(other,0))){if(x=self.$inverse(),other["$=="](0))return self.$class().$identity(self.$column_count());other=other["$-@"]()}return z=nil,$send(self,"loop",[],(($$145=function(){null==$$145.$$s||$$145.$$s;return other["$[]"](0)["$=="](1)&&(z=$truthy(z)?$rb_times(z,x):x),$truthy((other=other["$>>"](1))["$zero?"]())&&Opal.ret(z),x=$rb_times(x,x)}).$$s=self,$$145.$$arity=0,$$145))}return $$($nesting,"Numeric")["$==="]($case)?($a=self.$eigensystem(),$a=Opal.to_ary($a),v=null==$a[0]?nil:$a[0],d=null==$a[1]?nil:$a[1],v_inv=null==$a[2]?nil:$a[2],$rb_times($rb_times(v,$send(self.$class(),"diagonal",Opal.to_a($send(d.$each("diagonal"),"map",[],(($$146=function(e){null==$$146.$$s||$$146.$$s;return null==e&&(e=nil),e["$**"](other)}).$$s=self,$$146.$$arity=1,$$146))))),v_inv)):$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"**",self.$class(),other.$class())}()}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$+@",$Matrix_inspect$190=function(){return this},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$-@",$Matrix_inspect$190=function(){var $$149;return $send(this,"collect",[],(($$149=function(e){null==$$149.$$s||$$149.$$s;return null==e&&(e=nil),e["$-@"]()}).$$s=this,$$149.$$arity=1,$$149))},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$determinant",$Matrix_inspect$190=function(){var $a,$b,self=this,m=nil,$case=nil,m0=nil,m1=nil,m2=nil,m3=nil;return $truthy(self["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),m=self.rows,$case=self.$row_count(),0["$==="]($case)?1:1["$==="]($case)?m["$[]"](0)["$[]"](0)["$+@"]():2["$==="]($case)?$rb_minus($rb_times(m["$[]"](0)["$[]"](0)["$+@"](),m["$[]"](1)["$[]"](1)),$rb_times(m["$[]"](0)["$[]"](1),m["$[]"](1)["$[]"](0))):3["$==="]($case)?($b=m,$a=Opal.to_ary($b),m0=null==$a[0]?nil:$a[0],m1=null==$a[1]?nil:$a[1],m2=null==$a[2]?nil:$a[2],$rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_times($rb_times(m0["$[]"](0)["$+@"](),m1["$[]"](1)),m2["$[]"](2)),$rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](1))),$rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](2))),$rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](0))),$rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](1))),$rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](0)))):4["$==="]($case)?($b=m,$a=Opal.to_ary($b),m0=null==$a[0]?nil:$a[0],m1=null==$a[1]?nil:$a[1],m2=null==$a[2]?nil:$a[2],m3=null==$a[3]?nil:$a[3],$rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_times($rb_times($rb_times(m0["$[]"](0)["$+@"](),m1["$[]"](1)),m2["$[]"](2)),m3["$[]"](3)),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](1)),m2["$[]"](3)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](1)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](3)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](3)),m2["$[]"](1)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](3)),m2["$[]"](2)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](2)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](3)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](0)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](3)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](3)),m2["$[]"](0)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](3)),m2["$[]"](2)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](1)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](3)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](0)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](3)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](3)),m2["$[]"](0)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](3)),m2["$[]"](1)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](0)),m2["$[]"](1)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](0)),m2["$[]"](2)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](1)),m2["$[]"](0)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](1)),m2["$[]"](2)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](2)),m2["$[]"](0)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](2)),m2["$[]"](1)),m3["$[]"](0)))):self.$determinant_bareiss()},$Matrix_inspect$190.$$arity=0),self.$alias_method("det","determinant"),Opal.def(self,"$determinant_bareiss",$Matrix_inspect$190=function(){try{var $$152,$$153,size=nil,a=nil,sign=nil,pivot=nil,last=$rb_minus(size=this.$row_count(),1),a=this.$to_a(),no_pivot=$send($$($nesting,"Proc"),"new",[],(($$152=function(){null==$$152.$$s||$$152.$$s;Opal.ret(0)}).$$s=this,$$152.$$arity=0,$$152)),sign=1,pivot=1;return $send(size,"times",[],(($$153=function(k){var $$154,$a,$$155,previous_pivot,switch$,self=null==$$153.$$s?this:$$153.$$s;return null==k&&(k=nil),previous_pivot=pivot,(pivot=a["$[]"](k)["$[]"](k))["$=="](0)&&(switch$=$send(Opal.Range.$new($rb_plus(k,1),size,!0),"find",[no_pivot],(($$154=function(row){null==$$154.$$s||$$154.$$s;return null==row&&(row=nil),a["$[]"](row)["$[]"](k)["$!="](0)}).$$s=self,$$154.$$arity=1,$$154)),$a=[a["$[]"](k),a["$[]"](switch$)],a["$[]="](switch$,$a[0]),a["$[]="](k,$a[1]),pivot=a["$[]"](k)["$[]"](k),sign=sign["$-@"]()),$send($rb_plus(k,1),"upto",[last],(($$155=function(i){var $$156,self=null==$$155.$$s?this:$$155.$$s,ai=nil;return null==i&&(i=nil),ai=a["$[]"](i),$send($rb_plus(k,1),"upto",[last],(($$156=function(j){var $writer;null==$$156.$$s||$$156.$$s;return null==j&&(j=nil),$writer=[j,$rb_divide($rb_minus($rb_times(pivot,ai["$[]"](j)),$rb_times(ai["$[]"](k),a["$[]"](k)["$[]"](j))),previous_pivot)],$send(ai,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$156.$$arity=1,$$156))}).$$s=self,$$155.$$arity=1,$$155))}).$$s=this,$$153.$$arity=1,$$153)),$rb_times(sign,pivot)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_inspect$190.$$arity=0),self.$private("determinant_bareiss"),Opal.def(self,"$determinant_e",$Matrix_inspect$190=function(){return this.$warn("Matrix#determinant_e is deprecated; use #determinant",$hash2(["uplevel"],{uplevel:1})),this.$determinant()},$Matrix_inspect$190.$$arity=0),$alias(self,"det_e","determinant_e"),Opal.def(self,"$hstack",$Matrix_inspect$190=function($a){var self=this,matrices=Opal.slice.call(arguments,0,arguments.length);return $send(self.$class(),"hstack",[self].concat(Opal.to_a(matrices)))},$Matrix_inspect$190.$$arity=-1),Opal.def(self,"$rank",$Matrix_inspect$190=function(){var $$160,a=nil,pivot_row=nil,previous_pivot=nil,a=this.$to_a(),last_column=$rb_minus(this.$column_count(),1),last_row=$rb_minus(this.$row_count(),1),pivot_row=0,previous_pivot=1;return $send(0,"upto",[last_column],(($$160=function(k){var $$161,$a,$$162,switch_row,pivot,self=null==$$160.$$s?this:$$160.$$s;return null==k&&(k=nil),switch_row=$send(Opal.Range.$new(pivot_row,last_row,!1),"find",[],(($$161=function(row){null==$$161.$$s||$$161.$$s;return null==row&&(row=nil),a["$[]"](row)["$[]"](k)["$!="](0)}).$$s=self,$$161.$$arity=1,$$161)),$truthy(switch_row)?(pivot_row["$=="](switch_row)||($a=[a["$[]"](pivot_row),a["$[]"](switch_row)],a["$[]="](switch_row,$a[0]),a["$[]="](pivot_row,$a[1])),pivot=a["$[]"](pivot_row)["$[]"](k),$send($rb_plus(pivot_row,1),"upto",[last_row],(($$162=function(i){var $$163,self=null==$$162.$$s?this:$$162.$$s,ai=nil;return null==i&&(i=nil),ai=a["$[]"](i),$send($rb_plus(k,1),"upto",[last_column],(($$163=function(j){var $writer;null==$$163.$$s||$$163.$$s;return null==j&&(j=nil),$writer=[j,$rb_divide($rb_minus($rb_times(pivot,ai["$[]"](j)),$rb_times(ai["$[]"](k),a["$[]"](pivot_row)["$[]"](j))),previous_pivot)],$send(ai,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$163.$$arity=1,$$163))}).$$s=self,$$162.$$arity=1,$$162)),pivot_row=$rb_plus(pivot_row,1),previous_pivot=pivot):nil}).$$s=this,$$160.$$arity=1,$$160)),pivot_row},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$rank_e",$Matrix_inspect$190=function(){return this.$warn("Matrix#rank_e is deprecated; use #rank",$hash2(["uplevel"],{uplevel:1})),this.$rank()},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$round",$Matrix_inspect$190=function(ndigits){var $$166;return null==ndigits&&(ndigits=0),$send(this,"map",[],(($$166=function(e){null==$$166.$$s||$$166.$$s;return null==e&&(e=nil),e.$round(ndigits)}).$$s=this,$$166.$$arity=1,$$166))},$Matrix_inspect$190.$$arity=-1),Opal.def(self,"$trace",$Matrix_inspect$190=function(){var $$168;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(Opal.Range.$new(0,this.$column_count(),!0),"inject",[0],(($$168=function(tr,i){var self=null==$$168.$$s?this:$$168.$$s;return null==self.rows&&(self.rows=nil),null==tr&&(tr=nil),null==i&&(i=nil),$rb_plus(tr,self.rows["$[]"](i)["$[]"](i))}).$$s=this,$$168.$$arity=2,$$168))},$Matrix_inspect$190.$$arity=0),$alias(self,"tr","trace"),Opal.def(self,"$transpose",$Matrix_inspect$190=function(){return $truthy(this.$row_count()["$zero?"]())?this.$class().$empty(this.$column_count(),0):this.$new_matrix(this.rows.$transpose(),this.$row_count())},$Matrix_inspect$190.$$arity=0),$alias(self,"t","transpose"),Opal.def(self,"$vstack",$Matrix_inspect$190=function($a){var self=this,matrices=Opal.slice.call(arguments,0,arguments.length);return $send(self.$class(),"vstack",[self].concat(Opal.to_a(matrices)))},$Matrix_inspect$190.$$arity=-1),Opal.def(self,"$eigensystem",$Matrix_inspect$190=function(){return $$($nesting,"EigenvalueDecomposition").$new(this)},$Matrix_inspect$190.$$arity=0),$alias(self,"eigen","eigensystem"),Opal.def(self,"$lup",$Matrix_inspect$190=function(){return $$($nesting,"LUPDecomposition").$new(this)},$Matrix_inspect$190.$$arity=0),$alias(self,"lup_decomposition","lup"),Opal.def(self,"$conjugate",$Matrix_inspect$190=function(){return $send(this,"collect",[],"conjugate".$to_proc())},$Matrix_inspect$190.$$arity=0),$alias(self,"conj","conjugate"),Opal.def(self,"$imaginary",$Matrix_inspect$190=function(){return $send(this,"collect",[],"imaginary".$to_proc())},$Matrix_inspect$190.$$arity=0),$alias(self,"imag","imaginary"),Opal.def(self,"$real",$Matrix_inspect$190=function(){return $send(this,"collect",[],"real".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$rect",$Matrix_inspect$190=function(){return[this.$real(),this.$imag()]},$Matrix_inspect$190.$$arity=0),$alias(self,"rectangular","rect"),Opal.def(self,"$coerce",$Matrix_inspect$190=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?[$$($nesting,"Scalar").$new(other),self]:self.$raise($$($nesting,"TypeError"),self.$class()+" can't be coerced into "+other.$class())},$Matrix_inspect$190.$$arity=1),Opal.def(self,"$row_vectors",$Matrix_inspect$190=function(){var $$179;return $send($$($nesting,"Array"),"new",[this.$row_count()],(($$179=function(i){var self=null==$$179.$$s?this:$$179.$$s;return null==i&&(i=nil),self.$row(i)}).$$s=this,$$179.$$arity=1,$$179))},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$column_vectors",$Matrix_inspect$190=function(){var $$181;return $send($$($nesting,"Array"),"new",[this.$column_count()],(($$181=function(i){var self=null==$$181.$$s?this:$$181.$$s;return null==i&&(i=nil),self.$column(i)}).$$s=this,$$181.$$arity=1,$$181))},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$to_matrix",$Matrix_inspect$190=function(){return this},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$to_a",$Matrix_inspect$190=function(){return $send(this.rows,"collect",[],"dup".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$elements_to_f",$Matrix_inspect$190=function(){return this.$warn("Matrix#elements_to_f is deprecated, use map(&:to_f)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_f".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$elements_to_i",$Matrix_inspect$190=function(){return this.$warn("Matrix#elements_to_i is deprecated, use map(&:to_i)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_i".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$elements_to_r",$Matrix_inspect$190=function(){return this.$warn("Matrix#elements_to_r is deprecated, use map(&:to_r)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_r".$to_proc())},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$to_s",$Matrix_inspect$190=function(){var $$188;return $truthy(this["$empty?"]())?this.$class()+".empty("+this.$row_count()+", "+this.$column_count()+")":$rb_plus($rb_plus(this.$class()+"[",$send(this.rows,"collect",[],(($$188=function(row){var $$189,self=null==$$188.$$s?this:$$188.$$s;return null==row&&(row=nil),$rb_plus($rb_plus("[",$send(row,"collect",[],(($$189=function(e){null==$$189.$$s||$$189.$$s;return null==e&&(e=nil),e.$to_s()}).$$s=self,$$189.$$arity=1,$$189)).$join(", ")),"]")}).$$s=this,$$188.$$arity=1,$$188)).$join(", ")),"]")},$Matrix_inspect$190.$$arity=0),Opal.def(self,"$inspect",$Matrix_inspect$190=function(){return $truthy(this["$empty?"]())?this.$class()+".empty("+this.$row_count()+", "+this.$column_count()+")":""+this.$class()+this.rows.$inspect()},$Matrix_inspect$190.$$arity=0),function(self,$ConversionHelper_convert_to_array$191){var $nesting=[self=$module(self,"ConversionHelper")].concat($ConversionHelper_convert_to_array$191);Opal.def(self,"$convert_to_array",$ConversionHelper_convert_to_array$191=function(obj,copy){var $case,self=this,converted=nil,e=nil;return null==copy&&(copy=!1),function(){if($case=obj,$$($nesting,"Array")["$==="]($case))return $truthy(copy)?obj.$dup():obj;if($$($nesting,"Vector")["$==="]($case))return obj.$to_a();try{converted=obj.$to_ary()}catch($err){if(!Opal.rescue($err,[$$($nesting,"Exception")]))throw $err;e=$err;try{self.$raise($$($nesting,"TypeError"),"can't convert "+obj.$class()+" into an Array ("+e.$message()+")")}finally{Opal.pop_exception()}}return $truthy(converted["$is_a?"]($$($nesting,"Array")))||self.$raise($$($nesting,"TypeError"),obj.$class()+"#to_ary should return an Array"),converted}()},$ConversionHelper_convert_to_array$191.$$arity=-2),self.$private("convert_to_array")}($nesting[0],$nesting),self.$extend($$($nesting,"ConversionHelper")),function($CoercionHelper_coerce_to_matrix$195,$CoercionHelper_coerce_to_int$194){var $nesting=[$CoercionHelper_coerce_to_matrix$195=$module($CoercionHelper_coerce_to_matrix$195,"CoercionHelper")].concat($CoercionHelper_coerce_to_int$194);Opal.def($CoercionHelper_coerce_to_matrix$195,"$apply_through_coercion",$CoercionHelper_coerce_to_int$194=function(obj,oper){var coercion=nil,$ret_or_26=nil;try{return coercion=obj.$coerce(this),$truthy($truthy($ret_or_26=coercion["$is_a?"]($$($nesting,"Array")))?coercion.$length()["$=="](2):$ret_or_26)||this.$raise($$($nesting,"TypeError")),coercion["$[]"](0).$public_send(oper,coercion["$[]"](1))}catch($err){if(!Opal.rescue($err,[$$($nesting,"StandardError")]))throw $err;try{return this.$raise($$($nesting,"TypeError"),obj.$inspect()+" can't be coerced into "+this.$class())}finally{Opal.pop_exception()}}},$CoercionHelper_coerce_to_int$194.$$arity=2),$CoercionHelper_coerce_to_matrix$195.$private("apply_through_coercion"),Opal.defs($CoercionHelper_coerce_to_matrix$195,"$coerce_to",$CoercionHelper_coerce_to_int$194=function(obj,cls,meth){var ret=nil,e=nil;if($truthy(obj["$kind_of?"](cls)))return obj;$truthy(obj["$respond_to?"](meth))||this.$raise($$($nesting,"TypeError"),"Expected a "+cls+" but got a "+obj.$class());try{ret=obj.$__send__(meth)}catch($err){if(!Opal.rescue($err,[$$($nesting,"Exception")]))throw $err;e=$err;try{this.$raise($$($nesting,"TypeError"),"Coercion error: "+obj.$inspect()+"."+meth+" => "+cls+" failed:\n("+e.$message()+")")}finally{Opal.pop_exception()}}return $truthy(ret["$kind_of?"](cls))||this.$raise($$($nesting,"TypeError"),"Coercion error: obj."+meth+" did NOT return a "+cls+" (was "+ret.$class()+")"),ret},$CoercionHelper_coerce_to_int$194.$$arity=3),Opal.defs($CoercionHelper_coerce_to_matrix$195,"$coerce_to_int",$CoercionHelper_coerce_to_int$194=function(obj){return this.$coerce_to(obj,$$($nesting,"Integer"),"to_int")},$CoercionHelper_coerce_to_int$194.$$arity=1),Opal.defs($CoercionHelper_coerce_to_matrix$195,"$coerce_to_matrix",$CoercionHelper_coerce_to_matrix$195=function(obj){return this.$coerce_to(obj,$$($nesting,"Matrix"),"to_matrix")},$CoercionHelper_coerce_to_matrix$195.$$arity=1)}($nesting[0],$nesting),self.$include($$($nesting,"CoercionHelper")),function($base,$Scalar_$$$202,$Scalar_$slash$201){var $nesting=[$Scalar_$$$202=$klass($base,$Scalar_$$$202,"Scalar")].concat($Scalar_$slash$201);$Scalar_$$$202.$$prototype.value=nil,$Scalar_$$$202.$include($$($nesting,"ExceptionForMatrix")),$Scalar_$$$202.$include($$($nesting,"CoercionHelper")),Opal.def($Scalar_$$$202,"$initialize",$Scalar_$slash$201=function(value){return this.value=value},$Scalar_$slash$201.$$arity=1),Opal.def($Scalar_$$$202,"$+",$Scalar_$slash$201=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_plus(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"+",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"+")},$Scalar_$slash$201.$$arity=1),Opal.def($Scalar_$$$202,"$-",$Scalar_$slash$201=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_minus(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"-",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"-")},$Scalar_$slash$201.$$arity=1),Opal.def($Scalar_$$$202,"$*",$Scalar_$slash$201=function(other){var $$200,$case,self=this;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_times(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$send(other,"collect",[],(($$200=function(e){var self=null==$$200.$$s?this:$$200.$$s;return null==self.value&&(self.value=nil),null==e&&(e=nil),$rb_times(self.value,e)}).$$s=self,$$200.$$arity=1,$$200)):self.$apply_through_coercion(other,"*")},$Scalar_$slash$201.$$arity=1),Opal.def($Scalar_$$$202,"$/",$Scalar_$slash$201=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_divide(self.value,other)):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"/",self.value.$class(),other.$class()):$$($nesting,"Matrix")["$==="]($case)?$rb_times(self,other.$inverse()):self.$apply_through_coercion(other,"/")},$Scalar_$slash$201.$$arity=1),Opal.def($Scalar_$$$202,"$**",$Scalar_$$$202=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new(self.value["$**"](other)):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"**",self.value.$class(),other.$class()):$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotImplemented"),"**",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"**")},$Scalar_$$$202.$$arity=1)}($nesting[0],$$($nesting,"Numeric"),$nesting)}($nesting[0],$nesting),function($Vector_inspect$256,$Vector_to_s$255){var $Vector_each$213,$Vector_each2$214,$Vector_collect2$216,$Vector_collect$242,$Vector_map2$245,$Vector_inspect$256=$klass($Vector_inspect$256,null,"Vector"),$nesting=[$Vector_inspect$256].concat($Vector_to_s$255);return $Vector_inspect$256.$$prototype.elements=nil,$Vector_inspect$256.$include($$($nesting,"ExceptionForMatrix")),$Vector_inspect$256.$include($$($nesting,"Enumerable")),$Vector_inspect$256.$include($$$($$($nesting,"Matrix"),"CoercionHelper")),$Vector_inspect$256.$extend($$$($$($nesting,"Matrix"),"ConversionHelper")),$Vector_inspect$256.$private_class_method("new"),$Vector_inspect$256.$attr_reader("elements"),$Vector_inspect$256.$protected("elements"),Opal.defs($$($nesting,"Vector"),"$[]",$Vector_to_s$255=function($a){var $post_args=Opal.slice.call(arguments,0,arguments.length);return this.$new(this.$convert_to_array($post_args,!1))},$Vector_to_s$255.$$arity=-1),Opal.defs($$($nesting,"Vector"),"$elements",$Vector_to_s$255=function(array,copy){return null==copy&&(copy=!0),this.$new(this.$convert_to_array(array,copy))},$Vector_to_s$255.$$arity=-2),Opal.defs($$($nesting,"Vector"),"$basis",$Vector_to_s$255=function(index){var size,array,$writer,$ret_or_27=nil;if(null==index)index=$hash2([],{});else if(!index.$$is_hash)throw Opal.ArgumentError.$new("expected kwargs");if(!Opal.hasOwnProperty.call(index.$$smap,"size"))throw Opal.ArgumentError.$new("missing keyword: size");if(size=index.$$smap.size,!Opal.hasOwnProperty.call(index.$$smap,"index"))throw Opal.ArgumentError.$new("missing keyword: index");return index=index.$$smap.index,$truthy($rb_lt(size,1))&&this.$raise($$($nesting,"ArgumentError"),"invalid size ("+size+" for 1..)"),$truthy($truthy($ret_or_27=$rb_le(0,index))?$rb_lt(index,size):$ret_or_27)||this.$raise($$($nesting,"ArgumentError"),"invalid index ("+index+" for 0..."+size+")"),array=$$($nesting,"Array").$new(size,0),$writer=[index,1],$send(array,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),this.$new(this.$convert_to_array(array,!1))},$Vector_to_s$255.$$arity=1),Opal.defs($$($nesting,"Vector"),"$zero",$Vector_to_s$255=function(size){var array;return $truthy($rb_lt(size,0))&&this.$raise($$($nesting,"ArgumentError"),"invalid size ("+size+" for 0..)"),array=$$($nesting,"Array").$new(size,0),this.$new(this.$convert_to_array(array,!1))},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$initialize",$Vector_to_s$255=function(array){return this.elements=array},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$[]",$Vector_to_s$255=function(i){return this.elements["$[]"](i)},$Vector_to_s$255.$$arity=1),$alias($Vector_inspect$256,"element","[]"),$alias($Vector_inspect$256,"component","[]"),Opal.def($Vector_inspect$256,"$[]=",$Vector_to_s$255=function(i,v){var $writer=[i,v];return $send(this.elements,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Vector_to_s$255.$$arity=2),$alias($Vector_inspect$256,"set_element","[]="),$alias($Vector_inspect$256,"set_component","[]="),$Vector_inspect$256.$private("[]=","set_element","set_component"),Opal.def($Vector_inspect$256,"$round",$Vector_to_s$255=function(ndigits){var $$211;return null==ndigits&&(ndigits=0),$send(this,"map",[],(($$211=function(e){null==$$211.$$s||$$211.$$s;return null==e&&(e=nil),e.$round(ndigits)}).$$s=this,$$211.$$arity=1,$$211))},$Vector_to_s$255.$$arity=-1),Opal.def($Vector_inspect$256,"$size",$Vector_to_s$255=function(){return this.elements.$size()},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$each",$Vector_each$213=function(){var $iter=$Vector_each$213.$$p,block=$iter||nil;return $iter&&($Vector_each$213.$$p=null),$iter&&($Vector_each$213.$$p=null),block===nil?this.$to_enum("each"):($send(this.elements,"each",[],block.$to_proc()),this)},$Vector_each$213.$$arity=0),Opal.def($Vector_inspect$256,"$each2",$Vector_each2$214=function(v){var $$215,$iter=$Vector_each2$214.$$p,$yield=$iter||nil;return $iter&&($Vector_each2$214.$$p=null),$truthy(v["$kind_of?"]($$($nesting,"Integer")))&&this.$raise($$($nesting,"TypeError"),"Integer is not like Vector"),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),$yield===nil?this.$to_enum("each2",v):($send(this.$size(),"times",[],(($$215=function(i){var self=null==$$215.$$s?this:$$215.$$s;return null==self.elements&&(self.elements=nil),null==i&&(i=nil),Opal.yieldX($yield,[self.elements["$[]"](i),v["$[]"](i)])}).$$s=this,$$215.$$arity=1,$$215)),this)},$Vector_each2$214.$$arity=1),Opal.def($Vector_inspect$256,"$collect2",$Vector_collect2$216=function(v){var $$217,$iter=$Vector_collect2$216.$$p,$yield=$iter||nil;return $iter&&($Vector_collect2$216.$$p=null),$truthy(v["$kind_of?"]($$($nesting,"Integer")))&&this.$raise($$($nesting,"TypeError"),"Integer is not like Vector"),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),$yield===nil?this.$to_enum("collect2",v):$send($$($nesting,"Array"),"new",[this.$size()],(($$217=function(i){var self=null==$$217.$$s?this:$$217.$$s;return null==self.elements&&(self.elements=nil),null==i&&(i=nil),Opal.yieldX($yield,[self.elements["$[]"](i),v["$[]"](i)])}).$$s=this,$$217.$$arity=1,$$217))},$Vector_collect2$216.$$arity=1),Opal.defs($$($nesting,"Vector"),"$independent?",$Vector_to_s$255=function($a){var $$219,vs=Opal.slice.call(arguments,0,arguments.length);return $send(vs,"each",[],(($$219=function(v){var self=null==$$219.$$s?this:$$219.$$s;return null==v&&(v=nil),$truthy(v["$is_a?"]($$($nesting,"Vector")))||self.$raise($$($nesting,"TypeError"),"expected Vector, got "+v.$class()),v.$size()["$=="](vs.$first().$size())?nil:$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=this,$$219.$$arity=1,$$219)),!$truthy($rb_gt(vs.$count(),vs.$first().$size()))&&$send($$($nesting,"Matrix"),"[]",Opal.to_a(vs)).$rank()["$eql?"](vs.$count())},$Vector_to_s$255.$$arity=-1),Opal.def($Vector_inspect$256,"$independent?",$Vector_to_s$255=function($a){var self=this,vs=Opal.slice.call(arguments,0,arguments.length);return $send(self.$class(),"independent?",[self].concat(Opal.to_a(vs)))},$Vector_to_s$255.$$arity=-1),Opal.def($Vector_inspect$256,"$zero?",$Vector_to_s$255=function(){return $send(this,"all?",[],"zero?".$to_proc())},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$==",$Vector_to_s$255=function(other){return!!$truthy($$($nesting,"Vector")["$==="](other))&&this.elements["$=="](other.$elements())},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$eql?",$Vector_to_s$255=function(other){return!!$truthy($$($nesting,"Vector")["$==="](other))&&this.elements["$eql?"](other.$elements())},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$clone",$Vector_to_s$255=function(){return this.$class().$elements(this.elements)},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$hash",$Vector_to_s$255=function(){return this.elements.$hash()},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$*",$Vector_to_s$255=function(x){var $$227,$case,els,self=this;return $case=x,$$($nesting,"Numeric")["$==="]($case)?(els=$send(self.elements,"collect",[],(($$227=function(e){null==$$227.$$s||$$227.$$s;return null==e&&(e=nil),$rb_times(e,x)}).$$s=self,$$227.$$arity=1,$$227)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_times($$($nesting,"Matrix").$column_vector(self),x):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Vector").$Raise($$($nesting,"ErrOperationNotDefined"),"*",self.$class(),x.$class()):self.$apply_through_coercion(x,"*")},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$+",$Vector_to_s$255=function(v){var $$229,$case,els,self=this;return $case=v,$$($nesting,"Vector")["$==="]($case)?($truthy(self.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),els=$send(self,"collect2",[v],(($$229=function(v1,v2){null==$$229.$$s||$$229.$$s;return null==v1&&(v1=nil),null==v2&&(v2=nil),$rb_plus(v1,v2)}).$$s=self,$$229.$$arity=2,$$229)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_plus($$($nesting,"Matrix").$column_vector(self),v):self.$apply_through_coercion(v,"+")},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$-",$Vector_to_s$255=function(v){var $$231,$case,els,self=this;return $case=v,$$($nesting,"Vector")["$==="]($case)?($truthy(self.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),els=$send(self,"collect2",[v],(($$231=function(v1,v2){null==$$231.$$s||$$231.$$s;return null==v1&&(v1=nil),null==v2&&(v2=nil),$rb_minus(v1,v2)}).$$s=self,$$231.$$arity=2,$$231)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_minus($$($nesting,"Matrix").$column_vector(self),v):self.$apply_through_coercion(v,"-")},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$/",$Vector_to_s$255=function(x){var $$233,$case,els,self=this;return $case=x,$$($nesting,"Numeric")["$==="]($case)?(els=$send(self.elements,"collect",[],(($$233=function(e){null==$$233.$$s||$$233.$$s;return null==e&&(e=nil),$rb_divide(e,x)}).$$s=self,$$233.$$arity=1,$$233)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)||$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Vector").$Raise($$($nesting,"ErrOperationNotDefined"),"/",self.$class(),x.$class()):self.$apply_through_coercion(x,"/")},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$+@",$Vector_to_s$255=function(){return this},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$-@",$Vector_to_s$255=function(){var $$236;return $send(this,"collect",[],(($$236=function(e){null==$$236.$$s||$$236.$$s;return null==e&&(e=nil),e["$-@"]()}).$$s=this,$$236.$$arity=1,$$236))},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$inner_product",$Vector_to_s$255=function(v){var $$238,p=nil;return $truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),p=0,$send(this,"each2",[v],(($$238=function(v1,v2){null==$$238.$$s||$$238.$$s;return null==v1&&(v1=nil),null==v2&&(v2=nil),p=$rb_plus(p,$rb_times(v1,v2.$conj()))}).$$s=this,$$238.$$arity=2,$$238)),p},$Vector_to_s$255.$$arity=1),$Vector_inspect$256.$alias_method("dot","inner_product"),Opal.def($Vector_inspect$256,"$cross_product",$Vector_to_s$255=function($a){var $$240,$$241,$case,rows,self=this,v=nil,vs=Opal.slice.call(arguments,0,arguments.length);return $truthy($rb_ge(self.$size(),2))||self.$raise($$($nesting,"ErrOperationNotDefined"),"cross product is not defined on vectors of dimension "+self.$size()),vs.$size()["$=="]($rb_minus(self.$size(),2))||self.$raise($$($nesting,"ArgumentError"),"wrong number of arguments ("+vs.$size()+" for "+$rb_minus(self.$size(),2)+")"),$send(vs,"each",[],(($$240=function(v){var self=null==$$240.$$s?this:$$240.$$s;return null==v&&(v=nil),$truthy(v["$is_a?"]($$($nesting,"Vector")))||self.$raise($$($nesting,"TypeError"),"expected Vector, got "+v.$class()),v.$size()["$=="](self.$size())?nil:$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=self,$$240.$$arity=1,$$240)),$case=self.$size(),2["$==="]($case)?$$($nesting,"Vector")["$[]"](self.elements["$[]"](1)["$-@"](),self.elements["$[]"](0)):3["$==="]($case)?(v=vs["$[]"](0),$$($nesting,"Vector")["$[]"]($rb_minus($rb_times(v["$[]"](2),self.elements["$[]"](1)),$rb_times(v["$[]"](1),self.elements["$[]"](2))),$rb_minus($rb_times(v["$[]"](0),self.elements["$[]"](2)),$rb_times(v["$[]"](2),self.elements["$[]"](0))),$rb_minus($rb_times(v["$[]"](1),self.elements["$[]"](0)),$rb_times(v["$[]"](0),self.elements["$[]"](1))))):(rows=[self].concat(Opal.to_a(vs)).concat([$send($$($nesting,"Array"),"new",[self.$size()],(($$241=function(i){var self=null==$$241.$$s?this:$$241.$$s;return null==i&&(i=nil),$$($nesting,"Vector").$basis($hash2(["size","index"],{size:self.$size(),index:i}))}).$$s=self,$$241.$$arity=1,$$241))]),$$($nesting,"Matrix").$rows(rows).$laplace_expansion($hash2(["row"],{row:$rb_minus(self.$size(),1)})))},$Vector_to_s$255.$$arity=-1),$Vector_inspect$256.$alias_method("cross","cross_product"),Opal.def($Vector_inspect$256,"$collect",$Vector_collect$242=function(){var els,$iter=$Vector_collect$242.$$p,block=$iter||nil;return $iter&&($Vector_collect$242.$$p=null),$iter&&($Vector_collect$242.$$p=null),block===nil?this.$to_enum("collect"):(els=$send(this.elements,"collect",[],block.$to_proc()),this.$class().$elements(els,!1))},$Vector_collect$242.$$arity=0),$alias($Vector_inspect$256,"map","collect"),Opal.def($Vector_inspect$256,"$magnitude",$Vector_to_s$255=function(){var $$244;return $$($nesting,"Math").$sqrt($send(this.elements,"inject",[0],(($$244=function(v,e){null==$$244.$$s||$$244.$$s;return null==v&&(v=nil),null==e&&(e=nil),$rb_plus(v,e.$abs2())}).$$s=this,$$244.$$arity=2,$$244)))},$Vector_to_s$255.$$arity=0),$alias($Vector_inspect$256,"r","magnitude"),$alias($Vector_inspect$256,"norm","magnitude"),Opal.def($Vector_inspect$256,"$map2",$Vector_map2$245=function(v){var els,$iter=$Vector_map2$245.$$p,block=$iter||nil;return $iter&&($Vector_map2$245.$$p=null),$iter&&($Vector_map2$245.$$p=null),block===nil?this.$to_enum("map2",v):(els=$send(this,"collect2",[v],block.$to_proc()),this.$class().$elements(els,!1))},$Vector_map2$245.$$arity=1),function($base,$super,$parent_nesting){[$klass($base,$super,"ZeroVectorError")].concat($parent_nesting)}($nesting[0],$$($nesting,"StandardError"),$nesting),Opal.def($Vector_inspect$256,"$normalize",$Vector_to_s$255=function(){var n=nil;return(n=this.$magnitude())["$=="](0)&&this.$raise($$($nesting,"ZeroVectorError"),"Zero vectors can not be normalized"),$rb_divide(this,n)},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$angle_with",$Vector_to_s$255=function(v){var prod=nil;return $truthy(v["$is_a?"]($$($nesting,"Vector")))||this.$raise($$($nesting,"TypeError"),"Expected a Vector, got a "+v.$class()),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),(prod=$rb_times(this.$magnitude(),v.$magnitude()))["$=="](0)&&this.$raise($$($nesting,"ZeroVectorError"),"Can't get angle of zero vector"),$$($nesting,"Math").$acos($rb_divide(this.$inner_product(v),prod))},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$covector",$Vector_to_s$255=function(){return $$($nesting,"Matrix").$row_vector(this)},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$to_a",$Vector_to_s$255=function(){return this.elements.$dup()},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$to_matrix",$Vector_to_s$255=function(){return $$($nesting,"Matrix").$column_vector(this)},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$elements_to_f",$Vector_to_s$255=function(){return this.$warn("Vector#elements_to_f is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_f".$to_proc())},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$elements_to_i",$Vector_to_s$255=function(){return this.$warn("Vector#elements_to_i is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_i".$to_proc())},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$elements_to_r",$Vector_to_s$255=function(){return this.$warn("Vector#elements_to_r is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_r".$to_proc())},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$coerce",$Vector_to_s$255=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?[$$$($$($nesting,"Matrix"),"Scalar").$new(other),self]:self.$raise($$($nesting,"TypeError"),self.$class()+" can't be coerced into "+other.$class())},$Vector_to_s$255.$$arity=1),Opal.def($Vector_inspect$256,"$to_s",$Vector_to_s$255=function(){return $rb_plus($rb_plus("Vector[",this.elements.$join(", ")),"]")},$Vector_to_s$255.$$arity=0),Opal.def($Vector_inspect$256,"$inspect",$Vector_inspect$256=function(){return $rb_plus("Vector",this.elements.$inspect())},$Vector_inspect$256.$$arity=0),nil&&"inspect"}($nesting[0],$nesting)};
