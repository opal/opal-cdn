Opal.modules["nashorn/file"]=function(Opal){var $klass=Opal.klass,$defs=Opal.defs,self=Opal.top;Opal.nil;return Opal.add_stubs("require"),self.$require("corelib/file"),function($base,$super){var self=$klass($base,null,"File");return $defs(self,"$read",(function(path){var Paths=Java.type("java.nio.file.Paths"),lines=Java.type("java.nio.file.Files").readAllLines(Paths.get(path),Java.type("java.nio.charset.StandardCharsets").UTF_8),data=[];return lines.forEach((function(line){data.push(line)})),data.join("\n")}),1),$defs(self,"$file?",(function(path){var Files=Java.type("java.nio.file.Files");return Files.exists(path)&&Files.isRegularFile(path)}),1),$defs(self,"$readable?",(function(path){var Files=Java.type("java.nio.file.Files");return Files.exists(path)&&Files.isReadable(path)}),1)}([][0])},Opal.modules["nashorn/io"]=function(Opal){var $a,$gvars=Opal.gvars,$send=Opal.send,nil=Opal.nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==$gvars.stderr&&($gvars.stderr=nil),Opal.add_stubs("write_proc="),$gvars.stdout["$write_proc="]((function(s){print(s)})),$a=[function(s){print(s)}],$send($gvars.stderr,"write_proc=",$a),$a[$a.length-1]},Opal.modules["corelib/file"]=function(Opal){var $truthy=Opal.truthy,$klass=Opal.klass,$const_set=Opal.const_set,$Opal=Opal.Opal,$regexp=Opal.regexp,$rb_plus=Opal.rb_plus,$def=Opal.def,$Kernel=Opal.Kernel,$eqeq=Opal.eqeq,$rb_lt=Opal.rb_lt,$rb_minus=Opal.rb_minus,$range=Opal.range,$send=Opal.send,$slice=Opal.slice,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"File"),$nesting=[self].concat($parent_nesting),windows_root_rx=nil;return $const_set($nesting[0],"Separator",$const_set($nesting[0],"SEPARATOR","/")),$const_set($nesting[0],"ALT_SEPARATOR",nil),$const_set($nesting[0],"PATH_SEPARATOR",":"),$const_set($nesting[0],"FNM_SYSCASE",0),windows_root_rx=/^[a-zA-Z]:(?:\\|\/)/,function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function $coerce_to_path(path){return $truthy(path["$respond_to?"]("to_path"))&&(path=path.$to_path()),path=$Opal["$coerce_to!"](path,$$$("String"),"to_str")}function $sep_chars(){return $$("ALT_SEPARATOR")===nil?Opal.escape_regexp($$("SEPARATOR")):Opal.escape_regexp($rb_plus($$("SEPARATOR"),$$("ALT_SEPARATOR")))}return $def(self,"$absolute_path",(function(path,basedir){var sep,sep_chars,$ret_or_1,path_abs,basedir_abs,part,new_parts=nil,parts=nil,leading_sep=nil,abs=nil,new_path=nil;null==basedir&&(basedir=nil),sep=$$("SEPARATOR"),sep_chars=$sep_chars(),new_parts=[],path=$truthy(path["$respond_to?"]("to_path"))?path.$to_path():path,path=$Opal["$coerce_to!"](path,$$$("String"),"to_str"),basedir=$truthy($ret_or_1=basedir)?$ret_or_1:$$$("Dir").$pwd(),path_abs=path.substr(0,sep.length)===sep||windows_root_rx.test(path),basedir_abs=basedir.substr(0,sep.length)===sep||windows_root_rx.test(basedir),$truthy(path_abs)?(parts=path.$split($regexp(["[",sep_chars,"]"])),leading_sep=windows_root_rx.test(path)?"":path.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),abs=!0):(parts=$rb_plus(basedir.$split($regexp(["[",sep_chars,"]"])),path.$split($regexp(["[",sep_chars,"]"]))),leading_sep=windows_root_rx.test(basedir)?"":basedir.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),abs=basedir_abs);for(var i=0,ii=parts.length;i<ii;i++)(part=parts[i])===nil||""===part&&(0===new_parts.length||abs)||"."===part&&(0===new_parts.length||abs)||(".."===part?new_parts.pop():new_parts.push(part));return abs||"."===parts[0]||new_parts.$unshift("."),new_path=new_parts.$join(sep),$truthy(abs)&&(new_path=$rb_plus(leading_sep,new_path)),new_path}),-2),$def(self,"$expand_path",(function(path,basedir){var sep,sep_chars,home=nil,leading_sep=nil,home_path_regexp=nil;return null==basedir&&(basedir=nil),sep=$$("SEPARATOR"),sep_chars=$sep_chars(),$truthy("~"===path[0]||basedir&&"~"===basedir[0])&&(home=$$("Dir").$home(),$truthy(home)||$Kernel.$raise($$$("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),leading_sep=windows_root_rx.test(home)?"":home.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),$truthy(home["$start_with?"](leading_sep))||$Kernel.$raise($$$("ArgumentError"),"non-absolute home"),home=$rb_plus(home,sep),home_path_regexp=$regexp(["^\\~(?:",sep,"|$)"]),path=path.$sub(home_path_regexp,home),$truthy(basedir)&&(basedir=basedir.$sub(home_path_regexp,home))),this.$absolute_path(path,basedir)}),-2),$def(self,"$dirname",(function(path,level){var sep_chars;if(null==level&&(level=1),$eqeq(level,0))return path;$truthy($rb_lt(level,0))&&$Kernel.$raise($$$("ArgumentError"),"level can't be negative"),sep_chars=$sep_chars();var out,absolute=(path=$coerce_to_path(path)).match(new RegExp("^["+sep_chars+"]"));return out=""===(path=(path=(path=path.replace(new RegExp("["+sep_chars+"]+$"),"")).replace(new RegExp("[^"+sep_chars+"]+$"),"")).replace(new RegExp("["+sep_chars+"]+$"),""))?absolute?"/":".":path,1==level?out:this.$dirname(out,$rb_minus(level,1))}),-2),$def(self,"$basename",(function(name,suffix){var sep_chars;return null==suffix&&(suffix=nil),sep_chars=$sep_chars(),0==(name=$coerce_to_path(name)).length||(suffix=suffix!==nil?$Opal["$coerce_to!"](suffix,$$$("String"),"to_str"):null,name=(name=name.replace(new RegExp("(.)["+sep_chars+"]*$"),"$1")).replace(new RegExp("^(?:.*["+sep_chars+"])?([^"+sep_chars+"]+)$"),"$1"),".*"===suffix?name=name.replace(/\.[^\.]+$/,""):null!==suffix&&(suffix=Opal.escape_regexp(suffix),name=name.replace(new RegExp(suffix+"$"),""))),name}),-2),$def(self,"$extname",(function(path){var filename=nil,last_dot_idx=nil;return path=$coerce_to_path(path),filename=this.$basename(path),$truthy(filename["$empty?"]())?"":(last_dot_idx=filename["$[]"]($range(1,-1,!1)).$rindex("."),$truthy(last_dot_idx["$nil?"]())||$eqeq($rb_plus(last_dot_idx,1),$rb_minus(filename.$length(),1))?"":filename["$[]"](Opal.Range.$new($rb_plus(last_dot_idx,1),-1,!1)))}),1),$def(self,"$exist?",(function(path){return null!=Opal.modules[path]}),1),$def(self,"$directory?",(function(path){var files=nil;for(var key in files=[],Opal.modules)files.push(key);return path=path.$gsub($regexp(["(^.",$$("SEPARATOR"),"+|",$$("SEPARATOR"),"+$)"])),$send(files,"find",[],(function(f){return null==f&&(f=nil),f["$=~"]($regexp(["^",path]))}),1)}),1),$def(self,"$join",(function($a){var $post_args,paths,result=nil;return $post_args=$slice.call(arguments),$truthy((paths=$post_args)["$empty?"]())?"":(result="",paths=$send(paths.$flatten().$each_with_index(),"map",[],(function(item,index){return null==item&&(item=nil),null==index&&(index=nil),$eqeq(index,0)&&$truthy(item["$empty?"]())||$eqeq(paths.$length(),$rb_plus(index,1))&&$truthy(item["$empty?"]())?$$("SEPARATOR"):item}),2),paths=$send(paths,"reject",[],"empty?".$to_proc()),$send(paths,"each_with_index",[],(function(item,index){var next_item=nil;return null==item&&(item=nil),null==index&&(index=nil),next_item=paths["$[]"]($rb_plus(index,1)),$truthy(next_item["$nil?"]())?result=""+result+item:($truthy(item["$end_with?"]($$("SEPARATOR")))&&$truthy(next_item["$start_with?"]($$("SEPARATOR")))&&(item=item.$sub($regexp([$$("SEPARATOR"),"+$"]),"")),result=$truthy(item["$end_with?"]($$("SEPARATOR")))||$truthy(next_item["$start_with?"]($$("SEPARATOR")))?""+result+item:""+result+item+$$("SEPARATOR"))}),2),result)}),-1),$def(self,"$split",(function(path){return path.$split($$("SEPARATOR"))}),1),$alias(self,"realpath","expand_path"),$alias(self,"exists?","exist?")}(Opal.get_singleton_class(self),$nesting)}(0,$$$("IO"),[])},Opal.queue((function(Opal){var $module=Opal.module,self=Opal.top;Opal.nil;return Opal.add_stubs("require"),$module([][0],"Nashorn"),self.$require("nashorn/io"),self.$require("nashorn/file")}));
