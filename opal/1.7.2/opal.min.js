(function(global_object){"use strict";var console,nil,BasicObject,_Object,Module,Class,_Opal,Kernel;if("undefined"!=typeof globalThis?global_object=globalThis:"undefined"!=typeof global?global_object=global:"undefined"!=typeof window&&(global_object=window),null==global_object.console&&(global_object.console={}),"log"in(console="object"==typeof global_object.console?global_object.console:{})||(console.log=function(){}),"warn"in console||(console.warn=console.log),void 0!==global_object.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),global_object.Opal;var Opal=global_object.Opal={};Opal.global=global_object,Opal.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var $call=Function.prototype.call,$bind=Function.prototype.bind,$has_own=Object.hasOwn||$call.bind(Object.prototype.hasOwnProperty),$set_proto=Object.setPrototypeOf,$slice=$call.bind(Array.prototype.slice),$splice=$call.bind(Array.prototype.splice),unique_id=4;function $uid(){return unique_id+=2}Opal.uid=$uid,Opal.id=function(obj){return obj.$$is_number?2*obj+1:(null==obj.$$id&&$prop(obj,"$$id",$uid()),obj.$$id)};var $gvars=Opal.gvars={};function $raise(klass,message){if(klass||(klass=Opal.Exception||Error),!Kernel||!Kernel.$raise)throw klass.$new?klass.$new(message):new klass(message);arguments.length>2?Kernel.$raise(klass.$new.apply(klass,$slice(arguments,1))):Kernel.$raise(klass,message)}function $prop(object,name,initialValue){"string"==typeof object?object[name]=initialValue:Object.defineProperty(object,name,{value:initialValue,enumerable:!1,configurable:!0,writable:!0})}Opal.exit=function(status){$gvars.DEBUG&&console.log("Exited with status "+status)},Opal.exceptions=[],Opal.pop_exception=function(){var exception=Opal.exceptions.pop();exception?($gvars["!"]=exception,$gvars["@"]=exception.$backtrace()):$gvars["!"]=$gvars["@"]=nil},Opal.prop=$prop,Opal.defineProperty=Opal.prop,Opal.slice=$slice;var $truthy=Opal.truthy=function(val){return!(!1===val||nil===val||null==val||val instanceof Boolean&&!0!==val.valueOf())};function invoke_tracers_for_class(klass_or_module){var i,ii,tracer;for(i=0,ii=Opal.tracers_for_class.length;i<ii;i++)(tracer=Opal.tracers_for_class[i]).trace_object=klass_or_module,tracer.block.$call(tracer)}function handle_autoload(cref,name){if(cref.$$autoload[name].loaded){if(cref.$$autoload[name].loaded&&!cref.$$autoload[name].required&&cref.$$autoload[name].exception)throw cref.$$autoload[name].exception}else{cref.$$autoload[name].loaded=!0;try{Opal.Kernel.$require(cref.$$autoload[name].path)}catch(e){throw cref.$$autoload[name].exception=e,e}if(cref.$$autoload[name].required=!0,null!=cref.$$const[name])return cref.$$autoload[name].success=!0,cref.$$const[name]}}function const_get_name(cref,name){if(cref){if(null!=cref.$$const[name])return cref.$$const[name];if(cref.$$autoload&&cref.$$autoload[name])return handle_autoload(cref,name)}}function const_lookup_ancestors(cref,name){var i,ii,ancestors;if(null!=cref)for(i=0,ii=(ancestors=$ancestors(cref)).length;i<ii;i++){if(ancestors[i].$$const&&$has_own(ancestors[i].$$const,name))return ancestors[i].$$const[name];if(ancestors[i].$$autoload&&ancestors[i].$$autoload[name])return handle_autoload(ancestors[i],name)}}function const_missing(cref,name){return(cref||_Object).$const_missing(name)}function $const_set(cref,name,value){var new_const=!0;return null!=cref&&"::"!==cref||(cref=_Object),value.$$is_a_module&&(null!=value.$$name&&value.$$name!==nil||(value.$$name=name),null==value.$$base_module&&(value.$$base_module=cref)),cref.$$const=cref.$$const||Object.create(null),(name in cref.$$const||"$$autoload"in cref&&name in cref.$$autoload)&&(new_const=!1),cref.$$const[name]=value,cref.$$=cref.$$const,Opal.const_cache_version++,cref===_Object&&(Opal[name]=value),$prop(cref,name,value),new_const&&cref.$const_added&&!cref.$const_added.$$pristine&&cref.$const_added(name),value}function $allocate_class(name,superclass,singleton){var klass;if(klass=null!=superclass&&superclass.$$bridge?function(){var args=$slice(arguments),self=new($bind.apply(superclass.$$constructor,[null].concat(args)));return $set_proto(self,klass.$$prototype),self}:function(){},name&&name!==nil&&$prop(klass,"displayName","::"+name),$prop(klass,"$$name",name),$prop(klass,"$$constructor",klass),$prop(klass,"$$prototype",klass.prototype),$prop(klass,"$$const",{}),$prop(klass,"$$is_class",!0),$prop(klass,"$$is_a_module",!0),$prop(klass,"$$super",superclass),$prop(klass,"$$cvars",{}),$prop(klass,"$$own_included_modules",[]),$prop(klass,"$$own_prepended_modules",[]),$prop(klass,"$$ancestors",[]),$prop(klass,"$$ancestors_cache_version",null),$prop(klass,"$$subclasses",[]),$prop(klass.$$prototype,"$$class",klass),Opal.Class&&$set_proto(klass,Opal.Class.prototype),null!=superclass){if($set_proto(klass.$$prototype,superclass.$$prototype),!0!==singleton)if("undefined"!=typeof WeakRef){var i,subclass,rebuilt_subclasses=[];for(i=0;i<superclass.$$subclasses.length;i++)void 0!==(subclass=superclass.$$subclasses[i]).deref()&&rebuilt_subclasses.push(subclass);rebuilt_subclasses.push(new WeakRef(klass)),superclass.$$subclasses=rebuilt_subclasses}else superclass.$$subclasses.push(klass);superclass.$$meta&&Opal.build_class_singleton_class(klass)}return klass}function $allocate_module(name){var constructor=function(){},module=constructor;return name&&$prop(constructor,"displayName",name+".constructor"),$prop(module,"$$name",name),$prop(module,"$$prototype",constructor.prototype),$prop(module,"$$const",{}),$prop(module,"$$is_module",!0),$prop(module,"$$is_a_module",!0),$prop(module,"$$cvars",{}),$prop(module,"$$iclasses",[]),$prop(module,"$$own_included_modules",[]),$prop(module,"$$own_prepended_modules",[]),$prop(module,"$$ancestors",[module]),$prop(module,"$$ancestors_cache_version",null),$set_proto(module,Opal.Module.prototype),module}function set_meta(obj,meta){obj.hasOwnProperty("$$meta")?obj.$$meta=meta:$prop(obj,"$$meta",meta),obj.$$frozen?obj.$$meta.$freeze():$set_proto(obj,meta.$$prototype)}function isRoot(proto){return proto.hasOwnProperty("$$iclass")&&proto.hasOwnProperty("$$root")}function create_iclass(module){var iclass=create_dummy_iclass(module);return module.$$is_module&&module.$$iclasses.push(iclass),iclass}function create_dummy_iclass(module){var iclass={},proto=module.$$prototype;proto.hasOwnProperty("$$dummy")&&(proto=proto.$$define_methods_on);var i,props=Object.getOwnPropertyNames(proto),length=props.length;for(i=0;i<length;i++){var prop=props[i];$prop(iclass,prop,proto[prop])}return $prop(iclass,"$$iclass",!0),$prop(iclass,"$$module",module),iclass}function chain_iclasses(iclasses){var length=iclasses.length,first=iclasses[0];if($prop(first,"$$root",!0),1===length)return{first:first,last:first};for(var previous=first,i=1;i<length;i++){var current=iclasses[i];$set_proto(previous,current),previous=current}return{first:iclasses[0],last:iclasses[length-1]}}function protoToModule(proto){if(!proto.hasOwnProperty("$$dummy"))return proto.hasOwnProperty("$$iclass")?proto.$$module:proto.hasOwnProperty("$$class")?proto.$$class:void 0}function $ancestors(module){if(!module)return[];if(module.$$ancestors_cache_version===Opal.const_cache_version)return module.$$ancestors;var i,mods,length,result=[];for(i=0,mods=function(module){return module.$$own_prepended_modules.concat([module]).concat(module.$$own_included_modules)}(module),length=mods.length;i<length;i++)result.push(mods[i]);if(module.$$super)for(i=0,length=(mods=$ancestors(module.$$super)).length;i<length;i++)result.push(mods[i]);return module.$$ancestors_cache_version=Opal.const_cache_version,module.$$ancestors=result,result}function get_ancestors(obj){return obj.hasOwnProperty("$$meta")&&null!==obj.$$meta?$ancestors(obj.$$meta):$ancestors(obj.$$class)}function apply_blockopts(block,blockopts){"number"==typeof blockopts?block.$$arity=blockopts:"object"==typeof blockopts&&Object.assign(block,blockopts)}Opal.falsy=function(val){return!$truthy(val)},Opal.type_error=function(object,type,method,coerced){object=object.$$class,coerced&&method?(coerced=coerced.$$class,$raise(Opal.TypeError,"can't convert "+object+" into "+type+" ("+object+"#"+method+" gives "+coerced+")")):$raise(Opal.TypeError,"no implicit conversion of "+object+" into "+type)},Opal.coerce_to=function(object,type,method,args){var body;return"to_int"===method&&type===Opal.Integer&&object.$$is_number?object<0?Math.ceil(object):Math.floor(object):"to_str"===method&&type===Opal.String&&object.$$is_string||Opal.is_a(object,type)?object:object["$respond_to?"].$$pristine&&object.$method_missing.$$pristine?((null==(body=object[$jsid(method)])||body.$$stub)&&Opal.type_error(object,type),body.apply(object,args)):(object["$respond_to?"](method)||Opal.type_error(object,type),null==args&&(args=[]),Opal.send(object,method,args))},Opal.respond_to=function(obj,jsid,include_all){if(null==obj||!obj.$$class)return!1;include_all=!!include_all;var body=obj[jsid];return obj["$respond_to?"].$$pristine?"function"==typeof body&&!body.$$stub||(obj["$respond_to_missing?"].$$pristine?void 0:Opal.send(obj,obj["$respond_to_missing?"],[jsid.substr(1),include_all])):Opal.send(obj,obj["$respond_to?"],[jsid.substr(1),include_all])},Opal.trace_class=!1,Opal.tracers_for_class=[],Opal.const_get_local=function(cref,name,skip_missing){var result;if(null!=cref)return"::"===cref&&(cref=_Object),cref.$$is_module||cref.$$is_class||$raise(Opal.TypeError,cref.toString()+" is not a class/module"),null!=(result=const_get_name(cref,name))||skip_missing?result:const_missing(cref,name)},Opal.const_get_qualified=function(cref,name,skip_missing){var result,cache,cached,current_version=Opal.const_cache_version;return null==name?null!=(result=const_get_name(_Object,cref))?result:Opal.const_get_qualified(_Object,cref,skip_missing):null!=cref?("::"===cref&&(cref=_Object),cref.$$is_module||cref.$$is_class||$raise(Opal.TypeError,cref.toString()+" is not a class/module"),null==(cache=cref.$$const_cache)&&($prop(cref,"$$const_cache",Object.create(null)),cache=cref.$$const_cache),null==(cached=cache[name])||cached[0]!==current_version?(null!=(result=const_get_name(cref,name))||(result=const_lookup_ancestors(cref,name)),cache[name]=[current_version,result]):result=cached[1],null!=result||skip_missing?result:const_missing(cref,name)):void 0},Opal.const_cache_version=1,Opal.const_get_relative=function(nesting,name,skip_missing){var result,cache,cached,cref=nesting[0],current_version=Opal.const_cache_version;return null==(cache=nesting.$$const_cache)&&($prop(nesting,"$$const_cache",Object.create(null)),cache=nesting.$$const_cache),null==(cached=cache[name])||cached[0]!==current_version?(null!=(result=const_get_name(cref,name))||null!=(result=function(nesting,name){var i,ii,constant;if(0!==nesting.length)for(i=0,ii=nesting.length;i<ii;i++){if(null!=(constant=nesting[i].$$const[name]))return constant;if(nesting[i].$$autoload&&nesting[i].$$autoload[name])return handle_autoload(nesting[i],name)}}(nesting,name))||null!=(result=const_lookup_ancestors(cref,name))||(result=function(cref,name){if(null==cref||cref.$$is_module)return const_lookup_ancestors(_Object,name)}(cref,name)),cache[name]=[current_version,result]):result=cached[1],null!=result||skip_missing?result:const_missing(cref,name)},Opal.const_set=$const_set,Opal.constants=function(cref,inherit){null==inherit&&(inherit=!0);var module,i,ii,constant,modules=[cref],constants={};for(inherit&&(modules=modules.concat($ancestors(cref))),inherit&&cref.$$is_module&&(modules=modules.concat([Opal.Object]).concat($ancestors(Opal.Object))),i=0,ii=modules.length;i<ii&&(module=modules[i],cref===_Object||module!=_Object);i++){for(constant in module.$$const)constants[constant]=!0;if(module.$$autoload)for(constant in module.$$autoload)constants[constant]=!0}return Object.keys(constants)},Opal.const_remove=function(cref,name){if(Opal.const_cache_version++,null!=cref.$$const[name]){var old=cref.$$const[name];return delete cref.$$const[name],old}if(cref.$$autoload&&cref.$$autoload[name])return delete cref.$$autoload[name],nil;$raise(Opal.NameError,"constant "+cref+"::"+cref.$name()+" not defined")},Opal.const_get_relative_factory=function(nesting){return function(name,skip_missing){return Opal.$$(nesting,name,skip_missing)}},Opal.$$=Opal.const_get_relative,Opal.$$$=Opal.const_get_qualified,Opal.$r=Opal.const_get_relative_factory,Opal.allocate_class=$allocate_class,Opal.klass=function(scope,superclass,name){var bridged;null==scope||"::"==scope?scope=_Object:scope.$$is_class||scope.$$is_module||(scope=scope.$$class),null==superclass||superclass.hasOwnProperty&&(!superclass.hasOwnProperty||superclass.hasOwnProperty("$$is_class"))||(superclass.constructor&&"Function"==superclass.constructor.name?(bridged=superclass,superclass=_Object):$raise(Opal.TypeError,"superclass must be a Class ("+(superclass.constructor&&(superclass.constructor.name||superclass.constructor.$$name)||typeof superclass)+" given)"));var klass=function(scope,name){var klass=const_get_name(scope,name);if(klass)return klass.$$is_class||$raise(Opal.TypeError,name+" is not a class"),klass}(scope,name);return null!=klass?superclass&&function(klass,superclass){klass.$$super!==superclass&&$raise(Opal.TypeError,"superclass mismatch for class "+klass.$$name)}(klass,superclass):(null==superclass&&(superclass=_Object),$const_set(scope,name,klass=$allocate_class(name,superclass)),superclass.$inherited&&superclass.$inherited(klass),bridged&&Opal.bridge(bridged,klass)),Opal.trace_class&&invoke_tracers_for_class(klass),klass},Opal.allocate_module=$allocate_module,Opal.module=function(scope,name){var module;return null==scope||"::"==scope?scope=_Object:scope.$$is_class||scope.$$is_module||(scope=scope.$$class),module=function(scope,name){var module=const_get_name(scope,name);return null==module&&scope===_Object&&(module=const_lookup_ancestors(_Object,name)),module&&(module.$$is_module||module===_Object||$raise(Opal.TypeError,name+" is not a module")),module}(scope,name),null==module&&$const_set(scope,name,module=$allocate_module(name)),Opal.trace_class&&invoke_tracers_for_class(module),module},Opal.get_singleton_class=function(object){return object.$$meta?object.$$meta:object.hasOwnProperty("$$is_class")?Opal.build_class_singleton_class(object):object.hasOwnProperty("$$is_module")?Opal.build_module_singleton_class(object):Opal.build_object_singleton_class(object)},Opal.build_class_singleton_class=function(klass){if(klass.$$meta)return klass.$$meta;var meta=$allocate_class(null,klass===BasicObject?Class:Opal.get_singleton_class(klass.$$super),!0);return $prop(meta,"$$is_singleton",!0),$prop(meta,"$$singleton_of",klass),set_meta(klass,meta),$prop(klass,"$$class",Opal.Class),meta},Opal.build_module_singleton_class=function(mod){if(mod.$$meta)return mod.$$meta;var meta=$allocate_class(null,Opal.Module,!0);return $prop(meta,"$$is_singleton",!0),$prop(meta,"$$singleton_of",mod),set_meta(mod,meta),$prop(mod,"$$class",Opal.Module),meta},Opal.build_object_singleton_class=function(object){var superclass=object.$$class,klass=$allocate_class(nil,superclass,!0);return $prop(klass,"$$is_singleton",!0),$prop(klass,"$$singleton_of",object),delete klass.$$prototype.$$class,set_meta(object,klass),klass},Opal.is_method=function(prop){return"$"===prop[0]&&"$"!==prop[1]},Opal.instance_methods=function(mod){for(var exclude=[],results=[],ancestors=$ancestors(mod),i=0,l=ancestors.length;i<l;i++){var proto=ancestors[i].$$prototype;proto.hasOwnProperty("$$dummy")&&(proto=proto.$$define_methods_on);for(var props=Object.getOwnPropertyNames(proto),j=0,ll=props.length;j<ll;j++){var prop=props[j];if(Opal.is_method(prop)){var method_name=prop.slice(1),method=proto[prop];method.$$stub&&-1===exclude.indexOf(method_name)&&exclude.push(method_name),method.$$stub||-1!==results.indexOf(method_name)||-1!==exclude.indexOf(method_name)||results.push(method_name)}}}return results},Opal.own_instance_methods=function(mod){var results=[],proto=mod.$$prototype;proto.hasOwnProperty("$$dummy")&&(proto=proto.$$define_methods_on);for(var props=Object.getOwnPropertyNames(proto),i=0,length=props.length;i<length;i++){var prop=props[i];if(Opal.is_method(prop))if(!proto[prop].$$stub){var method_name=prop.slice(1);results.push(method_name)}}return results},Opal.methods=function(obj){return Opal.instance_methods(obj.$$meta||obj.$$class)},Opal.own_methods=function(obj){return obj.$$meta?Opal.own_instance_methods(obj.$$meta):[]},Opal.receiver_methods=function(obj){var mod=Opal.get_singleton_class(obj),singleton_methods=Opal.own_instance_methods(mod),instance_methods=Opal.own_instance_methods(mod.$$super);return singleton_methods.concat(instance_methods)},Opal.class_variables=function(module){var i,ancestors=$ancestors(module),result={};for(i=ancestors.length-1;i>=0;i--){var ancestor=ancestors[i];for(var cvar in ancestor.$$cvars)result[cvar]=ancestor.$$cvars[cvar]}return result},Opal.class_variable_set=function(module,name,value){var i,ancestors=$ancestors(module);for(i=ancestors.length-2;i>=0;i--){var ancestor=ancestors[i];if($has_own(ancestor.$$cvars,name))return ancestor.$$cvars[name]=value,value}return module.$$cvars[name]=value,value},Opal.class_variable_get=function(module,name,tolerant){if($has_own(module.$$cvars,name))return module.$$cvars[name];var i,ancestors=$ancestors(module),length=ancestors.length;for(i=0;i<length;i++){var ancestor=ancestors[i];if($has_own(ancestor.$$cvars,name))return ancestor.$$cvars[name]}return tolerant||$raise(Opal.NameError,"uninitialized class variable "+name+" in "+module.$name()),nil},Opal.append_features=function(module,includer){var module_ancestors=$ancestors(module),iclasses=[];-1!==module_ancestors.indexOf(includer)&&$raise(Opal.ArgumentError,"cyclic include detected");for(var i=0,length=module_ancestors.length;i<length;i++){var iclass=create_iclass(module_ancestors[i]);$prop(iclass,"$$included",!0),iclasses.push(iclass)}var start_chain_after,end_chain_on,includer_ancestors=$ancestors(includer),chain=chain_iclasses(iclasses);if(-1===includer_ancestors.indexOf(module))start_chain_after=includer.$$prototype,end_chain_on=Object.getPrototypeOf(includer.$$prototype);else{for(var parent=includer.$$prototype,module_iclass=Object.getPrototypeOf(parent);null!=module_iclass&&(module_iclass.$$module!==module||!isRoot(module_iclass));)parent=module_iclass,module_iclass=Object.getPrototypeOf(module_iclass);if(module_iclass){for(var next_ancestor=Object.getPrototypeOf(module_iclass);next_ancestor.hasOwnProperty("$$iclass")&&!isRoot(next_ancestor);)next_ancestor=Object.getPrototypeOf(next_ancestor);start_chain_after=parent,end_chain_on=next_ancestor}else start_chain_after=includer.$$prototype,end_chain_on=Object.getPrototypeOf(includer.$$prototype)}$set_proto(start_chain_after,chain.first),$set_proto(chain.last,end_chain_on),includer.$$own_included_modules=function(module){for(var mod,result=[],proto=Object.getPrototypeOf(module.$$prototype);proto&&!proto.hasOwnProperty("$$class");)(mod=protoToModule(proto))&&result.push(mod),proto=Object.getPrototypeOf(proto);return result}(includer),Opal.const_cache_version++},Opal.prepend_features=function(module,prepender){var module_ancestors=$ancestors(module),iclasses=[];-1!==module_ancestors.indexOf(prepender)&&$raise(Opal.ArgumentError,"cyclic prepend detected");for(var i=0,length=module_ancestors.length;i<length;i++){var iclass=create_iclass(module_ancestors[i]);$prop(iclass,"$$prepended",!0),iclasses.push(iclass)}var prepender_iclass,start_chain_after,end_chain_on,chain=chain_iclasses(iclasses),dummy_prepender=prepender.$$prototype,previous_parent=Object.getPrototypeOf(dummy_prepender);if(dummy_prepender.hasOwnProperty("$$dummy")?prepender_iclass=dummy_prepender.$$define_methods_on:(prepender_iclass=create_dummy_iclass(prepender),function(module){for(var proto=module.$$prototype,props=Object.getOwnPropertyNames(proto),i=0;i<props.length;i++){var prop=props[i];Opal.is_method(prop)&&delete proto[prop]}}(prepender),$prop(dummy_prepender,"$$dummy",!0),$prop(dummy_prepender,"$$define_methods_on",prepender_iclass),$set_proto(dummy_prepender,prepender_iclass),$set_proto(prepender_iclass,previous_parent)),-1===$ancestors(prepender).indexOf(module))for(start_chain_after=dummy_prepender,end_chain_on=Object.getPrototypeOf(dummy_prepender);null!=end_chain_on&&!end_chain_on.hasOwnProperty("$$root")&&end_chain_on!==prepender_iclass&&end_chain_on.hasOwnProperty("$$iclass");)end_chain_on=Object.getPrototypeOf(end_chain_on);else $raise(Opal.RuntimeError,"Prepending a module multiple times is not supported");$set_proto(start_chain_after,chain.first),$set_proto(chain.last,end_chain_on),prepender.$$own_prepended_modules=function(module){var mod,result=[],proto=Object.getPrototypeOf(module.$$prototype);if(module.$$prototype.hasOwnProperty("$$dummy"))for(;proto&&proto!==module.$$prototype.$$define_methods_on;)(mod=protoToModule(proto))&&result.push(mod),proto=Object.getPrototypeOf(proto);return result}(prepender),Opal.const_cache_version++},Opal.bridge=function(native_klass,klass){native_klass.hasOwnProperty("$$bridge")&&$raise(Opal.ArgumentError,"already bridged"),$prop(native_klass,"$$bridge",klass),$set_proto(native_klass.prototype,(klass.$$super||Opal.Object).$$prototype),$prop(klass,"$$prototype",native_klass.prototype),$prop(klass.$$prototype,"$$class",klass),$prop(klass,"$$constructor",native_klass),$prop(klass,"$$bridge",!0)},Opal.ancestors=$ancestors,Opal.included_modules=function(module){for(var result=[],mod=null,proto=Object.getPrototypeOf(module.$$prototype);proto&&Object.getPrototypeOf(proto);proto=Object.getPrototypeOf(proto))(mod=protoToModule(proto))&&mod.$$is_module&&proto.$$iclass&&proto.$$included&&result.push(mod);return result},Opal.add_stubs=function(stubs){for(var stub,existing_method,proto=Opal.BasicObject.$$prototype,i=0,length=(stubs=stubs.split(",")).length;i<length;i++)(null==(existing_method=proto[stub=$jsid(stubs[i])])||existing_method.$$stub)&&Opal.add_stub_for(proto,stub)},Opal.add_stub_for=function(prototype,stub){$prop(prototype,stub,Opal.stub_for(stub))},Opal.stub_for=function(method_name){function method_missing_stub(){this.$method_missing.$$p=method_missing_stub.$$p,method_missing_stub.$$p=null;for(var args_ary=new Array(arguments.length),i=0,l=args_ary.length;i<l;i++)args_ary[i]=arguments[i];return this.$method_missing.apply(this,[method_name.slice(1)].concat(args_ary))}return method_missing_stub.$$stub=!0,method_missing_stub},Opal.ac=function(actual,expected,object,meth){var inspect="";object.$$is_a_module?inspect+=object.$$name+".":inspect+=object.$$class.$$name+"#",inspect+=meth,$raise(Opal.ArgumentError,"["+inspect+"] wrong number of arguments (given "+actual+", expected "+expected+")")},Opal.block_ac=function(actual,expected,context){var inspect="`block in "+context+"'";$raise(Opal.ArgumentError,inspect+": wrong number of arguments (given "+actual+", expected "+expected+")")},Opal.find_super=function(obj,mid,current_func,defcheck,allow_stubs){for(var ancestors,super_method,jsid=$jsid(mid),i=(ancestors=get_ancestors(obj)).indexOf(current_func.$$owner)+1;i<ancestors.length;i++){var proto=ancestors[i].$$prototype;if(proto.hasOwnProperty("$$dummy")&&(proto=proto.$$define_methods_on),proto.hasOwnProperty(jsid)){super_method=proto[jsid];break}}return!defcheck&&super_method&&super_method.$$stub&&obj.$method_missing.$$pristine&&$raise(Opal.NoMethodError,"super: no superclass method `"+mid+"' for "+obj,mid),super_method.$$stub&&!allow_stubs?null:super_method},Opal.find_block_super=function(obj,jsid,current_func,defcheck,implicit){var call_jsid=jsid;return current_func||$raise(Opal.RuntimeError,"super called outside of method"),implicit&&current_func.$$define_meth&&$raise(Opal.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),current_func.$$def&&(call_jsid=current_func.$$jsid),Opal.find_super(obj,call_jsid,current_func,defcheck)},Opal.find_super_dispatcher=Opal.find_super,Opal.find_iter_super_dispatcher=Opal.find_block_super,Opal.yield1=function(block,arg){"function"!=typeof block&&$raise(Opal.LocalJumpError,"no block given");var has_mlhs=block.$$has_top_level_mlhs_arg,has_trailing_comma=block.$$has_trailing_comma_in_args;return(block.length>1||(has_mlhs||has_trailing_comma)&&1===block.length)&&(arg=Opal.to_ary(arg)),(block.length>1||has_trailing_comma&&1===block.length)&&arg.$$is_array?block.apply(null,arg):block(arg)},Opal.yieldX=function(block,args){if("function"!=typeof block&&$raise(Opal.LocalJumpError,"no block given"),block.length>1&&1===args.length&&args[0].$$is_array)return block.apply(null,args[0]);if(!args.$$is_array){for(var args_ary=new Array(args.length),i=0,l=args_ary.length;i<l;i++)args_ary[i]=args[i];return block.apply(null,args_ary)}return block.apply(null,args)},Opal.rescue=function(exception,candidates){for(var i=0;i<candidates.length;i++){var candidate=candidates[i];if(candidate.$$is_array){var result=Opal.rescue(exception,candidate);if(result)return result}else if(candidate===Opal.JS.Error||candidate["$==="](exception))return candidate}return null},Opal.is_a=function(object,klass){return null!=klass&&object.$$meta===klass||object.$$class===klass||(object.$$is_number&&klass.$$is_number_class?!klass.$$is_integer_class||object%1==0:-1!==$ancestors(object.$$is_class?Opal.get_singleton_class(object):object.$$meta||object.$$class).indexOf(klass))},Opal.to_hash=function(value){if(value.$$is_hash)return value;if(value["$respond_to?"]("to_hash",!0)){var hash=value.$to_hash();if(hash.$$is_hash)return hash;$raise(Opal.TypeError,"Can't convert "+value.$$class+" to Hash ("+value.$$class+"#to_hash gives "+hash.$$class+")")}else $raise(Opal.TypeError,"no implicit conversion of "+value.$$class+" into Hash")},Opal.to_ary=function(value){if(value.$$is_array)return value;if(!value["$respond_to?"]("to_ary",!0))return[value];var ary=value.$to_ary();return ary===nil?[value]:ary.$$is_array?ary:void $raise(Opal.TypeError,"Can't convert "+value.$$class+" to Array ("+value.$$class+"#to_ary gives "+ary.$$class+")")},Opal.to_a=function(value){if(value.$$is_array)return value.slice();if(!value["$respond_to?"]("to_a",!0))return[value];var ary=value.$to_a();return ary===nil?[value]:ary.$$is_array?ary:void $raise(Opal.TypeError,"Can't convert "+value.$$class+" to Array ("+value.$$class+"#to_a gives "+ary.$$class+")")},Opal.extract_kwargs=function(parameters){var kwargs=parameters[parameters.length-1];if(null!=kwargs&&Opal.respond_to(kwargs,"$to_hash",!0))return $splice(parameters,parameters.length-1),kwargs},Opal.kwrestargs=function(given_args,used_args){var key,keys=[],map={},given_map=given_args.$$smap;for(key in given_map)used_args[key]||(keys.push(key),map[key]=given_map[key]);return Opal.hash2(keys,map)};var jsid_cache={};function $jsid(name){return jsid_cache[name]||(jsid_cache[name]="$"+name)}function is_method_body(body){return"function"==typeof body&&!body.$$stub}Opal.jsid=$jsid,Opal.send=function(recv,method,args,block,blockopts){var body;return"function"==typeof method?(body=method,method=null):"string"==typeof method?body=recv[$jsid(method)]:$raise(Opal.NameError,"Passed method should be a string or a function"),Opal.send2(recv,body,method,args,block,blockopts)},Opal.send2=function(recv,body,method,args,block,blockopts){return null==body&&null!=method&&recv.$method_missing&&(body=recv.$method_missing,args=[method].concat(args)),apply_blockopts(block,blockopts),"function"==typeof block&&(body.$$p=block),body.apply(recv,args)},Opal.refined_send=function(refinement_groups,recv,method,args,block,blockopts){var i,j,k,ancestors,ancestor,refinements,refinement,refine_modules,refine_module,body;for(ancestors=get_ancestors(recv),i=0;i<ancestors.length;i++)for(ancestor=Opal.id(ancestors[i]),j=0;j<refinement_groups.length;j++)for(k=(refinements=refinement_groups[j]).length-1;k>=0;k--)if(void 0!==(refinement=refinements[k]).$$refine_modules&&void 0!==(refine_modules=refinement.$$refine_modules)[ancestor]&&void 0!==(refine_module=refine_modules[ancestor]).$$prototype[$jsid(method)])return body=refine_module.$$prototype[$jsid(method)],Opal.send2(recv,body,method,args,block,blockopts);return Opal.send(recv,method,args,block,blockopts)},Opal.lambda=function(block,blockopts){return block.$$is_lambda=!0,apply_blockopts(block,blockopts),block},Opal.def=function(obj,jsid,body,blockopts){return apply_blockopts(body,blockopts),obj===Opal.top?Opal.defn(Opal.Object,jsid,body):!obj.$$eval&&obj.$$is_a_module?Opal.defn(obj,jsid,body):Opal.defs(obj,jsid,body)},Opal.defn=function(module,jsid,body){$deny_frozen_access(module),body.displayName=jsid,body.$$owner=module;var name=jsid.substr(1),proto=module.$$prototype;if(proto.hasOwnProperty("$$dummy")&&(proto=proto.$$define_methods_on),$prop(proto,jsid,body),module.$$is_module){module.$$module_function&&Opal.defs(module,jsid,body);for(var i=0,iclasses=module.$$iclasses,length=iclasses.length;i<length;i++){$prop(iclasses[i],jsid,body)}}var singleton_of=module.$$singleton_of;return!module.$method_added||module.$method_added.$$stub||singleton_of?singleton_of&&singleton_of.$singleton_method_added&&!singleton_of.$singleton_method_added.$$stub&&singleton_of.$singleton_method_added(name):module.$method_added(name),name},Opal.defs=function(obj,jsid,body,blockopts){return apply_blockopts(body,blockopts),(obj.$$is_string||obj.$$is_number)&&$raise(Opal.TypeError,"can't define singleton"),Opal.defn(Opal.get_singleton_class(obj),jsid,body)},Opal.rdef=function(obj,jsid){$has_own(obj.$$prototype,jsid)||$raise(Opal.NameError,"method '"+jsid.substr(1)+"' not defined in "+obj.$name()),delete obj.$$prototype[jsid],obj.$$is_singleton?obj.$$prototype.$singleton_method_removed&&!obj.$$prototype.$singleton_method_removed.$$stub&&obj.$$prototype.$singleton_method_removed(jsid.substr(1)):obj.$method_removed&&!obj.$method_removed.$$stub&&obj.$method_removed(jsid.substr(1))},Opal.udef=function(obj,jsid){obj.$$prototype[jsid]&&!obj.$$prototype[jsid].$$stub||$raise(Opal.NameError,"method '"+jsid.substr(1)+"' not defined in "+obj.$name()),Opal.add_stub_for(obj.$$prototype,jsid),obj.$$is_singleton?obj.$$prototype.$singleton_method_undefined&&!obj.$$prototype.$singleton_method_undefined.$$stub&&obj.$$prototype.$singleton_method_undefined(jsid.substr(1)):obj.$method_undefined&&!obj.$method_undefined.$$stub&&obj.$method_undefined(jsid.substr(1))},Opal.alias=function(obj,name,old){var body,alias,id=$jsid(name),old_id=$jsid(old);if(void 0===obj.$$prototype&&(obj=Opal.Object),body=obj.$$prototype[old_id],obj.$$eval)return Opal.alias(Opal.get_singleton_class(obj),name,old);if(!is_method_body(body)){for(var ancestor=obj.$$super;"function"!=typeof body&&ancestor;)body=ancestor[old_id],ancestor=ancestor.$$super;!is_method_body(body)&&obj.$$is_module&&(body=Opal.Object.$$prototype[old_id]),is_method_body(body)||$raise(Opal.NameError,"undefined method `"+old+"' for class `"+obj.$name()+"'")}body.$$alias_of&&(body=body.$$alias_of),alias=function(){var args,i,ii,block=alias.$$p;for(args=new Array(arguments.length),i=0,ii=arguments.length;i<ii;i++)args[i]=arguments[i];return alias.$$p=null,Opal.send(this,body,args,block)};try{Object.defineProperty(alias,"length",{value:body.length})}catch(e){}return alias.displayName=name,alias.$$arity=null==body.$$arity?body.length:body.$$arity,alias.$$parameters=body.$$parameters,alias.$$source_location=body.$$source_location,alias.$$alias_of=body,alias.$$alias_name=name,Opal.defn(obj,id,alias),obj},Opal.alias_gvar=function(new_name,old_name){return Object.defineProperty($gvars,new_name,{configurable:!0,enumerable:!0,get:function(){return $gvars[old_name]},set:function(new_value){$gvars[old_name]=new_value}}),nil},Opal.alias_native=function(obj,name,native_name){var id=$jsid(name),body=obj.$$prototype[native_name];return("function"!=typeof body||body.$$stub)&&$raise(Opal.NameError,"undefined native method `"+native_name+"' for class `"+obj.$name()+"'"),Opal.defn(obj,id,body),obj},Opal.hash_init=function(hash){hash.$$smap=Object.create(null),hash.$$map=Object.create(null),hash.$$keys=[]},Opal.hash_clone=function(from_hash,to_hash){to_hash.$$none=from_hash.$$none,to_hash.$$proc=from_hash.$$proc;for(var key,value,i=0,keys=from_hash.$$keys,smap=from_hash.$$smap,len=keys.length;i<len;i++)(key=keys[i]).$$is_string?value=smap[key]:(value=key.value,key=key.key),Opal.hash_put(to_hash,key,value)},Opal.hash_put=function(hash,key,value){if(key.$$is_string)return $has_own(hash.$$smap,key)||hash.$$keys.push(key),void(hash.$$smap[key]=value);var key_hash,bucket,last_bucket;if(key_hash=hash.$$by_identity?Opal.id(key):key.$hash(),!$has_own(hash.$$map,key_hash))return bucket={key:key,key_hash:key_hash,value:value},hash.$$keys.push(bucket),void(hash.$$map[key_hash]=bucket);for(bucket=hash.$$map[key_hash];bucket;){if(key===bucket.key||key["$eql?"](bucket.key)){last_bucket=void 0,bucket.value=value;break}last_bucket=bucket,bucket=bucket.next}last_bucket&&(bucket={key:key,key_hash:key_hash,value:value},hash.$$keys.push(bucket),last_bucket.next=bucket)},Opal.hash_get=function(hash,key){if(key.$$is_string)return $has_own(hash.$$smap,key)?hash.$$smap[key]:void 0;var key_hash,bucket;if(key_hash=hash.$$by_identity?Opal.id(key):key.$hash(),$has_own(hash.$$map,key_hash))for(bucket=hash.$$map[key_hash];bucket;){if(key===bucket.key||key["$eql?"](bucket.key))return bucket.value;bucket=bucket.next}},Opal.hash_delete=function(hash,key){var i,value,key_tmp,keys=hash.$$keys,length=keys.length;if(key.$$is_string){if("string"!=typeof key&&(key=key.valueOf()),!$has_own(hash.$$smap,key))return;for(i=0;i<length;i++)if((key_tmp=keys[i]).$$is_string&&"string"!=typeof key_tmp&&(key_tmp=key_tmp.valueOf()),key_tmp===key){keys.splice(i,1);break}return value=hash.$$smap[key],delete hash.$$smap[key],value}var key_hash=key.$hash();if($has_own(hash.$$map,key_hash))for(var last_bucket,bucket=hash.$$map[key_hash];bucket;){if(key===bucket.key||key["$eql?"](bucket.key)){for(value=bucket.value,i=0;i<length;i++)if(keys[i]===bucket){keys.splice(i,1);break}return last_bucket&&bucket.next?last_bucket.next=bucket.next:last_bucket?delete last_bucket.next:bucket.next?hash.$$map[key_hash]=bucket.next:delete hash.$$map[key_hash],value}last_bucket=bucket,bucket=bucket.next}},Opal.hash_rehash=function(hash){for(var key_hash,bucket,last_bucket,i=0,length=hash.$$keys.length;i<length;i++)if(!hash.$$keys[i].$$is_string&&(key_hash=hash.$$keys[i].key.$hash())!==hash.$$keys[i].key_hash){for(bucket=hash.$$map[hash.$$keys[i].key_hash],last_bucket=void 0;bucket;){if(bucket===hash.$$keys[i]){last_bucket&&bucket.next?last_bucket.next=bucket.next:last_bucket?delete last_bucket.next:bucket.next?hash.$$map[hash.$$keys[i].key_hash]=bucket.next:delete hash.$$map[hash.$$keys[i].key_hash];break}last_bucket=bucket,bucket=bucket.next}if(hash.$$keys[i].key_hash=key_hash,$has_own(hash.$$map,key_hash)){for(bucket=hash.$$map[key_hash],last_bucket=void 0;bucket;){if(bucket===hash.$$keys[i]){last_bucket=void 0;break}last_bucket=bucket,bucket=bucket.next}last_bucket&&(last_bucket.next=hash.$$keys[i])}else hash.$$map[key_hash]=hash.$$keys[i]}},Opal.hash=function(){var args,hash,i,length,key,value,arguments_length=arguments.length;if(1===arguments_length&&arguments[0].$$is_hash)return arguments[0];if(hash=new Opal.Hash,Opal.hash_init(hash),1===arguments_length){if(args=arguments[0],arguments[0].$$is_array){for(length=args.length,i=0;i<length;i++)2!==args[i].length&&$raise(Opal.ArgumentError,"value not of length 2: "+args[i].$inspect()),key=args[i][0],value=args[i][1],Opal.hash_put(hash,key,value);return hash}for(key in args=arguments[0])$has_own(args,key)&&(value=args[key],Opal.hash_put(hash,key,value));return hash}for(arguments_length%2!=0&&$raise(Opal.ArgumentError,"odd number of arguments for Hash"),i=0;i<arguments_length;i+=2)key=arguments[i],value=arguments[i+1],Opal.hash_put(hash,key,value);return hash},Opal.hash2=function(keys,smap){var hash=new Opal.Hash;return hash.$$smap=smap,hash.$$map=Object.create(null),hash.$$keys=keys,hash},Opal.range=function(first,last,exc){var range=new Opal.Range;return range.begin=first,range.end=last,range.excl=exc,range};var reserved_ivar_names=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];function $deny_frozen_access(obj){obj.$$frozen&&$raise(Opal.FrozenError,"can't modify frozen "+obj.$class()+": "+obj,Opal.hash2(["receiver"],{receiver:obj}))}function are_both_numbers(l,r){return"number"==typeof l&&"number"==typeof r}function are_both_numbers_or_strings(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs||"string"==typeof lhs&&"string"==typeof rhs}function $return_val(arg){return function(){return arg}}Opal.ivar=function(name){return-1!==reserved_ivar_names.indexOf(name)&&(name+="$"),name},Opal.deny_frozen_access=$deny_frozen_access,Opal.freeze=function(obj){return $prop(obj,"$$frozen",!0),obj.hasOwnProperty("$$id")||$prop(obj,"$$id",$uid()),obj.hasOwnProperty("$$meta")?obj.$$meta.$freeze():$prop(obj,"$$meta",null),obj.hasOwnProperty("$$comparable")||$prop(obj,"$$comparable",null),Object.seal(obj),obj},Opal.freeze_props=function(obj){var prop,prop_type,desc;for(prop in obj)("string"!==(prop_type=typeof prop)&&"object"!==prop_type||"$"!==prop[0])&&(desc=Object.getOwnPropertyDescriptor(obj,prop))&&desc.enumerable&&desc.writable&&function(){var cv=obj[prop];Object.defineProperty(obj,prop,{get:function(){return cv},set:function(_val){$deny_frozen_access(obj)},enumerable:!0})}()},Opal.escape_regexp=function(str){return str.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},Opal.global_regexp=function(pattern){return pattern.global?pattern:(null==pattern.$$g?pattern.$$g=new RegExp(pattern.source,(pattern.multiline?"gm":"g")+(pattern.ignoreCase?"i":"")):pattern.$$g.lastIndex=null,pattern.$$g)},Opal.global_multiline_regexp=function(pattern){var result,flags;return pattern.global&&pattern.multiline?pattern:(flags="gm"+(pattern.ignoreCase?"i":""),pattern.multiline?(null==pattern.$$g&&(pattern.$$g=new RegExp(pattern.source,flags)),result=pattern.$$g):(null==pattern.$$gm&&(pattern.$$gm=new RegExp(pattern.source,flags)),result=pattern.$$gm),result.lastIndex=null,result)},Opal.regexp=function(parts,flags){for(var part,ignoreCase=void 0!==flags&&flags&&flags.indexOf("i")>=0,i=0,ii=parts.length;i<ii;i++)(part=parts[i])instanceof RegExp&&(part.ignoreCase!==ignoreCase&&Opal.Kernel.$warn("ignore case doesn't match for "+part.source.$inspect(),Opal.hash({uplevel:1})),part=part.source),""===part&&(part="(?:"+part+")"),parts[i]=part;return flags?new RegExp(parts.join(""),flags):new RegExp(parts.join(""))},Opal.modules={},Opal.loaded_features=["corelib/runtime"],Opal.current_dir=".",Opal.require_table={"corelib/runtime":!0},Opal.normalize=function(path){var parts,part,new_parts=[];"."!==Opal.current_dir&&(path=Opal.current_dir.replace(/\/*$/,"/")+path);for(var i=0,ii=(parts=(path=(path=path.replace(/^\.\//,"")).replace(/\.(rb|opal|js)$/,"")).split("/")).length;i<ii;i++)""!==(part=parts[i])&&(".."===part?new_parts.pop():new_parts.push(part));return new_parts.join("/")},Opal.loaded=function(paths){var i,l,path;for(i=0,l=paths.length;i<l;i++)path=Opal.normalize(paths[i]),Opal.require_table[path]||(Opal.loaded_features.push(path),Opal.require_table[path]=!0)},Opal.load_normalized=function(path){Opal.loaded([path]);var module=Opal.modules[path];if(module){var retval=module(Opal);if("undefined"!=typeof Promise&&retval instanceof Promise)return retval.then($return_val(!0))}else{var severity=Opal.config.missing_require_severity,message="cannot load such file -- "+path;"error"===severity?$raise(Opal.LoadError,message):"warning"===severity&&console.warn("WARNING: LoadError: "+message)}return!0},Opal.load=function(path){return path=Opal.normalize(path),Opal.load_normalized(path)},Opal.require=function(path){return path=Opal.normalize(path),!Opal.require_table[path]&&Opal.load_normalized(path)},Opal.encodings=Object.create(null),Opal.set_encoding=function(str,name,type){void 0===type&&(type="encoding"),"string"!=typeof str&&!0!==str.$$frozen||$raise(Opal.FrozenError,"can't modify frozen String");var encoding=Opal.find_encoding(name);return encoding===str[type]||(str[type]=encoding),str},Opal.find_encoding=function(name){var register=Opal.encodings,encoding=register[name]||register[name.toUpperCase()];return encoding||$raise(Opal.ArgumentError,"unknown encoding name - "+name),encoding},Opal.enc=function(str,name){var dup=new String(str);return(dup=Opal.set_encoding(dup,name)).internal_encoding=dup.encoding,dup},Opal.binary=function(str){var dup=new String(str);return Opal.set_encoding(dup,"binary","internal_encoding")},Opal.last_promise=null,Opal.promise_unhandled_exception=!1,Opal.queue=function(proc){if(Opal.last_promise)return Opal.last_promise=Opal.last_promise.then((function(){if(!Opal.promise_unhandled_exception)return proc(Opal)})).catch((function(error){Opal.respond_to(error,"$full_message")&&(error=error.$full_message()),console.error(error),Opal.promise_unhandled_exception=!0,Opal.exit(1)})),Opal.last_promise;var ret=proc(Opal);return"function"==typeof Promise&&"object"==typeof ret&&ret instanceof Promise&&(Opal.last_promise=ret),ret},Opal.rb_plus=function(l,r){return are_both_numbers(l,r)?l+r:l["$+"](r)},Opal.rb_minus=function(l,r){return are_both_numbers(l,r)?l-r:l["$-"](r)},Opal.rb_times=function(l,r){return are_both_numbers(l,r)?l*r:l["$*"](r)},Opal.rb_divide=function(l,r){return are_both_numbers(l,r)?l/r:l["$/"](r)},Opal.rb_lt=function(l,r){return are_both_numbers(l,r)?l<r:l["$<"](r)},Opal.rb_gt=function(l,r){return are_both_numbers(l,r)?l>r:l["$>"](r)},Opal.rb_le=function(l,r){return are_both_numbers(l,r)?l<=r:l["$<="](r)},Opal.rb_ge=function(l,r){return are_both_numbers(l,r)?l>=r:l["$>="](r)},Opal.eqeq=function(lhs,rhs){return are_both_numbers_or_strings(lhs,rhs)?lhs===rhs:$truthy(lhs["$=="](rhs))},Opal.eqeqeq=function(lhs,rhs){return are_both_numbers_or_strings(lhs,rhs)?lhs===rhs:$truthy(lhs["$==="](rhs))},Opal.neqeq=function(lhs,rhs){return are_both_numbers_or_strings(lhs,rhs)?lhs!==rhs:$truthy(lhs["$!="](rhs))},Opal.not=function(arg){return null==arg||!1===arg||nil===arg||!0!==arg&&!arg["$!"].$$pristine&&$truthy(arg["$!"]())},Opal.return_val=$return_val,Opal.return_self=function(){return this},Opal.return_ivar=function(ivar){return function(){return null==this[ivar]?nil:this[ivar]}},Opal.assign_ivar=function(ivar){return function(val){return $deny_frozen_access(this),this[ivar]=val}},Opal.assign_ivar_val=function(ivar,static_val){return function(){return $deny_frozen_access(this),this[ivar]=static_val}},Opal.ensure_kwargs=function(kwargs){return null==kwargs?Opal.hash2([],{}):kwargs.$$is_hash?kwargs:void $raise(Opal.ArgumentError,"expected kwargs")},Opal.get_kwarg=function(kwargs,key){return $has_own(kwargs.$$smap,key)||$raise(Opal.ArgumentError,"missing keyword: "+key),kwargs.$$smap[key]},Opal.large_array_unpack=function(str){var i,array=str.split(","),length=array.length;for(i=0;i<length;i++)switch(array[i][0]){case void 0:array[i]=nil;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":array[i]=+array[i]}return array},Opal.BasicObject=BasicObject=$allocate_class("BasicObject",null),Opal.Object=_Object=$allocate_class("Object",Opal.BasicObject),Opal.Module=Module=$allocate_class("Module",Opal.Object),Opal.Class=Class=$allocate_class("Class",Opal.Module),Opal.Opal=_Opal=$allocate_module("Opal"),Opal.Kernel=Kernel=$allocate_module("Kernel"),$set_proto(Opal.BasicObject,Opal.Class.$$prototype),$set_proto(Opal.Object,Opal.Class.$$prototype),$set_proto(Opal.Module,Opal.Class.$$prototype),$set_proto(Opal.Class,Opal.Class.$$prototype),BasicObject.$$const.BasicObject=BasicObject,$const_set(_Object,"BasicObject",BasicObject),$const_set(_Object,"Object",_Object),$const_set(_Object,"Module",Module),$const_set(_Object,"Class",Class),$const_set(_Object,"Opal",_Opal),$const_set(_Object,"Kernel",Kernel),BasicObject.$$class=Class,_Object.$$class=Class,Module.$$class=Class,Class.$$class=Class,_Opal.$$class=Module,Kernel.$$class=Module,$prop(_Object.$$prototype,"toString",(function(){var to_s=this.$to_s();return to_s.$$is_string&&"object"==typeof to_s?to_s.valueOf():to_s})),$prop(_Object.$$prototype,"$require",Opal.require),Opal.top=new _Object,Opal.top.$to_s=Opal.top.$inspect=$return_val("main"),Opal.top.$define_method=function top_define_method(){var args=$slice(arguments),block=top_define_method.$$p;return top_define_method.$$p=null,Opal.send(_Object,"define_method",args,block)},Opal.NilClass=$allocate_class("NilClass",Opal.Object),$const_set(_Object,"NilClass",Opal.NilClass),(nil=Opal.nil=new Opal.NilClass).$$id=4,nil.call=nil.apply=function(){$raise(Opal.LocalJumpError,"no block given")},nil.$$frozen=!0,nil.$$comparable=!1,Object.seal(nil),Opal.thrower=function(type){var thrower=new Error("unexpected "+type);return thrower.$thrower_type=type,thrower.$throw=function(value){throw null==value&&(value=nil),thrower.$v=value,thrower},thrower},Opal.t_eval_return=Opal.thrower("return"),TypeError.$$super=Error,Opal.file_sources={}}).call(this),Opal.loaded(["corelib/runtime.js"]),Opal.modules["corelib/helpers"]=function(Opal){var $type_error=Opal.type_error,$coerce_to=Opal.coerce_to,$module=Opal.module,$defs=Opal.defs,$slice=Opal.slice,$eqeqeq=Opal.eqeqeq,$Kernel=Opal.Kernel,$truthy=Opal.truthy,$Opal=Opal.Opal,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function($base){var self=$module("::","Opal");$defs(self,"$bridge",(function(constructor,klass){return Opal.bridge(constructor,klass)})),$defs(self,"$coerce_to!",(function(object,type,method,$a){var $post_args,coerced=nil;return $post_args=$slice(arguments,3),coerced=$coerce_to(object,type,method,$post_args),$eqeqeq(type,coerced)||$Kernel.$raise($type_error(object,type,method,coerced)),coerced}),-4),$defs(self,"$coerce_to?",(function(object,type,method,$a){var args,coerced=nil;return args=$slice(arguments,3),$truthy(object["$respond_to?"](method))?(coerced=$coerce_to(object,type,method,args),$truthy(coerced["$nil?"]())?nil:($eqeqeq(type,coerced)||$Kernel.$raise($type_error(object,type,method,coerced)),coerced)):nil}),-4),$defs(self,"$try_convert",(function(object,type,method){return $eqeqeq(type,object)?object:$truthy(object["$respond_to?"](method))?object.$__send__(method):nil})),$defs(self,"$compare",(function(a,b){var compare;return compare=a["$<=>"](b),$truthy(compare===nil)&&$Kernel.$raise($$$("ArgumentError"),"comparison of "+a.$class()+" with "+b.$class()+" failed"),compare})),$defs(self,"$destructure",(function(args){if(1==args.length)return args[0];if(args.$$is_array)return args;for(var args_ary=new Array(args.length),i=0,l=args_ary.length;i<l;i++)args_ary[i]=args[i];return args_ary})),$defs(self,"$respond_to?",(function(obj,method,include_all){return null==include_all&&(include_all=!1),!(null==obj||!obj.$$class)&&obj["$respond_to?"](method,include_all)}),-3),$defs(self,"$instance_variable_name!",(function(name){return name=$Opal["$coerce_to!"](name,$$$("String"),"to_str"),$truthy(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(name))||$Kernel.$raise($$$("NameError").$new("'"+name+"' is not allowed as an instance variable name",name)),name})),$defs(self,"$class_variable_name!",(function(name){return name=$Opal["$coerce_to!"](name,$$$("String"),"to_str"),$truthy(name.length<3||"@@"!==name.slice(0,2))&&$Kernel.$raise($$$("NameError").$new("`"+name+"' is not allowed as a class variable name",name)),name})),$defs(self,"$const_name?",(function(const_name){return"string"!=typeof const_name&&(const_name=$Opal["$coerce_to!"](const_name,$$$("String"),"to_str")),const_name[0]===const_name[0].toUpperCase()})),$defs(self,"$const_name!",(function(const_name){return $truthy($$$("::","String","skip_raise")?"constant":nil)&&(const_name=$Opal["$coerce_to!"](const_name,$$$("String"),"to_str")),const_name&&const_name[0]==const_name[0].toUpperCase()||this.$raise($$$("NameError"),"wrong constant name "+const_name),const_name})),$defs(self,"$pristine",(function(owner_class,$a){for(var method_names,method_name,method,i=(method_names=$slice(arguments,1)).length-1;i>=0;i--)method_name=method_names[i],(method=owner_class.$$prototype[Opal.jsid(method_name)])&&!method.$$stub&&(method.$$pristine=!0);return nil}),-2);var inspect_stack=[];return $defs(self,"$inspect",(function(value){var pushed=!1;return function(){try{try{return null===value?"null":void 0===value?"undefined":void 0===value.$$class?Object.prototype.toString.apply(value):"function"!=typeof value.$inspect||value.$inspect.$$stub||-1!==inspect_stack.indexOf(value.$__id__())?"#<"+value.$$class+":0x"+value.$__id__().$to_s(16)+">":(inspect_stack.push(value.$__id__()),pushed=!0,value.$inspect())}catch($err){if(!Opal.rescue($err,[$$$("Exception")]))throw $err;$err;try{return"#<"+value.$$class+":0x"+value.$__id__().$to_s(16)+">"}finally{Opal.pop_exception()}}}finally{pushed&&inspect_stack.pop()}}()}),-1)}()},Opal.modules["corelib/module"]=function(Opal){var self,$proto,$truthy=Opal.truthy,$coerce_to=Opal.coerce_to,$const_set=Opal.const_set,$Object=Opal.Object,$return_ivar=Opal.return_ivar,$assign_ivar=Opal.assign_ivar,$ivar=Opal.ivar,$deny_frozen_access=Opal.deny_frozen_access,$freeze=Opal.freeze,$prop=Opal.prop,$jsid=Opal.jsid,$klass=Opal.klass,$defs=Opal.defs,$send=Opal.send,$def=Opal.def,$eqeqeq=Opal.eqeqeq,$Module=Opal.Module,$Kernel=Opal.Kernel,$rb_lt=Opal.rb_lt,$rb_gt=Opal.rb_gt,$slice=Opal.slice,$to_a=Opal.to_a,$hash2=Opal.hash2,$Opal=Opal.Opal,$return_val=Opal.return_val,$eqeq=Opal.eqeq,$lambda=Opal.lambda,$range=Opal.range,$send2=Opal.send2,$find_super=Opal.find_super,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("module_eval,to_proc,===,raise,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,bind,call,class,frozen?,name,append_features,included,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,class_exec,module_exec,inspect"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Module"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$defs(self,"$allocate",(function(){var module=Opal.allocate_module(nil,(function(){}));return this!==Opal.Module&&Object.setPrototypeOf(module,this.$$prototype),module})),$def(self,"$initialize",(function $$initialize(){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,block!==nil?$send(this,"module_eval",[],block.$to_proc()):nil})),$def(self,"$===",(function(object){return!$truthy(null==object)&&Opal.is_a(object,this)})),$def(self,"$<",(function(other){$eqeqeq($Module,other)||$Kernel.$raise($$$("TypeError"),"compared with non class/module");var ancestors,i,length;if(this===other)return!1;for(i=0,length=(ancestors=Opal.ancestors(this)).length;i<length;i++)if(ancestors[i]===other)return!0;for(i=0,length=(ancestors=Opal.ancestors(other)).length;i<length;i++)if(ancestors[i]===this)return!1;return nil})),$def(self,"$<=",(function(other){var $ret_or_1;return $truthy($ret_or_1=this["$equal?"](other))?$ret_or_1:$rb_lt(this,other)})),$def(self,"$>",(function(other){return $eqeqeq($Module,other)||$Kernel.$raise($$$("TypeError"),"compared with non class/module"),$rb_lt(other,this)})),$def(self,"$>=",(function(other){var $ret_or_1;return $truthy($ret_or_1=this["$equal?"](other))?$ret_or_1:$rb_gt(this,other)})),$def(self,"$<=>",(function(other){var lt=nil;return this===other?0:$eqeqeq($Module,other)?(lt=$rb_lt(this,other),$truthy(lt["$nil?"]())?nil:$truthy(lt)?-1:1):nil})),$def(self,"$alias_method",(function(newname,oldname){return $deny_frozen_access(this),newname=$coerce_to(newname,$$$("String"),"to_str"),oldname=$coerce_to(oldname,$$$("String"),"to_str"),Opal.alias(this,newname,oldname),this})),$def(self,"$alias_native",(function(mid,jsid){return null==jsid&&(jsid=mid),$deny_frozen_access(this),Opal.alias_native(this,mid,jsid),this}),-2),$def(self,"$ancestors",(function(){return Opal.ancestors(this)})),$def(self,"$append_features",(function(includer){return $deny_frozen_access(includer),Opal.append_features(this,includer),this})),$def(self,"$attr_accessor",(function($a){var $post_args,names,self=this;return $post_args=$slice(arguments),$send(self,"attr_reader",$to_a(names=$post_args)),$send(self,"attr_writer",$to_a(names))}),-1),$def(self,"$attr",(function($a){var args,self=this;return 2!=(args=$slice(arguments)).length||!0!==args[1]&&!1!==args[1]?$send(self,"attr_reader",$to_a(args)):(self.$warn("optional boolean argument is obsoleted",$hash2(["uplevel"],{uplevel:1})),args[1]?self.$attr_accessor(args[0]):self.$attr_reader(args[0]),nil)}),-1),$def(self,"$attr_reader",(function($a){var names,self=this;names=$slice(arguments),$deny_frozen_access(self);for(var proto=self.$$prototype,i=names.length-1;i>=0;i--){var name=names[i],id=$jsid(name),ivar=$ivar(name),body=$return_ivar(ivar);Opal.prop(proto,ivar,nil),body.$$parameters=[],body.$$arity=0,Opal.defn(self,id,body)}return nil}),-1),$def(self,"$attr_writer",(function($a){var names,self=this;names=$slice(arguments),$deny_frozen_access(self);for(var proto=self.$$prototype,i=names.length-1;i>=0;i--){var name=names[i],id=$jsid(name+"="),ivar=$ivar(name),body=$assign_ivar(ivar);body.$$parameters=[["req"]],body.$$arity=1,Opal.prop(proto,ivar,nil),Opal.defn(self,id,body)}return nil}),-1),$def(self,"$autoload",(function(const$,path){return $deny_frozen_access(this),$$("Opal")["$const_name?"](const$)||$Kernel.$raise($$$("NameError"),"autoload must be constant name: "+const$),""==path&&$Kernel.$raise($$$("ArgumentError"),"empty file name"),this.$$const.hasOwnProperty(const$)||(this.$$autoload||(this.$$autoload={}),Opal.const_cache_version++,this.$$autoload[const$]={path:path,loaded:!1,required:!1,success:!1,exception:!1},this.$const_added&&!this.$const_added.$$pristine&&this.$const_added(const$)),nil})),$def(self,"$autoload?",(function(const$){if(this.$$autoload&&this.$$autoload[const$]&&!this.$$autoload[const$].required&&!this.$$autoload[const$].success)return this.$$autoload[const$].path;for(var ancestors=this.$ancestors(),i=0,length=ancestors.length;i<length;i++)if(ancestors[i].$$autoload&&ancestors[i].$$autoload[const$]&&!ancestors[i].$$autoload[const$].required&&!ancestors[i].$$autoload[const$].success)return ancestors[i].$$autoload[const$].path;return nil})),$def(self,"$class_variables",(function(){return Object.keys(Opal.class_variables(this))})),$def(self,"$class_variable_get",(function(name){return name=$Opal["$class_variable_name!"](name),Opal.class_variable_get(this,name,!1)})),$def(self,"$class_variable_set",(function(name,value){return $deny_frozen_access(this),name=$Opal["$class_variable_name!"](name),Opal.class_variable_set(this,name,value)})),$def(self,"$class_variable_defined?",(function(name){return name=$Opal["$class_variable_name!"](name),Opal.class_variables(this).hasOwnProperty(name)})),$def(self,"$const_added",$return_val(nil)),$Opal.$pristine(self,"const_added"),$def(self,"$remove_class_variable",(function(name){if($deny_frozen_access(this),name=$Opal["$class_variable_name!"](name),Opal.hasOwnProperty.call(this.$$cvars,name)){var value=this.$$cvars[name];return delete this.$$cvars[name],value}$Kernel.$raise($$$("NameError"),"cannot remove "+name+" for "+this)})),$def(self,"$constants",(function(inherit){return null==inherit&&(inherit=!0),Opal.constants(this,inherit)}),-1),$defs(self,"$constants",(function(inherit){if(null==inherit){var constant,i,ii,nesting=(this.$$nesting||[]).concat($Object),constants={};for(i=0,ii=nesting.length;i<ii;i++)for(constant in nesting[i].$$const)constants[constant]=!0;return Object.keys(constants)}return Opal.constants(this,inherit)}),-1),$defs(self,"$nesting",(function(){return this.$$nesting||[]})),$def(self,"$const_defined?",(function(name,inherit){null==inherit&&(inherit=!0),name=$$("Opal")["$const_name!"](name),$truthy(name["$=~"]($$$($Opal,"CONST_NAME_REGEXP")))||$Kernel.$raise($$$("NameError").$new("wrong constant name "+name,name));var module,i,ii,modules=[this];for(inherit&&(modules=modules.concat(Opal.ancestors(this)),this.$$is_module&&(modules=modules.concat([$Object]).concat(Opal.ancestors($Object)))),i=0,ii=modules.length;i<ii;i++){if(null!=(module=modules[i]).$$const[name])return!0;if(module.$$autoload&&module.$$autoload[name]&&!module.$$autoload[name].required&&!module.$$autoload[name].success)return!0}return!1}),-2),$def(self,"$const_get",(function(name,inherit){return null==inherit&&(inherit=!0),0===(name=$$("Opal")["$const_name!"](name)).indexOf("::")&&"::"!==name&&(name=name.slice(2)),$truthy(-1!=name.indexOf("::")&&"::"!=name)?$send(name.$split("::"),"inject",[this],(function(o,c){return null==o&&(o=nil),null==c&&(c=nil),o.$const_get(c)})):($truthy(name["$=~"]($$$($Opal,"CONST_NAME_REGEXP")))||$Kernel.$raise($$$("NameError").$new("wrong constant name "+name,name)),inherit?Opal.$$([this],name):Opal.const_get_local(this,name))}),-2),$def(self,"$const_missing",(function(name){var full_const_name;return full_const_name=$eqeq(this,$Object)?name:this+"::"+name,$Kernel.$raise($$$("NameError").$new("uninitialized constant "+full_const_name,name))})),$def(self,"$const_set",(function(name,value){return $deny_frozen_access(this),name=$Opal["$const_name!"](name),($truthy(name["$!~"]($$$($Opal,"CONST_NAME_REGEXP")))||$truthy(name["$start_with?"]("::")))&&$Kernel.$raise($$$("NameError").$new("wrong constant name "+name,name)),$const_set(this,name,value),value})),$def(self,"$public_constant",$return_val(nil)),$def(self,"$define_method",(function $$define_method(name,method){var $ret_or_1,block=$$define_method.$$p||nil,$ret_or_2=nil;if($$define_method.$$p=null,$deny_frozen_access(this),void 0===method&&block===nil&&$Kernel.$raise($$$("ArgumentError"),"tried to create a Proc object without a block"),block=$truthy($ret_or_1=block)?$ret_or_1:$eqeqeq($$$("Proc"),$ret_or_2=method)?method:$eqeqeq($$$("Method"),$ret_or_2)?method.$to_proc().$$unbound:$eqeqeq($$$("UnboundMethod"),$ret_or_2)?$lambda((function $$11($a){var args,self=null==$$11.$$s?this:$$11.$$s,bound=nil;return args=$slice(arguments),bound=method.$bind(self),$send(bound,"call",$to_a(args))}),{$$arity:-1,$$s:this}):$Kernel.$raise($$$("TypeError"),"wrong argument type "+block.$class()+" (expected Proc/Method)"),"undefined"!=typeof Proxy){Object.create(null);block.$$proxy_target=block,block=new Proxy(block,{apply:function(target,self,args){var old_name=target.$$jsid;target.$$jsid=name;try{return target.apply(self,args)}catch(e){if(e===target.$$brk||e===target.$$ret)return e.$v;throw e}finally{target.$$jsid=old_name}}})}return block.$$jsid=name,block.$$s=null,block.$$def=block,block.$$define_meth=!0,Opal.defn(this,$jsid(name),block)}),-2),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:(this.hasOwnProperty("$$base_module")||$prop(this,"$$base_module",null),$freeze(this))})),$def(self,"$remove_method",(function($a){var names,self=this;names=$slice(arguments);for(var i=0;i<names.length;i++){var name=names[i];"string"==typeof name||name.$$is_string||self.$raise($$$("TypeError"),self.$name()+" is not a symbol nor a string"),$deny_frozen_access(self),Opal.rdef(self,"$"+name)}return self}),-1),$def(self,"$singleton_class?",(function(){return!!this.$$is_singleton})),$def(self,"$include",(function($a){for(var mods,self=this,i=(mods=$slice(arguments)).length-1;i>=0;i--){var mod=mods[i];mod.$$is_module||$Kernel.$raise($$$("TypeError"),"wrong argument type "+mod.$class()+" (expected Module)"),mod.$append_features(self),mod.$included(self)}return self}),-1),$def(self,"$included_modules",(function(){return Opal.included_modules(this)})),$def(self,"$include?",(function(mod){mod.$$is_module||$Kernel.$raise($$$("TypeError"),"wrong argument type "+mod.$class()+" (expected Module)");var i,ii,mod2,ancestors=Opal.ancestors(this);for(i=0,ii=ancestors.length;i<ii;i++)if((mod2=ancestors[i])===mod&&mod2!==this)return!0;return!1})),$def(self,"$instance_method",(function(name){var meth=this.$$prototype[$jsid(name)];return meth&&!meth.$$stub||$Kernel.$raise($$$("NameError").$new("undefined method `"+name+"' for class `"+this.$name()+"'",name)),$$$("UnboundMethod").$new(this,meth.$$owner||this,meth,name)})),$def(self,"$instance_methods",(function(include_super){return null==include_super&&(include_super=!0),$truthy(include_super)?Opal.instance_methods(this):Opal.own_instance_methods(this)}),-1),$def(self,"$included",$return_val(nil)),$def(self,"$extended",$return_val(nil)),$def(self,"$extend_object",(function(object){return $deny_frozen_access(object),nil})),$def(self,"$method_added",(function($a){return $slice(arguments),nil}),-1),$def(self,"$method_removed",(function($a){return $slice(arguments),nil}),-1),$def(self,"$method_undefined",(function($a){return $slice(arguments),nil}),-1),$def(self,"$module_eval",(function $$module_eval($a){var args,$b,block=$$module_eval.$$p||nil,self=this,string=nil,file=nil,default_eval_options=nil,$ret_or_1=nil,compiling_options=nil,compiled=nil;$$module_eval.$$p=null,args=$slice(arguments),$truthy(block["$nil?"]())&&$truthy(!!Opal.compile)?($truthy($range(1,3,!1)["$cover?"](args.$size()))||$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (0 for 1..3)"),string=null==($b=[].concat($to_a(args)))[0]?nil:$b[0],file=null==$b[1]?nil:$b[1],null==$b[2]?nil:$b[2],default_eval_options=$hash2(["file","eval"],{file:$truthy($ret_or_1=file)?$ret_or_1:"(eval)",eval:!0}),compiling_options=Opal.hash({arity_check:!1}).$merge(default_eval_options),compiled=$Opal.$compile(string,compiling_options),block=$send($Kernel,"proc",[],(function $$14(){var self=null==$$14.$$s?this:$$14.$$s;return new Function("Opal,self","return "+compiled)(Opal,self)}),{$$s:self})):$truthy(args["$any?"]())&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");var result,old=block.$$s;return block.$$s=null,result=block.apply(self,[self]),block.$$s=old,result}),-1),$def(self,"$module_exec",(function $$module_exec($a){var args,block=$$module_exec.$$p||nil,self=this;$$module_exec.$$p=null,args=$slice(arguments),block===nil&&$Kernel.$raise($$$("LocalJumpError"),"no block given");var result,block_self=block.$$s;return block.$$s=null,result=block.apply(self,args),block.$$s=block_self,result}),-1),$def(self,"$method_defined?",(function(method){var body=this.$$prototype[$jsid(method)];return!!body&&!body.$$stub})),$def(self,"$module_function",(function($a){var methods,self=this;if(methods=$slice(arguments),$deny_frozen_access(self),0===methods.length)return self.$$module_function=!0,nil;for(var i=0,length=methods.length;i<length;i++){var meth=methods[i],id=$jsid(meth),func=self.$$prototype[id];Opal.defs(self,id,func)}return 1===methods.length?methods[0]:methods}),-1),$def(self,"$name",(function(){if(this.$$full_name)return this.$$full_name;for(var result=[],base=this;base;){if(base.$$name===nil||null==base.$$name)return nil;if(result.unshift(base.$$name),(base=base.$$base_module)===$Object)break}return 0===result.length?nil:this.$$full_name=result.join("::")})),$def(self,"$prepend",(function($a){var mods,self=this;0===(mods=$slice(arguments)).length&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var i=mods.length-1;i>=0;i--){var mod=mods[i];mod.$$is_module||$Kernel.$raise($$$("TypeError"),"wrong argument type "+mod.$class()+" (expected Module)"),mod.$prepend_features(self),mod.$prepended(self)}return self}),-1),$def(self,"$prepend_features",(function(prepender){return $deny_frozen_access(prepender),this.$$is_module||$Kernel.$raise($$$("TypeError"),"wrong argument type "+this.$class()+" (expected Module)"),Opal.prepend_features(this,prepender),this})),$def(self,"$prepended",$return_val(nil)),$def(self,"$remove_const",(function(name){return $deny_frozen_access(this),Opal.const_remove(this,name)})),$def(self,"$to_s",(function(){var $ret_or_1;return $truthy($ret_or_1=Opal.Module.$name.call(this))?$ret_or_1:"#<"+(this.$$is_module?"Module":"Class")+":0x"+this.$__id__().$to_s(16)+">"})),$def(self,"$undef_method",(function($a){var names,self=this;names=$slice(arguments);for(var i=0;i<names.length;i++){var name=names[i];"string"==typeof name||name.$$is_string||self.$raise($$$("TypeError"),self.$name()+" is not a symbol nor a string"),$deny_frozen_access(self),Opal.udef(self,"$"+names[i])}return self}),-1),$def(self,"$instance_variables",(function(){var consts=nil;Opal.Module.$$nesting=$nesting,consts=this.$constants();var result=[];for(var name in this)this.hasOwnProperty(name)&&"$"!==name.charAt(0)&&"constructor"!==name&&!consts["$include?"](name)&&result.push("@"+name);return result})),$def(self,"$dup",(function $$dup(){var $yield=$$dup.$$p||nil,copy=nil;return $$dup.$$p=null,(copy=$send2(this,$find_super(this,"dup",$$dup,!1,!0),"dup",[],$yield)).$copy_class_variables(this),copy.$copy_constants(this),copy})),$def(self,"$copy_class_variables",(function(other){for(var name in other.$$cvars)this.$$cvars[name]=other.$$cvars[name]})),$def(self,"$copy_constants",(function(other){var name,other_constants=other.$$const;for(name in other_constants)$const_set(this,name,other_constants[name])})),$def(self,"$refine",(function $$refine(klass){var $a,refinement_module,klass_id,block=$$refine.$$p||nil,m=nil;return $$refine.$$p=null,refinement_module=($a=[this,nil,nil])[0],m=$a[1],$a[2],klass_id=Opal.id(klass),void 0===this.$$refine_modules&&(this.$$refine_modules=Object.create(null)),(m=void 0===this.$$refine_modules[klass_id]?this.$$refine_modules[klass_id]=$$$("Refinement").$new():this.$$refine_modules[klass_id]).refinement_module=refinement_module,m.refined_class=klass,$send(m,"class_exec",[],block.$to_proc()),m})),$def(self,"$refinements",(function(){var refine_modules=this.$$refine_modules,hash=$hash2([],{});if(void 0===refine_modules)return hash;for(var id in refine_modules)hash["$[]="](refine_modules[id].refined_class,refine_modules[id]);return hash})),$def(self,"$using",(function(mod){return $Kernel.$raise("Module#using is not permitted in methods")})),$alias(self,"class_eval","module_eval"),$alias(self,"class_exec","module_exec"),$alias(self,"inspect","to_s")}(0,0,[]),self=$klass("::",$Module,"Refinement"),($proto=self.$$prototype).refinement_module=$proto.refined_class=nil,self.$attr_reader("refined_class"),$def(self,"$inspect",(function $$inspect(){var $yield=$$inspect.$$p||nil;return $$inspect.$$p=null,$truthy(this.refinement_module)?"#<refinement:"+this.refined_class.$inspect()+"@"+this.refinement_module.$inspect()+">":$send2(this,$find_super(this,"inspect",$$inspect,!1,!0),"inspect",[],$yield)}))},Opal.modules["corelib/class"]=function(Opal){var $klass=Opal.klass,$send=Opal.send,$defs=Opal.defs,$def=Opal.def,$rb_plus=Opal.rb_plus,$return_val=Opal.return_val,$slice=Opal.slice,$send2=Opal.send2,$find_super=Opal.find_super,$Kernel=Opal.Kernel,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,class_eval,to_proc,+,subclasses,flatten,map,initialize_copy,allocate,name,to_s,raise"),self.$require("corelib/module"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Class"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $defs(self,"$new",(function $Class_new$1(superclass){var block=$Class_new$1.$$p||nil;if($Class_new$1.$$p=null,null==superclass&&(superclass=$$("Object")),!superclass.$$is_class)throw Opal.TypeError.$new("superclass must be a Class");var klass=Opal.allocate_class(nil,superclass);return superclass.$inherited(klass),block!==nil&&$send(klass,"class_eval",[],block.$to_proc()),klass}),-1),$def(self,"$allocate",(function(){var obj=new this.$$constructor;return obj.$$id=Opal.uid(),obj})),$def(self,"$descendants",(function(){return $rb_plus(this.$subclasses(),$send(this.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())})),$def(self,"$inherited",$return_val(nil)),$def(self,"$initialize_dup",(function(original){this.$initialize_copy(original),this.$$name=null,this.$$full_name=null})),$def(self,"$new",(function $Class_new$2($a){var args,block=$Class_new$2.$$p||nil,self=this;$Class_new$2.$$p=null,args=$slice(arguments);var object=self.$allocate();return Opal.send(object,object.$initialize,args,block),object}),-1),$def(self,"$subclasses",(function(){if("undefined"!=typeof WeakRef){var i,subclass,out=[];for(i=0;i<this.$$subclasses.length;i++)void 0!==(subclass=this.$$subclasses[i].deref())&&out.push(subclass);return out}return this.$$subclasses})),$def(self,"$superclass",(function(){return this.$$super||nil})),$def(self,"$to_s",(function $$to_s(){$$to_s.$$p=null;var singleton_of=this.$$singleton_of;return singleton_of&&singleton_of.$$is_a_module?"#<Class:"+singleton_of.$name()+">":singleton_of?"#<Class:#<"+singleton_of.$$class.$name()+":0x"+Opal.id(singleton_of).$to_s(16)+">>":$send2(this,$find_super(this,"to_s",$$to_s,!1,!0),"to_s",[],null)})),$def(self,"$attached_object",(function(){if(null!=this.$$singleton_of)return this.$$singleton_of;$Kernel.$raise($$$("TypeError"),"`"+this+"' is not a singleton class")})),$alias(self,"inspect","to_s")}(0,0,[])},Opal.modules["corelib/basic_object"]=function(Opal){"use strict";var self,$klass=Opal.klass,$slice=Opal.slice,$def=Opal.def,$alias=Opal.alias,$return_val=Opal.return_val,$Opal=Opal.Opal,$truthy=Opal.truthy,$range=Opal.range,$Kernel=Opal.Kernel,$to_a=Opal.to_a,$hash2=Opal.hash2,$send=Opal.send,$eqeq=Opal.eqeq,$rb_ge=Opal.rb_ge,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),self=$klass("::",null,"BasicObject"),$def(self,"$initialize",(function($a){return $slice(arguments),nil}),-1),$def(self,"$==",(function(other){return this===other})),$def(self,"$eql?",(function(other){return this["$=="](other)})),$alias(self,"equal?","=="),$def(self,"$__id__",(function(){return null!=this.$$id||Opal.prop(this,"$$id",Opal.uid()),this.$$id})),$def(self,"$__send__",(function $$__send__(symbol,$a){var args,block=$$__send__.$$p||nil,self=this;$$__send__.$$p=null,args=$slice(arguments,1),symbol.$$is_string||self.$raise($$$("TypeError"),self.$inspect()+" is not a symbol nor a string");var func=self[Opal.jsid(symbol)];return func?(block!==nil&&(func.$$p=block),func.apply(self,args)):(block!==nil&&(self.$method_missing.$$p=block),self.$method_missing.apply(self,[symbol].concat(args)))}),-2),$def(self,"$!",$return_val(!1)),$Opal.$pristine("!"),$def(self,"$!=",(function(other){return this["$=="](other)["$!"]()})),$def(self,"$instance_eval",(function $$instance_eval($a){var args,$b,block=$$instance_eval.$$p||nil,self=this,string=nil,file=nil,default_eval_options=nil,$ret_or_1=nil,compiling_options=nil,compiled=nil;if($$instance_eval.$$p=null,args=$slice(arguments),$truthy(block["$nil?"]())&&$truthy(!!Opal.compile))$truthy($range(1,3,!1)["$cover?"](args.$size()))||$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (0 for 1..3)"),string=null==($b=[].concat($to_a(args)))[0]?nil:$b[0],file=null==$b[1]?nil:$b[1],null==$b[2]||$b[2],default_eval_options=$hash2(["file","eval"],{file:$truthy($ret_or_1=file)?$ret_or_1:"(eval)",eval:!0}),compiling_options=Opal.hash({arity_check:!1}).$merge(default_eval_options),compiled=$Opal.$compile(string,compiling_options),block=$send($Kernel,"proc",[],(function $$4(){var self=null==$$4.$$s?this:$$4.$$s;return new Function("Opal,self","return "+compiled)(Opal,self)}),{$$s:self});else{if($truthy(block["$nil?"]())&&$truthy($rb_ge(args.$length(),1))&&$eqeq(args.$first()["$[]"](0),"@"))return self.$instance_variable_get(args.$first());$truthy(args["$any?"]())&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)")}var result,old=block.$$s;if(block.$$s=null,self.$$is_a_module){self.$$eval=!0;try{result=block.call(self,self)}finally{self.$$eval=!1}}else result=block.call(self,self);return block.$$s=old,result}),-1),$def(self,"$instance_exec",(function $$instance_exec($a){var args,block=$$instance_exec.$$p||nil,self=this;$$instance_exec.$$p=null,args=$slice(arguments),$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"no block given");var result,block_self=block.$$s;if(block.$$s=null,self.$$is_a_module){self.$$eval=!0;try{result=block.apply(self,args)}finally{self.$$eval=!1}}else result=block.apply(self,args);return block.$$s=block_self,result}),-1),$def(self,"$singleton_method_added",(function($a){return $slice(arguments),nil}),-1),$def(self,"$singleton_method_removed",(function($a){return $slice(arguments),nil}),-1),$def(self,"$singleton_method_undefined",(function($a){return $slice(arguments),nil}),-1),$def(self,"$method_missing",(function $$method_missing(symbol,$a){var args,self=this,inspect_result=nil;return $$method_missing.$$p=null,args=$slice(arguments,1),inspect_result=$Opal.$inspect(self),$Kernel.$raise($$$("NoMethodError").$new("undefined method `"+symbol+"' for "+inspect_result,symbol,args),nil,$Kernel.$caller(1))}),-2),$Opal.$pristine(self,"method_missing"),$def(self,"$respond_to_missing?",(function(method_name,include_all){return null==include_all&&(include_all=!1),!1}),-2)},Opal.modules["corelib/kernel"]=function(Opal){"use strict";var self,$truthy=Opal.truthy,$coerce_to=Opal.coerce_to,$respond_to=Opal.respond_to,$Opal=Opal.Opal,$deny_frozen_access=Opal.deny_frozen_access,$freeze=Opal.freeze,$freeze_props=Opal.freeze_props,$jsid=Opal.jsid,$module=Opal.module,$return_val=Opal.return_val,$def=Opal.def,$Kernel=Opal.Kernel,$gvars=Opal.gvars,$slice=Opal.slice,$send=Opal.send,$to_a=Opal.to_a,$ensure_kwargs=Opal.ensure_kwargs,$eqeq=Opal.eqeq,$hash2=Opal.hash2,$rb_plus=Opal.rb_plus,$eqeqeq=Opal.eqeqeq,$return_self=Opal.return_self,$rb_le=Opal.rb_le,$extract_kwargs=Opal.extract_kwargs,$rb_lt=Opal.rb_lt,$Object=Opal.Object,$alias=Opal.alias,$klass=Opal.klass,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,coerce_to!,Integer,===,enum_for,result,any?,print,format,puts,<=,length,[],readline,<,first,split,to_str,exception,backtrace,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function($base,$parent_nesting){var self=$module("::","Kernel"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$=~",$return_val(!1)),$def(self,"$!~",(function(obj){return this["$=~"](obj)["$!"]()})),$def(self,"$===",(function(other){var $ret_or_1;return $truthy($ret_or_1=this.$object_id()["$=="](other.$object_id()))?$ret_or_1:this["$=="](other)})),$def(self,"$<=>",(function(other){this.$$comparable=!0;var x=this["$=="](other);return x&&x!==nil?0:nil})),$def(self,"$method",(function(name){var meth=this[$jsid(name)];return meth&&!meth.$$stub||$Kernel.$raise($$$("NameError").$new("undefined method `"+name+"' for class `"+this.$class()+"'",name)),$$$("Method").$new(this,meth.$$owner||this.$class(),meth,name)})),$def(self,"$methods",(function(all){return null==all&&(all=!0),$truthy(all)?Opal.methods(this):Opal.own_methods(this)}),-1),$def(self,"$public_methods",(function(all){return null==all&&(all=!0),$truthy(all)?Opal.methods(this):Opal.receiver_methods(this)}),-1),$def(self,"$Array",(function(object){var coerced;return object===nil?[]:object.$$is_array?object:(coerced=$Opal["$coerce_to?"](object,$$$("Array"),"to_ary"))!==nil||(coerced=$Opal["$coerce_to?"](object,$$$("Array"),"to_a"))!==nil?coerced:[object]})),$def(self,"$at_exit",(function $$at_exit(){var $ret_or_1,block=$$at_exit.$$p||nil;return null==$gvars.__at_exit__&&($gvars.__at_exit__=nil),$$at_exit.$$p=null,$gvars.__at_exit__=$truthy($ret_or_1=$gvars.__at_exit__)?$ret_or_1:[],$gvars.__at_exit__["$<<"](block),block})),$def(self,"$caller",(function(start,length){var stack,result;null==start&&(start=1),null==length&&(length=nil),result=[];for(var i=start+1,ii=(stack=(new Error).$backtrace()).length;i<ii;i++)stack[i].match(/runtime\.js/)||result.push(stack[i]);return length!=nil&&(result=result.slice(0,length)),result}),-1),$def(self,"$caller_locations",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send($send(self,"caller",$to_a($post_args)),"map",[],(function(loc){return null==loc&&(loc=nil),$$$($$$($$$("Thread"),"Backtrace"),"Location").$new(loc)}))}),-1),$def(self,"$class",(function(){return this.$$class})),$def(self,"$copy_instance_variables",(function(other){var i,ii,name,keys=Object.keys(other);for(i=0,ii=keys.length;i<ii;i++)"$"!==(name=keys[i]).charAt(0)&&other.hasOwnProperty(name)&&(this[name]=other[name])})),$def(self,"$copy_singleton_methods",(function(other){var i,name,names,length;if(other.hasOwnProperty("$$meta")&&null!==other.$$meta){var other_singleton_class=Opal.get_singleton_class(other),self_singleton_class=Opal.get_singleton_class(this);for(i=0,length=(names=Object.getOwnPropertyNames(other_singleton_class.$$prototype)).length;i<length;i++)name=names[i],Opal.is_method(name)&&(self_singleton_class.$$prototype[name]=other_singleton_class.$$prototype[name]);self_singleton_class.$$const=Object.assign({},other_singleton_class.$$const),Object.setPrototypeOf(self_singleton_class.$$prototype,Object.getPrototypeOf(other_singleton_class.$$prototype))}for(i=0,length=(names=Object.getOwnPropertyNames(other)).length;i<length;i++)"$"===(name=names[i]).charAt(0)&&"$"!==name.charAt(1)&&other.hasOwnProperty(name)&&(this[name]=other[name])})),$def(self,"$clone",(function($kwargs){var freeze,copy=nil;return null==(freeze=($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze)&&(freeze=nil),$truthy(freeze["$nil?"]())||$eqeq(freeze,!0)||$eqeq(freeze,!1)||this.$raise($$("ArgumentError"),"unexpected value for freeze: "+freeze.$class()),(copy=this.$class().$allocate()).$copy_instance_variables(this),copy.$copy_singleton_methods(this),copy.$initialize_clone(this,$hash2(["freeze"],{freeze:freeze})),($eqeq(freeze,!0)||$truthy(freeze["$nil?"]())&&$truthy(this["$frozen?"]()))&&copy.$freeze(),copy}),-1),$def(self,"$initialize_clone",(function(other,$kwargs){return null==($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze&&nil,this.$initialize_copy(other),this}),-2),$def(self,"$define_singleton_method",(function $$define_singleton_method(name,method){var block=$$define_singleton_method.$$p||nil;return $$define_singleton_method.$$p=null,$send(this.$singleton_class(),"define_method",[name,method],block.$to_proc())}),-2),$def(self,"$dup",(function(){var copy=nil;return(copy=this.$class().$allocate()).$copy_instance_variables(this),copy.$initialize_dup(this),copy})),$def(self,"$initialize_dup",(function(other){return this.$initialize_copy(other)})),$def(self,"$enum_for",(function $$enum_for($a,$b){var $post_args,method,args,block=$$enum_for.$$p||nil,self=this;return $$enum_for.$$p=null,($post_args=$slice(arguments)).length>0&&(method=$post_args.shift()),null==method&&(method="each"),args=$post_args,$send($$$("Enumerator"),"for",[self,method].concat($to_a(args)),block.$to_proc())}),-1),$def(self,"$equal?",(function(other){return this===other})),$def(self,"$exit",(function(status){var $ret_or_1;for(null==$gvars.__at_exit__&&($gvars.__at_exit__=nil),null==status&&(status=!0),$gvars.__at_exit__=$truthy($ret_or_1=$gvars.__at_exit__)?$ret_or_1:[];!$truthy($gvars.__at_exit__["$empty?"]());)$gvars.__at_exit__.$pop().$call();return status=status.$$is_boolean?status?0:1:$coerce_to(status,$$$("Integer"),"to_int"),Opal.exit(status),nil}),-1),$def(self,"$extend",(function($a){var mods,self=this;0==(mods=$slice(arguments)).length&&self.$raise($$$("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),$deny_frozen_access(self);for(var singleton=self.$singleton_class(),i=mods.length-1;i>=0;i--){var mod=mods[i];mod.$$is_module||$Kernel.$raise($$$("TypeError"),"wrong argument type "+mod.$class()+" (expected Module)"),mod.$append_features(singleton),mod.$extend_object(self),mod.$extended(self)}return self}),-1),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:"object"==typeof this?($freeze_props(this),$freeze(this)):this})),$def(self,"$frozen?",(function(){switch(typeof this){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return this.$$frozen||!1;default:return!1}})),$def(self,"$gets",(function($a){var args;return null==$gvars.stdin&&($gvars.stdin=nil),args=$slice(arguments),$send($gvars.stdin,"gets",$to_a(args))}),-1),$def(self,"$hash",(function(){return this.$__id__()})),$def(self,"$initialize_copy",$return_val(nil));var inspect_stack=[];$def(self,"$inspect",(function(){var self=this,ivs=nil,id=nil,pushed=nil;return function(){try{try{return ivs="",id=self.$__id__(),$truthy(inspect_stack["$include?"](id))?ivs=" ...":(inspect_stack["$<<"](id),pushed=!0,$send(self.$instance_variables(),"each",[],(function $$8(i){var ivar,inspect;return null==i&&(i=nil),ivar=(null==$$8.$$s?this:$$8.$$s).$instance_variable_get(i),inspect=$$("Opal").$inspect(ivar),ivs=$rb_plus(ivs," "+i+"="+inspect)}),{$$s:self})),"#<"+self.$class()+":0x"+id.$to_s(16)+ivs+">"}catch($err){if(!Opal.rescue($err,[$$("StandardError")]))throw $err;$err;try{return"#<"+self.$class()+":0x"+id.$to_s(16)+">"}finally{Opal.pop_exception()}}}finally{$truthy(pushed)&&inspect_stack.$pop()}}()})),$def(self,"$instance_of?",(function(klass){return klass.$$is_class||klass.$$is_module||$Kernel.$raise($$$("TypeError"),"class or module required"),this.$$class===klass})),$def(self,"$instance_variable_defined?",(function(name){return name=$Opal["$instance_variable_name!"](name),Opal.hasOwnProperty.call(this,name.substr(1))})),$def(self,"$instance_variable_get",(function(name){name=$Opal["$instance_variable_name!"](name);var ivar=this[Opal.ivar(name.substr(1))];return null==ivar?nil:ivar})),$def(self,"$instance_variable_set",(function(name,value){return $deny_frozen_access(this),name=$Opal["$instance_variable_name!"](name),this[Opal.ivar(name.substr(1))]=value})),$def(self,"$remove_instance_variable",(function(name){name=$Opal["$instance_variable_name!"](name);var val,key=Opal.ivar(name.substr(1));return this.hasOwnProperty(key)?(val=this[key],delete this[key],val):$Kernel.$raise($$$("NameError"),"instance variable "+name+" not defined")})),$def(self,"$instance_variables",(function(){var ivar,result=[];for(var name in this)this.hasOwnProperty(name)&&"$"!==name.charAt(0)&&(ivar="$"===name.substr(-1)?name.slice(0,name.length-1):name,result.push("@"+ivar));return result})),$def(self,"$Integer",(function(value,base){var i,str,base_digits;return value.$$is_string?"0"===value?0:(void 0===base?base=0:(1===(base=$coerce_to(base,$$$("Integer"),"to_int"))||base<0||base>36)&&$Kernel.$raise($$$("ArgumentError"),"invalid radix "+base),str=(str=(str=value.toLowerCase()).replace(/(\d)_(?=\d)/g,"$1")).replace(/^(\s*[+-]?)(0[bodx]?)/,(function(_,head,flag){switch(flag){case"0b":if(0===base||2===base)return base=2,head;case"0":case"0o":if(0===base||8===base)return base=8,head;case"0d":if(0===base||10===base)return base=10,head;case"0x":if(0===base||16===base)return base=16,head}$Kernel.$raise($$$("ArgumentError"),'invalid value for Integer(): "'+value+'"')})),base_digits="0-"+((base=0===base?10:base)<=10?base-1:"9a-"+String.fromCharCode(base-11+97)),new RegExp("^\\s*[+-]?["+base_digits+"]+\\s*$").test(str)||$Kernel.$raise($$$("ArgumentError"),'invalid value for Integer(): "'+value+'"'),i=parseInt(str,base),isNaN(i)&&$Kernel.$raise($$$("ArgumentError"),'invalid value for Integer(): "'+value+'"'),i):(void 0!==base&&$Kernel.$raise($$$("ArgumentError"),"base specified for non string value"),value===nil&&$Kernel.$raise($$$("TypeError"),"can't convert nil into Integer"),value.$$is_number?((value===1/0||value===-1/0||isNaN(value))&&$Kernel.$raise($$$("FloatDomainError"),value),Math.floor(value)):value["$respond_to?"]("to_int")&&(i=value.$to_int())!==nil?i:$Opal["$coerce_to!"](value,$$$("Integer"),"to_i"))}),-2),$def(self,"$Float",(function(value){var str;return value===nil&&$Kernel.$raise($$$("TypeError"),"can't convert nil into Float"),value.$$is_string?(str=(str=value.toString()).replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(str)?$Kernel.$Integer(str):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(str)||$Kernel.$raise($$$("ArgumentError"),'invalid value for Float(): "'+value+'"'),parseFloat(str))):$Opal["$coerce_to!"](value,$$$("Float"),"to_f")})),$def(self,"$Hash",(function(arg){return $truthy(arg["$nil?"]())||$eqeq(arg,[])?$hash2([],{}):$eqeqeq($$$("Hash"),arg)?arg:$Opal["$coerce_to!"](arg,$$$("Hash"),"to_hash")})),$def(self,"$is_a?",(function(klass){return klass.$$is_class||klass.$$is_module||$Kernel.$raise($$$("TypeError"),"class or module required"),Opal.is_a(this,klass)})),$def(self,"$itself",$return_self),$def(self,"$lambda",(function $$lambda(){var block=$$lambda.$$p||nil;return $$lambda.$$p=null,Opal.lambda(block)})),$def(self,"$load",(function(file){return file=$Opal["$coerce_to!"](file,$$$("String"),"to_str"),Opal.load(file)})),$def(self,"$loop",(function $$loop(){var $yield=$$loop.$$p||nil,e=nil;if($$loop.$$p=null,$yield===nil)return $send(this,"enum_for",["loop"],(function(){return $$$($$$("Float"),"INFINITY")}));for(;$truthy(!0);)try{Opal.yieldX($yield,[])}catch($err){if(!Opal.rescue($err,[$$$("StopIteration")]))throw $err;e=$err;try{return e.$result()}finally{Opal.pop_exception()}}return this})),$def(self,"$nil?",$return_val(!1)),$def(self,"$printf",(function($a){var $post_args,args,self=this;return $post_args=$slice(arguments),$truthy((args=$post_args)["$any?"]())&&self.$print($send(self,"format",$to_a(args))),nil}),-1),$def(self,"$proc",(function $$proc(){var block=$$proc.$$p||nil;return $$proc.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to create Proc object without a block"),block.$$is_lambda=!1,block})),$def(self,"$puts",(function($a){var strs;return null==$gvars.stdout&&($gvars.stdout=nil),strs=$slice(arguments),$send($gvars.stdout,"puts",$to_a(strs))}),-1),$def(self,"$p",(function($a){var $post_args,args;return $post_args=$slice(arguments),$send(args=$post_args,"each",[],(function(obj){return null==$gvars.stdout&&($gvars.stdout=nil),null==obj&&(obj=nil),$gvars.stdout.$puts(obj.$inspect())})),$truthy($rb_le(args.$length(),1))?args["$[]"](0):args}),-1),$def(self,"$print",(function($a){var strs;return null==$gvars.stdout&&($gvars.stdout=nil),strs=$slice(arguments),$send($gvars.stdout,"print",$to_a(strs))}),-1),$def(self,"$readline",(function($a){var args;return null==$gvars.stdin&&($gvars.stdin=nil),args=$slice(arguments),$send($gvars.stdin,"readline",$to_a(args))}),-1),$def(self,"$warn",(function($a,$b){var $post_args,$kwargs,strs,uplevel,$c,$d,self=this,location=nil;return null==$gvars.VERBOSE&&($gvars.VERBOSE=nil),null==$gvars.stderr&&($gvars.stderr=nil),$post_args=$slice(arguments),$kwargs=$extract_kwargs($post_args),strs=$post_args,null==(uplevel=($kwargs=$ensure_kwargs($kwargs)).$$smap.uplevel)&&(uplevel=nil),$truthy(uplevel)&&(uplevel=$Opal["$coerce_to!"](uplevel,$$$("Integer"),"to_str"),$truthy($rb_lt(uplevel,0))&&$Kernel.$raise($$$("ArgumentError"),"negative level ("+uplevel+")"),$c=($d=self.$caller($rb_plus(uplevel,1),1).$first())===nil||null==$d?nil:$d.$split(":in `"),location=$c===nil||null==$c?nil:$c.$first(),$truthy(location)&&(location+=": "),strs=$send(strs,"map",[],(function(s){return null==s&&(s=nil),location+"warning: "+s}))),$truthy($gvars.VERBOSE["$nil?"]())||$truthy(strs["$empty?"]())?nil:$send($gvars.stderr,"puts",$to_a(strs))}),-1),$def(self,"$raise",(function(exception,string,backtrace){if(null==$gvars["!"]&&($gvars["!"]=nil),null==$gvars["@"]&&($gvars["@"]=nil),null==string&&(string=nil),null==backtrace&&(backtrace=nil),null==exception&&$gvars["!"]!==nil)throw $gvars["!"];throw null==exception?exception=$$$("RuntimeError").$new(""):$respond_to(exception,"$to_str")?exception=$$$("RuntimeError").$new(exception.$to_str()):exception.$$is_class&&$respond_to(exception,"$exception")?exception=exception.$exception(string):exception.$$is_exception||(exception=$$$("TypeError").$new("exception class/object expected")),backtrace!==nil&&exception.$set_backtrace(backtrace),$gvars["!"]!==nil&&Opal.exceptions.push($gvars["!"]),$gvars["!"]=exception,$gvars["@"]=exception.$backtrace(),exception}),-1),$def(self,"$rand",(function(max){return void 0===max?$$$($$$("Random"),"DEFAULT").$rand():(max.$$is_number&&(max<0&&(max=Math.abs(max)),max%1!=0&&(max=max.$to_i()),0===max&&(max=void 0)),$$$($$$("Random"),"DEFAULT").$rand(max))}),-1),$def(self,"$respond_to?",(function(name,include_all){null==include_all&&(include_all=!1);var body=this[$jsid(name)];return"function"==typeof body&&!body.$$stub||!0!==this["$respond_to_missing?"].$$pristine&&this["$respond_to_missing?"](name,include_all)}),-2),$def(self,"$respond_to_missing?",(function(method_name,include_all){return null==include_all&&(include_all=!1),!1}),-2),$Opal.$pristine(self,"respond_to?","respond_to_missing?"),$def(self,"$require",(function(file){return"string"!=typeof file&&Opal.String&&Opal.Array&&(file=$Opal["$coerce_to!"](file,$$$("String"),"to_str")),Opal.require(file)})),$def(self,"$require_relative",(function(file){return $Opal["$try_convert!"](file,$$$("String"),"to_str"),file=$$$("File").$expand_path($$$("File").$join(Opal.current_file,"..",file)),Opal.require(file)})),$def(self,"$require_tree",(function(path,$kwargs){var autoload;null==(autoload=($kwargs=$ensure_kwargs($kwargs)).$$smap.autoload)&&(autoload=!1);var result=[];for(var name in path=$$$("File").$expand_path(path),"."===(path=Opal.normalize(path))&&(path=""),Opal.modules)name["$start_with?"](path)&&(autoload?result.push([name,!0]):result.push([name,Opal.require(name)]));return result}),-2),$def(self,"$singleton_class",(function(){return Opal.get_singleton_class(this)})),$def(self,"$sleep",(function(seconds){null==seconds&&(seconds=nil),seconds===nil&&$Kernel.$raise($$$("TypeError"),"can't convert NilClass into time interval"),seconds.$$is_number||$Kernel.$raise($$$("TypeError"),"can't convert "+seconds.$class()+" into time interval"),seconds<0&&$Kernel.$raise($$$("ArgumentError"),"time interval must be positive");for(var get_time=Opal.global.performance?function(){return performance.now()}:function(){return new Date},t=get_time();get_time()-t<=1e3*seconds;);return Math.round(seconds)}),-1),$def(self,"$srand",(function(seed){return null==seed&&(seed=$$("Random").$new_seed()),$$$("Random").$srand(seed)}),-1),$def(self,"$String",(function(str){var $ret_or_1;return $truthy($ret_or_1=$Opal["$coerce_to?"](str,$$$("String"),"to_str"))?$ret_or_1:$Opal["$coerce_to!"](str,$$$("String"),"to_s")})),$def(self,"$tap",(function $$tap(){var block=$$tap.$$p||nil;return $$tap.$$p=null,Opal.yield1(block,this),this})),$def(self,"$to_proc",$return_self),$def(self,"$to_s",(function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+">"})),$def(self,"$catch",(function $Kernel_catch$17(tag){var $yield=$Kernel_catch$17.$$p||nil,$ret_or_1=nil,e=nil;$Kernel_catch$17.$$p=null,null==tag&&(tag=nil);try{return tag=$truthy($ret_or_1=tag)?$ret_or_1:$Object.$new(),Opal.yield1($yield,tag)}catch($err){if(!Opal.rescue($err,[$$$("UncaughtThrowError")]))throw $err;e=$err;try{return $eqeq(e.$tag(),tag)?e.$value():$Kernel.$raise()}finally{Opal.pop_exception()}}}),-1),$def(self,"$throw",(function(tag,obj){return null==obj&&(obj=nil),$Kernel.$raise($$$("UncaughtThrowError").$new(tag,obj))}),-2),$def(self,"$open",(function $$open($a){var args,block=$$open.$$p||nil;return $$open.$$p=null,args=$slice(arguments),$send($$$("File"),"open",$to_a(args),block.$to_proc())}),-1),$def(self,"$yield_self",(function $$yield_self(){var $yield=$$yield_self.$$p||nil;return $$yield_self.$$p=null,$yield===nil?$send(this,"enum_for",["yield_self"],$return_val(1)):Opal.yield1($yield,this)})),$alias(self,"fail","raise"),$alias(self,"kind_of?","is_a?"),$alias(self,"object_id","__id__"),$alias(self,"public_send","__send__"),$alias(self,"send","__send__"),$alias(self,"then","yield_self"),$alias(self,"to_enum","enum_for")}(0,[]),self=$klass("::",null,"Object"),delete $Object.$$prototype.$require,self.$include($Kernel)},Opal.modules["corelib/main"]=function(Opal){var $return_val=Opal.return_val,$def=Opal.def,$Object=Opal.Object,$slice=Opal.slice,$Kernel=Opal.Kernel,self=Opal.top;Opal.nil;return Opal.add_stubs("include,raise"),function(self,$parent_nesting){return $def(self,"$to_s",$return_val("main")),$def(self,"$include",(function(mod){return $Object.$include(mod)})),$def(self,"$autoload",(function($a){var args;return args=$slice(arguments),Opal.Object.$autoload.apply(Opal.Object,args)}),-1),$def(self,"$using",(function(mod){return $Kernel.$raise("main.using is permitted only at toplevel")}))}(Opal.get_singleton_class(self))},Opal.modules["corelib/error/errno"]=function(Opal){var $module=Opal.module,$truthy=Opal.truthy,$rb_plus=Opal.rb_plus,$send2=Opal.send2,$find_super=Opal.find_super,$def=Opal.def,$klass=Opal.klass,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("+,errno,class,attr_reader"),function($base,$parent_nesting){var errors,i,self=$module("::","Errno"),klass=([self].concat($parent_nesting),nil);for(errors=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],klass=nil,i=0;i<errors.length;i++)!function(){var class_name=errors[i][0],default_message=errors[i][1],errno=errors[i][2];(klass=Opal.klass(self,Opal.SystemCallError,class_name)).errno=errno,function(self,$parent_nesting){$def(self,"$new",(function $new$1(name){var message=nil;return $new$1.$$p=null,null==name&&(name=nil),message=default_message,$truthy(name)&&(message=$rb_plus(message," - "+name)),$send2(this,$find_super(this,"new",$new$1,!1,!0),"new",[message],null)}),-1)}(Opal.get_singleton_class(klass))}()}(0,$nesting),function($base,$super,$parent_nesting){var self=$klass("::",$super,"SystemCallError");[self].concat($parent_nesting);return $def(self,"$errno",(function(){return this.$class().$errno()})),function(self,$parent_nesting){return self.$attr_reader("errno")}(Opal.get_singleton_class(self))}(0,$$$("StandardError"),$nesting)},Opal.modules["corelib/error"]=function(Opal){var $super,self,$klass=Opal.klass,$slice=Opal.slice,$gvars=Opal.gvars,$defs=Opal.defs,$send=Opal.send,$to_a=Opal.to_a,$def=Opal.def,$truthy=Opal.truthy,$hash2=Opal.hash2,$Kernel=Opal.Kernel,$not=Opal.not,$rb_plus=Opal.rb_plus,$eqeq=Opal.eqeq,$Object=Opal.Object,$ensure_kwargs=Opal.ensure_kwargs,$send2=Opal.send2,$find_super=Opal.find_super,$module=Opal.module,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function($base,$super,$parent_nesting){var stack_trace_limit,self=$klass("::",$super,"Exception"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function correct_backtrace(backtrace){for(var m,new_bt=[],i=0;i<backtrace.length;i++){var loc=backtrace[i];loc&&loc.$$is_string&&((m=loc.match(/^    at (.*?) \((.*?)\)$/))?new_bt.push(m[2]+":in `"+m[1]+"'"):(m=loc.match(/^    at (.*?)$/))?new_bt.push(m[1]+":in `undefined'"):(m=loc.match(/^  from (.*?)$/))?new_bt.push(m[1]):(m=loc.match(/^(.*?)@(.*?)$/))&&new_bt.push(m[2]+":in `"+m[1]+"'"))}return new_bt}self.$$prototype.message=nil,Opal.prop(self.$$prototype,"$$is_exception",!0),Error.stackTraceLimit=100,$defs(self,"$new",(function($a){var args,self=this;null==$gvars["!"]&&($gvars["!"]=nil);var message=(args=$slice(arguments)).length>0?args[0]:nil,error=new self.$$constructor(message);return error.name=self.$$name,error.message=message,error.cause=$gvars["!"],Opal.send(error,error.$initialize,args),Opal.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(error,stack_trace_limit),error}),-1),stack_trace_limit=self.$new,$defs(self,"$exception",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send(self,"new",$to_a($post_args))}),-1),$def(self,"$initialize",(function($a){var args,self=this;return args=$slice(arguments),self.message=args.length>0?args[0]:nil}),-1),$def(self,"$backtrace",(function(){if(this.backtrace)return this.backtrace;var backtrace=this.stack;return void 0!==backtrace&&backtrace.$$is_string?this.backtrace=correct_backtrace(backtrace.split("\n")):backtrace?this.backtrace=correct_backtrace(backtrace):[]})),$def(self,"$backtrace_locations",(function(){var $a;return this.backtrace_locations||(this.backtrace_locations=($a=this.$backtrace())===nil||null==$a?nil:$send($a,"map",[],(function(loc){return null==loc&&(loc=nil),$$$($$$($$$("Thread"),"Backtrace"),"Location").$new(loc)}))),this.backtrace_locations})),$def(self,"$cause",(function(){return this.cause||nil})),$def(self,"$exception",(function(str){if(null==str&&(str=nil),str===nil||this===str)return this;var cloned=this.$clone();return cloned.message=str,this.backtrace&&(cloned.backtrace=this.backtrace.$dup()),cloned.stack=this.stack,cloned.cause=this.cause,cloned}),-1),$def(self,"$message",(function(){return this.$to_s()})),$def(self,"$full_message",(function(kwargs){var $b,$ret_or_1,highlight,order,first,bold_underline=nil,bold=nil,reset=nil,bt=nil,msg=nil;return null==$gvars.stderr&&($gvars.stderr=nil),null==kwargs&&(kwargs=nil),$truthy($$("Hash","skip_raise")?"constant":nil)?(order=($b=[(kwargs=$hash2(["highlight","order"],{highlight:$gvars.stderr["$tty?"](),order:"top"}).$merge($truthy($ret_or_1=kwargs)?$ret_or_1:$hash2([],{})))["$[]"]("highlight"),kwargs["$[]"]("order")])[1],$truthy([!0,!1]["$include?"](highlight=$b[0]))||$Kernel.$raise($$$("ArgumentError"),"expected true or false as highlight: "+highlight),$truthy(["top","bottom"]["$include?"](order))||$Kernel.$raise($$$("ArgumentError"),"expected :top or :bottom as order: "+order),$truthy(highlight)?(bold_underline="[1;4m",bold="[1m",reset="[m"):bold_underline=bold=reset="",bt=this.$backtrace().$dup(),($not(bt)||$truthy(bt["$empty?"]()))&&(bt=this.$caller()),first=bt.$shift(),msg=$rb_plus(msg=first+": ",""+bold+this.$to_s()+" ("+bold_underline+this.$class()+reset+bold+")"+reset+"\n"),msg=$rb_plus(msg,$send(bt,"map",[],(function(loc){return null==loc&&(loc=nil),"\tfrom "+loc+"\n"})).$join()),$truthy(this.$cause())&&(msg=$rb_plus(msg,this.$cause().$full_message($hash2(["highlight"],{highlight:highlight})))),$eqeq(order,"bottom")&&(msg=msg.$split("\n").$reverse().$join("\n"),msg=$rb_plus(bold+"Traceback"+reset+" (most recent call last):\n",msg)),msg):this.message+"\n"+this.stack}),-1),$def(self,"$inspect",(function(){var as_str=nil;return as_str=this.$to_s(),$truthy(as_str["$empty?"]())?this.$class().$to_s():"#<"+this.$class().$to_s()+": "+this.$to_s()+">"})),$def(self,"$set_backtrace",(function(backtrace){var i,ii,valid=!0;if(backtrace===nil)this.backtrace=nil,this.stack="";else if(backtrace.$$is_string)this.backtrace=[backtrace],this.stack="  from "+backtrace;else{if(backtrace.$$is_array){for(i=0,ii=backtrace.length;i<ii;i++)if(!backtrace[i].$$is_string){valid=!1;break}}else valid=!1;!1===valid&&$Kernel.$raise($$$("TypeError"),"backtrace must be Array of String"),this.backtrace=backtrace,this.stack=$send(backtrace,"map",[],(function(i){return null==i&&(i=nil),$rb_plus("  from ",i)})).join("\n")}return backtrace})),$def(self,"$to_s",(function(){var $ret_or_1,$ret_or_2;return $truthy($ret_or_1=$truthy($ret_or_2=this.message)?this.message.$to_s():$ret_or_2)?$ret_or_1:this.$class().$to_s()}))}(0,Error,$nesting),$klass("::",$$$("Exception"),"ScriptError"),$klass("::",$$$("ScriptError"),"SyntaxError"),$klass("::",$$$("ScriptError"),"LoadError"),$klass("::",$$$("ScriptError"),"NotImplementedError"),$klass("::",$$$("Exception"),"SystemExit"),$klass("::",$$$("Exception"),"NoMemoryError"),$klass("::",$$$("Exception"),"SignalException"),$klass("::",$$$("SignalException"),"Interrupt"),$klass("::",$$$("Exception"),"SecurityError"),$klass("::",$$$("Exception"),"SystemStackError"),$klass("::",$$$("Exception"),"StandardError"),$klass("::",$$$("StandardError"),"EncodingError"),$klass("::",$$$("StandardError"),"ZeroDivisionError"),$klass("::",$$$("StandardError"),"NameError"),$klass("::",$$$("NameError"),"NoMethodError"),$klass("::",$$$("StandardError"),"RuntimeError"),$klass("::",$$$("RuntimeError"),"FrozenError"),$klass("::",$$$("StandardError"),"LocalJumpError"),$klass("::",$$$("StandardError"),"TypeError"),$klass("::",$$$("StandardError"),"ArgumentError"),$klass("::",$$$("ArgumentError"),"UncaughtThrowError"),$klass("::",$$$("StandardError"),"IndexError"),$klass("::",$$$("IndexError"),"StopIteration"),$klass("::",$$$("StopIteration"),"ClosedQueueError"),$klass("::",$$$("IndexError"),"KeyError"),$klass("::",$$$("StandardError"),"RangeError"),$klass("::",$$$("RangeError"),"FloatDomainError"),$klass("::",$$$("StandardError"),"IOError"),$klass("::",$$$("IOError"),"EOFError"),$klass("::",$$$("StandardError"),"SystemCallError"),$klass("::",$$$("StandardError"),"RegexpError"),$klass("::",$$$("StandardError"),"ThreadError"),$klass("::",$$$("StandardError"),"FiberError"),$Object.$autoload("Errno","corelib/error/errno"),$super=$$$("RuntimeError"),(self=$klass("::",$super,"FrozenError")).$attr_reader("receiver"),$def(self,"$initialize",(function $$initialize(message,$kwargs){var receiver;return $$initialize.$$p=null,null==(receiver=($kwargs=$ensure_kwargs($kwargs)).$$smap.receiver)&&(receiver=nil),$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[message],null),this.receiver=receiver}),-2),function($base,$super){var self=$klass("::",$super,"UncaughtThrowError");self.$$prototype.tag=nil,self.$attr_reader("tag","value"),$def(self,"$initialize",(function $$initialize(tag,value){return $$initialize.$$p=null,null==value&&(value=nil),this.tag=tag,this.value=value,$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",["uncaught throw "+this.tag.$inspect()],null)}),-2)}(0,$$$("ArgumentError")),function($base,$super){var self=$klass("::",null,"NameError");self.$attr_reader("name"),$def(self,"$initialize",(function $$initialize(message,name){return $$initialize.$$p=null,null==name&&(name=nil),$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[message],null),this.name=name}),-2)}(),function($base,$super){var self=$klass("::",null,"NoMethodError");self.$attr_reader("args"),$def(self,"$initialize",(function $$initialize(message,name,args){return $$initialize.$$p=null,null==name&&(name=nil),null==args&&(args=[]),$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[message,name],null),this.args=args}),-2)}(),$klass("::",null,"StopIteration").$attr_reader("result"),function($base,$super){var self=$klass("::",null,"KeyError"),$proto=self.$$prototype;$proto.receiver=$proto.key=nil,$def(self,"$initialize",(function $$initialize(message,$kwargs){var receiver,key;return $$initialize.$$p=null,null==(receiver=($kwargs=$ensure_kwargs($kwargs)).$$smap.receiver)&&(receiver=nil),null==(key=$kwargs.$$smap.key)&&(key=nil),$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[message],null),this.receiver=receiver,this.key=key}),-2),$def(self,"$receiver",(function(){var $ret_or_1;return $truthy($ret_or_1=this.receiver)?$ret_or_1:$Kernel.$raise($$$("ArgumentError"),"no receiver is available")})),$def(self,"$key",(function(){var $ret_or_1;return $truthy($ret_or_1=this.key)?$ret_or_1:$Kernel.$raise($$$("ArgumentError"),"no key is available")}))}(),function($base,$parent_nesting){var $nesting=[$module("::","JS")].concat($parent_nesting);return $klass($nesting[0],null,"Error"),nil}(0,$nesting)},Opal.modules["corelib/constants"]=function(Opal){var $const_set=Opal.const_set,$$$=(Opal.nil,Opal.$$$);return $const_set("::","RUBY_PLATFORM","opal"),$const_set("::","RUBY_ENGINE","opal"),$const_set("::","RUBY_VERSION","3.2.0"),$const_set("::","RUBY_ENGINE_VERSION","1.7.2"),$const_set("::","RUBY_RELEASE_DATE","2023-01-20"),$const_set("::","RUBY_PATCHLEVEL",0),$const_set("::","RUBY_REVISION","0"),$const_set("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),$const_set("::","RUBY_DESCRIPTION","opal "+$$$("RUBY_ENGINE_VERSION")+" ("+$$$("RUBY_RELEASE_DATE")+" revision "+$$$("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(Opal){var $Object=Opal.Object;Opal.nil;return Opal.add_stubs("require"),$Object.$require("corelib/runtime"),$Object.$require("corelib/helpers"),$Object.$require("corelib/module"),$Object.$require("corelib/class"),$Object.$require("corelib/basic_object"),$Object.$require("corelib/kernel"),$Object.$require("corelib/main"),$Object.$require("corelib/error"),$Object.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(Opal){var $klass=Opal.klass,$Kernel=Opal.Kernel,$def=Opal.def,$return_val=Opal.return_val,$ensure_kwargs=Opal.ensure_kwargs,$NilClass=Opal.NilClass,$slice=Opal.slice,$truthy=Opal.truthy,$rb_gt=Opal.rb_gt,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("raise,name,new,>,length,Rational,to_i"),function($base,$super,$parent_nesting){var self=$klass("::",null,"NilClass");[self].concat($parent_nesting);return self.$$prototype.$$meta=self,function(self,$parent_nesting){$def(self,"$allocate",(function(){return $Kernel.$raise($$$("TypeError"),"allocator undefined for "+this.$name())})),Opal.udef(self,"$new")}(Opal.get_singleton_class(self)),$def(self,"$!",$return_val(!0)),$def(self,"$&",$return_val(!1)),$def(self,"$|",(function(other){return!1!==other&&other!==nil})),$def(self,"$^",(function(other){return!1!==other&&other!==nil})),$def(self,"$==",(function(other){return other===nil})),$def(self,"$dup",$return_val(nil)),$def(self,"$clone",(function($kwargs){return null==($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze&&!0,nil}),-1),$def(self,"$inspect",$return_val("nil")),$def(self,"$nil?",$return_val(!0)),$def(self,"$singleton_class",(function(){return $NilClass})),$def(self,"$to_a",(function(){return[]})),$def(self,"$to_h",(function(){return Opal.hash()})),$def(self,"$to_i",$return_val(0)),$def(self,"$to_s",$return_val("")),$def(self,"$to_c",(function(){return $$$("Complex").$new(0,0)})),$def(self,"$rationalize",(function($a){var $post_args;return $post_args=$slice(arguments),$truthy($rb_gt($post_args.$length(),1))&&$Kernel.$raise($$$("ArgumentError")),$Kernel.$Rational(0,1)}),-1),$def(self,"$to_r",(function(){return $Kernel.$Rational(0,1)})),$def(self,"$instance_variables",(function(){return[]})),$alias(self,"to_f","to_i")}(0,0,[])},Opal.modules["corelib/boolean"]=function(Opal){"use strict";var $klass=Opal.klass,$Kernel=Opal.Kernel,$def=Opal.def,$return_self=Opal.return_self,$ensure_kwargs=Opal.ensure_kwargs,$slice=Opal.slice,$truthy=Opal.truthy,$send2=Opal.send2,$find_super=Opal.find_super,$to_a=Opal.to_a,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("raise,name,==,to_s,__id__"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Boolean");[self].concat($parent_nesting);Opal.prop(self.$$prototype,"$$is_boolean",!0);for(var properties=["$$class","$$meta"],i=0;i<properties.length;i++)Object.defineProperty(self.$$prototype,properties[i],{configurable:!0,enumerable:!1,get:function(){return 1==this?Opal.TrueClass:0==this?Opal.FalseClass:Opal.Boolean}});Object.defineProperty(self.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return 1==this?2:0==this?0:nil}}),function(self,$parent_nesting){$def(self,"$allocate",(function(){return $Kernel.$raise($$$("TypeError"),"allocator undefined for "+this.$name())})),Opal.udef(self,"$new")}(Opal.get_singleton_class(self)),$def(self,"$__id__",(function(){return this.valueOf()?2:0})),$def(self,"$!",(function(){return 1!=this})),$def(self,"$&",(function(other){return 1==this&&(!1!==other&&other!==nil)})),$def(self,"$|",(function(other){return 1==this||!1!==other&&other!==nil})),$def(self,"$^",(function(other){return 1==this?!1===other||other===nil:!1!==other&&other!==nil})),$def(self,"$==",(function(other){return 1==this===other.valueOf()})),$def(self,"$singleton_class",(function(){return this.$$meta})),$def(self,"$to_s",(function(){return 1==this?"true":"false"})),$def(self,"$dup",$return_self),$def(self,"$clone",(function($kwargs){return null==($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze&&!0,this}),-1),$def(self,"$method_missing",(function $$method_missing(method,$a){var args,block=$$method_missing.$$p||nil,self=this;$$method_missing.$$p=null,args=$slice(arguments,1);var body=self.$$class.$$prototype[Opal.jsid(method)];return $truthy(void 0!==body&&!body.$$stub)||$send2(self,$find_super(self,"method_missing",$$method_missing,!1,!0),"method_missing",[method].concat($to_a(args)),block),Opal.send(self,body,args,block)}),-2),$def(self,"$respond_to_missing?",(function(method,_include_all){null==_include_all&&(_include_all=!1);var body=this.$$class.$$prototype[Opal.jsid(method)];return void 0!==body&&!body.$$stub}),-2),$alias(self,"eql?","=="),$alias(self,"equal?","=="),$alias(self,"inspect","to_s"),$alias(self,"object_id","__id__")}(0,Boolean,[]),$klass("::",$$$("Boolean"),"TrueClass"),$klass("::",$$$("Boolean"),"FalseClass"),nil},Opal.modules["corelib/comparable"]=function(Opal){var $truthy=Opal.truthy,$module=Opal.module,$rb_gt=Opal.rb_gt,$rb_lt=Opal.rb_lt,$eqeqeq=Opal.eqeqeq,$Kernel=Opal.Kernel,$def=Opal.def,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs(">,<,===,raise,class,<=>,equal?"),function($base){var self=$module("::","Comparable"),$ret_or_1=nil;function normalize(what){return Opal.is_a(what,Opal.Integer)?what:$rb_gt(what,0)?1:$rb_lt(what,0)?-1:0}function cmp_or_fail(lhs,rhs){var cmp=lhs["$<=>"](rhs);return $truthy(cmp)||function(lhs,rhs){var class_name;class_name=$eqeqeq(nil,$ret_or_1=rhs)||$eqeqeq(!0,$ret_or_1)||$eqeqeq(!1,$ret_or_1)||$eqeqeq($$$("Integer"),$ret_or_1)||$eqeqeq($$$("Float"),$ret_or_1)?rhs.$inspect():rhs.$$class,$Kernel.$raise($$$("ArgumentError"),"comparison of "+lhs.$class()+" with "+class_name+" failed")}(lhs,rhs),normalize(cmp)}return $def(self,"$==",(function(other){var cmp;return!!$truthy(this["$equal?"](other))||this["$<=>"]!=Opal.Kernel["$<=>"]&&(this.$$comparable?(this.$$comparable=!1,!1):!!$truthy(cmp=this["$<=>"](other))&&0==normalize(cmp))})),$def(self,"$>",(function(other){return cmp_or_fail(this,other)>0})),$def(self,"$>=",(function(other){return cmp_or_fail(this,other)>=0})),$def(self,"$<",(function(other){return cmp_or_fail(this,other)<0})),$def(self,"$<=",(function(other){return cmp_or_fail(this,other)<=0})),$def(self,"$between?",(function(min,max){return!$rb_lt(this,min)&&!$rb_gt(this,max)})),$def(self,"$clamp",(function(min,max){var c,excl;if(null==max&&(max=nil),max===nil&&(Opal.is_a(min,Opal.Range)||$Kernel.$raise($$$("TypeError"),"wrong argument type "+min.$class()+" (expected Range)"),excl=min.excl,max=min.end,min=min.begin,max!==nil&&excl&&$Kernel.$raise($$$("ArgumentError"),"cannot clamp with an exclusive range")),min!==nil&&max!==nil&&cmp_or_fail(min,max)>0&&$Kernel.$raise($$$("ArgumentError"),"min argument must be smaller than max argument"),min!==nil){if(0==(c=cmp_or_fail(this,min)))return this;if(c<0)return min}return max!==nil&&(c=cmp_or_fail(this,max))>0?max:this}),-2)}()},Opal.modules["corelib/regexp"]=function(Opal){var $coerce_to=Opal.coerce_to,$prop=Opal.prop,$freeze=Opal.freeze,$klass=Opal.klass,$const_set=Opal.const_set,$send2=Opal.send2,$find_super=Opal.find_super,$def=Opal.def,$truthy=Opal.truthy,$gvars=Opal.gvars,$slice=Opal.slice,$Kernel=Opal.Kernel,$Opal=Opal.Opal,$alias=Opal.alias,$send=Opal.send,$hash2=Opal.hash2,$rb_plus=Opal.rb_plus,$ensure_kwargs=Opal.ensure_kwargs,$rb_ge=Opal.rb_ge,$to_a=Opal.to_a,$eqeqeq=Opal.eqeqeq,$rb_minus=Opal.rb_minus,$return_ivar=Opal.return_ivar,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),$klass("::",$$$("StandardError"),"RegexpError"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Regexp"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$const_set(self,"IGNORECASE",1),$const_set(self,"EXTENDED",2),$const_set(self,"MULTILINE",4),Opal.prop(self.$$prototype,"$$is_regexp",!0),function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$allocate",(function $$allocate(){var $yield=$$allocate.$$p||nil,allocated=nil;return $$allocate.$$p=null,(allocated=$send2(this,$find_super(this,"allocate",$$allocate,!1,!0),"allocate",[],$yield)).uninitialized=!0,allocated})),$def(self,"$escape",(function(string){return Opal.escape_regexp(string)})),$def(self,"$last_match",(function(n){return null==$gvars["~"]&&($gvars["~"]=nil),null==n&&(n=nil),$truthy(n["$nil?"]())?$gvars["~"]:$truthy($gvars["~"])?$gvars["~"]["$[]"](n):nil}),-1),$def(self,"$union",(function($a){var parts,is_first_part_array,quoted_validated,part,options,each_part_options,self=this;if(0==(parts=$slice(arguments)).length)return/(?!)/;if(1==parts.length&&parts[0].$$is_regexp)return parts[0];is_first_part_array=parts[0].$$is_array,parts.length>1&&is_first_part_array&&$Kernel.$raise($$$("TypeError"),"no implicit conversion of Array into String"),is_first_part_array&&(parts=parts[0]),options=void 0,quoted_validated=[];for(var i=0;i<parts.length;i++)(part=parts[i]).$$is_string?quoted_validated.push(self.$escape(part)):part.$$is_regexp?(each_part_options=part.$options(),null!=options&&options!=each_part_options&&$Kernel.$raise($$$("TypeError"),"All expressions must use the same options"),options=each_part_options,quoted_validated.push("("+part.source+")")):quoted_validated.push(self.$escape(part.$to_str()));return self.$new(quoted_validated.$join("|"),options)}),-1),$def(self,"$new",(function(regexp,options){if(regexp.$$is_regexp)return new RegExp(regexp);if("\\"===(regexp=$Opal["$coerce_to!"](regexp,$$$("String"),"to_str")).charAt(regexp.length-1)&&"\\"!==regexp.charAt(regexp.length-2)&&$Kernel.$raise($$$("RegexpError"),"too short escape sequence: /"+regexp+"/"),regexp=regexp.replace("\\A","^").replace("\\z","$"),void 0===options||options["$!"]())return new RegExp(regexp);if(options.$$is_number){var temp="";$$("IGNORECASE")&options&&(temp+="i"),$$("MULTILINE")&options&&(temp+="m"),options=temp}else options="i";return new RegExp(regexp,options)}),-2),$alias(self,"compile","new"),$alias(self,"quote","escape")}(Opal.get_singleton_class(self),$nesting),$def(self,"$==",(function(other){return other instanceof RegExp&&this.toString()===other.toString()})),$def(self,"$===",(function(string){return this.$match($Opal["$coerce_to?"](string,$$$("String"),"to_str"))!==nil})),$def(self,"$=~",(function(string){var $ret_or_1;return null==$gvars["~"]&&($gvars["~"]=nil),$truthy($ret_or_1=this.$match(string))?$gvars["~"].$begin(0):$ret_or_1})),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:(this.hasOwnProperty("$$g")||$prop(this,"$$g",null),this.hasOwnProperty("$$gm")||$prop(this,"$$gm",null),$freeze(this))})),$def(self,"$inspect",(function(){var value=this.toString(),matches=/^\/(.*)\/([^\/]*)$/.exec(value);if(matches){for(var regexp_pattern=matches[1],regexp_flags=matches[2],chars=regexp_pattern.split(""),chars_length=chars.length,char_escaped=!1,regexp_pattern_escaped="",i=0;i<chars_length;i++){var current_char=chars[i];char_escaped||"/"!=current_char||(regexp_pattern_escaped=regexp_pattern_escaped.concat("\\")),regexp_pattern_escaped=regexp_pattern_escaped.concat(current_char),char_escaped="\\"==current_char&&!char_escaped}return"/"+regexp_pattern_escaped+"/"+regexp_flags}return value})),$def(self,"$match",(function $$match(string,pos){var block=$$match.$$p||nil;if(null==$gvars["~"]&&($gvars["~"]=nil),$$match.$$p=null,this.uninitialized&&$Kernel.$raise($$$("TypeError"),"uninitialized Regexp"),void 0===pos){if(string===nil)return $gvars["~"]=nil;var m=this.exec($coerce_to(string,$$$("String"),"to_str"));return m?($gvars["~"]=$$$("MatchData").$new(this,m),block===nil?$gvars["~"]:Opal.yield1(block,$gvars["~"])):$gvars["~"]=nil}if(pos=$coerce_to(pos,$$$("Integer"),"to_int"),string===nil)return $gvars["~"]=nil;if(string=$coerce_to(string,$$$("String"),"to_str"),pos<0&&(pos+=string.length)<0)return $gvars["~"]=nil;for(var md,re=Opal.global_regexp(this);;){if(null===(md=re.exec(string)))return $gvars["~"]=nil;if(md.index>=pos)return $gvars["~"]=$$$("MatchData").$new(re,md),block===nil?$gvars["~"]:Opal.yield1(block,$gvars["~"]);re.lastIndex=md.index+1}}),-2),$def(self,"$match?",(function(string,pos){var md;return this.uninitialized&&$Kernel.$raise($$$("TypeError"),"uninitialized Regexp"),void 0===pos?string!==nil&&this.test($coerce_to(string,$$$("String"),"to_str")):(pos=$coerce_to(pos,$$$("Integer"),"to_int"),string!==nil&&(string=$coerce_to(string,$$$("String"),"to_str"),!(pos<0&&(pos+=string.length)<0)&&!(null===(md=Opal.global_regexp(this).exec(string))||md.index<pos)))}),-2),$def(self,"$names",(function(){return $send(this.$source().$scan(/\(?<(\w+)>/,$hash2(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()})),$def(self,"$named_captures",(function(){return $send($send($send(this.$source().$scan(/\(?<(\w+)>/,$hash2(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],(function(i){return null==i&&(i=nil),$send(i,"map",[],(function(j){return null==j&&(j=nil),$rb_plus(j.$last(),1)}))}))})),$def(self,"$~",(function(){return null==$gvars._&&($gvars._=nil),this["$=~"]($gvars._)})),$def(self,"$source",(function(){return this.source})),$def(self,"$options",(function(){this.uninitialized&&$Kernel.$raise($$$("TypeError"),"uninitialized Regexp");var result=0;return this.multiline&&(result|=$$("MULTILINE")),this.ignoreCase&&(result|=$$("IGNORECASE")),result})),$def(self,"$casefold?",(function(){return this.ignoreCase})),$alias(self,"eql?","=="),$alias(self,"to_s","source")}(0,RegExp,$nesting),function($base,$super,$parent_nesting){var self=$klass($base,null,"MatchData"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$$prototype.matches=nil,self.$attr_reader("post_match","pre_match","regexp","string"),$def(self,"$initialize",(function(regexp,match_groups,$kwargs){var no_matchdata;null==(no_matchdata=($kwargs=$ensure_kwargs($kwargs)).$$smap.no_matchdata)&&(no_matchdata=!1),$truthy(no_matchdata)||($gvars["~"]=this),this.regexp=regexp,this.begin=match_groups.index,this.string=match_groups.input,this.pre_match=match_groups.input.slice(0,match_groups.index),this.post_match=match_groups.input.slice(match_groups.index+match_groups[0].length),this.matches=[];for(var i=0,length=match_groups.length;i<length;i++){var group=match_groups[i];null==group?this.matches.push(nil):this.matches.push(group)}}),-3),$def(self,"$match",(function(idx){var match;return $truthy(match=this["$[]"](idx))?match:$truthy(idx["$is_a?"]($$("Integer")))&&$truthy($rb_ge(idx,this.$length()))?$Kernel.$raise($$$("IndexError"),"index "+idx+" out of matches"):nil})),$def(self,"$match_length",(function(idx){var $a;return($a=this.$match(idx))===nil||null==$a?nil:$a.$length()})),$def(self,"$[]",(function($a){var args,self=this;return(args=$slice(arguments))[0].$$is_string?(self.$regexp().$names()["$include?"](args["$[]"](0))["$!"]()&&$Kernel.$raise($$$("IndexError"),"undefined group name reference: "+args["$[]"](0)),self.$named_captures()["$[]"](args["$[]"](0))):$send(self.matches,"[]",$to_a(args))}),-1),$def(self,"$offset",(function(n){return 0!==n&&$Kernel.$raise($$$("ArgumentError"),"MatchData#offset only supports 0th element"),[this.begin,this.begin+this.matches[n].length]})),$def(self,"$==",(function(other){var $ret_or_1,$ret_or_2,$ret_or_3,$ret_or_4;return!!$eqeqeq($$$("MatchData"),other)&&($truthy($ret_or_1=$truthy($ret_or_2=$truthy($ret_or_3=$truthy($ret_or_4=this.string==other.string)?this.regexp.toString()==other.regexp.toString():$ret_or_4)?this.pre_match==other.pre_match:$ret_or_3)?this.post_match==other.post_match:$ret_or_2)?this.begin==other.begin:$ret_or_1)})),$def(self,"$begin",(function(n){return 0!==n&&$Kernel.$raise($$$("ArgumentError"),"MatchData#begin only supports 0th element"),this.begin})),$def(self,"$end",(function(n){return 0!==n&&$Kernel.$raise($$$("ArgumentError"),"MatchData#end only supports 0th element"),this.begin+this.matches[n].length})),$def(self,"$captures",(function(){return this.matches.slice(1)})),$def(self,"$named_captures",(function(){var matches=nil;return matches=this.$captures(),$send(this.$regexp().$named_captures(),"transform_values",[],(function(i){return null==i&&(i=nil),matches["$[]"]($rb_minus(i.$last(),1))}))})),$def(self,"$names",(function(){return this.$regexp().$names()})),$def(self,"$inspect",(function(){var str="#<MatchData "+this.matches[0].$inspect();if(this.$regexp().$names()["$empty?"]())for(var i=1,length=this.matches.length;i<length;i++)str+=" "+i+":"+this.matches[i].$inspect();else $send(this.$named_captures(),"each",[],(function(k,v){return null==k&&(k=nil),null==v&&(v=nil),str+=" "+k+":"+v.$inspect()}));return str+">"})),$def(self,"$length",(function(){return this.matches.length})),$def(self,"$to_a",$return_ivar("matches")),$def(self,"$to_s",(function(){return this.matches[0]})),$def(self,"$values_at",(function($a){var args,self=this;args=$slice(arguments);var i,a,index,values=[];for(i=0;i<args.length;i++)args[i].$$is_range&&((a=args[i].$to_a()).unshift(i,1),Array.prototype.splice.apply(args,a)),(index=$Opal["$coerce_to!"](args[i],$$$("Integer"),"to_int"))<0&&(index+=self.matches.length)<0?values.push(nil):values.push(self.matches[index]);return values}),-1),$alias(self,"eql?","=="),$alias(self,"size","length")}($nesting[0],0,$nesting)},Opal.modules["corelib/string"]=function(Opal){var $coerce_to=Opal.coerce_to,$respond_to=Opal.respond_to,$global_multiline_regexp=Opal.global_multiline_regexp,$prop=Opal.prop,$klass=Opal.klass,$def=Opal.def,$Opal=Opal.Opal,$defs=Opal.defs,$slice=Opal.slice,$send=Opal.send,$to_a=Opal.to_a,$extract_kwargs=Opal.extract_kwargs,$ensure_kwargs=Opal.ensure_kwargs,$eqeqeq=Opal.eqeqeq,$Kernel=Opal.Kernel,$truthy=Opal.truthy,$gvars=Opal.gvars,$rb_divide=Opal.rb_divide,$rb_plus=Opal.rb_plus,$eqeq=Opal.eqeq,$hash2=Opal.hash2,$alias=Opal.alias,$const_set=Opal.const_set,self=Opal.top,$nesting=[],$$=Opal.$r($nesting),nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),self.$require("corelib/comparable"),self.$require("corelib/regexp"),function($base,$super,$parent_nesting){var self=$klass("::",String,"String"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function char_class_from_char_sets(sets){function explode_sequences_in_character_set(set){var i,curr_char,skip_next_dash,char_code_from,char_code_upto,char_code,result="",len=set.length;for(i=0;i<len;i++)if("-"===(curr_char=set.charAt(i))&&i>0&&i<len-1&&!skip_next_dash){for((char_code_from=set.charCodeAt(i-1))>(char_code_upto=set.charCodeAt(i+1))&&$Kernel.$raise($$$("ArgumentError"),'invalid range "'+char_code_from+"-"+char_code_upto+'" in string transliteration'),char_code=char_code_from+1;char_code<char_code_upto+1;char_code++)result+=String.fromCharCode(char_code);skip_next_dash=!0,i++}else skip_next_dash="\\"===curr_char,result+=curr_char;return result}function intersection(setA,setB){if(0===setA.length)return setB;var i,chr,result="",len=setA.length;for(i=0;i<len;i++)chr=setA.charAt(i),-1!==setB.indexOf(chr)&&(result+=chr);return result}var i,len,set,neg,chr,tmp,pos_intersection="",neg_intersection="";for(i=0,len=sets.length;i<len;i++)neg="^"===(set=$coerce_to(sets[i],$$$("String"),"to_str")).charAt(0)&&set.length>1,set=explode_sequences_in_character_set(neg?set.slice(1):set),neg?neg_intersection=intersection(neg_intersection,set):pos_intersection=intersection(pos_intersection,set);if(pos_intersection.length>0&&neg_intersection.length>0){for(tmp="",i=0,len=pos_intersection.length;i<len;i++)chr=pos_intersection.charAt(i),-1===neg_intersection.indexOf(chr)&&(tmp+=chr);pos_intersection=tmp,neg_intersection=""}return pos_intersection.length>0?"["+$$$("Regexp").$escape(pos_intersection)+"]":neg_intersection.length>0?"[^"+$$$("Regexp").$escape(neg_intersection)+"]":null}self.$include($$$("Comparable")),Opal.prop(self.$$prototype,"$$is_string",!0),$def(self,"$__id__",(function(){return this.toString()})),$defs(self,"$try_convert",(function(what){return $Opal["$coerce_to?"](what,$$$("String"),"to_str")})),$defs(self,"$new",(function($a){var args,self=this,str=(args=$slice(arguments))[0]||"",opts=args[args.length-1];return str=$coerce_to(str,$$$("String"),"to_str"),opts&&opts.$$is_hash&&opts.$$smap.encoding&&(str=str.$force_encoding(opts.$$smap.encoding)),(str=new self.$$constructor(str)).$initialize.$$pristine||$send(str,"initialize",$to_a(args)),str}),-1),$def(self,"$initialize",(function($a,$b){var $post_args,$kwargs;return $post_args=$slice(arguments),$kwargs=$extract_kwargs($post_args),$kwargs=$ensure_kwargs($kwargs),$post_args.length>0&&$post_args.shift(),null==$kwargs.$$smap.encoding&&nil,null==$kwargs.$$smap.capacity&&nil,nil}),-1),$def(self,"$%",(function(data){var self=this;return $eqeqeq($$$("Array"),data)?$send(self,"format",[self].concat($to_a(data))):self.$format(self,data)})),$def(self,"$*",(function(count){if((count=$coerce_to(count,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$("ArgumentError"),"negative argument"),0===count)return"";var result="",string=this.toString();for(string.length*count>=1<<28&&$Kernel.$raise($$$("RangeError"),"multiply count must not overflow maximum string size");1==(1&count)&&(result+=string),0!==(count>>>=1);)string+=string;return result})),$def(self,"$+",(function(other){if(""==(other=$coerce_to(other,$$$("String"),"to_str"))&&this.$$class===Opal.String)return this;if(""==this&&other.$$class===Opal.String)return other;var out=this+other;return this.encoding===out.encoding&&other.encoding===out.encoding||"UTF-8"===this.encoding.name||"UTF-8"===other.encoding.name?out:Opal.enc(out,this.encoding)})),$def(self,"$<=>",(function(other){if($truthy(other["$respond_to?"]("to_str")))return this>(other=other.$to_str().$to_s())?1:this<other?-1:0;var cmp=other["$<=>"](this);return cmp===nil?nil:cmp>0?-1:cmp<0?1:0})),$def(self,"$==",(function(other){return other.$$is_string?this.toString()===other.toString():!!$respond_to(other,"$to_str")&&other["$=="](this)})),$def(self,"$=~",(function(other){return other.$$is_string&&$Kernel.$raise($$$("TypeError"),"type mismatch: String given"),other["$=~"](this)})),$def(self,"$[]",(function(index,length){var exclude,range,size=this.length;if(index.$$is_range)return exclude=index.excl,range=index,length=index.end===nil?-1:$coerce_to(index.end,$$$("Integer"),"to_int"),index=index.begin===nil?0:$coerce_to(index.begin,$$$("Integer"),"to_int"),Math.abs(index)>size?nil:(index<0&&(index+=size),length<0&&(length+=size),exclude&&range.end!==nil||(length+=1),(length-=index)<0&&(length=0),this.substr(index,length));if(index.$$is_string)return null!=length&&$Kernel.$raise($$$("TypeError")),-1!==this.indexOf(index)?index:nil;if(index.$$is_regexp){var match=this.match(index);return null===match?($gvars["~"]=nil,nil):($gvars["~"]=$$$("MatchData").$new(index,match),null==length?match[0]:(length=$coerce_to(length,$$$("Integer"),"to_int"))<0&&-length<match.length?match[length+=match.length]:length>=0&&length<match.length?match[length]:nil)}return(index=$coerce_to(index,$$$("Integer"),"to_int"))<0&&(index+=size),null==length?index>=size||index<0?nil:this.substr(index,1):(length=$coerce_to(length,$$$("Integer"),"to_int"))<0||index>size||index<0?nil:this.substr(index,length)}),-2),$def(self,"$b",(function(){return new String(this).$force_encoding("binary")})),$def(self,"$capitalize",(function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()})),$def(self,"$casecmp",(function(other){var self=this;if(!$truthy(other["$respond_to?"]("to_str")))return nil;other=$coerce_to(other,$$$("String"),"to_str").$to_s();var ascii_only=/^[\x00-\x7F]*$/;return ascii_only.test(self)&&ascii_only.test(other)&&(self=self.toLowerCase(),other=other.toLowerCase()),self["$<=>"](other)})),$def(self,"$casecmp?",(function(other){var cmp=this.$casecmp(other);return cmp===nil?nil:0===cmp})),$def(self,"$center",(function(width,padstr){if(null==padstr&&(padstr=" "),width=$coerce_to(width,$$$("Integer"),"to_int"),padstr=$coerce_to(padstr,$$$("String"),"to_str").$to_s(),$truthy(padstr["$empty?"]())&&$Kernel.$raise($$$("ArgumentError"),"zero width padding"),$truthy(width<=this.length))return this;var ljustified=this.$ljust($rb_divide($rb_plus(width,this.length),2).$ceil(),padstr);return this.$rjust($rb_divide($rb_plus(width,this.length),2).$floor(),padstr)+ljustified.slice(this.length)}),-2),$def(self,"$chomp",(function(separator){var result;if(null==$gvars["/"]&&($gvars["/"]=nil),null==separator&&(separator=$gvars["/"]),$truthy(separator===nil||0===this.length))return this;if("\n"===(separator=$Opal["$coerce_to!"](separator,$$$("String"),"to_str").$to_s()))result=this.replace(/\r?\n?$/,"");else if(""===separator)result=this.replace(/(\r?\n)+$/,"");else if(this.length>=separator.length){this.substr(this.length-separator.length,separator.length)===separator&&(result=this.substr(0,this.length-separator.length))}return null!=result?result:this}),-1),$def(self,"$chop",(function(){var length=this.length;return length<=1?"":"\n"===this.charAt(length-1)&&"\r"===this.charAt(length-2)?this.substr(0,length-2):this.substr(0,length-1)})),$def(self,"$chr",(function(){return this.charAt(0)})),$def(self,"$clone",(function($kwargs){var freeze,copy=nil;return null==(freeze=($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze)&&(freeze=nil),$truthy(freeze["$nil?"]())||$eqeq(freeze,!0)||$eqeq(freeze,!1)||this.$raise($$("ArgumentError"),"unexpected value for freeze: "+freeze.$class()),(copy=new String(this)).$copy_singleton_methods(this),copy.$initialize_clone(this,$hash2(["freeze"],{freeze:freeze})),$eqeq(freeze,!0)?copy.$$frozen||(copy.$$frozen=!0):$truthy(freeze["$nil?"]())&&this.$$frozen&&(copy.$$frozen=!0),copy}),-1),$def(self,"$dup",(function(){var copy=nil;return(copy=new String(this)).$initialize_dup(this),copy})),$def(self,"$count",(function($a){var sets,self=this;0===(sets=$slice(arguments)).length&&$Kernel.$raise($$$("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var char_class=char_class_from_char_sets(sets);return null===char_class?0:self.length-self.replace(new RegExp(char_class,"g"),"").length}),-1),$def(self,"$delete",(function($a){var sets,self=this;0===(sets=$slice(arguments)).length&&$Kernel.$raise($$$("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var char_class=char_class_from_char_sets(sets);return null===char_class?self:self.replace(new RegExp(char_class,"g"),"")}),-1),$def(self,"$delete_prefix",(function(prefix){return prefix.$$is_string||(prefix=$coerce_to(prefix,$$$("String"),"to_str")),this.slice(0,prefix.length)===prefix?this.slice(prefix.length):this})),$def(self,"$delete_suffix",(function(suffix){return suffix.$$is_string||(suffix=$coerce_to(suffix,$$$("String"),"to_str")),this.slice(this.length-suffix.length)===suffix?this.slice(0,this.length-suffix.length):this})),$def(self,"$downcase",(function(){return this.toLowerCase()})),$def(self,"$each_line",(function $$each_line($a,$b){var $post_args,$kwargs,separator,chomp,a,i,n,length,chomped,trailing,splitted,value,block=$$each_line.$$p||nil,self=this;if(null==$gvars["/"]&&($gvars["/"]=nil),$$each_line.$$p=null,$post_args=$slice(arguments),$kwargs=$extract_kwargs($post_args),$kwargs=$ensure_kwargs($kwargs),$post_args.length>0&&(separator=$post_args.shift()),null==separator&&(separator=$gvars["/"]),null==(chomp=$kwargs.$$smap.chomp)&&(chomp=!1),block===nil)return self.$enum_for("each_line",separator,$hash2(["chomp"],{chomp:chomp}));if(separator===nil)return Opal.yield1(block,self),self;if(0===(separator=$coerce_to(separator,$$$("String"),"to_str")).length){for(i=0,n=(a=self.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/)).length;i<n;i+=2)(a[i]||a[i+1])&&(value=(a[i]||"")+(a[i+1]||""),chomp&&(value=value.$chomp("\n")),Opal.yield1(block,value));return self}for(chomped=self.$chomp(separator),trailing=self.length!=chomped.length,i=0,length=(splitted=chomped.split(separator)).length;i<length;i++)value=splitted[i],(i<length-1||trailing)&&(value+=separator),chomp&&(value=value.$chomp(separator)),Opal.yield1(block,value);return self}),-1),$def(self,"$empty?",(function(){return 0===this.length})),$def(self,"$end_with?",(function($a){for(var suffixes,self=this,i=0,length=(suffixes=$slice(arguments)).length;i<length;i++){var suffix=$coerce_to(suffixes[i],$$$("String"),"to_str").$to_s();if(self.length>=suffix.length&&self.substr(self.length-suffix.length,suffix.length)==suffix)return!0}return!1}),-1),$def(self,"$gsub",(function $$gsub(pattern,replacement){var block=$$gsub.$$p||nil,self=this;if($$gsub.$$p=null,void 0===replacement&&block===nil)return self.$enum_for("gsub",pattern);var match,_replacement,lastIndex,result="",match_data=nil,index=0;for(pattern.$$is_regexp?pattern=$global_multiline_regexp(pattern):(pattern=$coerce_to(pattern,$$$("String"),"to_str"),pattern=new RegExp(pattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(null===(match=pattern.exec(self))){$gvars["~"]=nil,result+=self.slice(index);break}match_data=$$$("MatchData").$new(pattern,match),void 0===replacement?(lastIndex=pattern.lastIndex,_replacement=block(match[0]),pattern.lastIndex=lastIndex):replacement.$$is_hash?_replacement=replacement["$[]"](match[0]).$to_s():(replacement.$$is_string||(replacement=$coerce_to(replacement,$$$("String"),"to_str")),_replacement=replacement.replace(/([\\]+)([0-9+&`'])/g,(function(original,slashes,command){if(slashes.length%2==0)return original;switch(command){case"+":for(var i=match.length-1;i>0;i--)if(void 0!==match[i])return slashes.slice(1)+match[i];return"";case"&":return slashes.slice(1)+match[0];case"`":return slashes.slice(1)+self.slice(0,match.index);case"'":return slashes.slice(1)+self.slice(match.index+match[0].length);default:return slashes.slice(1)+(match[command]||"")}})).replace(/\\\\/g,"\\")),pattern.lastIndex===match.index?(result+=self.slice(index,match.index)+_replacement+(self[match.index]||""),pattern.lastIndex+=1):result+=self.slice(index,match.index)+_replacement,index=pattern.lastIndex}return $gvars["~"]=match_data,result}),-2),$def(self,"$hash",(function(){return this.toString()})),$def(self,"$hex",(function(){return this.$to_i(16)})),$def(self,"$include?",(function(other){return other.$$is_string||(other=$coerce_to(other,$$$("String"),"to_str")),-1!==this.indexOf(other)})),$def(self,"$index",(function(search,offset){var index,match,regex;if(void 0===offset)offset=0;else if((offset=$coerce_to(offset,$$$("Integer"),"to_int"))<0&&(offset+=this.length)<0)return nil;if(search.$$is_regexp)for(regex=$global_multiline_regexp(search);;){if(null===(match=regex.exec(this))){$gvars["~"]=nil,index=-1;break}if(match.index>=offset){$gvars["~"]=$$$("MatchData").$new(regex,match),index=match.index;break}regex.lastIndex=match.index+1}else index=0===(search=$coerce_to(search,$$$("String"),"to_str")).length&&offset>this.length?-1:this.indexOf(search,offset);return-1===index?nil:index}),-2),$def(self,"$inspect",(function(){var self=this,meta={"":"\\a","":"\\e","\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+self.replace(/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,(function(chr){return meta[chr]?meta[chr]:(chr=chr.charCodeAt(0))<=255&&(self.encoding["$binary?"]()||self.internal_encoding["$binary?"]())?"\\x"+("00"+chr.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+chr.toString(16).toUpperCase()).slice(-4)})).replace(/\#[\$\@\{]/g,"\\$&")+'"'})),$def(self,"$intern",(function(){return this.toString()})),$def(self,"$length",(function(){return this.length})),$alias(self,"size","length"),$def(self,"$lines",(function $$lines($a,$b){var $post_args,$kwargs,separator,chomp,block=$$lines.$$p||nil,self=this,e=nil;return null==$gvars["/"]&&($gvars["/"]=nil),$$lines.$$p=null,$post_args=$slice(arguments),$kwargs=$extract_kwargs($post_args),$kwargs=$ensure_kwargs($kwargs),$post_args.length>0&&(separator=$post_args.shift()),null==separator&&(separator=$gvars["/"]),null==(chomp=$kwargs.$$smap.chomp)&&(chomp=!1),e=$send(self,"each_line",[separator,$hash2(["chomp"],{chomp:chomp})],block.$to_proc()),$truthy(block)?self:e.$to_a()}),-1),$def(self,"$ljust",(function(width,padstr){if(null==padstr&&(padstr=" "),width=$coerce_to(width,$$$("Integer"),"to_int"),padstr=$coerce_to(padstr,$$$("String"),"to_str").$to_s(),$truthy(padstr["$empty?"]())&&$Kernel.$raise($$$("ArgumentError"),"zero width padding"),$truthy(width<=this.length))return this;var index=-1,result="";for(width-=this.length;++index<width;)result+=padstr;return this+result.slice(0,width)}),-2),$def(self,"$lstrip",(function(){return this.replace(/^[\u0000\s]*/,"")})),$def(self,"$ascii_only?",(function(){return!!this.encoding.ascii&&/^[\x00-\x7F]*$/.test(this)})),$def(self,"$match",(function $$match(pattern,pos){var block=$$match.$$p||nil;return $$match.$$p=null,($eqeqeq($$("String"),pattern)||$truthy(pattern["$respond_to?"]("to_str")))&&(pattern=$$$("Regexp").$new(pattern.$to_str())),$eqeqeq($$$("Regexp"),pattern)||$Kernel.$raise($$$("TypeError"),"wrong argument type "+pattern.$class()+" (expected Regexp)"),$send(pattern,"match",[this,pos],block.$to_proc())}),-2),$def(self,"$match?",(function(pattern,pos){return($eqeqeq($$("String"),pattern)||$truthy(pattern["$respond_to?"]("to_str")))&&(pattern=$$$("Regexp").$new(pattern.$to_str())),$eqeqeq($$$("Regexp"),pattern)||$Kernel.$raise($$$("TypeError"),"wrong argument type "+pattern.$class()+" (expected Regexp)"),pattern["$match?"](this,pos)}),-2),$def(self,"$next",(function(){var i=this.length;if(0===i)return"";for(var code,result=this,first_alphanum_char_index=this.search(/[a-zA-Z0-9]/),carry=!1;i--;){if((code=this.charCodeAt(i))>=48&&code<=57||code>=65&&code<=90||code>=97&&code<=122)switch(code){case 57:carry=!0,code=48;break;case 90:carry=!0,code=65;break;case 122:carry=!0,code=97;break;default:carry=!1,code+=1}else-1===first_alphanum_char_index?255===code?(carry=!0,code=0):(carry=!1,code+=1):carry=!0;if(result=result.slice(0,i)+String.fromCharCode(code)+result.slice(i+1),carry&&(0===i||i===first_alphanum_char_index)){switch(code){case 65:case 97:break;default:code+=1}result=0===i?String.fromCharCode(code)+result:result.slice(0,i)+String.fromCharCode(code)+result.slice(i),carry=!1}if(!carry)break}return result})),$def(self,"$oct",(function(){var result,string=this,radix=8;return/^\s*_/.test(string)?0:(string=string.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,(function(original,head,flag,tail){switch(tail.charAt(0)){case"+":case"-":return original;case"0":if("x"===tail.charAt(1)&&"0x"===flag)return original}switch(flag){case"0b":radix=2;break;case"0":case"0o":radix=8;break;case"0d":radix=10;break;case"0x":radix=16}return head+tail})),result=parseInt(string.replace(/_(?!_)/g,""),radix),isNaN(result)?0:result)})),$def(self,"$ord",(function(){return"function"==typeof this.codePointAt?this.codePointAt(0):this.charCodeAt(0)})),$def(self,"$partition",(function(sep){var i,m;return sep.$$is_regexp?null===(m=sep.exec(this))?i=-1:($$$("MatchData").$new(sep,m),sep=m[0],i=m.index):(sep=$coerce_to(sep,$$$("String"),"to_str"),i=this.indexOf(sep)),-1===i?[this,"",""]:[this.slice(0,i),this.slice(i,i+sep.length),this.slice(i+sep.length)]})),$def(self,"$reverse",(function(){return this.split("").reverse().join("")})),$def(self,"$rindex",(function(search,offset){var i,m,r,_m;if(void 0===offset)offset=this.length;else if((offset=$coerce_to(offset,$$$("Integer"),"to_int"))<0&&(offset+=this.length)<0)return nil;if(search.$$is_regexp){for(m=null,r=$global_multiline_regexp(search);!(null===(_m=r.exec(this))||_m.index>offset);)m=_m,r.lastIndex=m.index+1;null===m?($gvars["~"]=nil,i=-1):($$$("MatchData").$new(r,m),i=m.index)}else search=$coerce_to(search,$$$("String"),"to_str"),i=this.lastIndexOf(search,offset);return-1===i?nil:i}),-2),$def(self,"$rjust",(function(width,padstr){if(null==padstr&&(padstr=" "),width=$coerce_to(width,$$$("Integer"),"to_int"),padstr=$coerce_to(padstr,$$$("String"),"to_str").$to_s(),$truthy(padstr["$empty?"]())&&$Kernel.$raise($$$("ArgumentError"),"zero width padding"),$truthy(width<=this.length))return this;var chars=Math.floor(width-this.length),patterns=Math.floor(chars/padstr.length),result=Array(patterns+1).join(padstr),remaining=chars-result.length;return result+padstr.slice(0,remaining)+this}),-2),$def(self,"$rpartition",(function(sep){var i,m,r,_m;if(sep.$$is_regexp){for(m=null,r=$global_multiline_regexp(sep);null!==(_m=r.exec(this));)m=_m,r.lastIndex=m.index+1;null===m?i=-1:($$$("MatchData").$new(r,m),sep=m[0],i=m.index)}else sep=$coerce_to(sep,$$$("String"),"to_str"),i=this.lastIndexOf(sep);return-1===i?["","",this]:[this.slice(0,i),this.slice(i,i+sep.length),this.slice(i+sep.length)]})),$def(self,"$rstrip",(function(){return this.replace(/[\s\u0000]*$/,"")})),$def(self,"$scan",(function $$scan(pattern,$kwargs){var no_matchdata,block=$$scan.$$p||nil;$$scan.$$p=null,null==(no_matchdata=($kwargs=$ensure_kwargs($kwargs)).$$smap.no_matchdata)&&(no_matchdata=!1);var match,result=[],match_data=nil;for(pattern.$$is_regexp?pattern=$global_multiline_regexp(pattern):(pattern=$coerce_to(pattern,$$$("String"),"to_str"),pattern=new RegExp(pattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(match=pattern.exec(this));)match_data=$$$("MatchData").$new(pattern,match,$hash2(["no_matchdata"],{no_matchdata:no_matchdata})),block===nil?1==match.length?result.push(match[0]):result.push(match_data.$captures()):1==match.length?Opal.yield1(block,match[0]):Opal.yield1(block,match_data.$captures()),pattern.lastIndex===match.index&&(pattern.lastIndex+=1);return no_matchdata||($gvars["~"]=match_data),block!==nil?this:result}),-2),$def(self,"$singleton_class",(function(){return Opal.get_singleton_class(this)})),$def(self,"$split",(function(pattern,limit){var $ret_or_1=nil;if(null==$gvars[";"]&&($gvars[";"]=nil),0===this.length)return[];if(void 0===limit)limit=0;else if(1===(limit=$Opal["$coerce_to!"](limit,$$$("Integer"),"to_int")))return[this];void 0!==pattern&&pattern!==nil||(pattern=$truthy($ret_or_1=$gvars[";"])?$ret_or_1:" ");var match,i,ii,result=[],string=this.toString(),index=0;if(pattern.$$is_regexp?pattern=$global_multiline_regexp(pattern):" "===(pattern=$coerce_to(pattern,$$$("String"),"to_str").$to_s())?(pattern=/\s+/gm,string=string.replace(/^\s+/,"")):pattern=new RegExp(pattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"),1===(result=string.split(pattern)).length&&result[0]===string)return[result[0]];for(;-1!==(i=result.indexOf(void 0));)result.splice(i,1);if(0===limit){for(;""===result[result.length-1];)result.length-=1;return result}if(match=pattern.exec(string),limit<0){if(null!==match&&""===match[0]&&-1===pattern.source.indexOf("(?="))for(i=0,ii=match.length;i<ii;i++)result.push("");return result}if(null!==match&&""===match[0])return result.splice(limit-1,result.length-1,result.slice(limit-1).join("")),result;if(limit>=result.length)return result;for(i=0;null!==match&&(i++,index=pattern.lastIndex,i+1!==limit);)match=pattern.exec(string);return result.splice(limit-1,result.length-1,string.slice(index)),result}),-1),$def(self,"$squeeze",(function($a){var sets,self=this;if(0===(sets=$slice(arguments)).length)return self.replace(/(.)\1+/g,"$1");var char_class=char_class_from_char_sets(sets);return null===char_class?self:self.replace(new RegExp("("+char_class+")\\1+","g"),"$1")}),-1),$def(self,"$start_with?",(function($a){for(var prefixes,self=this,i=0,length=(prefixes=$slice(arguments)).length;i<length;i++)if(prefixes[i].$$is_regexp){var regexp=prefixes[i],match=regexp.exec(self);if(null!=match&&0===match.index)return $gvars["~"]=$$$("MatchData").$new(regexp,match),!0;$gvars["~"]=nil}else{var prefix=$coerce_to(prefixes[i],$$$("String"),"to_str").$to_s();if(0===self.indexOf(prefix))return!0}return!1}),-1),$def(self,"$strip",(function(){return this.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")})),$def(self,"$sub",(function $$sub(pattern,replacement){var block=$$sub.$$p||nil,self=this;$$sub.$$p=null,pattern.$$is_regexp||(pattern=$coerce_to(pattern,$$$("String"),"to_str"),pattern=new RegExp(pattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var result,match=pattern.exec(self);return null===match?($gvars["~"]=nil,result=self.toString()):($$$("MatchData").$new(pattern,match),void 0===replacement?(block===nil&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (1 for 2)"),result=self.slice(0,match.index)+block(match[0])+self.slice(match.index+match[0].length)):replacement.$$is_hash?result=self.slice(0,match.index)+replacement["$[]"](match[0]).$to_s()+self.slice(match.index+match[0].length):(replacement=(replacement=$coerce_to(replacement,$$$("String"),"to_str")).replace(/([\\]+)([0-9+&`'])/g,(function(original,slashes,command){if(slashes.length%2==0)return original;switch(command){case"+":for(var i=match.length-1;i>0;i--)if(void 0!==match[i])return slashes.slice(1)+match[i];return"";case"&":return slashes.slice(1)+match[0];case"`":return slashes.slice(1)+self.slice(0,match.index);case"'":return slashes.slice(1)+self.slice(match.index+match[0].length);default:return slashes.slice(1)+(match[command]||"")}})).replace(/\\\\/g,"\\"),result=self.slice(0,match.index)+replacement+self.slice(match.index+match[0].length))),result}),-2),$def(self,"$sum",(function(n){null==n&&(n=16),n=$coerce_to(n,$$$("Integer"),"to_int");for(var result=0,length=this.length,i=0;i<length;i++)result+=this.charCodeAt(i);return n<=0?result:result&Math.pow(2,n)-1}),-1),$def(self,"$swapcase",(function(){return this.replace(/([a-z]+)|([A-Z]+)/g,(function($0,$1,$2){return $1?$0.toUpperCase():$0.toLowerCase()}))})),$def(self,"$to_f",(function(){if("_"===this.charAt(0))return 0;var result=parseFloat(this.replace(/_/g,""));return isNaN(result)||result==1/0||result==-1/0?0:result})),$def(self,"$to_i",(function(base){null==base&&(base=10);var result,string=this.toLowerCase(),radix=$coerce_to(base,$$$("Integer"),"to_int");return(1===radix||radix<0||radix>36)&&$Kernel.$raise($$$("ArgumentError"),"invalid radix "+radix),/^\s*_/.test(string)?0:(string=string.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,(function(original,head,flag,tail){switch(tail.charAt(0)){case"+":case"-":return original;case"0":if("x"===tail.charAt(1)&&"0x"===flag&&(0===radix||16===radix))return original}switch(flag){case"0b":if(0===radix||2===radix)return radix=2,head+tail;break;case"0":case"0o":if(0===radix||8===radix)return radix=8,head+tail;break;case"0d":if(0===radix||10===radix)return radix=10,head+tail;break;case"0x":if(0===radix||16===radix)return radix=16,head+tail}return original})),result=parseInt(string.replace(/_(?!_)/g,""),radix),isNaN(result)?0:result)}),-1),$def(self,"$to_proc",(function $$to_proc(){var method_name,jsid,proc=nil;return $$to_proc.$$p=null,method_name=this.valueOf(),jsid=Opal.jsid(method_name),proc=$send($Kernel,"proc",[],(function $$17($a){var args,block=$$17.$$p||nil;$$17.$$p=null,0===(args=$slice(arguments)).length&&$Kernel.$raise($$$("ArgumentError"),"no receiver given");var recv=args[0];null==recv&&(recv=nil);var body=recv[jsid];return body?args=args.slice(1):(body=recv.$method_missing,args[0]=method_name),"function"==typeof block&&(body.$$p=block),0===args.length?body.call(recv):body.apply(recv,args)}),-1),proc.$$source_location=nil,proc})),$def(self,"$to_s",(function(){return this.toString()})),$def(self,"$tr",(function(from,to){var i,in_range,c,ch,start,end,length;if(from=$coerce_to(from,$$$("String"),"to_str").$to_s(),to=$coerce_to(to,$$$("String"),"to_str").$to_s(),0==from.length||from===to)return this;var subs={},from_chars=from.split(""),from_length=from_chars.length,to_chars=to.split(""),to_length=to_chars.length,inverse=!1,global_sub=null;"^"===from_chars[0]&&from_chars.length>1&&(inverse=!0,from_chars.shift(),global_sub=to_chars[to_length-1],from_length-=1);var from_chars_expanded=[],last_from=null;for(in_range=!1,i=0;i<from_length;i++)if(ch=from_chars[i],null==last_from)last_from=ch,from_chars_expanded.push(ch);else if("-"===ch)"-"===last_from?(from_chars_expanded.push("-"),from_chars_expanded.push("-")):i==from_length-1?from_chars_expanded.push("-"):in_range=!0;else if(in_range){for((start=last_from.charCodeAt(0))>(end=ch.charCodeAt(0))&&$Kernel.$raise($$$("ArgumentError"),'invalid range "'+String.fromCharCode(start)+"-"+String.fromCharCode(end)+'" in string transliteration'),c=start+1;c<end;c++)from_chars_expanded.push(String.fromCharCode(c));from_chars_expanded.push(ch),in_range=null,last_from=null}else from_chars_expanded.push(ch);if(from_length=(from_chars=from_chars_expanded).length,inverse)for(i=0;i<from_length;i++)subs[from_chars[i]]=!0;else{if(to_length>0){var to_chars_expanded=[],last_to=null;for(in_range=!1,i=0;i<to_length;i++)if(ch=to_chars[i],null==last_to)last_to=ch,to_chars_expanded.push(ch);else if("-"===ch)"-"===last_to?(to_chars_expanded.push("-"),to_chars_expanded.push("-")):i==to_length-1?to_chars_expanded.push("-"):in_range=!0;else if(in_range){for((start=last_to.charCodeAt(0))>(end=ch.charCodeAt(0))&&$Kernel.$raise($$$("ArgumentError"),'invalid range "'+String.fromCharCode(start)+"-"+String.fromCharCode(end)+'" in string transliteration'),c=start+1;c<end;c++)to_chars_expanded.push(String.fromCharCode(c));to_chars_expanded.push(ch),in_range=null,last_to=null}else to_chars_expanded.push(ch);to_length=(to_chars=to_chars_expanded).length}var length_diff=from_length-to_length;if(length_diff>0){var pad_char=to_length>0?to_chars[to_length-1]:"";for(i=0;i<length_diff;i++)to_chars.push(pad_char)}for(i=0;i<from_length;i++)subs[from_chars[i]]=to_chars[i]}var new_str="";for(i=0,length=this.length;i<length;i++){var sub=subs[ch=this.charAt(i)];new_str+=inverse?null==sub?global_sub:ch:null!=sub?sub:ch}return new_str})),$def(self,"$tr_s",(function(from,to){var i,in_range,c,ch,start,end,length;if(from=$coerce_to(from,$$$("String"),"to_str").$to_s(),to=$coerce_to(to,$$$("String"),"to_str").$to_s(),0==from.length)return this;var subs={},from_chars=from.split(""),from_length=from_chars.length,to_chars=to.split(""),to_length=to_chars.length,inverse=!1,global_sub=null;"^"===from_chars[0]&&from_chars.length>1&&(inverse=!0,from_chars.shift(),global_sub=to_chars[to_length-1],from_length-=1);var from_chars_expanded=[],last_from=null;for(in_range=!1,i=0;i<from_length;i++)if(ch=from_chars[i],null==last_from)last_from=ch,from_chars_expanded.push(ch);else if("-"===ch)"-"===last_from?(from_chars_expanded.push("-"),from_chars_expanded.push("-")):i==from_length-1?from_chars_expanded.push("-"):in_range=!0;else if(in_range){for((start=last_from.charCodeAt(0))>(end=ch.charCodeAt(0))&&$Kernel.$raise($$$("ArgumentError"),'invalid range "'+String.fromCharCode(start)+"-"+String.fromCharCode(end)+'" in string transliteration'),c=start+1;c<end;c++)from_chars_expanded.push(String.fromCharCode(c));from_chars_expanded.push(ch),in_range=null,last_from=null}else from_chars_expanded.push(ch);if(from_length=(from_chars=from_chars_expanded).length,inverse)for(i=0;i<from_length;i++)subs[from_chars[i]]=!0;else{if(to_length>0){var to_chars_expanded=[];for(in_range=!1,i=0;i<to_length;i++)if(ch=to_chars[i],null==last_from)last_from=ch,to_chars_expanded.push(ch);else if("-"===ch)i==to_length-1?to_chars_expanded.push("-"):in_range=!0;else if(in_range){for((start=last_from.charCodeAt(0))>(end=ch.charCodeAt(0))&&$Kernel.$raise($$$("ArgumentError"),'invalid range "'+String.fromCharCode(start)+"-"+String.fromCharCode(end)+'" in string transliteration'),c=start+1;c<end;c++)to_chars_expanded.push(String.fromCharCode(c));to_chars_expanded.push(ch),in_range=null,last_from=null}else to_chars_expanded.push(ch);to_length=(to_chars=to_chars_expanded).length}var length_diff=from_length-to_length;if(length_diff>0){var pad_char=to_length>0?to_chars[to_length-1]:"";for(i=0;i<length_diff;i++)to_chars.push(pad_char)}for(i=0;i<from_length;i++)subs[from_chars[i]]=to_chars[i]}var new_str="",last_substitute=null;for(i=0,length=this.length;i<length;i++){var sub=subs[ch=this.charAt(i)];inverse?null==sub?null==last_substitute&&(new_str+=global_sub,last_substitute=!0):(new_str+=ch,last_substitute=null):null!=sub?null!=last_substitute&&last_substitute===sub||(new_str+=sub,last_substitute=sub):(new_str+=ch,last_substitute=null)}return new_str})),$def(self,"$upcase",(function(){return this.toUpperCase()})),$def(self,"$upto",(function $$upto(stop,excl){var block=$$upto.$$p||nil;if($$upto.$$p=null,null==excl&&(excl=!1),block===nil)return this.$enum_for("upto",stop,excl);var a,b,s=this.toString();if(stop=$coerce_to(stop,$$$("String"),"to_str"),1===s.length&&1===stop.length)for(a=s.charCodeAt(0),b=stop.charCodeAt(0);a<=b&&(!excl||a!==b);)block(String.fromCharCode(a)),a+=1;else if(parseInt(s,10).toString()===s&&parseInt(stop,10).toString()===stop)for(a=parseInt(s,10),b=parseInt(stop,10);a<=b&&(!excl||a!==b);)block(a.toString()),a+=1;else for(;s.length<=stop.length&&s<=stop&&(!excl||s!==stop);)block(s),s=s.$succ();return this}),-2),$def(self,"$instance_variables",(function(){return[]})),$defs(self,"$_load",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send(self,"new",$to_a($post_args))}),-1),$def(self,"$unicode_normalize",(function(form){return null==form&&(form="nfc"),$truthy(["nfc","nfd","nfkc","nfkd"]["$include?"](form))||$Kernel.$raise($$$("ArgumentError"),"Invalid normalization form "+form),this.normalize(form.$upcase())}),-1),$def(self,"$unicode_normalized?",(function(form){return null==form&&(form="nfc"),this.$unicode_normalize(form)["$=="](this)}),-1),$def(self,"$unpack",(function(format){return $Kernel.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")})),$def(self,"$unpack1",(function(format){return $Kernel.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")})),$def(self,"$freeze",(function(){return"string"==typeof this||$prop(this,"$$frozen",!0),this})),$def(self,"$-@",(function(){return"string"==typeof this||this.$$frozen?this:"UTF-8"==this.encoding.name&&"UTF-8"==this.internal_encoding.name?this.toString():this.$dup().$freeze()})),$def(self,"$frozen?",(function(){return"string"==typeof this||!0===this.$$frozen})),$alias(self,"+@","dup"),$alias(self,"===","=="),$alias(self,"byteslice","[]"),$alias(self,"eql?","=="),$alias(self,"equal?","==="),$alias(self,"object_id","__id__"),$alias(self,"slice","[]"),$alias(self,"succ","next"),$alias(self,"to_str","to_s"),$alias(self,"to_sym","intern"),$Opal.$pristine(self,"initialize")}(0,0,$nesting),$const_set($nesting[0],"Symbol",$$("String"))},Opal.modules["corelib/enumerable"]=function(Opal){var $truthy=Opal.truthy,$coerce_to=Opal.coerce_to,$yield1=Opal.yield1,$yieldX=Opal.yieldX,$deny_frozen_access=Opal.deny_frozen_access,$module=Opal.module,$send=Opal.send,$slice=Opal.slice,$to_a=Opal.to_a,$Opal=Opal.Opal,$thrower=Opal.thrower,$def=Opal.def,$Kernel=Opal.Kernel,$return_val=Opal.return_val,$rb_gt=Opal.rb_gt,$rb_times=Opal.rb_times,$rb_lt=Opal.rb_lt,$eqeq=Opal.eqeq,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$rb_divide=Opal.rb_divide,$rb_le=Opal.rb_le,$hash2=Opal.hash2,$lambda=Opal.lambda,$not=Opal.not,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function($base,$parent_nesting){var self=$module("::","Enumerable"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function comparableForPattern(value){return 0===value.length&&(value=[nil]),value.length>1&&(value=[value]),value}return $def(self,"$all?",(function $Enumerable_all$ques$1(pattern){try{var $t_return=$thrower("return"),block=$Enumerable_all$ques$1.$$p||nil;return $Enumerable_all$ques$1.$$p=null,$truthy(void 0!==pattern)?$send(this,"each",[],(function($a){var comparable=nil;if(comparable=comparableForPattern($slice(arguments)),$truthy($send(pattern,"public_send",["==="].concat($to_a(comparable)))))return nil;$t_return.$throw(!1)}),{$$arity:-1,$$ret:$t_return}):$send(this,"each",[],block!==nil?function($a){var value;if(value=$slice(arguments),$truthy(Opal.yieldX(block,$to_a(value))))return nil;$t_return.$throw(!1)}:function($a){var value;if(value=$slice(arguments),$truthy($Opal.$destructure(value)))return nil;$t_return.$throw(!1)},{$$arity:-1,$$ret:$t_return}),!0}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$any?",(function $Enumerable_any$ques$5(pattern){try{var $t_return=$thrower("return"),block=$Enumerable_any$ques$5.$$p||nil;return $Enumerable_any$ques$5.$$p=null,$truthy(void 0!==pattern)?$send(this,"each",[],(function($a){var comparable=nil;if(comparable=comparableForPattern($slice(arguments)),!$truthy($send(pattern,"public_send",["==="].concat($to_a(comparable)))))return nil;$t_return.$throw(!0)}),{$$arity:-1,$$ret:$t_return}):$send(this,"each",[],block!==nil?function($a){var value;if(value=$slice(arguments),!$truthy(Opal.yieldX(block,$to_a(value))))return nil;$t_return.$throw(!0)}:function($a){var value;if(value=$slice(arguments),!$truthy($Opal.$destructure(value)))return nil;$t_return.$throw(!0)},{$$arity:-1,$$ret:$t_return}),!1}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$chunk",(function $$chunk(){var block=$$chunk.$$p||nil;return $$chunk.$$p=null,block===nil?$send(this,"to_enum",["chunk"],(function $$9(){return(null==$$9.$$s?this:$$9.$$s).$enumerator_size()}),{$$s:this}):$send($$$("Enumerator"),"new",[],(function $$10(yielder){var self=null==$$10.$$s?this:$$10.$$s;null==yielder&&(yielder=nil);var previous=nil,accumulate=[];function releaseAccumulate(){accumulate.length>0&&yielder.$yield(previous,accumulate)}self.$each.$$p=function(value){var key=$yield1(block,value);key===nil?(releaseAccumulate(),accumulate=[],previous=nil):(previous===nil||previous===key?accumulate.push(value):(releaseAccumulate(),accumulate=[value]),previous=key)},self.$each(),releaseAccumulate()}),{$$s:this})})),$def(self,"$chunk_while",(function $$chunk_while(){var block=$$chunk_while.$$p||nil;return $$chunk_while.$$p=null,block===nil&&$Kernel.$raise($$$("ArgumentError"),"no block given"),$send(this,"slice_when",[],(function(before,after){return null==before&&(before=nil),null==after&&(after=nil),Opal.yieldX(block,[before,after])["$!"]()}))})),$def(self,"$collect",(function $$collect(){var block=$$collect.$$p||nil;if($$collect.$$p=null,block===nil)return $send(this,"enum_for",["collect"],(function $$12(){return(null==$$12.$$s?this:$$12.$$s).$enumerator_size()}),{$$s:this});var result=[];return this.$each.$$p=function(){var value=$yieldX(block,arguments);result.push(value)},this.$each(),result})),$def(self,"$collect_concat",(function $$collect_concat(){var block=$$collect_concat.$$p||nil;return $$collect_concat.$$p=null,block===nil?$send(this,"enum_for",["collect_concat"],(function $$13(){return(null==$$13.$$s?this:$$13.$$s).$enumerator_size()}),{$$s:this}):$send(this,"map",[],block.$to_proc()).$flatten(1)})),$def(self,"$compact",(function(){return this.$to_a().$compact()})),$def(self,"$count",(function $$count(object){var block=$$count.$$p||nil,result=nil;return $$count.$$p=null,result=0,null!=object&&block!==nil&&this.$warn("warning: given block not used"),$truthy(null!=object)?block=$send($Kernel,"proc",[],(function($a){var args;return args=$slice(arguments),$Opal.$destructure(args)["$=="](object)}),-1):$truthy(block["$nil?"]())&&(block=$send($Kernel,"proc",[],$return_val(!0))),$send(this,"each",[],(function($a){var $post_args;return $post_args=$slice(arguments),$truthy($yieldX(block,$post_args))?result++:nil}),-1),result}),-1),$def(self,"$cycle",(function $$cycle(n){var block=$$cycle.$$p||nil;if($$cycle.$$p=null,null==n&&(n=nil),block===nil)return $send(this,"enum_for",["cycle",n],(function $$16(){var self=null==$$16.$$s?this:$$16.$$s;return $truthy(n["$nil?"]())?$truthy(self["$respond_to?"]("size"))?$$$($$$("Float"),"INFINITY"):nil:(n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$truthy($rb_gt(n,0))?$rb_times(self.$enumerator_size(),n):0)}),{$$s:this});if(!$truthy(n["$nil?"]())&&(n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$truthy(n<=0)))return nil;var i,length,all=[];if(this.$each.$$p=function(){var param=$Opal.$destructure(arguments);$yield1(block,param);all.push(param)},this.$each(),0===all.length)return nil;if(n===nil)for(;;)for(i=0,length=all.length;i<length;i++)$yield1(block,all[i]);else for(;n>1;){for(i=0,length=all.length;i<length;i++)$yield1(block,all[i]);n--}}),-1),$def(self,"$detect",(function $$detect(ifnone){try{var $t_return=$thrower("return"),block=$$detect.$$p||nil;return $$detect.$$p=null,block===nil?this.$enum_for("detect",ifnone):($send(this,"each",[],(function($a){var args,value=nil;if(args=$slice(arguments),value=$Opal.$destructure(args),!$truthy(Opal.yield1(block,value)))return nil;$t_return.$throw(value)}),{$$arity:-1,$$ret:$t_return}),void 0!==ifnone?"function"==typeof ifnone?ifnone():ifnone:nil)}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$drop",(function(number){number=$coerce_to(number,$$$("Integer"),"to_int"),$truthy(number<0)&&$Kernel.$raise($$$("ArgumentError"),"attempt to drop negative size");var result=[],current=0;return this.$each.$$p=function(){number<=current&&result.push($Opal.$destructure(arguments)),current++},this.$each(),result})),$def(self,"$drop_while",(function $$drop_while(){var block=$$drop_while.$$p||nil;if($$drop_while.$$p=null,block===nil)return this.$enum_for("drop_while");var result=[],dropping=!0;return this.$each.$$p=function(){var param=$Opal.$destructure(arguments);if(dropping){var value=$yield1(block,param);$truthy(value)||(dropping=!1,result.push(param))}else result.push(param)},this.$each(),result})),$def(self,"$each_cons",(function $$each_cons(n){var block=$$each_cons.$$p||nil,self=this;if($$each_cons.$$p=null,$truthy(1!=arguments.length)&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),n=$Opal.$try_convert(n,$$$("Integer"),"to_int"),$truthy(n<=0)&&$Kernel.$raise($$$("ArgumentError"),"invalid size"),block===nil)return $send(self,"enum_for",["each_cons",n],(function $$18(){var enum_size=nil;return enum_size=(null==$$18.$$s?this:$$18.$$s).$enumerator_size(),$truthy(enum_size["$nil?"]())?nil:$eqeq(enum_size,0)||$truthy($rb_lt(enum_size,n))?0:$rb_plus($rb_minus(enum_size,n),1)}),{$$s:self});var buffer=[];return self.$each.$$p=function(){var element=$Opal.$destructure(arguments);buffer.push(element),buffer.length>n&&buffer.shift(),buffer.length==n&&$yield1(block,buffer.slice(0,n))},self.$each(),self})),$def(self,"$each_entry",(function $$each_entry($a){var data,block=$$each_entry.$$p||nil,self=this;return $$each_entry.$$p=null,data=$slice(arguments),block===nil?$send(self,"to_enum",["each_entry"].concat($to_a(data)),(function $$19(){return(null==$$19.$$s?this:$$19.$$s).$enumerator_size()}),{$$s:self}):(self.$each.$$p=function(){var item=$Opal.$destructure(arguments);$yield1(block,item)},self.$each.apply(self,data),self)}),-1),$def(self,"$each_slice",(function $$each_slice(n){var block=$$each_slice.$$p||nil;if($$each_slice.$$p=null,n=$coerce_to(n,$$$("Integer"),"to_int"),$truthy(n<=0)&&$Kernel.$raise($$$("ArgumentError"),"invalid slice size"),block===nil)return $send(this,"enum_for",["each_slice",n],(function $$20(){var self=null==$$20.$$s?this:$$20.$$s;return $truthy(self["$respond_to?"]("size"))?$rb_divide(self.$size(),n).$ceil():nil}),{$$s:this});var slice=[];return this.$each.$$p=function(){var param=$Opal.$destructure(arguments);slice.push(param),slice.length===n&&($yield1(block,slice),slice=[])},this.$each(),slice.length>0&&$yield1(block,slice),this})),$def(self,"$each_with_index",(function $$each_with_index($a){var args,block=$$each_with_index.$$p||nil,self=this;if($$each_with_index.$$p=null,args=$slice(arguments),block===nil)return $send(self,"enum_for",["each_with_index"].concat($to_a(args)),(function $$21(){return(null==$$21.$$s?this:$$21.$$s).$enumerator_size()}),{$$s:self});var index=0;return self.$each.$$p=function(){var param=$Opal.$destructure(arguments);block(param,index),index++},self.$each.apply(self,args),self}),-1),$def(self,"$each_with_object",(function $$each_with_object(object){var block=$$each_with_object.$$p||nil;return $$each_with_object.$$p=null,block===nil?$send(this,"enum_for",["each_with_object",object],(function $$22(){return(null==$$22.$$s?this:$$22.$$s).$enumerator_size()}),{$$s:this}):(this.$each.$$p=function(){var param=$Opal.$destructure(arguments);block(param,object)},this.$each(),object)})),$def(self,"$entries",(function($a){var args,self=this;args=$slice(arguments);var result=[];return self.$each.$$p=function(){result.push($Opal.$destructure(arguments))},self.$each.apply(self,args),result}),-1),$def(self,"$filter_map",(function $$filter_map(){var block=$$filter_map.$$p||nil;return $$filter_map.$$p=null,block===nil?$send(this,"enum_for",["filter_map"],(function $$23(){return(null==$$23.$$s?this:$$23.$$s).$enumerator_size()}),{$$s:this}):$send($send(this,"map",[],block.$to_proc()),"select",[],"itself".$to_proc())})),$def(self,"$find_all",(function $$find_all(){var block=$$find_all.$$p||nil;if($$find_all.$$p=null,block===nil)return $send(this,"enum_for",["find_all"],(function $$24(){return(null==$$24.$$s?this:$$24.$$s).$enumerator_size()}),{$$s:this});var result=[];return this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);$truthy(value)&&result.push(param)},this.$each(),result})),$def(self,"$find_index",(function $$find_index(object){try{var $t_return=$thrower("return"),block=$$find_index.$$p||nil,index=nil;return $$find_index.$$p=null,$truthy(void 0===object&&block===nil)?this.$enum_for("find_index"):(null!=object&&block!==nil&&this.$warn("warning: given block not used"),index=0,$truthy(null!=object)?$send(this,"each",[],(function($a){var value;return value=$slice(arguments),$eqeq($Opal.$destructure(value),object)&&$t_return.$throw(index),index+=1}),{$$arity:-1,$$ret:$t_return}):$send(this,"each",[],(function($a){var value;return value=$slice(arguments),$truthy(Opal.yieldX(block,$to_a(value)))&&$t_return.$throw(index),index+=1}),{$$arity:-1,$$ret:$t_return}),nil)}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$first",(function(number){try{var $t_return=$thrower("return"),result=nil,current=nil;return $truthy(void 0===number)?$send(this,"each",[],(function(value){null==value&&(value=nil),$t_return.$throw(value)}),{$$ret:$t_return}):(result=[],number=$coerce_to(number,$$$("Integer"),"to_int"),$truthy(number<0)&&$Kernel.$raise($$$("ArgumentError"),"attempt to take negative size"),$truthy(0==number)?[]:(current=0,$send(this,"each",[],(function($a){var args;if(args=$slice(arguments),result.push($Opal.$destructure(args)),!$truthy(number<=++current))return nil;$t_return.$throw(result)}),{$$arity:-1,$$ret:$t_return}),result))}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$grep",(function $$grep(pattern){var block=$$grep.$$p||nil,result=nil;return $$grep.$$p=null,result=[],$send(this,"each",[],(function($a){var value,cmp=nil;return cmp=comparableForPattern(value=$slice(arguments)),$truthy($send(pattern,"__send__",["==="].concat($to_a(cmp))))?(block!==nil?($truthy($rb_gt(value.$length(),1))&&(value=[value]),value=Opal.yieldX(block,$to_a(value))):$truthy($rb_le(value.$length(),1))&&(value=value["$[]"](0)),result.$push(value)):nil}),-1),result})),$def(self,"$grep_v",(function $$grep_v(pattern){var block=$$grep_v.$$p||nil,result=nil;return $$grep_v.$$p=null,result=[],$send(this,"each",[],(function($a){var value,cmp=nil;return cmp=comparableForPattern(value=$slice(arguments)),$truthy($send(pattern,"__send__",["==="].concat($to_a(cmp))))?nil:(block!==nil?($truthy($rb_gt(value.$length(),1))&&(value=[value]),value=Opal.yieldX(block,$to_a(value))):$truthy($rb_le(value.$length(),1))&&(value=value["$[]"](0)),result.$push(value))}),-1),result})),$def(self,"$group_by",(function $$group_by(){var $a,block=$$group_by.$$p||nil,hash=nil,$ret_or_1=nil;return $$group_by.$$p=null,block===nil?$send(this,"enum_for",["group_by"],(function $$31(){return(null==$$31.$$s?this:$$31.$$s).$enumerator_size()}),{$$s:this}):(hash=$hash2([],{}),this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);($truthy($ret_or_1=hash["$[]"](value))?$ret_or_1:($a=[value,[]],$send(hash,"[]=",$a),$a[$a.length-1]))["$<<"](param)},this.$each(),hash)})),$def(self,"$include?",(function(obj){try{var $t_return=$thrower("return");return $send(this,"each",[],(function($a){var args;if(args=$slice(arguments),!$eqeq($Opal.$destructure(args),obj))return nil;$t_return.$throw(!0)}),{$$arity:-1,$$ret:$t_return}),!1}catch($e){if($e===$t_return)return $e.$v;throw $e}})),$def(self,"$inject",(function $$inject(object,sym){var block=$$inject.$$p||nil;$$inject.$$p=null;var result=object;return block!==nil&&void 0===sym?this.$each.$$p=function(){var value=$Opal.$destructure(arguments);void 0!==result?(value=$yieldX(block,[result,value]),result=value):result=value}:(void 0===sym&&($$$("Symbol")["$==="](object)||$Kernel.$raise($$$("TypeError"),object.$inspect()+" is not a Symbol"),sym=object,result=void 0),this.$each.$$p=function(){var value=$Opal.$destructure(arguments);result=void 0!==result?result.$__send__(sym,value):value}),this.$each(),null==result?nil:result}),-1),$def(self,"$lazy",(function(){return $send($$$($$$("Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],(function(enum$,$a){var $post_args;return null==enum$&&(enum$=nil),$post_args=$slice(arguments,1),$send(enum$,"yield",$to_a($post_args))}),-2)})),$def(self,"$enumerator_size",(function(){return $truthy(this["$respond_to?"]("size"))?this.$size():nil})),$def(self,"$max",(function $$max(n){var result,value,block=$$max.$$p||nil;return $$max.$$p=null,void 0===n||n===nil?(this.$each.$$p=function(){var item=$Opal.$destructure(arguments);void 0!==result?((value=block!==nil?$yieldX(block,[item,result]):item["$<=>"](result))===nil&&$Kernel.$raise($$$("ArgumentError"),"comparison failed"),value>0&&(result=item)):result=item},this.$each(),void 0===result?nil:result):(n=$coerce_to(n,$$$("Integer"),"to_int"),$send(this,"sort",[],block.$to_proc()).$reverse().$first(n))}),-1),$def(self,"$max_by",(function $$max_by(n){var result,by,block=$$max_by.$$p||nil;return $$max_by.$$p=null,null==n&&(n=nil),$truthy(block)?$truthy(n["$nil?"]())?(this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);if(void 0===result)return result=param,void(by=value);value["$<=>"](by)>0&&(result=param,by=value)},this.$each(),void 0===result?nil:result):$send(this,"sort_by",[],block.$to_proc()).$reverse().$take(n):$send(this,"enum_for",["max_by",n],(function $$35(){return(null==$$35.$$s?this:$$35.$$s).$enumerator_size()}),{$$s:this})}),-1),$def(self,"$min",(function $$min(n){var result,block=$$min.$$p||nil;return $$min.$$p=null,null==n&&(n=nil),$truthy(n["$nil?"]())?(this.$each.$$p=block!==nil?function(){var param=$Opal.$destructure(arguments);if(void 0!==result){var value=block(param,result);value===nil&&$Kernel.$raise($$$("ArgumentError"),"comparison failed"),value<0&&(result=param)}else result=param}:function(){var param=$Opal.$destructure(arguments);void 0!==result?$Opal.$compare(param,result)<0&&(result=param):result=param},this.$each(),void 0===result?nil:result):block!==nil?$send(this,"sort",[],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),Opal.yieldX(block,[a,b])})).$take(n):this.$sort().$take(n)}),-1),$def(self,"$min_by",(function $$min_by(n){var result,by,block=$$min_by.$$p||nil;return $$min_by.$$p=null,null==n&&(n=nil),$truthy(block)?$truthy(n["$nil?"]())?(this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);if(void 0===result)return result=param,void(by=value);value["$<=>"](by)<0&&(result=param,by=value)},this.$each(),void 0===result?nil:result):$send(this,"sort_by",[],block.$to_proc()).$take(n):$send(this,"enum_for",["min_by",n],(function $$37(){return(null==$$37.$$s?this:$$37.$$s).$enumerator_size()}),{$$s:this})}),-1),$def(self,"$minmax",(function $$minmax(){var $ret_or_1,block=$$minmax.$$p||nil;$$minmax.$$p=null,block=$truthy($ret_or_1=block)?$ret_or_1:$send($Kernel,"proc",[],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),a["$<=>"](b)}));var min=nil,max=nil,first_time=!0;return this.$each.$$p=function(){var element=$Opal.$destructure(arguments);if(first_time)min=max=element,first_time=!1;else{var min_cmp=block.$call(min,element);min_cmp===nil?$Kernel.$raise($$$("ArgumentError"),"comparison failed"):min_cmp>0&&(min=element);var max_cmp=block.$call(max,element);max_cmp===nil?$Kernel.$raise($$$("ArgumentError"),"comparison failed"):max_cmp<0&&(max=element)}},this.$each(),[min,max]})),$def(self,"$minmax_by",(function $$minmax_by(){var block=$$minmax_by.$$p||nil;if($$minmax_by.$$p=null,!$truthy(block))return $send(this,"enum_for",["minmax_by"],(function $$39(){return(null==$$39.$$s?this:$$39.$$s).$enumerator_size()}),{$$s:this});var min_by,max_by,min_result=nil,max_result=nil;return this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);(void 0===min_by||value["$<=>"](min_by)<0)&&(min_result=param,min_by=value),(void 0===max_by||value["$<=>"](max_by)>0)&&(max_result=param,max_by=value)},this.$each(),[min_result,max_result]})),$def(self,"$none?",(function $Enumerable_none$ques$40(pattern){try{var $t_return=$thrower("return"),block=$Enumerable_none$ques$40.$$p||nil;return $Enumerable_none$ques$40.$$p=null,$truthy(void 0!==pattern)?$send(this,"each",[],(function($a){var comparable=nil;if(comparable=comparableForPattern($slice(arguments)),!$truthy($send(pattern,"public_send",["==="].concat($to_a(comparable)))))return nil;$t_return.$throw(!1)}),{$$arity:-1,$$ret:$t_return}):$send(this,"each",[],block!==nil?function($a){var value;if(value=$slice(arguments),!$truthy(Opal.yieldX(block,$to_a(value))))return nil;$t_return.$throw(!1)}:function($a){var value,item=nil;if(value=$slice(arguments),item=$Opal.$destructure(value),!$truthy(item))return nil;$t_return.$throw(!1)},{$$arity:-1,$$ret:$t_return}),!0}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$one?",(function $Enumerable_one$ques$44(pattern){try{var $t_return=$thrower("return"),block=$Enumerable_one$ques$44.$$p||nil,count=nil;return $Enumerable_one$ques$44.$$p=null,count=0,$truthy(void 0!==pattern)?$send(this,"each",[],(function($a){var comparable=nil;return comparable=comparableForPattern($slice(arguments)),$truthy($send(pattern,"public_send",["==="].concat($to_a(comparable))))?(count=$rb_plus(count,1),$truthy($rb_gt(count,1))?void $t_return.$throw(!1):nil):nil}),{$$arity:-1,$$ret:$t_return}):$send(this,"each",[],block!==nil?function($a){var value;return value=$slice(arguments),$truthy(Opal.yieldX(block,$to_a(value)))?(count=$rb_plus(count,1),$truthy($rb_gt(count,1))?void $t_return.$throw(!1):nil):nil}:function($a){var value;return value=$slice(arguments),$truthy($Opal.$destructure(value))?(count=$rb_plus(count,1),$truthy($rb_gt(count,1))?void $t_return.$throw(!1):nil):nil},{$$arity:-1,$$ret:$t_return}),count["$=="](1)}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$partition",(function $$partition(){var block=$$partition.$$p||nil;if($$partition.$$p=null,block===nil)return $send(this,"enum_for",["partition"],(function $$48(){return(null==$$48.$$s?this:$$48.$$s).$enumerator_size()}),{$$s:this});var truthy=[],falsy=[];return this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);$truthy(value)?truthy.push(param):falsy.push(param)},this.$each(),[truthy,falsy]})),$def(self,"$reject",(function $$reject(){var block=$$reject.$$p||nil;if($$reject.$$p=null,block===nil)return $send(this,"enum_for",["reject"],(function $$49(){return(null==$$49.$$s?this:$$49.$$s).$enumerator_size()}),{$$s:this});var result=[];return this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);$truthy(value)||result.push(param)},this.$each(),result})),$def(self,"$reverse_each",(function $$reverse_each(){var block=$$reverse_each.$$p||nil;if($$reverse_each.$$p=null,block===nil)return $send(this,"enum_for",["reverse_each"],(function $$50(){return(null==$$50.$$s?this:$$50.$$s).$enumerator_size()}),{$$s:this});var result=[];this.$each.$$p=function(){result.push(arguments)},this.$each();for(var i=result.length-1;i>=0;i--)$yieldX(block,result[i]);return result})),$def(self,"$slice_before",(function $$slice_before(pattern){var block=$$slice_before.$$p||nil,self=this;return $$slice_before.$$p=null,$truthy(void 0===pattern&&block===nil)&&$Kernel.$raise($$$("ArgumentError"),"both pattern and block are given"),$truthy(void 0!==pattern&&block!==nil||arguments.length>1)&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),$send($$$("Enumerator"),"new",[],(function $$51(e){var self=null==$$51.$$s?this:$$51.$$s;null==e&&(e=nil);var slice=[];self.$each.$$p=block!==nil?void 0===pattern?function(){var param=$Opal.$destructure(arguments),value=$yield1(block,param);$truthy(value)&&slice.length>0&&(e["$<<"](slice),slice=[]),slice.push(param)}:function(){var param=$Opal.$destructure(arguments),value=block(param,pattern.$dup());$truthy(value)&&slice.length>0&&(e["$<<"](slice),slice=[]),slice.push(param)}:function(){var param=$Opal.$destructure(arguments),value=pattern["$==="](param);$truthy(value)&&slice.length>0&&(e["$<<"](slice),slice=[]),slice.push(param)},self.$each(),slice.length>0&&e["$<<"](slice)}),{$$s:self})}),-1),$def(self,"$slice_after",(function $$slice_after(pattern){var block=$$slice_after.$$p||nil,self=this;return $$slice_after.$$p=null,$truthy(void 0===pattern&&block===nil)&&$Kernel.$raise($$$("ArgumentError"),"both pattern and block are given"),$truthy(void 0!==pattern&&block!==nil||arguments.length>1)&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),$truthy(void 0!==pattern)&&(block=$send($Kernel,"proc",[],(function(e){return null==e&&(e=nil),pattern["$==="](e)}))),$send($$$("Enumerator"),"new",[],(function $$53(yielder){var accumulate,self=null==$$53.$$s?this:$$53.$$s;null==yielder&&(yielder=nil),self.$each.$$p=function(){var element=$Opal.$destructure(arguments),end_chunk=$yield1(block,element);null==accumulate&&(accumulate=[]),$truthy(end_chunk)?(accumulate.push(element),yielder.$yield(accumulate),accumulate=null):accumulate.push(element)},self.$each(),null!=accumulate&&yielder.$yield(accumulate)}),{$$s:self})}),-1),$def(self,"$slice_when",(function $$slice_when(){var block=$$slice_when.$$p||nil;return $$slice_when.$$p=null,block===nil&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (0 for 1)"),$send($$$("Enumerator"),"new",[],(function $$54(yielder){var self=null==$$54.$$s?this:$$54.$$s;null==yielder&&(yielder=nil);var slice=nil,last_after=nil;self.$each_cons.$$p=function(){var params=$Opal.$destructure(arguments),before=params[0],after=params[1],match=$yieldX(block,[before,after]);last_after=after,slice===nil&&(slice=[]),$truthy(match)?(slice.push(before),yielder.$yield(slice),slice=[]):slice.push(before)},self.$each_cons(2),slice!==nil&&(slice.push(last_after),yielder.$yield(slice))}),{$$s:this})})),$def(self,"$sort",(function $$sort(){var ary,block=$$sort.$$p||nil;return $$sort.$$p=null,ary=this.$to_a(),block===nil&&(block=$lambda((function(a,b){return null==a&&(a=nil),null==b&&(b=nil),a["$<=>"](b)}))),$send(ary,"sort",[],block.$to_proc())})),$def(self,"$sort_by",(function $$sort_by(){var dup,block=$$sort_by.$$p||nil;return $$sort_by.$$p=null,block===nil?$send(this,"enum_for",["sort_by"],(function $$56(){return(null==$$56.$$s?this:$$56.$$s).$enumerator_size()}),{$$s:this}):(dup=$send(this,"map",[],(function(){var arg=nil;return arg=$Opal.$destructure(arguments),[Opal.yield1(block,arg),arg]})),$send(dup,"sort!",[],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),a[0]["$<=>"](b[0])})),$send(dup,"map!",[],(function(i){return null==i&&(i=nil),i[1]})))})),$def(self,"$sum",(function $$sum(initial){var $yield=$$sum.$$p||nil,result=nil,compensation=nil;return $$sum.$$p=null,null==initial&&(initial=0),result=initial,compensation=0,$send(this,"each",[],(function($a){var args,item=nil,y=nil,t=nil;return args=$slice(arguments),item=$yield!==nil?Opal.yieldX($yield,$to_a(args)):$Opal.$destructure(args),$not([$$$($$$("Float"),"INFINITY"),$$$($$$("Float"),"INFINITY")["$-@"]()]["$include?"](item))&&$truthy(item["$respond_to?"]("-"))?(y=$rb_minus(item,compensation),t=$rb_plus(result,y),compensation=$rb_minus($rb_minus(t,result),y),result=t):result=$rb_plus(result,item)}),-1),result}),-1),$def(self,"$take",(function(num){return this.$first(num)})),$def(self,"$take_while",(function $$take_while(){try{var $t_return=$thrower("return"),block=$$take_while.$$p||nil,result=nil;return $$take_while.$$p=null,$truthy(block)?(result=[],$send(this,"each",[],(function($a){var args,value=nil;return args=$slice(arguments),value=$Opal.$destructure(args),$truthy(Opal.yield1(block,value))||$t_return.$throw(result),result.push(value)}),{$$arity:-1,$$ret:$t_return})):this.$enum_for("take_while")}catch($e){if($e===$t_return)return $e.$v;throw $e}})),$def(self,"$uniq",(function $$uniq(){var block=$$uniq.$$p||nil,hash=nil;return $$uniq.$$p=null,hash=$hash2([],{}),$send(this,"each",[],(function($a){var args,$b,value=nil,produced=nil;return args=$slice(arguments),value=$Opal.$destructure(args),produced=block!==nil?Opal.yield1(block,value):value,$truthy(hash["$key?"](produced))?nil:($send(hash,"[]=",$b=[produced,value]),$b[$b.length-1])}),-1),hash.$values()})),$def(self,"$tally",(function(hash){var out;return hash&&hash!==nil&&$deny_frozen_access(hash),out=$send($send(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),$truthy(hash)?($send(out,"each",[],(function(k,v){var $a;return null==k&&(k=nil),null==v&&(v=nil),$a=[k,$rb_plus(hash.$fetch(k,0),v)],$send(hash,"[]=",$a),$a[$a.length-1]})),hash):out}),-1),$def(self,"$to_h",(function $$to_h($a){var args,block=$$to_h.$$p||nil,self=this;if($$to_h.$$p=null,args=$slice(arguments),block!==nil)return $send($send(self,"map",[],block.$to_proc()),"to_h",$to_a(args));var hash=$hash2([],{});return self.$each.$$p=function(){var key,val,param=$Opal.$destructure(arguments),ary=$Opal["$coerce_to?"](param,$$$("Array"),"to_ary");ary.$$is_array||$Kernel.$raise($$$("TypeError"),"wrong element type "+ary.$class()+" (expected array)"),2!==ary.length&&$Kernel.$raise($$$("ArgumentError"),"wrong array length (expected 2, was "+ary.$length()+")"),key=ary[0],val=ary[1],Opal.hash_put(hash,key,val)},self.$each.apply(self,args),hash}),-1),$def(self,"$to_set",(function $$to_set($a,$b){var $post_args,klass,block=$$to_set.$$p||nil,self=this;return $$to_set.$$p=null,($post_args=$slice(arguments)).length>0&&(klass=$post_args.shift()),null==klass&&(klass=$$("Set")),$send(klass,"new",[self].concat($to_a($post_args)),block.$to_proc())}),-1),$def(self,"$zip",(function $$zip($a){var others,self=this;return $$zip.$$p=null,others=$slice(arguments),$send(self.$to_a(),"zip",$to_a(others))}),-1),$alias(self,"find","detect"),$alias(self,"filter","find_all"),$alias(self,"flat_map","collect_concat"),$alias(self,"map","collect"),$alias(self,"member?","include?"),$alias(self,"reduce","inject"),$alias(self,"select","find_all"),$alias(self,"to_a","entries")}(0,[])},Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$to_a=Opal.to_a,$eqeq=Opal.eqeq,$Kernel=Opal.Kernel,$def=Opal.def,$rb_gt=Opal.rb_gt,$rb_lt=Opal.rb_lt,$rb_le=Opal.rb_le,$rb_ge=Opal.rb_ge,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$eqeqeq=Opal.eqeqeq,$not=Opal.not,$rb_times=Opal.rb_times,$rb_divide=Opal.rb_divide,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Enumerator"),$nesting=[self].concat($parent_nesting);return function($base,$super,$parent_nesting){var self=$klass($base,$super,"ArithmeticSequence"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;$proto.step_arg2=$proto.receiver_num=$proto.step_arg1=$proto.step=$proto.range=$proto.topfx=$proto.bypfx=$proto.creation_method=$proto.skipped_arg=nil,Opal.prop(self.$$prototype,"$$is_arithmetic_seq",!0);var inf=1/0;return $def(self,"$initialize",(function(range,step,creation_method){var $a,$ret_or_1=nil;return null==creation_method&&(creation_method="step"),this.creation_method=creation_method,$truthy(range["$is_a?"]($$$("Array")))?($a=[].concat($to_a(range)),this.step_arg1=null==$a[0]?nil:$a[0],this.step_arg2=null==$a[1]?nil:$a[1],this.topfx=null==$a[2]?nil:$a[2],this.bypfx=null==$a[3]?nil:$a[3],this.receiver_num=step,this.step=1,this.range=$truthy(this.step_arg2)?(this.step=this.step_arg2,Opal.Range.$new(this.receiver_num,this.step_arg1,!1)):$truthy(this.step_arg1)?Opal.Range.$new(this.receiver_num,this.step_arg1,!1):Opal.Range.$new(this.receiver_num,nil,!1)):($truthy(step)||(this.skipped_arg=!0),$a=[range,$truthy($ret_or_1=step)?$ret_or_1:1],this.range=$a[0],this.step=$a[1]),this.object=this,$eqeq(this.step,0)&&$Kernel.$raise($$("ArgumentError"),"step can't be 0"),$truthy(this.step["$respond_to?"]("to_int"))?nil:$Kernel.$raise($$("ArgumentError"),"no implicit conversion of "+this.step.$class()+" into Integer")}),-2),self.$attr_reader("step"),$def(self,"$begin",(function(){return this.range.$begin()})),$def(self,"$end",(function(){return this.range.$end()})),$def(self,"$exclude_end?",(function(){return this.range["$exclude_end?"]()})),$def(self,"$_lesser_than_end?",(function(val){var end_,$ret_or_1;return end_=$truthy($ret_or_1=this.$end())?$ret_or_1:inf,$truthy($rb_gt(this.$step(),0))?$truthy(this["$exclude_end?"]())?$rb_lt(val,end_):$rb_le(val,end_):$truthy(this["$exclude_end?"]())?$rb_gt(val,end_):$rb_ge(val,end_)})),$def(self,"$_greater_than_begin?",(function(val){var begin_,$ret_or_1;return begin_=$truthy($ret_or_1=this.$begin())?$ret_or_1:inf["$-@"](),$truthy($rb_gt(this.$step(),0))?$rb_gt(val,begin_):$rb_lt(val,begin_)})),$def(self,"$first",(function(count){var iter=nil,$ret_or_1=nil,out=nil;if(iter=$truthy($ret_or_1=this.$begin())?$ret_or_1:inf["$-@"](),!$truthy(count))return $truthy(this["$_lesser_than_end?"](iter))?iter:nil;for(out=[];$truthy($truthy($ret_or_1=this["$_lesser_than_end?"](iter))?$rb_gt(count,0):$ret_or_1);)out["$<<"](iter),iter=$rb_plus(iter,this.$step()),count=$rb_minus(count,1);return out}),-1),$def(self,"$each",(function $$each(){var $ret_or_1,block=$$each.$$p||nil,iter=nil;if($$each.$$p=null,block===nil)return this;for($eqeqeq(nil,this.$begin())&&$Kernel.$raise($$("TypeError"),"nil can't be coerced into Integer"),iter=$truthy($ret_or_1=this.$begin())?$ret_or_1:inf["$-@"]();$truthy(this["$_lesser_than_end?"](iter));)Opal.yield1(block,iter),iter=$rb_plus(iter,this.$step());return this})),$def(self,"$last",(function(count){var $ret_or_1=nil,iter=nil,out=nil;if($eqeqeq(inf,$ret_or_1=this.$end())||$eqeqeq(inf["$-@"](),$ret_or_1)?$Kernel.$raise($$$("FloatDomainError"),this.$end()):$eqeqeq(nil,$ret_or_1)&&$Kernel.$raise($$$("RangeError"),"cannot get the last element of endless arithmetic sequence"),iter=$rb_minus(this.$end(),$rb_minus(this.$end(),this.$begin())["$%"](this.$step())),$truthy(this["$_lesser_than_end?"](iter))||(iter=$rb_minus(iter,this.$step())),!$truthy(count))return $truthy(this["$_greater_than_begin?"](iter))?iter:nil;for(out=[];$truthy($truthy($ret_or_1=this["$_greater_than_begin?"](iter))?$rb_gt(count,0):$ret_or_1);)out["$<<"](iter),iter=$rb_minus(iter,this.$step()),count=$rb_minus(count,1);return out.$reverse()}),-1),$def(self,"$size",(function(){var step_sign,iter=nil;return step_sign=$truthy($rb_gt(this.$step(),0))?1:-1,$not(this["$_lesser_than_end?"](this.$begin()))?0:$truthy([inf["$-@"](),inf]["$include?"](this.$step()))?1:$truthy([$rb_times(inf["$-@"](),step_sign),nil]["$include?"](this.$begin()))||$truthy([$rb_times(inf,step_sign),nil]["$include?"](this.$end()))?inf:(iter=$rb_minus(this.$end(),$rb_minus(this.$end(),this.$begin())["$%"](this.$step())),$truthy(this["$_lesser_than_end?"](iter))||(iter=$rb_minus(iter,this.$step())),$rb_plus($rb_divide($rb_minus(iter,this.$begin()),this.$step()).$abs().$to_i(),1))})),$def(self,"$==",(function(other){var $ret_or_1,$ret_or_2,$ret_or_3,$ret_or_4;return $truthy($ret_or_1=$truthy($ret_or_2=$truthy($ret_or_3=$truthy($ret_or_4=this.$class()["$=="](other.$class()))?this.$begin()["$=="](other.$begin()):$ret_or_4)?this.$end()["$=="](other.$end()):$ret_or_3)?this.$step()["$=="](other.$step()):$ret_or_2)?this["$exclude_end?"]()["$=="](other["$exclude_end?"]()):$ret_or_1})),$def(self,"$hash",(function(){return[this.$begin(),this.$end(),this.$step(),this["$exclude_end?"]()].$hash()})),$def(self,"$inspect",(function(){var args=nil;return $truthy(this.receiver_num)?(args=$truthy(this.step_arg2)?"("+this.topfx+this.step_arg1.$inspect()+", "+this.bypfx+this.step_arg2.$inspect()+")":$truthy(this.step_arg1)?"("+this.topfx+this.step_arg1.$inspect()+")":nil,"("+this.receiver_num.$inspect()+"."+this.creation_method+args+")"):(args=$truthy(this.skipped_arg)?nil:"("+this.step+")","(("+this.range.$inspect()+")."+this.creation_method+args+")")})),$alias(self,"===","=="),$alias(self,"eql?","==")}(self,self,$nesting)}(0,0,[])},Opal.modules["corelib/enumerator/chain"]=function(Opal){var self,$deny_frozen_access=Opal.deny_frozen_access,$klass=Opal.klass,$slice=Opal.slice,$def=Opal.def,$send=Opal.send,$to_a=Opal.to_a,$truthy=Opal.truthy,$rb_plus=Opal.rb_plus,$thrower=Opal.thrower,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function($base,$super){var self=$klass($base,$super,"Chain"),$proto=self.$$prototype;return $proto.enums=$proto.iterated=nil,$def(self,"$initialize",(function($a){var enums,self=this;return enums=$slice(arguments),$deny_frozen_access(self),self.enums=enums,self.iterated=[],self.object=self}),-1),$def(self,"$each",(function $$each($a){var $post_args,args,block=$$each.$$p||nil,self=this;return $$each.$$p=null,$post_args=$slice(arguments),args=$post_args,block===nil?$send(self,"to_enum",["each"].concat($to_a(args)),(function $$1(){return(null==$$1.$$s?this:$$1.$$s).$size()}),{$$s:self}):($send(self.enums,"each",[],(function $$2(enum$){var self=null==$$2.$$s?this:$$2.$$s;return null==self.iterated&&(self.iterated=nil),null==enum$&&(enum$=nil),self.iterated["$<<"](enum$),$send(enum$,"each",$to_a(args),block.$to_proc())}),{$$s:self}),self)}),-1),$def(self,"$size",(function($a){try{var $post_args,args,$t_return=$thrower("return"),self=this,accum=nil;return $post_args=$slice(arguments),args=$post_args,accum=0,$send(self.enums,"each",[],(function(enum$){var size;return null==enum$&&(enum$=nil),size=$send(enum$,"size",$to_a(args)),$truthy([nil,$$$($$$("Float"),"INFINITY")]["$include?"](size))&&$t_return.$throw(size),accum=$rb_plus(accum,size)}),{$$ret:$t_return}),accum}catch($e){if($e===$t_return)return $e.$v;throw $e}}),-1),$def(self,"$rewind",(function(){return $send(this.iterated,"reverse_each",[],(function(enum$){return null==enum$&&(enum$=nil),$truthy(enum$["$respond_to?"]("rewind"))?enum$.$rewind():nil})),this.iterated=[],this})),$def(self,"$inspect",(function(){return"#<Enumerator::Chain: "+this.enums.$inspect()+">"}))}(self=$klass("::",null,"Enumerator"),self)},Opal.modules["corelib/enumerator/generator"]=function(Opal){var $deny_frozen_access=Opal.deny_frozen_access,$klass=Opal.klass,$truthy=Opal.truthy,$Kernel=Opal.Kernel,$def=Opal.def,$slice=Opal.slice,$send=Opal.send,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("include,raise,new,to_proc"),function($base,$super,$parent_nesting){var $nesting=[$klass($base,null,"Enumerator")].concat($parent_nesting);return function($base,$super,$parent_nesting){var self=$klass($base,null,"Generator"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$$prototype.block=nil,self.$include($$$("Enumerable")),$def(self,"$initialize",(function $$initialize(){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,$deny_frozen_access(this),$truthy(block)||$Kernel.$raise($$$("LocalJumpError"),"no block given"),this.block=block})),$def(self,"$each",(function $$each($a){var args,block=$$each.$$p||nil,self=this,yielder=nil;$$each.$$p=null,args=$slice(arguments),yielder=$send($$("Yielder"),"new",[],block.$to_proc());try{args.unshift(yielder),Opal.yieldX(self.block,args)}catch(e){if(e&&"breaker"==e.$thrower_type)return e.$v;throw e}return self}),-1)}($nesting[0],0,$nesting)}($nesting[0],0,$nesting)},Opal.modules["corelib/enumerator/lazy"]=function(Opal){var $truthy=Opal.truthy,$coerce_to=Opal.coerce_to,$yield1=Opal.yield1,$yieldX=Opal.yieldX,$deny_frozen_access=Opal.deny_frozen_access,$klass=Opal.klass,$slice=Opal.slice,$send2=Opal.send2,$find_super=Opal.find_super,$to_a=Opal.to_a,$defs=Opal.defs,$Kernel=Opal.Kernel,$send=Opal.send,$def=Opal.def,$return_self=Opal.return_self,$Opal=Opal.Opal,$rb_lt=Opal.rb_lt,$eqeqeq=Opal.eqeqeq,$rb_plus=Opal.rb_plus,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Enumerator"),$nesting=[self].concat($parent_nesting);return function($base,$super,$parent_nesting){var self=$klass($base,$super,"Lazy"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$$prototype.enumerator=nil,$klass(self,$$$("Exception"),"StopLazyError"),$defs(self,"$for",(function $Lazy_for$1(object,$a){var $fwd_rest,$yield=$Lazy_for$1.$$p||nil,self=this,lazy=nil;return $Lazy_for$1.$$p=null,$fwd_rest=$slice(arguments,1),(lazy=$send2(self,$find_super(self,"for",$Lazy_for$1,!1,!0),"for",[object].concat($to_a($fwd_rest)),$yield)).enumerator=object,lazy}),-2),$def(self,"$initialize",(function $$initialize(object,size){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,null==size&&(size=nil),$deny_frozen_access(this),block===nil&&$Kernel.$raise($$$("ArgumentError"),"tried to call lazy new without a block"),this.enumerator=object,$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[size],(function(yielder,$a){var each_args;null==yielder&&(yielder=nil),each_args=$slice(arguments,1);try{return $send(object,"each",$to_a(each_args),(function($b){var args;(args=$slice(arguments)).unshift(yielder),$yieldX(block,args)}),-1)}catch($err){if(!Opal.rescue($err,[$$("StopLazyError")]))throw $err;try{return nil}finally{Opal.pop_exception()}}}),-2)}),-2),$def(self,"$lazy",$return_self),$def(self,"$collect",(function $$collect(){var block=$$collect.$$p||nil;return $$collect.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy map without a block"),$send($$("Lazy"),"new",[this,this.$enumerator_size()],(function(enum$,$a){var $post_args;null==enum$&&(enum$=nil),$post_args=$slice(arguments,1);var value=$yieldX(block,$post_args);enum$.$yield(value)}),-2)})),$def(self,"$collect_concat",(function $$collect_concat(){var block=$$collect_concat.$$p||nil;return $$collect_concat.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy map without a block"),$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var $post_args;null==enum$&&(enum$=nil),$post_args=$slice(arguments,1);var value=$yieldX(block,$post_args);if(value["$respond_to?"]("force")&&value["$respond_to?"]("each"))$send(value,"each",[],(function(v){return null==v&&(v=nil),enum$.$yield(v)}));else{var array=$Opal.$try_convert(value,$$$("Array"),"to_ary");array===nil?enum$.$yield(value):$send(value,"each",[],(function(v){return null==v&&(v=nil),enum$.$yield(v)}))}}),-2)})),$def(self,"$drop",(function(n){var current_size,set_size,dropped=nil;return n=$coerce_to(n,$$$("Integer"),"to_int"),$truthy($rb_lt(n,0))&&$Kernel.$raise($$$("ArgumentError"),"attempt to drop negative size"),current_size=this.$enumerator_size(),set_size=$eqeqeq($$$("Integer"),current_size)&&$truthy($rb_lt(n,current_size))?n:current_size,dropped=0,$send($$("Lazy"),"new",[this,set_size],(function(enum$,$a){var args;return null==enum$&&(enum$=nil),args=$slice(arguments,1),$truthy($rb_lt(dropped,n))?dropped=$rb_plus(dropped,1):$send(enum$,"yield",$to_a(args))}),-2)})),$def(self,"$drop_while",(function $$drop_while(){var block=$$drop_while.$$p||nil,succeeding=nil;return $$drop_while.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy drop_while without a block"),succeeding=!0,$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var args;if(null==enum$&&(enum$=nil),args=$slice(arguments,1),!$truthy(succeeding))return $send(enum$,"yield",$to_a(args));var value=$yieldX(block,args);$truthy(value)||(succeeding=!1,$send(enum$,"yield",$to_a(args)))}),-2)})),$def(self,"$enum_for",(function $$enum_for($a,$b){var $post_args,method,args,block=$$enum_for.$$p||nil,self=this;return $$enum_for.$$p=null,($post_args=$slice(arguments)).length>0&&(method=$post_args.shift()),null==method&&(method="each"),args=$post_args,$send(self.$class(),"for",[self,method].concat($to_a(args)),block.$to_proc())}),-1),$def(self,"$find_all",(function $$find_all(){var block=$$find_all.$$p||nil;return $$find_all.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy select without a block"),$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var $post_args,args;null==enum$&&(enum$=nil),$post_args=$slice(arguments,1);var value=$yieldX(block,args=$post_args);$truthy(value)&&$send(enum$,"yield",$to_a(args))}),-2)})),$def(self,"$grep",(function $$grep(pattern){var block=$$grep.$$p||nil;return $$grep.$$p=null,$truthy(block)?$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var args;null==enum$&&(enum$=nil),args=$slice(arguments,1);var param=$Opal.$destructure(args),value=pattern["$==="](param);$truthy(value)&&(value=$yield1(block,param),enum$.$yield($yield1(block,param)))}),-2):$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var args;null==enum$&&(enum$=nil),args=$slice(arguments,1);var param=$Opal.$destructure(args),value=pattern["$==="](param);$truthy(value)&&enum$.$yield(param)}),-2)})),$def(self,"$reject",(function $$reject(){var block=$$reject.$$p||nil;return $$reject.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy reject without a block"),$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var $post_args,args;null==enum$&&(enum$=nil),$post_args=$slice(arguments,1);var value=$yieldX(block,args=$post_args);$truthy(value)||$send(enum$,"yield",$to_a(args))}),-2)})),$def(self,"$take",(function(n){var current_size,set_size,taken=nil;return n=$coerce_to(n,$$$("Integer"),"to_int"),$truthy($rb_lt(n,0))&&$Kernel.$raise($$$("ArgumentError"),"attempt to take negative size"),current_size=this.$enumerator_size(),set_size=$eqeqeq($$$("Integer"),current_size)&&$truthy($rb_lt(n,current_size))?n:current_size,taken=0,$send($$("Lazy"),"new",[this,set_size],(function(enum$,$a){var args;return null==enum$&&(enum$=nil),args=$slice(arguments,1),$truthy($rb_lt(taken,n))?($send(enum$,"yield",$to_a(args)),taken=$rb_plus(taken,1)):$Kernel.$raise($$("StopLazyError"))}),-2)})),$def(self,"$take_while",(function $$take_while(){var block=$$take_while.$$p||nil;return $$take_while.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to call lazy take_while without a block"),$send($$("Lazy"),"new",[this,nil],(function(enum$,$a){var $post_args,args;null==enum$&&(enum$=nil),$post_args=$slice(arguments,1);var value=$yieldX(block,args=$post_args);$truthy(value)?$send(enum$,"yield",$to_a(args)):$Kernel.$raise($$("StopLazyError"))}),-2)})),$def(self,"$inspect",(function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"})),$alias(self,"force","to_a"),$alias(self,"filter","find_all"),$alias(self,"flat_map","collect_concat"),$alias(self,"map","collect"),$alias(self,"select","find_all"),$alias(self,"to_enum","enum_for")}(self,self,$nesting)}(0,0,[])},Opal.modules["corelib/enumerator/yielder"]=function(Opal){var $base,$parent_nesting,$klass=Opal.klass,$def=Opal.def,$slice=Opal.slice,$send=Opal.send,$to_a=Opal.to_a,$nesting=[],nil=Opal.nil;return Opal.add_stubs("yield,proc"),$base=$nesting[0],$parent_nesting=$nesting,function($base,$super){var self=$klass($base,null,"Yielder");return self.$$prototype.block=nil,$def(self,"$initialize",(function $$initialize(){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,this.block=block,this})),$def(self,"$yield",(function($a){var values,self=this;values=$slice(arguments);var value=Opal.yieldX(self.block,values);if(value&&"break"==value.$thrower_type)throw value;return value}),-1),$def(self,"$<<",(function(value){return this.$yield(value),this})),$def(self,"$to_proc",(function(){return $send(this,"proc",[],(function $$3($a){var $post_args,self=null==$$3.$$s?this:$$3.$$s;return $post_args=$slice(arguments),$send(self,"yield",$to_a($post_args))}),{$$arity:-1,$$s:this})}))}([$klass($base,null,"Enumerator")].concat($parent_nesting)[0])},Opal.modules["corelib/enumerator"]=function(Opal){var $slice=Opal.slice,$coerce_to=Opal.coerce_to,$deny_frozen_access=Opal.deny_frozen_access,$klass=Opal.klass,$defs=Opal.defs,$truthy=Opal.truthy,$send=Opal.send,$not=Opal.not,$def=Opal.def,$rb_plus=Opal.rb_plus,$to_a=Opal.to_a,$Opal=Opal.Opal,$send2=Opal.send2,$find_super=Opal.find_super,$rb_ge=Opal.rb_ge,$Kernel=Opal.Kernel,$rb_le=Opal.rb_le,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),self.$require("corelib/enumerable"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Enumerator"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;return $proto.size=$proto.args=$proto.object=$proto.method=$proto.values=$proto.cursor=nil,self.$include($$$("Enumerable")),self.$$prototype.$$is_enumerator=!0,$defs(self,"$for",(function $Enumerator_for$1(object,$a,$b){var $post_args,method,args,block=$Enumerator_for$1.$$p||nil,self=this;$Enumerator_for$1.$$p=null,($post_args=$slice(arguments,1)).length>0&&(method=$post_args.shift()),null==method&&(method="each"),args=$post_args;var obj=self.$allocate();return obj.object=object,obj.size=block,obj.method=method,obj.args=args,obj.cursor=0,obj}),-2),$def(self,"$initialize",(function $$initialize($a){var block=$$initialize.$$p||nil,self=this;return $$initialize.$$p=null,$slice(arguments),$deny_frozen_access(self),self.cursor=0,$truthy(block)?(self.object=$send($$("Generator"),"new",[],block.$to_proc()),self.method="each",self.args=[],self.size=arguments[0]||nil,$truthy(self.size)&&$not(self.size["$respond_to?"]("call"))?self.size=$coerce_to(self.size,$$$("Integer"),"to_int"):nil):(self.object=arguments[0],self.method=arguments[1]||"each",self.args=$slice(arguments,2),self.size=nil)}),-1),$def(self,"$each",(function $$each($a){var args,block=$$each.$$p||nil,self=this;return $$each.$$p=null,args=$slice(arguments),$truthy(block["$nil?"]())&&$truthy(args["$empty?"]())?self:(args=$rb_plus(self.args,args),$truthy(block["$nil?"]())?$send(self.$class(),"new",[self.object,self.method].concat($to_a(args))):$send(self.object,"__send__",[self.method].concat($to_a(args)),block.$to_proc()))}),-1),$def(self,"$size",(function(){return $truthy(this.size["$respond_to?"]("call"))?$send(this.size,"call",$to_a(this.args)):this.size})),$def(self,"$with_index",(function $$with_index(offset){var block=$$with_index.$$p||nil;if($$with_index.$$p=null,null==offset&&(offset=0),offset=$truthy(offset)?$coerce_to(offset,$$$("Integer"),"to_int"):0,!$truthy(block))return $send(this,"enum_for",["with_index",offset],(function $$2(){return(null==$$2.$$s?this:$$2.$$s).$size()}),{$$s:this});var index=offset;return this.$each.$$p=function(){var param=$Opal.$destructure(arguments),value=block(param,index);return index++,value},this.$each()}),-1),$def(self,"$each_with_index",(function $$each_with_index(){var block=$$each_with_index.$$p||nil;return $$each_with_index.$$p=null,block===nil?$send(this,"enum_for",["each_with_index"],(function $$3(){return(null==$$3.$$s?this:$$3.$$s).$size()}),{$$s:this}):($send2(this,$find_super(this,"each_with_index",$$each_with_index,!1,!0),"each_with_index",[],block),this.object)})),$def(self,"$rewind",(function(){return this.cursor=0,this})),$def(self,"$peek_values",(function(){var $ret_or_1;return this.values=$truthy($ret_or_1=this.values)?$ret_or_1:$send(this,"map",[],(function($a){return $slice(arguments)}),-1),$truthy($rb_ge(this.cursor,this.values.$length()))&&$Kernel.$raise($$$("StopIteration"),"iteration reached an end"),this.values["$[]"](this.cursor)})),$def(self,"$peek",(function(){var values=nil;return values=this.$peek_values(),$truthy($rb_le(values.$length(),1))?values["$[]"](0):values})),$def(self,"$next_values",(function(){var out;return out=this.$peek_values(),this.cursor=$rb_plus(this.cursor,1),out})),$def(self,"$next",(function(){var values=nil;return values=this.$next_values(),$truthy($rb_le(values.$length(),1))?values["$[]"](0):values})),$def(self,"$feed",(function(arg){return this.$raise($$("NotImplementedError"),"Opal doesn't support Enumerator#feed")})),$def(self,"$+",(function(other){return $$$($$$("Enumerator"),"Chain").$new(this,other)})),$def(self,"$inspect",(function(){var result=nil;return result="#<"+this.$class()+": "+this.object.$inspect()+":"+this.method,$truthy(this.args["$any?"]())&&(result=$rb_plus(result,"("+this.args.$inspect()["$[]"]($$$("Range").$new(1,-2))+")")),$rb_plus(result,">")})),$alias(self,"with_object","each_with_object"),self.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),self.$autoload("Chain","corelib/enumerator/chain"),self.$autoload("Generator","corelib/enumerator/generator"),self.$autoload("Lazy","corelib/enumerator/lazy"),self.$autoload("Yielder","corelib/enumerator/yielder")}(0,0,[])},Opal.modules["corelib/numeric"]=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$Kernel=Opal.Kernel,$def=Opal.def,$to_ary=Opal.to_ary,$return_self=Opal.return_self,$rb_minus=Opal.rb_minus,$rb_times=Opal.rb_times,$rb_lt=Opal.rb_lt,$eqeq=Opal.eqeq,$rb_divide=Opal.rb_divide,$return_val=Opal.return_val,$Opal=Opal.Opal,$slice=Opal.slice,$extract_kwargs=Opal.extract_kwargs,$ensure_kwargs=Opal.ensure_kwargs,$not=Opal.not,$send=Opal.send,$rb_ge=Opal.rb_ge,$rb_le=Opal.rb_le,$rb_plus=Opal.rb_plus,$rb_gt=Opal.rb_gt,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),self.$require("corelib/comparable"),function($base,$super){var self=$klass("::",null,"Numeric");return self.$include($$$("Comparable")),$def(self,"$coerce",(function(other){return $truthy(other["$instance_of?"](this.$class()))?[other,this]:[$Kernel.$Float(other),$Kernel.$Float(this)]})),$def(self,"$__coerced__",(function(method,other){var $a,$b,a=nil,b=nil;if($truthy(other["$respond_to?"]("coerce")))return $b=other.$coerce(this),a=null==($a=$to_ary($b))[0]?nil:$a[0],b=null==$a[1]?nil:$a[1],a.$__send__(method,b);switch(method){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return $Kernel.$raise($$$("TypeError"),other.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return $Kernel.$raise($$$("ArgumentError"),"comparison of "+this.$class()+" with "+other.$class()+" failed");default:return nil}})),$def(self,"$<=>",(function(other){return $truthy(this["$equal?"](other))?0:nil})),$def(self,"$+@",$return_self),$def(self,"$-@",(function(){return $rb_minus(0,this)})),$def(self,"$%",(function(other){return $rb_minus(this,$rb_times(other,this.$div(other)))})),$def(self,"$abs",(function(){return $rb_lt(this,0)?this["$-@"]():this})),$def(self,"$abs2",(function(){return $rb_times(this,this)})),$def(self,"$angle",(function(){return $rb_lt(this,0)?$$$($$$("Math"),"PI"):0})),$def(self,"$ceil",(function(ndigits){return null==ndigits&&(ndigits=0),this.$to_f().$ceil(ndigits)}),-1),$def(self,"$conj",$return_self),$def(self,"$denominator",(function(){return this.$to_r().$denominator()})),$def(self,"$div",(function(other){return $eqeq(other,0)&&$Kernel.$raise($$$("ZeroDivisionError"),"divided by o"),$rb_divide(this,other).$floor()})),$def(self,"$divmod",(function(other){return[this.$div(other),this["$%"](other)]})),$def(self,"$fdiv",(function(other){return $rb_divide(this.$to_f(),other)})),$def(self,"$floor",(function(ndigits){return null==ndigits&&(ndigits=0),this.$to_f().$floor(ndigits)}),-1),$def(self,"$i",(function(){return $Kernel.$Complex(0,this)})),$def(self,"$imag",$return_val(0)),$def(self,"$integer?",$return_val(!1)),$def(self,"$nonzero?",(function(){return $truthy(this["$zero?"]())?nil:this})),$def(self,"$numerator",(function(){return this.$to_r().$numerator()})),$def(self,"$polar",(function(){return[this.$abs(),this.$arg()]})),$def(self,"$quo",(function(other){return $rb_divide($Opal["$coerce_to!"](this,$$$("Rational"),"to_r"),other)})),$def(self,"$real",$return_self),$def(self,"$real?",$return_val(!0)),$def(self,"$rect",(function(){return[this,0]})),$def(self,"$round",(function(digits){return this.$to_f().$round(digits)}),-1),$def(self,"$step",(function $$step($a,$b,$c){var $post_args,$kwargs,limit,step,to,by,block=$$step.$$p||nil,self=this,counter=nil;function validateParameters(){step===nil&&$Kernel.$raise($$$("TypeError"),"step must be numeric"),null!=step&&step["$=="](0)&&$Kernel.$raise($$$("ArgumentError"),"step can't be 0"),step!==nil&&null!=step||(step=1);var sign=step["$<=>"](0);sign===nil&&$Kernel.$raise($$$("ArgumentError"),"0 can't be coerced into "+step.$class()),limit!==nil&&null!=limit||(limit=sign>0?$$$($$$("Float"),"INFINITY"):$$$($$$("Float"),"INFINITY")["$-@"]()),$Opal.$compare(self,limit)}function stepFloatSize(){if(step>0&&self>limit||step<0&&self<limit)return 0;if(step===1/0||step===-1/0)return 1;var abs=Math.abs,floor=Math.floor,err=(abs(self)+abs(limit)+abs(limit-self))/abs(step)*$$$($$$("Float"),"EPSILON");return err===1/0||err===-1/0?0:(err>.5&&(err=.5),floor((limit-self)/step+err)+1)}function stepSize(){if(validateParameters(),0===step)return 1/0;if(step%1!=0)return stepFloatSize();if(step>0&&self>limit||step<0&&self<limit)return 0;var ceil=Math.ceil,abs=Math.abs;return ceil((abs(self-limit)+1)/abs(step))}if($$step.$$p=null,$post_args=$slice(arguments),$kwargs=$extract_kwargs($post_args),$kwargs=$ensure_kwargs($kwargs),$post_args.length>0&&(limit=$post_args.shift()),$post_args.length>0&&(step=$post_args.shift()),to=$kwargs.$$smap.to,by=$kwargs.$$smap.by,void 0!==limit&&void 0!==to&&$Kernel.$raise($$$("ArgumentError"),"to is given twice"),void 0!==step&&void 0!==by&&$Kernel.$raise($$$("ArgumentError"),"step is given twice"),void 0!==to&&(limit=to),void 0!==by&&(step=by),void 0===limit&&(limit=nil),block===nil)return($not(limit)||$truthy(limit["$is_a?"]($$$("Numeric"))))&&($not(step)||$truthy(step["$is_a?"]($$$("Numeric"))))?$$$($$$("Enumerator"),"ArithmeticSequence").$new([limit,step,$truthy(to)?"to: ":nil,$truthy(by)?"by: ":nil],self):$send(self,"enum_for",["step",limit,step],stepSize.$to_proc());validateParameters();var isDesc=step["$negative?"](),isInf=step["$=="](0)||limit===1/0&&!isDesc||limit===-1/0&&isDesc;if(self.$$is_number&&step.$$is_number&&limit.$$is_number){if(self%1!=0||!isInf&&limit%1!=0||step%1!=0){var begin=self.$to_f().valueOf();step=step.$to_f().valueOf(),limit=limit.$to_f().valueOf();var n=stepFloatSize();if(isFinite(step))if(0===step)for(;;)block(begin);else for(var i=0;i<n;i++){var d=i*step+self;(step>=0?limit<d:limit>d)&&(d=limit),block(d)}else 0!==n&&block(begin);return self}var value=self;if(isInf)for(;;value+=step)block(value);else if(isDesc)for(;value>=limit;value+=step)block(value);else for(;value<=limit;value+=step)block(value);return self}for(counter=self;$truthy(isDesc?$rb_ge(counter,limit):$rb_le(counter,limit));)Opal.yield1(block,counter),counter=$rb_plus(counter,step)}),-1),$def(self,"$to_c",(function(){return $Kernel.$Complex(this,0)})),$def(self,"$to_int",(function(){return this.$to_i()})),$def(self,"$truncate",(function(ndigits){return null==ndigits&&(ndigits=0),this.$to_f().$truncate(ndigits)}),-1),$def(self,"$zero?",(function(){return this["$=="](0)})),$def(self,"$positive?",(function(){return $rb_gt(this,0)})),$def(self,"$negative?",(function(){return $rb_lt(this,0)})),$def(self,"$dup",$return_self),$def(self,"$clone",(function($kwargs){return null==($kwargs=$ensure_kwargs($kwargs)).$$smap.freeze&&!0,this}),-1),$def(self,"$finite?",$return_val(!0)),$def(self,"$infinite?",$return_val(nil)),$alias(self,"arg","angle"),$alias(self,"conjugate","conj"),$alias(self,"imaginary","imag"),$alias(self,"magnitude","abs"),$alias(self,"modulo","%"),$alias(self,"phase","arg"),$alias(self,"rectangular","rect")}()},Opal.modules["corelib/array"]=function(Opal){var $truthy=Opal.truthy,$falsy=Opal.falsy,$hash_ids=Opal.hash_ids,$yield1=Opal.yield1,$hash_get=Opal.hash_get,$hash_put=Opal.hash_put,$hash_delete=Opal.hash_delete,$coerce_to=Opal.coerce_to,$respond_to=Opal.respond_to,$deny_frozen_access=Opal.deny_frozen_access,$freeze=Opal.freeze,$klass=Opal.klass,$slice=Opal.slice,$defs=Opal.defs,$Kernel=Opal.Kernel,$def=Opal.def,$Opal=Opal.Opal,$eqeqeq=Opal.eqeqeq,$hash2=Opal.hash2,$send2=Opal.send2,$find_super=Opal.find_super,$send=Opal.send,$rb_gt=Opal.rb_gt,$rb_times=Opal.rb_times,$eqeq=Opal.eqeq,$rb_minus=Opal.rb_minus,$to_a=Opal.to_a,$to_ary=Opal.to_ary,$gvars=Opal.gvars,$rb_ge=Opal.rb_ge,$assign_ivar=Opal.assign_ivar,$rb_lt=Opal.rb_lt,$return_self=Opal.return_self,$neqeq=Opal.neqeq,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,===,join,to_str,hash,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,&,!,intersection,to_s,new,item,max,min,>=,**,delete_if,reverse,rotate,rand,at,keep_if,shuffle!,<,sort,sort_by,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),self.$require("corelib/enumerable"),self.$require("corelib/numeric"),function($base,$super,$parent_nesting){var self=$klass("::",Array,"Array"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function toArraySubclass(obj,klass){return klass.$$name===Opal.Array?obj:klass.$allocate().$replace(obj.$to_a())}function filterIf(self,filter,block){for(var value,raised=null,updated=new Array(self.length),i=0,i2=0,length=self.length;i<length;i++){if(!raised)try{value=$yield1(block,self[i])}catch(error){raised=error}(raised||filter(value))&&(updated[i2]=self[i],i2+=1)}if(i2!==i&&(self.splice.apply(self,[0,updated.length].concat(updated)),self.splice(i2,updated.length)),raised)throw raised}function $array_slice_range(self,index){var exclude,from,to,size=self.length;return exclude=index.excl,from=index.begin===nil?0:$coerce_to(index.begin,Opal.Integer,"to_int"),to=index.end===nil?-1:$coerce_to(index.end,Opal.Integer,"to_int"),from<0&&(from+=size)<0?nil:(index.excl_rev&&index.begin!==nil&&(from+=1),from>size?nil:to<0&&(to+=size)<0?[]:(exclude&&index.end!==nil||(to+=1),self.slice(from,to)))}function binomial_coefficient(n,k){return n===k||0===k?1:k>0&&n>k?binomial_coefficient(n-1,k-1)+binomial_coefficient(n-1,k):0}self.$include($$$("Enumerable")),Opal.prop(self.$$prototype,"$$is_array",!0),$defs(self,"$[]",(function($a){var self=this;return toArraySubclass($slice(arguments),self)}),-1),$def(self,"$initialize",(function $$initialize(size,obj){var i,value,block=$$initialize.$$p||nil,self=this;if($$initialize.$$p=null,null==size&&(size=nil),null==obj&&(obj=nil),$deny_frozen_access(self),obj!==nil&&block!==nil&&$Kernel.$warn("warning: block supersedes default value argument"),size>$$$($$$("Integer"),"MAX")&&$Kernel.$raise($$$("ArgumentError"),"array size too big"),arguments.length>2&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return self.splice(0,self.length),self;if(1===arguments.length){if(size.$$is_array)return self.$replace(size.$to_a()),self;if(size["$respond_to?"]("to_ary"))return self.$replace(size.$to_ary()),self}if((size=$coerce_to(size,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$("ArgumentError"),"negative array size"),self.splice(0,self.length),block===nil)for(i=0;i<size;i++)self.push(obj);else for(i=0;i<size;i++)value=block(i),self[i]=value;return self}),-1),$defs(self,"$try_convert",(function(obj){return $Opal["$coerce_to?"](obj,$$$("Array"),"to_ary")})),$def(self,"$&",(function(other){other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a();var i,length,item,result=[],hash=$hash2([],{});for(i=0,length=other.length;i<length;i++)$hash_put(hash,other[i],!0);for(i=0,length=this.length;i<length;i++)item=this[i],void 0!==$hash_delete(hash,item)&&result.push(item);return result})),$def(self,"$|",(function(other){other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a();var i,length,hash=$hash2([],{});for(i=0,length=this.length;i<length;i++)$hash_put(hash,this[i],!0);for(i=0,length=other.length;i<length;i++)$hash_put(hash,other[i],!0);return hash.$keys()})),$def(self,"$*",(function(other){if($truthy(other["$respond_to?"]("to_str")))return this.$join(other.$to_str());other=$coerce_to(other,$$$("Integer"),"to_int"),$truthy(other<0)&&$Kernel.$raise($$$("ArgumentError"),"negative argument");for(var result=[],converted=this.$to_a(),i=0;i<other;i++)result=result.concat(converted);return result})),$def(self,"$+",(function(other){return other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a(),this.concat(other)})),$def(self,"$-",(function(other){if(other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a(),$truthy(0===this.length))return[];if($truthy(0===other.length))return this.slice();var i,length,item,result=[],hash=$hash2([],{});for(i=0,length=other.length;i<length;i++)$hash_put(hash,other[i],!0);for(i=0,length=this.length;i<length;i++)item=this[i],void 0===$hash_get(hash,item)&&result.push(item);return result})),$def(self,"$<<",(function(object){return $deny_frozen_access(this),this.push(object),this})),$def(self,"$<=>",(function(other){if($eqeqeq($$$("Array"),other))other=other.$to_a();else{if(!$truthy(other["$respond_to?"]("to_ary")))return nil;other=other.$to_ary().$to_a()}if(this.$hash()===other.$hash())return 0;for(var count=Math.min(this.length,other.length),i=0;i<count;i++){var tmp=this[i]["$<=>"](other[i]);if(0!==tmp)return tmp}return this.length["$<=>"](other.length)})),$def(self,"$==",(function(other){var recursed={};return function _eqeq(array,other){var i,length,a,b;if(array===other)return!0;if(!other.$$is_array)return!!$respond_to(other,"$to_ary")&&other["$=="](array);if(array.$$constructor!==Array&&(array=array.$to_a()),other.$$constructor!==Array&&(other=other.$to_a()),array.length!==other.length)return!1;for(recursed[array.$object_id()]=!0,i=0,length=array.length;i<length;i++)if(a=array[i],b=other[i],a.$$is_array){if(b.$$is_array&&b.length!==a.length)return!1;if(!recursed.hasOwnProperty(a.$object_id())&&!_eqeq(a,b))return!1}else if(!a["$=="](b))return!1;return!0}(this,other)})),$def(self,"$[]",(function(index,length){return index.$$is_range?$array_slice_range(this,index):index.$$is_arithmetic_seq?function(self,index){var array,out=[],i=0;for(array=index.step<0?$array_slice_range(self,{begin:index.range.end,end:index.range.begin,excl:!1,excl_rev:index.range.excl}).$reverse():$array_slice_range(self,index.range);i<array.length;)out.push(array[i]),i+=Math.abs(index.step);return out}(this,index):function(self,index,length){var size=self.length;return(index=$coerce_to(index,Opal.Integer,"to_int"))<0&&(index+=size)<0?nil:void 0===length?index>=size||index<0?nil:self[index]:(length=$coerce_to(length,Opal.Integer,"to_int"))<0||index>size||index<0?nil:self.slice(index,index+length)}(this,index,length)}),-2),$def(self,"$[]=",(function(index,value,extra){var data=nil,length=nil;$deny_frozen_access(this),data=nil;var i,old,size=this.length;if(index.$$is_range){data=value.$$is_array?value.$to_a():value["$respond_to?"]("to_ary")?value.$to_ary().$to_a():[value];var exclude=index.excl,from=index.begin===nil?0:$coerce_to(index.begin,Opal.Integer,"to_int"),to=index.end===nil?-1:$coerce_to(index.end,Opal.Integer,"to_int");if(from<0&&(from+=size)<0&&$Kernel.$raise($$$("RangeError"),index.$inspect()+" out of range"),to<0&&(to+=size),exclude&&index.end!==nil||(to+=1),from>size)for(i=size;i<from;i++)this[i]=nil;return to<0?this.splice.apply(this,[from,0].concat(data)):this.splice.apply(this,[from,to-from].concat(data)),value}if(void 0===extra?length=1:(length=value,data=(value=extra).$$is_array?value.$to_a():value["$respond_to?"]("to_ary")?value.$to_ary().$to_a():[value]),index=$coerce_to(index,$$$("Integer"),"to_int"),length=$coerce_to(length,$$$("Integer"),"to_int"),index<0&&(old=index,(index+=size)<0&&$Kernel.$raise($$$("IndexError"),"index "+old+" too small for array; minimum "+-this.length)),length<0&&$Kernel.$raise($$$("IndexError"),"negative length ("+length+")"),index>size)for(i=size;i<index;i++)this[i]=nil;return void 0===extra?this[index]=value:this.splice.apply(this,[index,length].concat(data)),value}),-3),$def(self,"$any?",(function $Array_any$ques$12(pattern){var block=$Array_any$ques$12.$$p||nil;return $Array_any$ques$12.$$p=null,0!==this.length&&$send2(this,$find_super(this,"any?",$Array_any$ques$12,!1,!0),"any?",[pattern],block)}),-1),$def(self,"$assoc",(function(object){for(var item,i=0,length=this.length;i<length;i++)if((item=this[i]).length&&item[0]["$=="](object))return item;return nil})),$def(self,"$at",(function(index){return(index=$coerce_to(index,$$$("Integer"),"to_int"))<0&&(index+=this.length),index<0||index>=this.length?nil:this[index]})),$def(self,"$bsearch_index",(function $$bsearch_index(){var block=$$bsearch_index.$$p||nil;if($$bsearch_index.$$p=null,block===nil)return this.$enum_for("bsearch_index");for(var mid,val,ret,min=0,max=this.length,smaller=!1,satisfied=nil;min<max;){if(val=this[mid=min+Math.floor((max-min)/2)],!0===(ret=$yield1(block,val)))satisfied=mid,smaller=!0;else if(!1===ret||ret===nil)smaller=!1;else if(ret.$$is_number){if(0===ret)return mid;smaller=ret<0}else $Kernel.$raise($$$("TypeError"),"wrong argument type "+ret.$class()+" (must be numeric, true, false or nil)");smaller?max=mid:min=mid+1}return satisfied})),$def(self,"$bsearch",(function $$bsearch(){var index,block=$$bsearch.$$p||nil;return $$bsearch.$$p=null,block===nil?this.$enum_for("bsearch"):null!=(index=$send(this,"bsearch_index",[],block.$to_proc()))&&index.$$is_number?this[index]:index})),$def(self,"$cycle",(function $$cycle(n){var i,length,block=$$cycle.$$p||nil;if($$cycle.$$p=null,null==n&&(n=nil),block===nil)return $send(this,"enum_for",["cycle",n],(function $$13(){var self=null==$$13.$$s?this:$$13.$$s;return $truthy(n["$nil?"]())?$$$($$$("Float"),"INFINITY"):(n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$truthy($rb_gt(n,0))?$rb_times(self.$enumerator_size(),n):0)}),{$$s:this});if($truthy(this["$empty?"]())||$eqeq(n,0))return nil;if(n===nil)for(;;)for(i=0,length=this.length;i<length;i++)$yield1(block,this[i]);else{if((n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"))<=0)return this;for(;n>0;){for(i=0,length=this.length;i<length;i++)$yield1(block,this[i]);n--}}return this}),-1),$def(self,"$clear",(function(){return $deny_frozen_access(this),this.splice(0,this.length),this})),$def(self,"$count",(function $$count(object){var block=$$count.$$p||nil;return $$count.$$p=null,$truthy(void 0!==object)||$truthy(block)?$send2(this,$find_super(this,"count",$$count,!1,!0),"count",[object],block):this.$size()}),-1),$def(self,"$initialize_copy",(function(other){return this.$replace(other)})),$def(self,"$collect",(function $$collect(){var block=$$collect.$$p||nil;if($$collect.$$p=null,block===nil)return $send(this,"enum_for",["collect"],(function $$14(){return(null==$$14.$$s?this:$$14.$$s).$size()}),{$$s:this});for(var result=[],i=0,length=this.length;i<length;i++){var value=$yield1(block,this[i]);result.push(value)}return result})),$def(self,"$collect!",(function $Array_collect$excl$15(){var block=$Array_collect$excl$15.$$p||nil;if($Array_collect$excl$15.$$p=null,block===nil)return $send(this,"enum_for",["collect!"],(function $$16(){return(null==$$16.$$s?this:$$16.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var i=0,length=this.length;i<length;i++){var value=$yield1(block,this[i]);this[i]=value}return this})),$def(self,"$combination",(function $$combination(n){var num,i,length,stack,chosen,lev,done,next,$yield=$$combination.$$p||nil;if($$combination.$$p=null,num=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$yield===nil)return $send(this,"enum_for",["combination",num],(function $$17(){return binomial_coefficient((null==$$17.$$s?this:$$17.$$s).length,num)}),{$$s:this});if(0===num)Opal.yield1($yield,[]);else if(1===num)for(i=0,length=this.length;i<length;i++)Opal.yield1($yield,[this[i]]);else if(num===this.length)Opal.yield1($yield,this.slice());else if(num>=0&&num<this.length){for(stack=[],i=0;i<=num+1;i++)stack.push(0);for(chosen=[],lev=0,done=!1,stack[0]=-1;!done;){for(chosen[lev]=this[stack[lev+1]];lev<num-1;)next=stack[++lev+1]=stack[lev]+1,chosen[lev]=this[next];Opal.yield1($yield,chosen.slice()),lev++;do{done=0===lev,stack[lev]++,lev--}while(stack[lev+1]+num===this.length+lev+1)}}return this})),$def(self,"$repeated_combination",(function $$repeated_combination(n){var num,$yield=$$repeated_combination.$$p||nil;if($$repeated_combination.$$p=null,num=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$yield===nil)return $send(this,"enum_for",["repeated_combination",num],(function $$18(){return binomial_coefficient((null==$$18.$$s?this:$$18.$$s).length+num-1,num)}),{$$s:this});return num>=0&&function iterate(max,from,buffer,self){if(buffer.length!=max)for(var i=from;i<self.length;i++)buffer.push(self[i]),iterate(max,i,buffer,self),buffer.pop();else{var copy=buffer.slice();Opal.yield1($yield,copy)}}(num,0,[],this),this})),$def(self,"$compact",(function(){for(var item,result=[],i=0,length=this.length;i<length;i++)(item=this[i])!==nil&&result.push(item);return result})),$def(self,"$compact!",(function(){$deny_frozen_access(this);for(var original=this.length,i=0,length=this.length;i<length;i++)this[i]===nil&&(this.splice(i,1),length--,i--);return this.length===original?nil:this})),$def(self,"$concat",(function($a){var others,self=this;return others=$slice(arguments),$deny_frozen_access(self),others=$send(others,"map",[],(function $$20(other){var self=null==$$20.$$s?this:$$20.$$s;return null==other&&(other=nil),other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a(),$truthy(other["$equal?"](self))&&(other=other.$dup()),other}),{$$s:self}),$send(others,"each",[],(function $$21(other){var self=null==$$21.$$s?this:$$21.$$s;null==other&&(other=nil);for(var i=0,length=other.length;i<length;i++)self.push(other[i])}),{$$s:self}),self}),-1),$def(self,"$delete",(function $Array_delete$22(object){var $yield=$Array_delete$22.$$p||nil;$Array_delete$22.$$p=null;for(var original=this.length,i=0,length=original;i<length;i++)this[i]["$=="](object)&&($deny_frozen_access(this),this.splice(i,1),length--,i--);return this.length===original?$yield!==nil?Opal.yieldX($yield,[]):nil:object})),$def(self,"$delete_at",(function(index){if($deny_frozen_access(this),(index=$coerce_to(index,$$$("Integer"),"to_int"))<0&&(index+=this.length),index<0||index>=this.length)return nil;var result=this[index];return this.splice(index,1),result})),$def(self,"$delete_if",(function $$delete_if(){var block=$$delete_if.$$p||nil;return $$delete_if.$$p=null,block===nil?$send(this,"enum_for",["delete_if"],(function $$23(){return(null==$$23.$$s?this:$$23.$$s).$size()}),{$$s:this}):($deny_frozen_access(this),filterIf(this,$falsy,block),this)})),$def(self,"$difference",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send($post_args,"reduce",[self.$to_a().$dup()],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),$rb_minus(a,b)}))}),-1),$def(self,"$dig",(function(idx,$a){var idxs,self=this,item=nil;return idxs=$slice(arguments,1),(item=self["$[]"](idx))===nil||0===idxs.length?item:($truthy(item["$respond_to?"]("dig"))||$Kernel.$raise($$$("TypeError"),item.$class()+" does not have #dig method"),$send(item,"dig",$to_a(idxs)))}),-2),$def(self,"$drop",(function(number){return(number=$coerce_to(number,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$("ArgumentError")),this.slice(number)})),$def(self,"$dup",(function $$dup(){var $yield=$$dup.$$p||nil;return $$dup.$$p=null,this.$$class===Opal.Array&&this.$$class.$allocate.$$pristine&&this.$copy_instance_variables.$$pristine&&this.$initialize_dup.$$pristine?this.slice(0):$send2(this,$find_super(this,"dup",$$dup,!1,!0),"dup",[],$yield)})),$def(self,"$each",(function $$each(){var block=$$each.$$p||nil;if($$each.$$p=null,block===nil)return $send(this,"enum_for",["each"],(function $$25(){return(null==$$25.$$s?this:$$25.$$s).$size()}),{$$s:this});for(var i=0,length=this.length;i<length;i++)$yield1(block,this[i]);return this})),$def(self,"$each_index",(function $$each_index(){var block=$$each_index.$$p||nil;if($$each_index.$$p=null,block===nil)return $send(this,"enum_for",["each_index"],(function $$26(){return(null==$$26.$$s?this:$$26.$$s).$size()}),{$$s:this});for(var i=0,length=this.length;i<length;i++)$yield1(block,i);return this})),$def(self,"$empty?",(function(){return 0===this.length})),$def(self,"$eql?",(function(other){var recursed={};return function _eql(array,other){var i,length,a,b;if(!other.$$is_array)return!1;if(other=other.$to_a(),array.length!==other.length)return!1;for(recursed[array.$object_id()]=!0,i=0,length=array.length;i<length;i++)if(a=array[i],b=other[i],a.$$is_array){if(b.$$is_array&&b.length!==a.length)return!1;if(!recursed.hasOwnProperty(a.$object_id())&&!_eql(a,b))return!1}else if(!a["$eql?"](b))return!1;return!0}(this,other)})),$def(self,"$fetch",(function $$fetch(index,defaults){var block=$$fetch.$$p||nil;$$fetch.$$p=null;var original=index;return(index=$coerce_to(index,$$$("Integer"),"to_int"))<0&&(index+=this.length),index>=0&&index<this.length?this[index]:(block!==nil&&null!=defaults&&this.$warn("warning: block supersedes default value argument"),block!==nil?block(original):null!=defaults?defaults:void(0===this.length?$Kernel.$raise($$$("IndexError"),"index "+original+" outside of array bounds: 0...0"):$Kernel.$raise($$$("IndexError"),"index "+original+" outside of array bounds: -"+this.length+"..."+this.length)))}),-2),$def(self,"$fill",(function $$fill($a){var args,$b,i,value,block=$$fill.$$p||nil,self=this,one=nil,two=nil,obj=nil,left=nil,right=nil;if($$fill.$$p=null,args=$slice(arguments),$deny_frozen_access(self),$truthy(block)?($truthy(args.length>2)&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+args.$length()+" for 0..2)"),one=null==($b=$to_ary(args))[0]?nil:$b[0],two=null==$b[1]?nil:$b[1]):($truthy(0==args.length)?$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (0 for 1..3)"):$truthy(args.length>3)&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+args.$length()+" for 1..3)"),obj=null==($b=$to_ary(args))[0]?nil:$b[0],one=null==$b[1]?nil:$b[1],two=null==$b[2]?nil:$b[2]),$eqeqeq($$$("Range"),one)){if($truthy(two)&&$Kernel.$raise($$$("TypeError"),"length invalid with range"),left=one.begin===nil?0:$coerce_to(one.begin,$$$("Integer"),"to_int"),$truthy(left<0)&&(left+=this.length),$truthy(left<0)&&$Kernel.$raise($$$("RangeError"),one.$inspect()+" out of range"),right=one.end===nil?-1:$coerce_to(one.end,$$$("Integer"),"to_int"),$truthy(right<0)&&(right+=this.length),$truthy(one["$exclude_end?"]())||(right+=1),$truthy(right<=left))return self}else if($truthy(one))if(left=$coerce_to(one,$$$("Integer"),"to_int"),$truthy(left<0)&&(left+=this.length),$truthy(left<0)&&(left=0),$truthy(two)){if(right=$coerce_to(two,$$$("Integer"),"to_int"),$truthy(0==right))return self;right+=left}else right=this.length;else left=0,right=this.length;if($truthy(left>this.length))for(i=this.length;i<right;i++)self[i]=nil;if($truthy(right>this.length)&&(this.length=right),$truthy(block))for(this.length;left<right;left++)value=block(left),self[left]=value;else for(this.length;left<right;left++)self[left]=obj;return self}),-1),$def(self,"$first",(function(count){return null==count?0===this.length?nil:this[0]:((count=$coerce_to(count,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$("ArgumentError"),"negative array size"),this.slice(0,count))}),-1),$def(self,"$flatten",(function(level){var self=this;return void 0!==level&&(level=$coerce_to(level,$$$("Integer"),"to_int")),function _flatten(array,level){var i,length,item,ary,result=[];for(i=0,length=(array=array.$to_a()).length;i<length;i++)if(item=array[i],$respond_to(item,"$to_ary",!0))if((ary=item.$to_ary())!==nil)switch(ary.$$is_array||$Kernel.$raise($$$("TypeError")),ary===self&&$Kernel.$raise($$$("ArgumentError")),level){case void 0:result=result.concat(_flatten(ary));break;case 0:result.push(ary);break;default:result.push.apply(result,_flatten(ary,level-1))}else result.push(item);else result.push(item);return result}(self,level)}),-1),$def(self,"$flatten!",(function(level){$deny_frozen_access(this);var flattened=this.$flatten(level);if(this.length==flattened.length){for(var i=0,length=this.length;i<length&&this[i]===flattened[i];i++);if(i==length)return nil}return this.$replace(flattened),this}),-1),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:$freeze(this)})),$def(self,"$hash",(function(){var item,i,key,top=void 0===$hash_ids,result=["A"],hash_id=this.$object_id();try{if(top&&($hash_ids=Object.create(null)),$hash_ids[hash_id])return"self";for(key in $hash_ids)if(item=$hash_ids[key],this["$eql?"](item))return"self";for($hash_ids[hash_id]=this,i=0;i<this.length;i++)item=this[i],result.push(item.$hash());return result.join(",")}finally{top&&($hash_ids=void 0)}})),$def(self,"$include?",(function(member){for(var i=0,length=this.length;i<length;i++)if(this[i]["$=="](member))return!0;return!1})),$def(self,"$index",(function $$index(object){var i,length,value,block=$$index.$$p||nil;if($$index.$$p=null,null!=object&&block!==nil&&this.$warn("warning: given block not used"),null!=object){for(i=0,length=this.length;i<length;i++)if(this[i]["$=="](object))return i}else{if(block===nil)return this.$enum_for("index");for(i=0,length=this.length;i<length;i++)if(!1!==(value=block(this[i]))&&value!==nil)return i}return nil}),-1),$def(self,"$insert",(function(index,$a){var objects,self=this;if(objects=$slice(arguments,1),$deny_frozen_access(self),index=$coerce_to(index,$$$("Integer"),"to_int"),objects.length>0){if(index<0&&(index+=self.length+1)<0&&$Kernel.$raise($$$("IndexError"),index+" is out of bounds"),index>self.length)for(var i=self.length;i<index;i++)self.push(nil);self.splice.apply(self,[index,0].concat(objects))}return self}),-2);var inspect_stack=[];return $def(self,"$inspect",(function(){var self=this,result=[],id=self.$__id__(),pushed=!0;return function(){try{if(-1!==inspect_stack.indexOf(id))return pushed=!1,"[...]";inspect_stack.push(id);for(var i=0,length=self.length;i<length;i++){var item=self["$[]"](i);result.push($$("Opal").$inspect(item))}return"["+result.join(", ")+"]"}finally{pushed&&inspect_stack.pop()}}()})),$def(self,"$intersection",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send($post_args,"reduce",[self.$to_a().$dup()],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),a["$&"](b)}))}),-1),$def(self,"$intersect?",(function(other){return this.$intersection(other)["$empty?"]()["$!"]()})),$def(self,"$join",(function(sep){if(null==$gvars[","]&&($gvars[","]=nil),null==sep&&(sep=nil),$truthy(0===this.length))return"";$truthy(sep===nil)&&(sep=$gvars[","]);var i,length,item,tmp,result=[];for(i=0,length=this.length;i<length;i++)item=this[i],$respond_to(item,"$to_str")&&(tmp=item.$to_str())!==nil?result.push(tmp.$to_s()):$respond_to(item,"$to_ary")&&((tmp=item.$to_ary())===this&&$Kernel.$raise($$$("ArgumentError")),tmp!==nil)?result.push(tmp.$join(sep)):$respond_to(item,"$to_s")&&(tmp=item.$to_s())!==nil?result.push(tmp):$Kernel.$raise($$$("NoMethodError").$new($$("Opal").$inspect(this.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return sep===nil?result.join(""):result.join($Opal["$coerce_to!"](sep,$$$("String"),"to_str").$to_s())}),-1),$def(self,"$keep_if",(function $$keep_if(){var block=$$keep_if.$$p||nil;return $$keep_if.$$p=null,block===nil?$send(this,"enum_for",["keep_if"],(function $$33(){return(null==$$33.$$s?this:$$33.$$s).$size()}),{$$s:this}):($deny_frozen_access(this),filterIf(this,$truthy,block),this)})),$def(self,"$last",(function(count){return null==count?0===this.length?nil:this[this.length-1]:((count=$coerce_to(count,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$("ArgumentError"),"negative array size"),count>this.length&&(count=this.length),this.slice(this.length-count,this.length))}),-1),$def(self,"$length",(function(){return this.length})),$def(self,"$max",(function $$max(n){var block=$$max.$$p||nil;return $$max.$$p=null,$send(this.$each(),"max",[n],block.$to_proc())}),-1),$def(self,"$min",(function $$min(){var block=$$min.$$p||nil;return $$min.$$p=null,$send(this.$each(),"min",[],block.$to_proc())})),$def(self,"$permutation",(function $$permutation(num){var permute,offensive,output,block=$$permutation.$$p||nil,self=this,perm=nil,used=nil;if($$permutation.$$p=null,block===nil)return $send(self,"enum_for",["permutation",num],(function $$34(){var self=null==$$34.$$s?this:$$34.$$s;return function(from,how_many){for(var count=how_many>=0?1:0;how_many;)count*=from,from--,how_many--;return count}(self.length,void 0===num?self.length:num)}),{$$s:self});if((num=void 0===num?self.length:$coerce_to(num,$$$("Integer"),"to_int"))<0||self.length<num);else if(0===num)Opal.yield1(block,[]);else if(1===num)for(var i=0;i<self.length;i++)Opal.yield1(block,[self[i]]);else perm=$$("Array").$new(num),used=$$("Array").$new(self.length,!1),permute=function(num,perm,index,used,blk){self=this;for(var i=0;i<self.length;i++)if(used["$[]"](i)["$!"]())if(perm[index]=i,index<num-1)used[i]=!0,permute.call(self,num,perm,index+1,used,blk),used[i]=!1;else{output=[];for(var j=0;j<perm.length;j++)output.push(self[perm[j]]);$yield1(blk,output)}},block!==nil?(offensive=self.slice(),permute.call(offensive,num,perm,0,used,block)):permute.call(self,num,perm,0,used,block);return self}),-1),$def(self,"$repeated_permutation",(function $$repeated_permutation(n){var num,$yield=$$repeated_permutation.$$p||nil;if($$repeated_permutation.$$p=null,num=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),$yield===nil)return $send(this,"enum_for",["repeated_permutation",num],(function $$35(){var self=null==$$35.$$s?this:$$35.$$s;return $truthy($rb_ge(num,0))?self.$size()["$**"](num):0}),{$$s:this});return function iterate(max,buffer,self){if(buffer.length!=max)for(var i=0;i<self.length;i++)buffer.push(self[i]),iterate(max,buffer,self),buffer.pop();else{var copy=buffer.slice();Opal.yield1($yield,copy)}}(num,[],this.slice()),this})),$def(self,"$pop",(function(count){return $deny_frozen_access(this),$truthy(void 0===count)?$truthy(0===this.length)?nil:this.pop():(count=$coerce_to(count,$$$("Integer"),"to_int"),$truthy(count<0)&&$Kernel.$raise($$$("ArgumentError"),"negative array size"),$truthy(0===this.length)?[]:$truthy(1===count)?[this.pop()]:$truthy(count>this.length)?this.splice(0,this.length):this.splice(this.length-count,this.length))}),-1),$def(self,"$product",(function $$product($a){var $post_args,args,block=$$product.$$p||nil,self=this;$$product.$$p=null,$post_args=$slice(arguments);var i,m,subarray,len,result=block!==nil?null:[],n=(args=$post_args).length+1,counters=new Array(n),lengths=new Array(n),arrays=new Array(n),resultlen=1;for(arrays[0]=self,i=1;i<n;i++)arrays[i]=$coerce_to(args[i-1],$$$("Array"),"to_ary");for(i=0;i<n;i++){if(0===(len=arrays[i].length))return result||self;(resultlen*=len)>2147483647&&$Kernel.$raise($$$("RangeError"),"too big to product"),lengths[i]=len,counters[i]=0}outer_loop:for(;;){for(subarray=[],i=0;i<n;i++)subarray.push(arrays[i][counters[i]]);for(result?result.push(subarray):Opal.yield1(block,subarray),counters[m=n-1]++;counters[m]===lengths[m];){if(counters[m]=0,--m<0)break outer_loop;counters[m]++}}return result||self}),-1),$def(self,"$push",(function($a){var objects,self=this;objects=$slice(arguments),$deny_frozen_access(self);for(var i=0,length=objects.length;i<length;i++)self.push(objects[i]);return self}),-1),$def(self,"$rassoc",(function(object){for(var item,i=0,length=this.length;i<length;i++)if((item=this[i]).length&&void 0!==item[1]&&item[1]["$=="](object))return item;return nil})),$def(self,"$reject",(function $$reject(){var block=$$reject.$$p||nil;if($$reject.$$p=null,block===nil)return $send(this,"enum_for",["reject"],(function $$36(){return(null==$$36.$$s?this:$$36.$$s).$size()}),{$$s:this});for(var value,result=[],i=0,length=this.length;i<length;i++)!1!==(value=block(this[i]))&&value!==nil||result.push(this[i]);return result})),$def(self,"$reject!",(function $Array_reject$excl$37(){var original,block=$Array_reject$excl$37.$$p||nil;return $Array_reject$excl$37.$$p=null,block===nil?$send(this,"enum_for",["reject!"],(function $$38(){return(null==$$38.$$s?this:$$38.$$s).$size()}),{$$s:this}):($deny_frozen_access(this),original=this.$length(),$send(this,"delete_if",[],block.$to_proc()),$eqeq(this.$length(),original)?nil:this)})),$def(self,"$replace",(function(other){return $deny_frozen_access(this),other=$eqeqeq($$$("Array"),other)?other.$to_a():$coerce_to(other,$$$("Array"),"to_ary").$to_a(),this.splice(0,this.length),this.push.apply(this,other),this})),$def(self,"$reverse",(function(){return this.slice(0).reverse()})),$def(self,"$reverse!",(function(){return $deny_frozen_access(this),this.reverse()})),$def(self,"$reverse_each",(function $$reverse_each(){var block=$$reverse_each.$$p||nil;return $$reverse_each.$$p=null,block===nil?$send(this,"enum_for",["reverse_each"],(function $$40(){return(null==$$40.$$s?this:$$40.$$s).$size()}),{$$s:this}):($send(this.$reverse(),"each",[],block.$to_proc()),this)})),$def(self,"$rindex",(function $$rindex(object){var i,value,block=$$rindex.$$p||nil;if($$rindex.$$p=null,null!=object&&block!==nil&&this.$warn("warning: given block not used"),null!=object){for(i=this.length-1;i>=0&&!(i>=this.length);i--)if(this[i]["$=="](object))return i}else if(block!==nil){for(i=this.length-1;i>=0&&!(i>=this.length);i--)if(!1!==(value=block(this[i]))&&value!==nil)return i}else if(null==object)return this.$enum_for("rindex");return nil}),-1),$def(self,"$rotate",(function(n){var ary,idx,firstPart,lastPart;return null==n&&(n=1),n=$coerce_to(n,$$$("Integer"),"to_int"),1===this.length?this.slice():0===this.length?[]:(idx=n%(ary=this.slice()).length,firstPart=ary.slice(idx),lastPart=ary.slice(0,idx),firstPart.concat(lastPart))}),-1),$def(self,"$rotate!",(function(cnt){var ary;return null==cnt&&(cnt=1),$deny_frozen_access(this),0===this.length||1===this.length?this:(cnt=$coerce_to(cnt,$$$("Integer"),"to_int"),ary=this.$rotate(cnt),this.$replace(ary))}),-1),function($base,$super){var self=$klass($base,null,"SampleRandom");self.$$prototype.rng=nil,$def(self,"$initialize",$assign_ivar("rng")),$def(self,"$rand",(function(size){var random;return random=$coerce_to(this.rng.$rand(size),$$$("Integer"),"to_int"),$truthy(random<0)&&$Kernel.$raise($$$("RangeError"),"random value must be >= 0"),$truthy(random<size)||$Kernel.$raise($$$("RangeError"),"random value must be less than Array size"),random}))}(self),$def(self,"$sample",(function(count,options){var abandon,spin,result,i,j,k,targetIndex,oldValue,o=nil,rng=nil;if($truthy(void 0===count))return this.$at($Kernel.$rand(this.length));if($truthy(void 0===options)?$truthy(o=$Opal["$coerce_to?"](count,$$$("Hash"),"to_hash"))?(options=o,count=nil):(options=nil,count=$coerce_to(count,$$$("Integer"),"to_int")):(count=$coerce_to(count,$$$("Integer"),"to_int"),options=$coerce_to(options,$$$("Hash"),"to_hash")),$truthy(count)&&$truthy(count<0)&&$Kernel.$raise($$$("ArgumentError"),"count must be greater than 0"),$truthy(options)&&(rng=options["$[]"]("random")),rng=$truthy(rng)&&$truthy(rng["$respond_to?"]("rand"))?$$("SampleRandom").$new(rng):$Kernel,!$truthy(count))return this[rng.$rand(this.length)];switch(count>this.length&&(count=this.length),count){case 0:return[];case 1:return[this[rng.$rand(this.length)]];case 2:return(i=rng.$rand(this.length))===(j=rng.$rand(this.length))&&(j=0===i?i+1:i-1),[this[i],this[j]];default:if(this.length/count>3){for(abandon=!1,spin=0,i=1,(result=$$("Array").$new(count))[0]=rng.$rand(this.length);i<count;){for(k=rng.$rand(this.length),j=0;j<i;){for(;k===result[j];){if(++spin>100){abandon=!0;break}k=rng.$rand(this.length)}if(abandon)break;j++}if(abandon)break;result[i]=k,i++}if(!abandon){for(i=0;i<count;)result[i]=this[result[i]],i++;return result}}result=this.slice();for(var c=0;c<count;c++)targetIndex=rng.$rand(this.length),oldValue=result[c],result[c]=result[targetIndex],result[targetIndex]=oldValue;return count===this.length?result:result["$[]"](0,count)}}),-1),$def(self,"$select",(function $$select(){var block=$$select.$$p||nil;if($$select.$$p=null,block===nil)return $send(this,"enum_for",["select"],(function $$42(){return(null==$$42.$$s?this:$$42.$$s).$size()}),{$$s:this});for(var item,value,result=[],i=0,length=this.length;i<length;i++)item=this[i],value=$yield1(block,item),$truthy(value)&&result.push(item);return result})),$def(self,"$select!",(function $Array_select$excl$43(){var block=$Array_select$excl$43.$$p||nil;if($Array_select$excl$43.$$p=null,block===nil)return $send(this,"enum_for",["select!"],(function $$44(){return(null==$$44.$$s?this:$$44.$$s).$size()}),{$$s:this});$deny_frozen_access(this);var original=this.length;return $send(this,"keep_if",[],block.$to_proc()),this.length===original?nil:this})),$def(self,"$shift",(function(count){return $deny_frozen_access(this),$truthy(void 0===count)?$truthy(0===this.length)?nil:function(list){for(var r=list[0],index=1,length=list.length;index<length;index++)list[index-1]=list[index];return list.pop(),r}(this):(count=$coerce_to(count,$$$("Integer"),"to_int"),$truthy(count<0)&&$Kernel.$raise($$$("ArgumentError"),"negative array size"),$truthy(0===this.length)?[]:this.splice(0,count))}),-1),$def(self,"$shuffle",(function(rng){return this.$dup().$to_a()["$shuffle!"](rng)}),-1),$def(self,"$shuffle!",(function(rng){$deny_frozen_access(this);var randgen,j,tmp,i=this.length;for(void 0!==rng&&(rng=$Opal["$coerce_to?"](rng,$$$("Hash"),"to_hash"))!==nil&&(rng=rng["$[]"]("random"))!==nil&&rng["$respond_to?"]("rand")&&(randgen=rng);i;)randgen?((j=randgen.$rand(i).$to_int())<0&&$Kernel.$raise($$$("RangeError"),"random number too small "+j),j>=i&&$Kernel.$raise($$$("RangeError"),"random number too big "+j)):j=this.$rand(i),tmp=this[--i],this[i]=this[j],this[j]=tmp;return this}),-1),$def(self,"$slice!",(function(index,length){var result=nil,range=nil,range_start=nil,range_end=nil,start=nil;if($deny_frozen_access(this),result=nil,$truthy(void 0===length))if($eqeqeq($$$("Range"),index)){range=index,result=this["$[]"](range),range_start=range.begin===nil?0:$coerce_to(range.begin,$$$("Integer"),"to_int"),range_end=range.end===nil?-1:$coerce_to(range.end,$$$("Integer"),"to_int"),range_start<0&&(range_start+=this.length),range_end<0?range_end+=this.length:range_end>=this.length&&(range_end=this.length-1,range.excl&&(range_end+=1));var range_length=range_end-range_start;range.excl&&range.end!==nil?range_end-=1:range_length+=1,range_start<this.length&&range_start>=0&&range_end<this.length&&range_end>=0&&range_length>0&&this.splice(range_start,range_length)}else{if((start=$coerce_to(index,$$$("Integer"),"to_int"))<0&&(start+=this.length),start<0||start>=this.length)return nil;result=this[start],0===start?this.shift():this.splice(start,1)}else{if(start=$coerce_to(index,$$$("Integer"),"to_int"),(length=$coerce_to(length,$$$("Integer"),"to_int"))<0)return nil;result=this["$[]"](start,length),start<0&&(start+=this.length),start+length>this.length&&(length=this.length-start),start<this.length&&start>=0&&this.splice(start,length)}return result}),-2),$def(self,"$sort",(function $$sort(){var block=$$sort.$$p||nil;return $$sort.$$p=null,$truthy(this.length>1)?(block===nil&&(block=function(a,b){return a["$<=>"](b)}),this.slice().sort((function(x,y){var ret=block(x,y);return ret===nil&&$Kernel.$raise($$$("ArgumentError"),"comparison of "+x.$inspect()+" with "+y.$inspect()+" failed"),$rb_gt(ret,0)?1:$rb_lt(ret,0)?-1:0}))):this})),$def(self,"$sort!",(function $Array_sort$excl$47(){var result,block=$Array_sort$excl$47.$$p||nil;$Array_sort$excl$47.$$p=null,$deny_frozen_access(this),result=block!==nil?$send(this.slice(),"sort",[],block.$to_proc()):this.slice().$sort(),this.length=0;for(var i=0,length=result.length;i<length;i++)this.push(result[i]);return this})),$def(self,"$sort_by!",(function $Array_sort_by$excl$48(){var block=$Array_sort_by$excl$48.$$p||nil;return $Array_sort_by$excl$48.$$p=null,block===nil?$send(this,"enum_for",["sort_by!"],(function $$49(){return(null==$$49.$$s?this:$$49.$$s).$size()}),{$$s:this}):($deny_frozen_access(this),this.$replace($send(this,"sort_by",[],block.$to_proc())))})),$def(self,"$take",(function(count){return count<0&&$Kernel.$raise($$$("ArgumentError")),this.slice(0,count)})),$def(self,"$take_while",(function $$take_while(){var block=$$take_while.$$p||nil;$$take_while.$$p=null;for(var item,value,result=[],i=0,length=this.length;i<length;i++){if(!1===(value=block(item=this[i]))||value===nil)return result;result.push(item)}return result})),$def(self,"$to_a",(function(){return this.$$class===Opal.Array?this:Opal.Array.$new(this)})),$def(self,"$to_ary",$return_self),$def(self,"$to_h",(function $$to_h(){var block=$$to_h.$$p||nil,array=nil;$$to_h.$$p=null,array=this,block!==nil&&(array=$send(array,"map",[],block.$to_proc()));var i,ary,key,val,len=array.length,hash=$hash2([],{});for(i=0;i<len;i++)(ary=$Opal["$coerce_to?"](array[i],$$$("Array"),"to_ary")).$$is_array||$Kernel.$raise($$$("TypeError"),"wrong element type "+ary.$class()+" at "+i+" (expected array)"),2!==ary.length&&$Kernel.$raise($$$("ArgumentError"),"wrong array length at "+i+" (expected 2, was "+ary.$length()+")"),key=ary[0],val=ary[1],$hash_put(hash,key,val);return hash})),$def(self,"$transpose",(function(){var result=nil,max=nil;return $truthy(this["$empty?"]())?[]:(result=[],max=nil,$send(this,"each",[],(function(row){var $ret_or_1=nil;return null==row&&(row=nil),row=$eqeqeq($$$("Array"),row)?row.$to_a():$coerce_to(row,$$$("Array"),"to_ary").$to_a(),max=$truthy($ret_or_1=max)?$ret_or_1:row.length,$neqeq(row.length,max)&&$Kernel.$raise($$$("IndexError"),"element size differs ("+row.length+" should be "+max+")"),$send(row.length,"times",[],(function(i){var $a;return null==i&&(i=nil),($truthy($ret_or_1=result["$[]"](i))?$ret_or_1:($send(result,"[]=",$a=[i,[]]),$a[$a.length-1]))["$<<"](row.$at(i))}))})),result)})),$def(self,"$union",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send($post_args,"reduce",[self.$uniq()],(function(a,b){return null==a&&(a=nil),null==b&&(b=nil),a["$|"](b)}))}),-1),$def(self,"$uniq",(function $$uniq(){var block=$$uniq.$$p||nil;$$uniq.$$p=null;var i,length,item,key,hash=$hash2([],{});if(block===nil)for(i=0,length=this.length;i<length;i++)item=this[i],void 0===$hash_get(hash,item)&&$hash_put(hash,item,item);else for(i=0,length=this.length;i<length;i++)item=this[i],key=$yield1(block,item),void 0===$hash_get(hash,key)&&$hash_put(hash,key,item);return hash.$values()})),$def(self,"$uniq!",(function $Array_uniq$excl$53(){var block=$Array_uniq$excl$53.$$p||nil;$Array_uniq$excl$53.$$p=null,$deny_frozen_access(this);var i,length,item,key,original_length=this.length,hash=$hash2([],{});for(i=0,length=original_length;i<length;i++)item=this[i],key=block===nil?item:$yield1(block,item),void 0!==$hash_get(hash,key)?(this.splice(i,1),length--,i--):$hash_put(hash,key,item);return this.length===original_length?nil:this})),$def(self,"$unshift",(function($a){var objects,self=this;objects=$slice(arguments),$deny_frozen_access(self);var selfLength=self.length,objectsLength=objects.length;if(0==objectsLength)return self;for(var index=selfLength-objectsLength,i=0;i<objectsLength;i++)self.push(self[index+i]);for(var len=selfLength-1;len-objectsLength>=0;)self[len]=self[len-objectsLength],len--;for(var j=0;j<objectsLength;j++)self[j]=objects[j];return self}),-1),$def(self,"$values_at",(function($a){var $post_args,self=this,out=nil;return $post_args=$slice(arguments),out=[],$send($post_args,"each",[],(function $$54(elem){var self=null==$$54.$$s?this:$$54.$$s,finish=nil,start=nil,i=nil;return null==elem&&(elem=nil),$truthy(elem["$is_a?"]($$$("Range")))?(finish=elem.$end()===nil?-1:$coerce_to(elem.$end(),$$$("Integer"),"to_int"),(start=elem.$begin()===nil?0:$coerce_to(elem.$begin(),$$$("Integer"),"to_int"))<0?(start+=self.length,nil):(finish<0&&(finish+=self.length),elem["$exclude_end?"]()&&elem.$end()!==nil&&finish--,finish<start?nil:$send(start,"upto",[finish],(function $$55(i){var self=null==$$55.$$s?this:$$55.$$s;return null==i&&(i=nil),out["$<<"](self.$at(i))}),{$$s:self}))):(i=$coerce_to(elem,$$$("Integer"),"to_int"),out["$<<"](self.$at(i)))}),{$$s:self}),out}),-1),$def(self,"$zip",(function $$zip($a){var others,block=$$zip.$$p||nil,self=this,$ret_or_1=nil;$$zip.$$p=null,others=$slice(arguments);var part,o,i,j,jj,result=[],size=self.length;for(j=0,jj=others.length;j<jj;j++)(o=others[j]).$$is_array||(o.$$is_range||o.$$is_enumerator?others[j]=o.$take(size):others[j]=($truthy($ret_or_1=$Opal["$coerce_to?"](o,$$$("Array"),"to_ary"))?$ret_or_1:$Opal["$coerce_to!"](o,$$$("Enumerator"),"to_enum","each")).$to_a());for(i=0;i<size;i++){for(part=[self[i]],j=0,jj=others.length;j<jj;j++)null==(o=others[j][i])&&(o=nil),part[j+1]=o;result[i]=part}if(block!==nil){for(i=0;i<size;i++)Opal.yield1(block,result[i]);return nil}return result}),-1),$defs(self,"$inherited",(function(klass){klass.$$prototype.$to_a=function(){return this.slice(0,this.length)}})),$def(self,"$instance_variables",(function $$instance_variables(){var $yield=$$instance_variables.$$p||nil;return $$instance_variables.$$p=null,$send($send2(this,$find_super(this,"instance_variables",$$instance_variables,!1,!0),"instance_variables",[],$yield),"reject",[],(function(ivar){var $ret_or_1;return null==ivar&&(ivar=nil),$truthy($ret_or_1=/^@\d+$/.test(ivar))?$ret_or_1:ivar["$=="]("@length")}))})),$def(self,"$pack",(function($a){return $slice(arguments),$Kernel.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")}),-1),$alias(self,"append","push"),$alias(self,"filter","select"),$alias(self,"filter!","select!"),$alias(self,"map","collect"),$alias(self,"map!","collect!"),$alias(self,"prepend","unshift"),$alias(self,"size","length"),$alias(self,"slice","[]"),$alias(self,"to_s","inspect"),$Opal.$pristine(self.$singleton_class(),"allocate"),$Opal.$pristine(self,"copy_instance_variables","initialize_dup")}(0,0,[])},Opal.modules["corelib/hash"]=function(Opal){var $yield1=Opal.yield1,$hash=Opal.hash,$hash_init=Opal.hash_init,$hash_get=Opal.hash_get,$hash_put=Opal.hash_put,$hash_delete=Opal.hash_delete,$deny_frozen_access=Opal.deny_frozen_access,$freeze=Opal.freeze,$klass=Opal.klass,$slice=Opal.slice,$Opal=Opal.Opal,$Kernel=Opal.Kernel,$defs=Opal.defs,$def=Opal.def,$send=Opal.send,$rb_ge=Opal.rb_ge,$rb_gt=Opal.rb_gt,$hash2=Opal.hash2,$truthy=Opal.truthy,$to_a=Opal.to_a,$return_self=Opal.return_self,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,coerce_to!,each,fetch,>=,>,==,compare_by_identity,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,inspect,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,clone,select,select!,has_key?,indexes,index,length,[]=,has_value?"),self.$require("corelib/enumerable"),function($base,$super,$parent_nesting){var inspect_ids,self=$klass("::",null,"Hash"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$include($$$("Enumerable")),self.$$prototype.$$is_hash=!0,$defs(self,"$[]",(function($a){var argv,hash,i,self=this,argc=(argv=$slice(arguments)).length;if(1===argc){if((hash=$Opal["$coerce_to?"](argv["$[]"](0),$$$("Hash"),"to_hash"))!==nil)return self.$allocate()["$merge!"](hash);for((argv=$Opal["$coerce_to?"](argv["$[]"](0),$$$("Array"),"to_ary"))===nil&&$Kernel.$raise($$$("ArgumentError"),"odd number of arguments for Hash"),argc=argv.length,hash=self.$allocate(),i=0;i<argc;i++)if(argv[i].$$is_array)switch(argv[i].length){case 1:hash.$store(argv[i][0],nil);break;case 2:hash.$store(argv[i][0],argv[i][1]);break;default:$Kernel.$raise($$$("ArgumentError"),"invalid number of elements ("+argv[i].length+" for 1..2)")}return hash}for(argc%2!=0&&$Kernel.$raise($$$("ArgumentError"),"odd number of arguments for Hash"),hash=self.$allocate(),i=0;i<argc;i+=2)hash.$store(argv[i],argv[i+1]);return hash}),-1),$defs(self,"$allocate",(function(){var hash=new this.$$constructor;return $hash_init(hash),hash.$$none=nil,hash.$$proc=nil,hash})),$defs(self,"$try_convert",(function(obj){return $Opal["$coerce_to?"](obj,$$$("Hash"),"to_hash")})),$def(self,"$initialize",(function $$initialize(defaults){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,$deny_frozen_access(this),void 0!==defaults&&block!==nil&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (1 for 0)"),this.$$none=void 0===defaults?nil:defaults,this.$$proc=block,this}),-1),$def(self,"$==",(function(other){if(this===other)return!0;if(!other.$$is_hash)return!1;if(this.$$keys.length!==other.$$keys.length)return!1;for(var key,value,other_value,i=0,keys=this.$$keys,length=keys.length;i<length;i++)if((key=keys[i]).$$is_string?(value=this.$$smap[key],other_value=other.$$smap[key]):(value=key.value,other_value=$hash_get(other,key.key)),void 0===other_value||!value["$eql?"](other_value))return!1;return!0})),$def(self,"$>=",(function(other){var result=nil;return other=$Opal["$coerce_to!"](other,$$$("Hash"),"to_hash"),!(this.$$keys.length<other.$$keys.length)&&(result=!0,$send(other,"each",[],(function $$4(other_key,other_val){var val;null==other_key&&(other_key=nil),null==other_val&&(other_val=nil),null!=(val=(null==$$4.$$s?this:$$4.$$s).$fetch(other_key,null))&&val===other_val||(result=!1)}),{$$s:this}),result)})),$def(self,"$>",(function(other){return other=$Opal["$coerce_to!"](other,$$$("Hash"),"to_hash"),!(this.$$keys.length<=other.$$keys.length)&&$rb_ge(this,other)})),$def(self,"$<",(function(other){return other=$Opal["$coerce_to!"](other,$$$("Hash"),"to_hash"),$rb_gt(other,this)})),$def(self,"$<=",(function(other){return other=$Opal["$coerce_to!"](other,$$$("Hash"),"to_hash"),$rb_ge(other,this)})),$def(self,"$[]",(function(key){var value=$hash_get(this,key);return void 0!==value?value:this.$default(key)})),$def(self,"$[]=",(function(key,value){return $deny_frozen_access(this),$hash_put(this,key,value),value})),$def(self,"$assoc",(function(object){for(var key,i=0,keys=this.$$keys,length=keys.length;i<length;i++)if((key=keys[i]).$$is_string){if(key["$=="](object))return[key,this.$$smap[key]]}else if(key.key["$=="](object))return[key.key,key.value];return nil})),$def(self,"$clear",(function(){return $deny_frozen_access(this),$hash_init(this),this})),$def(self,"$clone",(function(){var hash=new this.$$class;return $hash_init(hash),Opal.hash_clone(this,hash),hash})),$def(self,"$compact",(function(){for(var key,value,hash=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value!==nil&&$hash_put(hash,key,value);return hash})),$def(self,"$compact!",(function(){$deny_frozen_access(this);for(var key,value,changes_were_made=!1,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value===nil&&void 0!==$hash_delete(this,key)&&(changes_were_made=!0,length--,i--);return changes_were_made?this:nil})),$def(self,"$compare_by_identity",(function(){$deny_frozen_access(this);var i,ii,key,identity_hash,keys=this.$$keys;if(this.$$by_identity)return this;if(0===this.$$keys.length)return this.$$by_identity=!0,this;for(identity_hash=$hash2([],{}).$compare_by_identity(),i=0,ii=keys.length;i<ii;i++)(key=keys[i]).$$is_string||(key=key.key),$hash_put(identity_hash,key,$hash_get(this,key));return this.$$by_identity=!0,this.$$map=identity_hash.$$map,this.$$smap=identity_hash.$$smap,this})),$def(self,"$compare_by_identity?",(function(){return!0===this.$$by_identity})),$def(self,"$default",(function(key){return void 0!==key&&this.$$proc!==nil&&void 0!==this.$$proc?this.$$proc.$call(this,key):void 0===this.$$none?nil:this.$$none}),-1),$def(self,"$default=",(function(object){return $deny_frozen_access(this),this.$$proc=nil,this.$$none=object,object})),$def(self,"$default_proc",(function(){return void 0!==this.$$proc?this.$$proc:nil})),$def(self,"$default_proc=",(function(default_proc){$deny_frozen_access(this);var proc=default_proc;return proc!==nil&&(proc=$Opal["$coerce_to!"](proc,$$$("Proc"),"to_proc"))["$lambda?"]()&&2!==proc.$arity().$abs()&&$Kernel.$raise($$$("TypeError"),"default_proc takes two arguments"),this.$$none=nil,this.$$proc=proc,default_proc})),$def(self,"$delete",(function $Hash_delete$15(key){var block=$Hash_delete$15.$$p||nil;$Hash_delete$15.$$p=null,$deny_frozen_access(this);var value=$hash_delete(this,key);return void 0!==value?value:block!==nil?Opal.yield1(block,key):nil})),$def(self,"$delete_if",(function $$delete_if(){var block=$$delete_if.$$p||nil;if($$delete_if.$$p=null,!$truthy(block))return $send(this,"enum_for",["delete_if"],(function $$16(){return(null==$$16.$$s?this:$$16.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var key,value,obj,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil&&void 0!==$hash_delete(this,key)&&(length--,i--);return this})),$def(self,"$dig",(function(key,$a){var keys,self=this,item=nil;return keys=$slice(arguments,1),(item=self["$[]"](key))===nil||0===keys.length?item:($truthy(item["$respond_to?"]("dig"))||$Kernel.$raise($$$("TypeError"),item.$class()+" does not have #dig method"),$send(item,"dig",$to_a(keys)))}),-2),$def(self,"$each",(function $$each(){var block=$$each.$$p||nil;if($$each.$$p=null,!$truthy(block))return $send(this,"enum_for",["each"],(function $$17(){return(null==$$17.$$s?this:$$17.$$s).$size()}),{$$s:this});for(var key,value,i=0,keys=this.$$keys.slice(),length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),$yield1(block,[key,value]);return this})),$def(self,"$each_key",(function $$each_key(){var block=$$each_key.$$p||nil;if($$each_key.$$p=null,!$truthy(block))return $send(this,"enum_for",["each_key"],(function $$18(){return(null==$$18.$$s?this:$$18.$$s).$size()}),{$$s:this});for(var key,i=0,keys=this.$$keys.slice(),length=keys.length;i<length;i++)block((key=keys[i]).$$is_string?key:key.key);return this})),$def(self,"$each_value",(function $$each_value(){var block=$$each_value.$$p||nil;if($$each_value.$$p=null,!$truthy(block))return $send(this,"enum_for",["each_value"],(function $$19(){return(null==$$19.$$s?this:$$19.$$s).$size()}),{$$s:this});for(var key,i=0,keys=this.$$keys.slice(),length=keys.length;i<length;i++)block((key=keys[i]).$$is_string?this.$$smap[key]:key.value);return this})),$def(self,"$empty?",(function(){return 0===this.$$keys.length})),$def(self,"$except",(function($a){var keys,self=this;return keys=$slice(arguments),$send(self.$dup(),"except!",$to_a(keys))}),-1),$def(self,"$except!",(function($a){var $post_args,self=this;return $post_args=$slice(arguments),$send($post_args,"each",[],(function $$22(key){return null==key&&(key=nil),(null==$$22.$$s?this:$$22.$$s).$delete(key)}),{$$s:self}),self}),-1),$def(self,"$fetch",(function $$fetch(key,defaults){var block=$$fetch.$$p||nil;$$fetch.$$p=null;var value=$hash_get(this,key);return void 0!==value?value:block!==nil?block(key):void 0!==defaults?defaults:$Kernel.$raise($$$("KeyError").$new("key not found: "+key.$inspect(),$hash2(["key","receiver"],{key:key,receiver:this})))}),-2),$def(self,"$fetch_values",(function $$fetch_values($a){var $post_args,block=$$fetch_values.$$p||nil,self=this;return $$fetch_values.$$p=null,$post_args=$slice(arguments),$send($post_args,"map",[],(function $$23(key){return null==key&&(key=nil),$send(null==$$23.$$s?this:$$23.$$s,"fetch",[key],block.$to_proc())}),{$$s:self})}),-1),$def(self,"$flatten",(function(level){null==level&&(level=1),level=$Opal["$coerce_to!"](level,$$$("Integer"),"to_int");for(var key,value,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)if((key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),result.push(key),value.$$is_array){if(1===level){result.push(value);continue}result=result.concat(value.$flatten(level-2))}else result.push(value);return result}),-1),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:$freeze(this)})),$def(self,"$has_key?",(function(key){return void 0!==$hash_get(this,key)})),$def(self,"$has_value?",(function(value){for(var key,i=0,keys=this.$$keys,length=keys.length;i<length;i++)if(((key=keys[i]).$$is_string?this.$$smap[key]:key.value)["$=="](value))return!0;return!1})),$def(self,"$hash",(function(){var key,item,top=void 0===Opal.hash_ids,hash_id=this.$object_id(),result=["Hash"];try{if(top&&(Opal.hash_ids=Object.create(null)),Opal[hash_id])return"self";for(key in Opal.hash_ids)if(item=Opal.hash_ids[key],this["$eql?"](item))return"self";Opal.hash_ids[hash_id]=this;for(var i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?result.push([key,this.$$smap[key].$hash()]):result.push([key.key_hash,key.value.$hash()]);return result.sort().join()}finally{top&&(Opal.hash_ids=void 0)}})),$def(self,"$index",(function(object){for(var key,value,i=0,keys=this.$$keys,length=keys.length;i<length;i++)if((key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value["$=="](object))return key;return nil})),$def(self,"$indexes",(function($a){for(var args,key,value,self=this,result=[],i=0,length=(args=$slice(arguments)).length;i<length;i++)key=args[i],void 0!==(value=$hash_get(self,key))?result.push(value):result.push(self.$default());return result}),-1),$def(self,"$inspect",(function(){var self=this,top=void 0===inspect_ids,hash_id=self.$object_id(),result=[];return function(){try{if(top&&(inspect_ids={}),inspect_ids.hasOwnProperty(hash_id))return"{...}";inspect_ids[hash_id]=!0;for(var key,value,i=0,keys=self.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=self.$$smap[key]:(value=key.value,key=key.key),key=$$("Opal").$inspect(key),value=$$("Opal").$inspect(value),result.push(key+"=>"+value);return"{"+result.join(", ")+"}"}finally{top&&(inspect_ids=void 0)}}()})),$def(self,"$invert",(function(){for(var key,value,hash=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),$hash_put(hash,value,key);return hash})),$def(self,"$keep_if",(function $$keep_if(){var block=$$keep_if.$$p||nil;if($$keep_if.$$p=null,!$truthy(block))return $send(this,"enum_for",["keep_if"],(function $$26(){return(null==$$26.$$s?this:$$26.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var key,value,obj,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil||void 0!==$hash_delete(this,key)&&(length--,i--);return this})),$def(self,"$keys",(function(){for(var key,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?result.push(key):result.push(key.key);return result})),$def(self,"$length",(function(){return this.$$keys.length})),$def(self,"$merge",(function $$merge($a){var others,block=$$merge.$$p||nil,self=this;return $$merge.$$p=null,others=$slice(arguments),$send(self.$dup(),"merge!",$to_a(others),block.$to_proc())}),-1),$def(self,"$merge!",(function $Hash_merge$excl$27($a){var others,i,j,other,other_keys,length,key,value,other_value,block=$Hash_merge$excl$27.$$p||nil,self=this;for($Hash_merge$excl$27.$$p=null,others=$slice(arguments),$deny_frozen_access(self),i=0;i<others.length;++i)if(length=(other_keys=(other=$Opal["$coerce_to!"](others[i],$$$("Hash"),"to_hash")).$$keys).length,block===nil)for(j=0;j<length;j++)(key=other_keys[j]).$$is_string?other_value=other.$$smap[key]:(other_value=key.value,key=key.key),$hash_put(self,key,other_value);else for(j=0;j<length;j++)(key=other_keys[j]).$$is_string?other_value=other.$$smap[key]:(other_value=key.value,key=key.key),void 0!==(value=$hash_get(self,key))?$hash_put(self,key,block(key,value,other_value)):$hash_put(self,key,other_value);return self}),-1),$def(self,"$rassoc",(function(object){for(var key,value,i=0,keys=this.$$keys,length=keys.length;i<length;i++)if((key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value["$=="](object))return[key,value];return nil})),$def(self,"$rehash",(function(){return $deny_frozen_access(this),Opal.hash_rehash(this),this})),$def(self,"$reject",(function $$reject(){var block=$$reject.$$p||nil;if($$reject.$$p=null,!$truthy(block))return $send(this,"enum_for",["reject"],(function $$28(){return(null==$$28.$$s?this:$$28.$$s).$size()}),{$$s:this});for(var key,value,obj,hash=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil||$hash_put(hash,key,value);return hash})),$def(self,"$reject!",(function $Hash_reject$excl$29(){var block=$Hash_reject$excl$29.$$p||nil;if($Hash_reject$excl$29.$$p=null,!$truthy(block))return $send(this,"enum_for",["reject!"],(function $$30(){return(null==$$30.$$s?this:$$30.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var key,value,obj,changes_were_made=!1,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil&&void 0!==$hash_delete(this,key)&&(changes_were_made=!0,length--,i--);return changes_were_made?this:nil})),$def(self,"$replace",(function(other){$deny_frozen_access(this),other=$Opal["$coerce_to!"](other,$$$("Hash"),"to_hash"),$hash_init(this);for(var key,other_value,i=0,other_keys=other.$$keys,length=other_keys.length;i<length;i++)(key=other_keys[i]).$$is_string?other_value=other.$$smap[key]:(other_value=key.value,key=key.key),$hash_put(this,key,other_value);return $truthy(other.$default_proc())?this["$default_proc="](other.$default_proc()):this["$default="](other.$default()),this})),$def(self,"$select",(function $$select(){var block=$$select.$$p||nil;if($$select.$$p=null,!$truthy(block))return $send(this,"enum_for",["select"],(function $$31(){return(null==$$31.$$s?this:$$31.$$s).$size()}),{$$s:this});for(var key,value,obj,hash=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil&&$hash_put(hash,key,value);return hash})),$def(self,"$select!",(function $Hash_select$excl$32(){var block=$Hash_select$excl$32.$$p||nil;if($Hash_select$excl$32.$$p=null,!$truthy(block))return $send(this,"enum_for",["select!"],(function $$33(){return(null==$$33.$$s?this:$$33.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var key,value,obj,result=nil,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),!1!==(obj=block(key,value))&&obj!==nil||(void 0!==$hash_delete(this,key)&&(length--,i--),result=this);return result})),$def(self,"$shift",(function(){$deny_frozen_access(this);var key,keys=this.$$keys;return keys.length>0?[key=(key=keys[0]).$$is_string?key:key.key,$hash_delete(this,key)]:nil})),$def(self,"$slice",(function($a){var keys,self=this;keys=$slice(arguments);for(var result=$hash(),i=0,length=keys.length;i<length;i++){var key=keys[i],value=$hash_get(self,key);void 0!==value&&$hash_put(result,key,value)}return result}),-1),$def(self,"$to_a",(function(){for(var key,value,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),result.push([key,value]);return result})),$def(self,"$to_h",(function $$to_h(){var block=$$to_h.$$p||nil;if($$to_h.$$p=null,block!==nil)return $send(this,"map",[],block.$to_proc()).$to_h();if(this.$$class===Opal.Hash)return this;var hash=new Opal.Hash;return $hash_init(hash),Opal.hash_clone(this,hash),hash})),$def(self,"$to_hash",$return_self),$def(self,"$to_proc",(function(){return $send(this,"proc",[],(function $$34(key){var self=null==$$34.$$s?this:$$34.$$s;return null==key&&$Kernel.$raise($$$("ArgumentError"),"no key given"),self["$[]"](key)}),{$$arity:-1,$$s:this})})),$def(self,"$transform_keys",(function $$transform_keys(){var block=$$transform_keys.$$p||nil;if($$transform_keys.$$p=null,!$truthy(block))return $send(this,"enum_for",["transform_keys"],(function $$35(){return(null==$$35.$$s?this:$$35.$$s).$size()}),{$$s:this});for(var key,value,result=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),key=$yield1(block,key),$hash_put(result,key,value);return result})),$def(self,"$transform_keys!",(function $Hash_transform_keys$excl$36(){var block=$Hash_transform_keys$excl$36.$$p||nil;if($Hash_transform_keys$excl$36.$$p=null,!$truthy(block))return $send(this,"enum_for",["transform_keys!"],(function $$37(){return(null==$$37.$$s?this:$$37.$$s).$size()}),{$$s:this});$deny_frozen_access(this);var i,key,value,new_key,keys=Opal.slice(this.$$keys),length=keys.length;for(i=0;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),new_key=$yield1(block,key),$hash_delete(this,key),$hash_put(this,new_key,value);return this})),$def(self,"$transform_values",(function $$transform_values(){var block=$$transform_values.$$p||nil;if($$transform_values.$$p=null,!$truthy(block))return $send(this,"enum_for",["transform_values"],(function $$38(){return(null==$$38.$$s?this:$$38.$$s).$size()}),{$$s:this});for(var key,value,result=$hash(),i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value=$yield1(block,value),$hash_put(result,key,value);return result})),$def(self,"$transform_values!",(function $Hash_transform_values$excl$39(){var block=$Hash_transform_values$excl$39.$$p||nil;if($Hash_transform_values$excl$39.$$p=null,!$truthy(block))return $send(this,"enum_for",["transform_values!"],(function $$40(){return(null==$$40.$$s?this:$$40.$$s).$size()}),{$$s:this});$deny_frozen_access(this);for(var key,value,i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),value=$yield1(block,value),$hash_put(this,key,value);return this})),$def(self,"$values",(function(){for(var key,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?result.push(this.$$smap[key]):result.push(key.value);return result})),$alias(self,"dup","clone"),$alias(self,"each_pair","each"),$alias(self,"eql?","=="),$alias(self,"filter","select"),$alias(self,"filter!","select!"),$alias(self,"include?","has_key?"),$alias(self,"indices","indexes"),$alias(self,"key","index"),$alias(self,"key?","has_key?"),$alias(self,"member?","has_key?"),$alias(self,"size","length"),$alias(self,"store","[]="),$alias(self,"to_s","inspect"),$alias(self,"update","merge!"),$alias(self,"value?","has_value?"),$alias(self,"values_at","indexes")}(0,0,[])},Opal.modules["corelib/number"]=function(Opal){var $klass=Opal.klass,$Opal=Opal.Opal,$Kernel=Opal.Kernel,$def=Opal.def,$eqeqeq=Opal.eqeqeq,$truthy=Opal.truthy,$rb_gt=Opal.rb_gt,$not=Opal.not,$rb_lt=Opal.rb_lt,$alias=Opal.alias,$send2=Opal.send2,$find_super=Opal.find_super,$send=Opal.send,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$eqeq=Opal.eqeq,$return_self=Opal.return_self,$rb_divide=Opal.rb_divide,$to_ary=Opal.to_ary,$rb_times=Opal.rb_times,$rb_le=Opal.rb_le,$rb_ge=Opal.rb_ge,$return_val=Opal.return_val,$const_set=Opal.const_set,self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,__id__,next,coerce_to?"),self.$require("corelib/numeric"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Number");[self].concat($parent_nesting);$Opal.$bridge(Number,self),Opal.prop(self.$$prototype,"$$is_number",!0),self.$$is_number_class=!0,function(self,$parent_nesting){$def(self,"$allocate",(function(){return $Kernel.$raise($$$("TypeError"),"allocator undefined for "+this.$name())})),Opal.udef(self,"$new")}(Opal.get_singleton_class(self)),$def(self,"$coerce",(function(other){if(other===nil)$Kernel.$raise($$$("TypeError"),"can't convert "+other.$class()+" into Float");else{if(other.$$is_string)return[$Kernel.$Float(other),this];if(other["$respond_to?"]("to_f"))return[$Opal["$coerce_to!"](other,$$$("Float"),"to_f"),this];if(other.$$is_number)return[other,this];$Kernel.$raise($$$("TypeError"),"can't convert "+other.$class()+" into Float")}})),$def(self,"$__id__",(function(){return 2*this+1})),$def(self,"$+",(function(other){return other.$$is_number?this+other:this.$__coerced__("+",other)})),$def(self,"$-",(function(other){return other.$$is_number?this-other:this.$__coerced__("-",other)})),$def(self,"$*",(function(other){return other.$$is_number?this*other:this.$__coerced__("*",other)})),$def(self,"$/",(function(other){return other.$$is_number?this/other:this.$__coerced__("/",other)})),$def(self,"$%",(function(other){return other.$$is_number?other==-1/0?other:0!=other?other<0||this<0?(this%other+other)%other:this%other:void $Kernel.$raise($$$("ZeroDivisionError"),"divided by 0"):this.$__coerced__("%",other)})),$def(self,"$&",(function(other){return other.$$is_number?this&other:this.$__coerced__("&",other)})),$def(self,"$|",(function(other){return other.$$is_number?this|other:this.$__coerced__("|",other)})),$def(self,"$^",(function(other){return other.$$is_number?this^other:this.$__coerced__("^",other)})),$def(self,"$<",(function(other){return other.$$is_number?this<other:this.$__coerced__("<",other)})),$def(self,"$<=",(function(other){return other.$$is_number?this<=other:this.$__coerced__("<=",other)})),$def(self,"$>",(function(other){return other.$$is_number?this>other:this.$__coerced__(">",other)})),$def(self,"$>=",(function(other){return other.$$is_number?this>=other:this.$__coerced__(">=",other)}));function numberToUint8Array(num){var uint8array=new Uint8Array(8);return new DataView(uint8array.buffer).setFloat64(0,num,!0),uint8array}function uint8ArrayToNumber(arr){return new DataView(arr.buffer).getFloat64(0,!0)}function incrementNumberBit(num){for(var arr=numberToUint8Array(num),i=0;i<arr.length;i++){if(255!==arr[i]){arr[i]++;break}arr[i]=0}return uint8ArrayToNumber(arr)}function decrementNumberBit(num){for(var arr=numberToUint8Array(num),i=0;i<arr.length;i++){if(0!==arr[i]){arr[i]--;break}arr[i]=255}return uint8ArrayToNumber(arr)}$def(self,"$<=>",(function(other){try{return function(self,other){return other.$$is_number?isNaN(self)||isNaN(other)?nil:self>other?1:self<other?-1:0:self.$__coerced__("<=>",other)}(this,other)}catch($err){if(!Opal.rescue($err,[$$$("ArgumentError")]))throw $err;try{return nil}finally{Opal.pop_exception()}}})),$def(self,"$<<",(function(count){return(count=$Opal["$coerce_to!"](count,$$$("Integer"),"to_int"))>0?this<<count:this>>-count})),$def(self,"$>>",(function(count){return(count=$Opal["$coerce_to!"](count,$$$("Integer"),"to_int"))>0?this>>count:this<<-count})),$def(self,"$[]",(function(bit){return(bit=$Opal["$coerce_to!"](bit,$$$("Integer"),"to_int"))<0?0:bit>=32?this<0?1:0:this>>bit&1})),$def(self,"$+@",(function(){return+this})),$def(self,"$-@",(function(){return-this})),$def(self,"$~",(function(){return~this})),$def(self,"$**",(function(other){return $eqeqeq($$$("Integer"),other)?$not($$$("Integer")["$==="](this))||$truthy($rb_gt(other,0))?Math.pow(this,other):$$$("Rational").$new(this,1)["$**"](other):$rb_lt(this,0)&&($eqeqeq($$$("Float"),other)||$eqeqeq($$$("Rational"),other))?$$$("Complex").$new(this,0)["$**"](other.$to_f()):$truthy(null!=other.$$is_number)?Math.pow(this,other):this.$__coerced__("**",other)})),$def(self,"$==",(function(other){return other.$$is_number?this.valueOf()===other.valueOf():!!other["$respond_to?"]("==")&&other["$=="](this)})),$alias(self,"===","=="),$def(self,"$abs",(function(){return Math.abs(this)})),$def(self,"$abs2",(function(){return Math.abs(this*this)})),$def(self,"$allbits?",(function(mask){return(this&(mask=$Opal["$coerce_to!"](mask,$$$("Integer"),"to_int")))==mask})),$def(self,"$anybits?",(function(mask){return 0!=(this&(mask=$Opal["$coerce_to!"](mask,$$$("Integer"),"to_int")))})),$def(self,"$angle",(function(){return $truthy(this["$nan?"]())?this:0==this?1/this>0?0:Math.PI:this<0?Math.PI:0})),$def(self,"$bit_length",(function(){if($eqeqeq($$$("Integer"),this)||$Kernel.$raise($$$("NoMethodError").$new("undefined method `bit_length` for "+this+":Float","bit_length")),0===this||-1===this)return 0;for(var result=0,value=this<0?~this:this;0!=value;)result+=1,value>>>=1;return result})),$def(self,"$ceil",(function(ndigits){null==ndigits&&(ndigits=0);var f=this.$to_f();if(f%1==0&&ndigits>=0)return f;var factor=Math.pow(10,ndigits),result=Math.ceil(f*factor)/factor;return f%1==0&&(result=Math.round(result)),result}),-1),$def(self,"$chr",(function(encoding){return Opal.enc(String.fromCharCode(this),encoding||"BINARY")}),-1),$def(self,"$denominator",(function $$denominator(){var $yield=$$denominator.$$p||nil;return $$denominator.$$p=null,$truthy(this["$nan?"]())||$truthy(this["$infinite?"]())?1:$send2(this,$find_super(this,"denominator",$$denominator,!1,!0),"denominator",[],$yield)})),$def(self,"$downto",(function $$downto(stop){var block=$$downto.$$p||nil;if($$downto.$$p=null,block===nil)return $send(this,"enum_for",["downto",stop],(function $$24(){var self=null==$$24.$$s?this:$$24.$$s;return $eqeqeq($$$("Numeric"),stop)||$Kernel.$raise($$$("ArgumentError"),"comparison of "+self.$class()+" with "+stop.$class()+" failed"),$truthy($rb_gt(stop,self))?0:$rb_plus($rb_minus(self,stop),1)}),{$$s:this});stop.$$is_number||$Kernel.$raise($$$("ArgumentError"),"comparison of "+this.$class()+" with "+stop.$class()+" failed");for(var i=this;i>=stop;i--)block(i);return this})),$def(self,"$equal?",(function(other){var $ret_or_1;return $truthy($ret_or_1=this["$=="](other))?$ret_or_1:isNaN(this)&&isNaN(other)})),$def(self,"$even?",(function(){return this%2==0})),$def(self,"$floor",(function(ndigits){null==ndigits&&(ndigits=0);var f=this.$to_f();if(f%1==0&&ndigits>=0)return f;var factor=Math.pow(10,ndigits),result=Math.floor(f*factor)/factor;return f%1==0&&(result=Math.round(result)),result}),-1),$def(self,"$gcd",(function(other){$eqeqeq($$$("Integer"),other)||$Kernel.$raise($$$("TypeError"),"not an integer");for(var min=Math.abs(this),max=Math.abs(other);min>0;){var tmp=min;min=max%min,max=tmp}return max})),$def(self,"$gcdlcm",(function(other){return[this.$gcd(other),this.$lcm(other)]})),$def(self,"$integer?",(function(){return this%1==0})),$def(self,"$is_a?",(function $Number_is_a$ques$28(klass){var $yield=$Number_is_a$ques$28.$$p||nil;return $Number_is_a$ques$28.$$p=null,!(!$eqeq(klass,$$$("Integer"))||!$eqeqeq($$$("Integer"),this))||(!(!$eqeq(klass,$$$("Integer"))||!$eqeqeq($$$("Integer"),this))||(!(!$eqeq(klass,$$$("Float"))||!$eqeqeq($$$("Float"),this))||$send2(this,$find_super(this,"is_a?",$Number_is_a$ques$28,!1,!0),"is_a?",[klass],$yield)))})),$def(self,"$instance_of?",(function $Number_instance_of$ques$29(klass){var $yield=$Number_instance_of$ques$29.$$p||nil;return $Number_instance_of$ques$29.$$p=null,!(!$eqeq(klass,$$$("Integer"))||!$eqeqeq($$$("Integer"),this))||(!(!$eqeq(klass,$$$("Integer"))||!$eqeqeq($$$("Integer"),this))||(!(!$eqeq(klass,$$$("Float"))||!$eqeqeq($$$("Float"),this))||$send2(this,$find_super(this,"instance_of?",$Number_instance_of$ques$29,!1,!0),"instance_of?",[klass],$yield)))})),$def(self,"$lcm",(function(other){return $eqeqeq($$$("Integer"),other)||$Kernel.$raise($$$("TypeError"),"not an integer"),0==this||0==other?0:Math.abs(this*other/this.$gcd(other))})),$def(self,"$next",(function(){return this+1})),$def(self,"$nobits?",(function(mask){return 0==(this&(mask=$Opal["$coerce_to!"](mask,$$$("Integer"),"to_int")))})),$def(self,"$nonzero?",(function(){return 0==this?nil:this})),$def(self,"$numerator",(function $$numerator(){var $yield=$$numerator.$$p||nil;return $$numerator.$$p=null,$truthy(this["$nan?"]())||$truthy(this["$infinite?"]())?this:$send2(this,$find_super(this,"numerator",$$numerator,!1,!0),"numerator",[],$yield)})),$def(self,"$odd?",(function(){return this%2!=0})),$def(self,"$ord",$return_self),$def(self,"$pow",(function(b,m){return 0==this&&$Kernel.$raise($$$("ZeroDivisionError"),"divided by 0"),void 0===m?this["$**"](b):($$$("Integer")["$==="](b)||$Kernel.$raise($$$("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),b<0&&$Kernel.$raise($$$("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),$$$("Integer")["$==="](m)||$Kernel.$raise($$$("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),0===m&&$Kernel.$raise($$$("ZeroDivisionError"),"divided by 0"),this["$**"](b)["$%"](m))}),-2),$def(self,"$pred",(function(){return this-1})),$def(self,"$quo",(function $$quo(other){var $yield=$$quo.$$p||nil;return $$quo.$$p=null,$eqeqeq($$$("Integer"),this)?$send2(this,$find_super(this,"quo",$$quo,!1,!0),"quo",[other],$yield):$rb_divide(this,other)})),$def(self,"$rationalize",(function(eps){var $a,$b,self=this,f=nil,n=nil;return arguments.length>1&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),$eqeqeq($$$("Integer"),self)?$$$("Rational").$new(self,1):$truthy(self["$infinite?"]())?$Kernel.$raise($$$("FloatDomainError"),"Infinity"):$truthy(self["$nan?"]())?$Kernel.$raise($$$("FloatDomainError"),"NaN"):$truthy(null==eps)?($b=$$$("Math").$frexp(self),f=null==($a=$to_ary($b))[0]?nil:$a[0],n=null==$a[1]?nil:$a[1],f=$$$("Math").$ldexp(f,$$$($$$("Float"),"MANT_DIG")).$to_i(),n=$rb_minus(n,$$$($$$("Float"),"MANT_DIG")),$$$("Rational").$new($rb_times(2,f),1["$<<"]($rb_minus(1,n))).$rationalize($$$("Rational").$new(1,1["$<<"]($rb_minus(1,n))))):self.$to_r().$rationalize(eps)}),-1),$def(self,"$remainder",(function(y){return $rb_minus(this,$rb_times(y,$rb_divide(this,y).$truncate()))})),$def(self,"$round",(function(ndigits){var $a,$b,exp=nil;if($eqeqeq($$$("Integer"),this)){if($truthy(null==ndigits))return this;if($eqeqeq($$$("Float"),ndigits)&&$truthy(ndigits["$infinite?"]())&&$Kernel.$raise($$$("RangeError"),"Infinity"),ndigits=$Opal["$coerce_to!"](ndigits,$$$("Integer"),"to_int"),$truthy($rb_lt(ndigits,$$$($$$("Integer"),"MIN")))&&$Kernel.$raise($$$("RangeError"),"out of bounds"),$truthy(ndigits>=0))return this;if(.415241*(ndigits=ndigits["$-@"]())-.125>this.$size())return 0;var f=Math.pow(10,ndigits),x=Math.floor((Math.abs(this)+f/2)/f)*f;return this<0?-x:x}if($truthy(this["$nan?"]())&&$truthy(null==ndigits)&&$Kernel.$raise($$$("FloatDomainError"),"NaN"),ndigits=$Opal["$coerce_to!"](ndigits||0,$$$("Integer"),"to_int"),$truthy($rb_le(ndigits,0)))$truthy(this["$nan?"]())?$Kernel.$raise($$$("RangeError"),"NaN"):$truthy(this["$infinite?"]())&&$Kernel.$raise($$$("FloatDomainError"),"Infinity");else{if($eqeq(ndigits,0))return Math.round(this);if($truthy(this["$nan?"]())||$truthy(this["$infinite?"]()))return this}return $b=$$$("Math").$frexp(this),null==($a=$to_ary($b))[0]?nil:$a[0],exp=null==$a[1]?nil:$a[1],$truthy($rb_ge(ndigits,$rb_minus($rb_plus($$$($$$("Float"),"DIG"),2),$truthy($rb_gt(exp,0))?$rb_divide(exp,4):$rb_minus($rb_divide(exp,3),1))))?this:$truthy($rb_lt(ndigits,($truthy($rb_gt(exp,0))?$rb_plus($rb_divide(exp,3),1):$rb_divide(exp,4))["$-@"]()))?0:Math.round(this*Math.pow(10,ndigits))/Math.pow(10,ndigits)}),-1),$def(self,"$times",(function $$times(){var block=$$times.$$p||nil;if($$times.$$p=null,!$truthy(block))return $send(this,"enum_for",["times"],(function $$33(){return null==$$33.$$s?this:$$33.$$s}),{$$s:this});for(var i=0;i<this;i++)block(i);return this})),$def(self,"$to_f",$return_self),$def(self,"$to_i",(function(){return this<0?Math.ceil(this):Math.floor(this)})),$def(self,"$to_r",(function(){var $a,$b,f=nil,e=nil;return $eqeqeq($$$("Integer"),this)?$$$("Rational").$new(this,1):($b=$$$("Math").$frexp(this),f=null==($a=$to_ary($b))[0]?nil:$a[0],e=null==$a[1]?nil:$a[1],f=$$$("Math").$ldexp(f,$$$($$$("Float"),"MANT_DIG")).$to_i(),e=$rb_minus(e,$$$($$$("Float"),"MANT_DIG")),$rb_times(f,$$$($$$("Float"),"RADIX")["$**"](e)).$to_r())})),$def(self,"$to_s",(function(base){return null==base&&(base=10),base=$Opal["$coerce_to!"](base,$$$("Integer"),"to_int"),($truthy($rb_lt(base,2))||$truthy($rb_gt(base,36)))&&$Kernel.$raise($$$("ArgumentError"),"invalid radix "+base),$eqeq(this,0)&&$truthy(1/this==-1/0)?"-0.0":this.toString(base)}),-1),$def(self,"$truncate",(function(ndigits){null==ndigits&&(ndigits=0);var f=this.$to_f();if(f%1==0&&ndigits>=0)return f;var factor=Math.pow(10,ndigits),result=parseInt(f*factor,10)/factor;return f%1==0&&(result=Math.round(result)),result}),-1),$def(self,"$digits",(function(base){null==base&&(base=10),$rb_lt(this,0)&&$Kernel.$raise($$$($$$("Math"),"DomainError"),"out of domain"),base=$Opal["$coerce_to!"](base,$$$("Integer"),"to_int"),$truthy($rb_lt(base,2))&&$Kernel.$raise($$$("ArgumentError"),"invalid radix "+base),this!=parseInt(this)&&$Kernel.$raise($$$("NoMethodError"),"undefined method `digits' for "+this.$inspect());var value=this,result=[];if(0==this)return[0];for(;0!=value;)result.push(value%base),value=parseInt(value/base,10);return result}),-1),$def(self,"$divmod",(function $$divmod(other){var $yield=$$divmod.$$p||nil;return $$divmod.$$p=null,$truthy(this["$nan?"]())||$truthy(other["$nan?"]())?$Kernel.$raise($$$("FloatDomainError"),"NaN"):$truthy(this["$infinite?"]())?$Kernel.$raise($$$("FloatDomainError"),"Infinity"):$send2(this,$find_super(this,"divmod",$$divmod,!1,!0),"divmod",[other],$yield)})),$def(self,"$upto",(function $$upto(stop){var block=$$upto.$$p||nil;if($$upto.$$p=null,block===nil)return $send(this,"enum_for",["upto",stop],(function $$34(){var self=null==$$34.$$s?this:$$34.$$s;return $eqeqeq($$$("Numeric"),stop)||$Kernel.$raise($$$("ArgumentError"),"comparison of "+self.$class()+" with "+stop.$class()+" failed"),$truthy($rb_lt(stop,self))?0:$rb_plus($rb_minus(stop,self),1)}),{$$s:this});stop.$$is_number||$Kernel.$raise($$$("ArgumentError"),"comparison of "+this.$class()+" with "+stop.$class()+" failed");for(var i=this;i<=stop;i++)block(i);return this})),$def(self,"$zero?",(function(){return 0==this})),$def(self,"$size",$return_val(4)),$def(self,"$nan?",(function(){return isNaN(this)})),$def(self,"$finite?",(function(){return this!=1/0&&this!=-1/0&&!isNaN(this)})),$def(self,"$infinite?",(function(){return this==1/0?1:this==-1/0?-1:nil})),$def(self,"$positive?",(function(){return 0!=this&&(this==1/0||1/this>0)})),$def(self,"$negative?",(function(){return this==-1/0||1/this<0})),$def(self,"$next_float",(function(){return $eqeq(this,$$$($$$("Float"),"INFINITY"))?$$$($$$("Float"),"INFINITY"):$truthy(this["$nan?"]())?$$$($$$("Float"),"NAN"):$rb_ge(this,0)?incrementNumberBit(Math.abs(this)):decrementNumberBit(this)})),$def(self,"$prev_float",(function(){return $eqeq(this,$$$($$$("Float"),"INFINITY")["$-@"]())?$$$($$$("Float"),"INFINITY")["$-@"]():$truthy(this["$nan?"]())?$$$($$$("Float"),"NAN"):$rb_gt(this,0)?decrementNumberBit(this):-incrementNumberBit(Math.abs(this))})),$alias(self,"arg","angle"),$alias(self,"eql?","=="),$alias(self,"fdiv","/"),$alias(self,"inspect","to_s"),$alias(self,"kind_of?","is_a?"),$alias(self,"magnitude","abs"),$alias(self,"modulo","%"),$alias(self,"object_id","__id__"),$alias(self,"phase","angle"),$alias(self,"succ","next"),$alias(self,"to_int","to_i")}(0,$$$("Numeric"),$nesting),$const_set("::","Fixnum",$$$("Number")),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Integer"),$nesting=[self].concat($parent_nesting);self.$$is_number_class=!0,self.$$is_integer_class=!0,function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$allocate",(function(){return $Kernel.$raise($$$("TypeError"),"allocator undefined for "+this.$name())})),Opal.udef(self,"$new"),$def(self,"$sqrt",(function(n){return(n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"))<0&&$Kernel.$raise($$$($$$("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(n),10)})),$def(self,"$try_convert",(function(object){return $$("Opal")["$coerce_to?"](object,this,"to_int")}))}(Opal.get_singleton_class(self),$nesting),$const_set(self,"MAX",Math.pow(2,30)-1),$const_set(self,"MIN",-Math.pow(2,30))}(0,$$$("Numeric"),$nesting),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Float");[self].concat($parent_nesting);return self.$$is_number_class=!0,function(self,$parent_nesting){$def(self,"$allocate",(function(){return $Kernel.$raise($$$("TypeError"),"allocator undefined for "+this.$name())})),Opal.udef(self,"$new"),$def(self,"$===",(function(other){return!!other.$$is_number}))}(Opal.get_singleton_class(self)),$const_set(self,"INFINITY",1/0),$const_set(self,"MAX",Number.MAX_VALUE),$const_set(self,"MIN",Number.MIN_VALUE),$const_set(self,"NAN",NaN),$const_set(self,"DIG",15),$const_set(self,"MANT_DIG",53),$const_set(self,"RADIX",2),$const_set(self,"EPSILON",Number.EPSILON||2220446049250313e-31)}(0,$$$("Numeric"),$nesting)},Opal.modules["corelib/range"]=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$Kernel=Opal.Kernel,$def=Opal.def,$not=Opal.not,$send2=Opal.send2,$find_super=Opal.find_super,$rb_lt=Opal.rb_lt,$rb_le=Opal.rb_le,$send=Opal.send,$eqeq=Opal.eqeq,$eqeqeq=Opal.eqeqeq,$return_ivar=Opal.return_ivar,$rb_gt=Opal.rb_gt,$rb_minus=Opal.rb_minus,$Opal=Opal.Opal,$rb_divide=Opal.rb_divide,$rb_plus=Opal.rb_plus,$rb_times=Opal.rb_times,$rb_ge=Opal.rb_ge,$thrower=Opal.thrower,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,attr_reader,raise,nil?,<=>,include?,!,<,<=,enum_for,size,upto,to_proc,respond_to?,class,succ,==,===,exclude_end?,eql?,begin,end,last,to_a,>,-@,-,to_i,coerce_to!,ceil,/,is_a?,new,loop,+,*,>=,each_with_index,%,step,bsearch,inspect,[],hash,cover?"),self.$require("corelib/enumerable"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Range"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;function is_infinite(self){return self.begin===nil||self.end===nil||self.begin===-1/0||self.end===1/0||self.begin===1/0||self.end===-1/0}return $proto.begin=$proto.end=$proto.excl=nil,self.$include($$$("Enumerable")),self.$$prototype.$$is_range=!0,self.$attr_reader("begin","end"),$def(self,"$initialize",(function(first,last,exclude){return null==exclude&&(exclude=!1),$truthy(this.begin)&&$Kernel.$raise($$$("NameError"),"'initialize' called twice"),$truthy(first["$<=>"](last))||$truthy(first["$nil?"]())||$truthy(last["$nil?"]())||$Kernel.$raise($$$("ArgumentError"),"bad value for range"),this.begin=first,this.end=last,this.excl=exclude}),-3),$def(self,"$===",(function(value){return this["$include?"](value)})),$def(self,"$count",(function $$count(){var block=$$count.$$p||nil;return $$count.$$p=null,$not(block!==nil)&&$truthy(is_infinite(this))?$$$($$$("Float"),"INFINITY"):$send2(this,$find_super(this,"count",$$count,!1,!0),"count",[],block)})),$def(self,"$to_a",(function $$to_a(){var $yield=$$to_a.$$p||nil;return $$to_a.$$p=null,$truthy(is_infinite(this))&&$Kernel.$raise($$$("TypeError"),"cannot convert endless range to an array"),$send2(this,$find_super(this,"to_a",$$to_a,!1,!0),"to_a",[],$yield)})),$def(self,"$cover?",(function(value){var beg_cmp,end_cmp,$ret_or_1=nil,$ret_or_2=nil,$ret_or_3=nil;return beg_cmp=$truthy($ret_or_1=$truthy($ret_or_2=$truthy($ret_or_3=this.begin["$nil?"]())?-1:$ret_or_3)?$ret_or_2:this.begin["$<=>"](value))&&$ret_or_1,end_cmp=$truthy($ret_or_1=$truthy($ret_or_2=$truthy($ret_or_3=this.end["$nil?"]())?-1:$ret_or_3)?$ret_or_2:value["$<=>"](this.end))&&$ret_or_1,$truthy($ret_or_1=$truthy($ret_or_2=$truthy(this.excl)?$truthy($ret_or_3=end_cmp)?$rb_lt(end_cmp,0):$ret_or_3:$truthy($ret_or_3=end_cmp)?$rb_le(end_cmp,0):$ret_or_3)?beg_cmp:$ret_or_2)?$rb_le(beg_cmp,0):$ret_or_1})),$def(self,"$each",(function $$each(){var last,i,limit,block=$$each.$$p||nil,current=nil,$ret_or_1=nil;if($$each.$$p=null,block===nil)return $send(this,"enum_for",["each"],(function $$3(){return(null==$$3.$$s?this:$$3.$$s).$size()}),{$$s:this});if(this.begin.$$is_number&&this.end.$$is_number){for(this.begin%1==0&&this.end%1==0||$Kernel.$raise($$$("TypeError"),"can't iterate from Float"),i=this.begin,limit=this.end+($truthy(this.excl)?0:1);i<limit;i++)block(i);return this}if(this.begin.$$is_string&&this.end.$$is_string)return $send(this.begin,"upto",[this.end,this.excl],block.$to_proc()),this;for(current=this.begin,last=this.end,$truthy(current["$respond_to?"]("succ"))||$Kernel.$raise($$$("TypeError"),"can't iterate from "+current.$class());$truthy($truthy($ret_or_1=this.end["$nil?"]())?$ret_or_1:$rb_lt(current["$<=>"](last),0));)Opal.yield1(block,current),current=current.$succ();return $not(this.excl)&&$eqeq(current,last)&&Opal.yield1(block,current),this})),$def(self,"$eql?",(function(other){var $ret_or_1,$ret_or_2;return!!$eqeqeq($$$("Range"),other)&&($truthy($ret_or_1=$truthy($ret_or_2=this.excl["$==="](other["$exclude_end?"]()))?this.begin["$eql?"](other.$begin()):$ret_or_2)?this.end["$eql?"](other.$end()):$ret_or_1)})),$def(self,"$exclude_end?",$return_ivar("excl")),$def(self,"$first",(function $$first(n){var $yield=$$first.$$p||nil;return $$first.$$p=null,$truthy(this.begin["$nil?"]())&&$Kernel.$raise($$$("RangeError"),"cannot get the minimum of beginless range"),$truthy(null==n)?this.begin:$send2(this,$find_super(this,"first",$$first,!1,!0),"first",[n],$yield)}),-1),$def(self,"$last",(function(n){return $truthy(this.end["$nil?"]())&&$Kernel.$raise($$$("RangeError"),"cannot get the maximum of endless range"),$truthy(null==n)?this.end:this.$to_a().$last(n)}),-1),$def(self,"$max",(function $$max(){var $yield=$$max.$$p||nil;return $$max.$$p=null,$truthy(this.end["$nil?"]())?$Kernel.$raise($$$("RangeError"),"cannot get the maximum of endless range"):$yield!==nil?$send2(this,$find_super(this,"max",$$max,!1,!0),"max",[],$yield):$not(this.begin["$nil?"]())&&($truthy($rb_gt(this.begin,this.end))||$truthy(this.excl)&&$eqeq(this.begin,this.end))?nil:this.excl?this.end-1:this.end})),$def(self,"$min",(function $$min(){var $yield=$$min.$$p||nil;return $$min.$$p=null,$truthy(this.begin["$nil?"]())?$Kernel.$raise($$$("RangeError"),"cannot get the minimum of beginless range"):$yield!==nil?$send2(this,$find_super(this,"min",$$min,!1,!0),"min",[],$yield):$not(this.end["$nil?"]())&&($truthy($rb_gt(this.begin,this.end))||$truthy(this.excl)&&$eqeq(this.begin,this.end))?nil:this.begin})),$def(self,"$size",(function(){var range_begin,infinity=nil,range_end=nil;return infinity=$$$($$$("Float"),"INFINITY"),$eqeq(this.begin,infinity)&&$not(this.end["$nil?"]())||$eqeq(this.end,infinity["$-@"]())&&$not(this.begin["$nil?"]())?0:$truthy(is_infinite(this))?infinity:$eqeqeq($$$("Numeric"),this.begin)&&$eqeqeq($$$("Numeric"),this.end)?(range_begin=this.begin,range_end=this.end,$truthy(this.excl)&&(range_end=$rb_minus(range_end,1)),$truthy($rb_lt(range_end,range_begin))?0:(Math.abs(range_end-range_begin)+1).$to_i()):nil})),$def(self,"$step",(function $$step(n){var $yield=$$step.$$p||nil,self=this,$ret_or_1=nil,i=nil;function coerceStepSize(){null==n?n=1:n.$$is_number||(n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int")),n<0?$Kernel.$raise($$$("ArgumentError"),"step can't be negative"):0===n&&$Kernel.$raise($$$("ArgumentError"),"step can't be 0")}return $$step.$$p=null,$yield===nil?($truthy(self.begin["$is_a?"]($$("Numeric")))||$truthy(self.begin["$nil?"]()))&&($truthy(self.end["$is_a?"]($$("Numeric")))||$truthy(self.end["$nil?"]()))&&$not($truthy($ret_or_1=self.begin["$nil?"]())?self.end["$nil?"]():$ret_or_1)?$$$($$$("Enumerator"),"ArithmeticSequence").$new(self,n,"step"):$send(self,"enum_for",["step",n],(function(){return coerceStepSize(),function(){if(!self.begin["$respond_to?"]("succ"))return nil;if(self.begin.$$is_string&&self.end.$$is_string)return nil;if(n%1==0)return $rb_divide(self.$size(),n).$ceil();var size,begin=self.begin,end=self.end,abs=Math.abs,floor=Math.floor,err=(abs(begin)+abs(end)+abs(end-begin))/abs(n)*$$$($$$("Float"),"EPSILON");return err>.5&&(err=.5),self.excl?(size=floor((end-begin)/n-err))*n+begin<end&&size++:size=floor((end-begin)/n+err)+1,size}()})):(coerceStepSize(),$truthy(self.begin.$$is_number&&self.end.$$is_number)?(i=0,function(){try{var $t_break=$thrower("break");$send(self,"loop",[],(function $$6(){var current,self=null==$$6.$$s?this:$$6.$$s;return null==self.begin&&(self.begin=nil),null==self.excl&&(self.excl=nil),null==self.end&&(self.end=nil),current=$rb_plus(self.begin,$rb_times(i,n)),$truthy(self.excl)?$truthy($rb_ge(current,self.end))&&$t_break.$throw():$truthy($rb_gt(current,self.end))&&$t_break.$throw(),Opal.yield1($yield,current),i=$rb_plus(i,1)}),{$$s:self})}catch($e){if($e===$t_break)return $e.$v;throw $e}}()):(self.begin.$$is_string&&self.end.$$is_string&&n%1!=0&&$Kernel.$raise($$$("TypeError"),"no implicit conversion to float from string"),$send(self,"each_with_index",[],(function(value,idx){return null==value&&(value=nil),null==idx&&(idx=nil),$eqeq(idx["$%"](n),0)?Opal.yield1($yield,value):nil}))),self)}),-1),$def(self,"$%",(function(n){return $truthy(this.begin["$is_a?"]($$("Numeric")))&&$truthy(this.end["$is_a?"]($$("Numeric")))?$$$($$$("Enumerator"),"ArithmeticSequence").$new(this,n,"%"):this.$step(n)})),$def(self,"$bsearch",(function $$bsearch(){var block=$$bsearch.$$p||nil;return $$bsearch.$$p=null,block===nil?this.$enum_for("bsearch"):($truthy(is_infinite(this)&&(this.begin.$$is_number||this.end.$$is_number))&&$Kernel.$raise($$$("NotImplementedError"),"Can't #bsearch an infinite range"),$truthy(this.begin.$$is_number&&this.end.$$is_number)||$Kernel.$raise($$$("TypeError"),"can't do binary search for "+this.begin.$class()),$send(this.$to_a(),"bsearch",[],block.$to_proc()))})),$def(self,"$to_s",(function(){var $ret_or_1=nil;return($truthy($ret_or_1=this.begin)?$ret_or_1:"")+($truthy(this.excl)?"...":"..")+($truthy($ret_or_1=this.end)?$ret_or_1:"")})),$def(self,"$inspect",(function(){var $ret_or_1=nil;return($truthy($ret_or_1=this.begin)?this.begin.$inspect():$ret_or_1)+($truthy(this.excl)?"...":"..")+($truthy($ret_or_1=this.end)?this.end.$inspect():$ret_or_1)})),$def(self,"$marshal_load",(function(args){return this.begin=args["$[]"]("begin"),this.end=args["$[]"]("end"),this.excl=args["$[]"]("excl")})),$def(self,"$hash",(function(){return[this.begin,this.end,this.excl].$hash()})),$alias(self,"==","eql?"),$alias(self,"include?","cover?"),$alias(self,"member?","cover?")}(0,0,[])},Opal.modules["corelib/proc"]=function(Opal){var self,$slice=Opal.slice,$klass=Opal.klass,$truthy=Opal.truthy,$Kernel=Opal.Kernel,$defs=Opal.defs,$def=Opal.def,$send=Opal.send,$to_a=Opal.to_a,$return_self=Opal.return_self,$ensure_kwargs=Opal.ensure_kwargs,$Opal=Opal.Opal,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),self=$klass("::",Function,"Proc"),Opal.prop(self.$$prototype,"$$is_proc",!0),Opal.prop(self.$$prototype,"$$is_lambda",!1),$defs(self,"$new",(function $Proc_new$1(){var block=$Proc_new$1.$$p||nil;return $Proc_new$1.$$p=null,$truthy(block)||$Kernel.$raise($$$("ArgumentError"),"tried to create a Proc object without a block"),block})),$def(self,"$call",(function $$call($a){var args,block=$$call.$$p||nil,self=this;$$call.$$p=null,args=$slice(arguments),block!==nil&&(self.$$p=block);var result,$brk=self.$$brk,$ret=self.$$ret;if($brk||$ret&&self.$$is_lambda)try{result=self.$$is_lambda?self.apply(null,args):Opal.yieldX(self,args)}catch(err){if(err===$brk)return err.$v;if(self.$$is_lambda&&err===$ret)return err.$v;throw err}else result=self.$$is_lambda?self.apply(null,args):Opal.yieldX(self,args);return result}),-1),$def(self,"$>>",(function $Proc_$gt$gt$2(other){return $Proc_$gt$gt$2.$$p=null,$send($Kernel,"proc",[],(function $$3($a){var $post_args,block=$$3.$$p||nil,self=null==$$3.$$s?this:$$3.$$s,out=nil;return $$3.$$p=null,$post_args=$slice(arguments),out=$send(self,"call",$to_a($post_args),block.$to_proc()),other.$call(out)}),{$$arity:-1,$$s:this})})),$def(self,"$<<",(function $Proc_$lt$lt$4(other){return $Proc_$lt$lt$4.$$p=null,$send($Kernel,"proc",[],(function $$5($a){var $post_args,block=$$5.$$p||nil,self=null==$$5.$$s?this:$$5.$$s,out=nil;return $$5.$$p=null,$post_args=$slice(arguments),out=$send(other,"call",$to_a($post_args),block.$to_proc()),self.$call(out)}),{$$arity:-1,$$s:this})})),$def(self,"$to_proc",$return_self),$def(self,"$lambda?",(function(){return!!this.$$is_lambda})),$def(self,"$arity",(function(){return this.$$is_curried?-1:null!=this.$$arity?this.$$arity:this.length})),$def(self,"$source_location",(function(){var $ret_or_1;return this.$$is_curried?nil:$truthy($ret_or_1=this.$$source_location)?$ret_or_1:nil})),$def(self,"$binding",(function(){return this.$$is_curried&&$Kernel.$raise($$$("ArgumentError"),"Can't create Binding"),$truthy($$$("::","Binding","skip_raise")?"constant":nil)?$$$("Binding").$new(nil,[],this.$$s,this.$source_location()):nil})),$def(self,"$parameters",(function($kwargs){var lambda;if(lambda=($kwargs=$ensure_kwargs($kwargs)).$$smap.lambda,this.$$is_curried)return[["rest"]];if(this.$$parameters){if(null==lambda?this.$$is_lambda:lambda)return this.$$parameters;var i,length,result=[];for(i=0,length=this.$$parameters.length;i<length;i++){var parameter=this.$$parameters[i];"req"===parameter[0]&&(parameter=["opt",parameter[1]]),result.push(parameter)}return result}return[]}),-1),$def(self,"$curry",(function(arity){var self=this;function curried(){var result,args=$slice(arguments),length=args.length;return length>arity&&self.$$is_lambda&&!self.$$is_curried&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+length+" for "+arity+")"),length>=arity?self.$call.apply(self,args):(result=function(){return curried.apply(null,args.concat($slice(arguments)))},result.$$is_lambda=self.$$is_lambda,result.$$is_curried=!0,result)}return void 0===arity?arity=self.length:(arity=$Opal["$coerce_to!"](arity,$$$("Integer"),"to_int"),self.$$is_lambda&&arity!==self.length&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arity+" for "+self.length+")")),curried.$$is_lambda=self.$$is_lambda,curried.$$is_curried=!0,curried}),-1),$def(self,"$dup",(function(){var original_proc=this.$$original_proc||this,proc=function(){return original_proc.apply(this,arguments)};for(var prop in this)this.hasOwnProperty(prop)&&(proc[prop]=this[prop]);return proc})),$alias(self,"===","call"),$alias(self,"clone","dup"),$alias(self,"yield","call"),$alias(self,"[]","call")},Opal.modules["corelib/method"]=function(Opal){var self,$proto,$klass=Opal.klass,$def=Opal.def,$truthy=Opal.truthy,$slice=Opal.slice,$alias=Opal.alias,$Kernel=Opal.Kernel,$send=Opal.send,$to_a=Opal.to_a,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),self=$klass("::",null,"Method"),($proto=self.$$prototype).method=$proto.receiver=$proto.owner=$proto.name=nil,self.$attr_reader("owner","receiver","name"),$def(self,"$initialize",(function(receiver,owner,method,name){return this.receiver=receiver,this.owner=owner,this.name=name,this.method=method})),$def(self,"$arity",(function(){return this.method.$arity()})),$def(self,"$parameters",(function(){return this.method.$$parameters})),$def(self,"$source_location",(function(){var $ret_or_1;return $truthy($ret_or_1=this.method.$$source_location)?$ret_or_1:["(eval)",0]})),$def(self,"$comments",(function(){var $ret_or_1;return $truthy($ret_or_1=this.method.$$comments)?$ret_or_1:[]})),$def(self,"$call",(function $$call($a){var args,block=$$call.$$p||nil,self=this;return $$call.$$p=null,args=$slice(arguments),self.method.$$p=block,self.method.apply(self.receiver,args)}),-1),$def(self,"$curry",(function(arity){return this.method.$curry(arity)}),-1),$def(self,"$>>",(function(other){return this.method["$>>"](other)})),$def(self,"$<<",(function(other){return this.method["$<<"](other)})),$def(self,"$unbind",(function(){return $$$("UnboundMethod").$new(this.receiver.$class(),this.owner,this.method,this.name)})),$def(self,"$to_proc",(function(){var proc=this.$call.bind(this);return proc.$$unbound=this.method,proc.$$is_lambda=!0,proc.$$arity=null==this.method.$$arity?this.method.length:this.method.$$arity,proc.$$parameters=this.method.$$parameters,proc})),$def(self,"$inspect",(function(){return"#<"+this.$class()+": "+this.receiver.$class()+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"})),$alias(self,"[]","call"),$alias(self,"===","call"),function($base,$super){var self=$klass("::",null,"UnboundMethod"),$proto=self.$$prototype;return $proto.method=$proto.owner=$proto.name=$proto.source=nil,self.$attr_reader("source","owner","name"),$def(self,"$initialize",(function(source,owner,method,name){return this.source=source,this.owner=owner,this.method=method,this.name=name})),$def(self,"$arity",(function(){return this.method.$arity()})),$def(self,"$parameters",(function(){return this.method.$$parameters})),$def(self,"$source_location",(function(){var $ret_or_1;return $truthy($ret_or_1=this.method.$$source_location)?$ret_or_1:["(eval)",0]})),$def(self,"$comments",(function(){var $ret_or_1;return $truthy($ret_or_1=this.method.$$comments)?$ret_or_1:[]})),$def(self,"$bind",(function(object){if(this.owner.$$is_module||Opal.is_a(object,this.owner))return $$$("Method").$new(object,this.owner,this.method,this.name);$Kernel.$raise($$$("TypeError"),"can't bind singleton method to a different class (expected "+object+".kind_of?("+this.owner+" to be true)")})),$def(self,"$bind_call",(function $$bind_call(object,$a){var args,block=$$bind_call.$$p||nil,self=this;return $$bind_call.$$p=null,args=$slice(arguments,1),$send(self.$bind(object),"call",$to_a(args),block.$to_proc())}),-2),$def(self,"$inspect",(function(){return"#<"+this.$class()+": "+this.source+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"}))}()},Opal.modules["corelib/variables"]=function(Opal){var $gvars=Opal.gvars,$const_set=Opal.const_set,$Object=Opal.Object,$hash2=Opal.hash2,nil=Opal.nil;return Opal.add_stubs("new"),$gvars["&"]=$gvars["~"]=$gvars["`"]=$gvars["'"]=nil,$gvars.LOADED_FEATURES=$gvars['"']=Opal.loaded_features,$gvars.LOAD_PATH=$gvars[":"]=[],$gvars["/"]="\n",$gvars[","]=nil,$const_set("::","ARGV",[]),$const_set("::","ARGF",$Object.$new()),$const_set("::","ENV",$hash2([],{})),$gvars.VERBOSE=!1,$gvars.DEBUG=!1,$gvars.SAFE=0},Opal.modules["corelib/io"]=function(Opal){var $a,self,$proto,$klass=Opal.klass,$const_set=Opal.const_set,$not=Opal.not,$truthy=Opal.truthy,$def=Opal.def,$return_ivar=Opal.return_ivar,$return_val=Opal.return_val,$slice=Opal.slice,$Kernel=Opal.Kernel,$gvars=Opal.gvars,$send=Opal.send,$to_a=Opal.to_a,$rb_plus=Opal.rb_plus,$neqeq=Opal.neqeq,$range=Opal.range,$hash2=Opal.hash2,$eqeq=Opal.eqeq,$to_ary=Opal.to_ary,$rb_gt=Opal.rb_gt,$assign_ivar_val=Opal.assign_ivar_val,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;Opal.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),self=$klass("::",null,"IO"),($proto=self.$$prototype).read_buffer=$proto.closed=nil,$const_set(self,"SEEK_SET",0),$const_set(self,"SEEK_CUR",1),$const_set(self,"SEEK_END",2),$const_set(self,"SEEK_DATA",3),$const_set(self,"SEEK_HOLE",4),$const_set(self,"READABLE",1),$const_set(self,"WRITABLE",4),self.$attr_reader("eof"),self.$attr_accessor("read_proc","sync","tty","write_proc"),$def(self,"$initialize",(function(fd,flags){return null==flags&&(flags="r"),this.fd=fd,this.flags=flags,this.eof=!1,$truthy(flags["$include?"]("r"))&&$not(flags["$match?"](/[wa+]/))?this.closed="write":$truthy(flags["$match?"](/[wa]/))&&$not(flags["$match?"](/[r+]/))?this.closed="read":nil}),-2),$def(self,"$fileno",$return_ivar("fd")),$def(self,"$tty?",(function(){return 1==this.tty})),$def(self,"$write",(function(string){return this.write_proc(string),string.$size()})),$def(self,"$flush",$return_val(nil)),$def(self,"$<<",(function(string){return this.$write(string),this})),$def(self,"$print",(function($a){var args,self=this;null==$gvars[","]&&($gvars[","]=nil);for(var i=0,ii=(args=$slice(arguments)).length;i<ii;i++)args[i]=$Kernel.$String(args[i]);return self.$write(args.join($gvars[","])),nil}),-1),$def(self,"$puts",(function($a){var args,line,self=this;if(0===(args=$slice(arguments)).length)return self.$write("\n"),nil;for(var i=0,ii=args.length;i<ii;i++)if(args[i].$$is_array){var ary=args[i].$flatten();ary.length>0&&$send(self,"puts",$to_a(ary))}else(line=args[i].$$is_string?args[i].valueOf():$Kernel.$String(args[i])).endsWith("\n")||(line+="\n"),self.$write(line);return nil}),-1),$def(self,"$getc",(function(){var $ret_or_1,parts=nil,ret=nil;this.read_buffer=$truthy($ret_or_1=this.read_buffer)?$ret_or_1:"",parts="";do{if(this.read_buffer=$rb_plus(this.read_buffer,parts),$neqeq(this.read_buffer,""))return ret=this.read_buffer["$[]"](0),this.read_buffer=this.read_buffer["$[]"]($range(1,-1,!1)),ret}while($truthy(parts=this.$sysread_noraise(1)));return nil})),$def(self,"$getbyte",(function(){var $a;return($a=this.$getc())===nil||null==$a?nil:$a.$ord()})),$def(self,"$readbyte",(function(){return this.$readchar().$ord()})),$def(self,"$readchar",(function(){var $ret_or_1;return $truthy($ret_or_1=this.$getc())?$ret_or_1:$Kernel.$raise($$$("EOFError"),"end of file reached")})),$def(self,"$readline",(function($a){var $post_args,self=this,$ret_or_1=nil;return $post_args=$slice(arguments),$truthy($ret_or_1=$send(self,"gets",$to_a($post_args)))?$ret_or_1:$Kernel.$raise($$$("EOFError"),"end of file reached")}),-1),$def(self,"$gets",(function(sep,limit,opts){var $a,$b,orig_sep,seplen,$ret_or_1=nil,data=nil,ret=nil,orig_buffer=nil;null==$gvars["/"]&&($gvars["/"]=nil),null==sep&&(sep=!1),null==limit&&(limit=nil),null==opts&&(opts=$hash2([],{})),$truthy(sep.$$is_number)&&$not(limit)&&(sep=($a=[!1,sep,limit])[0],limit=$a[1],opts=$a[2]),$truthy(sep.$$is_hash)&&$not(limit)&&$eqeq(opts,$hash2([],{}))?(sep=($a=[!1,nil,sep])[0],limit=$a[1],opts=$a[2]):$truthy(limit.$$is_hash)&&$eqeq(opts,$hash2([],{}))&&(sep=($a=[sep,nil,limit])[0],limit=$a[1],opts=$a[2]),orig_sep=sep,$eqeq(sep,!1)&&(sep=$gvars["/"]),$eqeq(sep,"")&&(sep=/\r?\n\r?\n/),sep=$truthy($ret_or_1=sep)?$ret_or_1:"",$eqeq(orig_sep,"")||(sep=sep.$to_str()),seplen=$eqeq(orig_sep,"")?2:sep.$length(),$eqeq(sep," ")&&(sep=/ /),this.read_buffer=$truthy($ret_or_1=this.read_buffer)?$ret_or_1:"",data="",ret=nil;do{if(this.read_buffer=$rb_plus(this.read_buffer,data),$neqeq(sep,"")&&$truthy($truthy(sep.$$is_regexp)?this.read_buffer["$match?"](sep):this.read_buffer["$include?"](sep))){orig_buffer=this.read_buffer,$b=this.read_buffer.$split(sep,2),ret=null==($a=$to_ary($b))[0]?nil:$a[0],this.read_buffer=null==$a[1]?nil:$a[1],$neqeq(ret,orig_buffer)&&(ret=$rb_plus(ret,orig_buffer["$[]"](ret.$length(),seplen)));break}}while($truthy(data=this.$sysread_noraise($eqeq(sep,"")?65536:1)));return $truthy(ret)||(ret=($a=[$truthy($ret_or_1=this.read_buffer)?$ret_or_1:"",""])[0],this.read_buffer=$a[1],$eqeq(ret,"")&&(ret=nil)),$truthy(ret)&&($truthy(limit)&&(ret=ret["$[]"](Opal.Range.$new(0,limit,!0)),this.read_buffer=$rb_plus(ret["$[]"](Opal.Range.$new(limit,-1,!1)),this.read_buffer)),$truthy(opts["$[]"]("chomp"))&&(ret=ret.$sub(/\r?\n$/,"")),$eqeq(orig_sep,"")&&(ret=ret.$sub(/^[\r\n]+/,""))),$eqeq(orig_sep,!1)&&($gvars._=ret),ret}),-1),$def(self,"$sysread",(function(integer){var $ret_or_1;return $truthy($ret_or_1=this.read_proc(integer))?$ret_or_1:(this.eof=!0,$Kernel.$raise($$$("EOFError"),"end of file reached"))})),$def(self,"$sysread_noraise",(function(integer){try{return this.$sysread(integer)}catch($err){if(!Opal.rescue($err,[$$$("EOFError")]))throw $err;try{return nil}finally{Opal.pop_exception()}}})),$def(self,"$readpartial",(function(integer){var $a,part,$ret_or_1=nil,ret=nil;return this.read_buffer=$truthy($ret_or_1=this.read_buffer)?$ret_or_1:"",part=this.$sysread(integer),ret=($a=[$rb_plus(this.read_buffer,$truthy($ret_or_1=part)?$ret_or_1:""),""])[0],this.read_buffer=$a[1],$eqeq(ret,"")&&(ret=nil),ret})),$def(self,"$read",(function(integer){var $a,$ret_or_1=nil,parts=nil,ret=nil;null==integer&&(integer=nil),this.read_buffer=$truthy($ret_or_1=this.read_buffer)?$ret_or_1:"",parts="",ret=nil;do{if(this.read_buffer=$rb_plus(this.read_buffer,parts),$truthy(integer)&&$truthy($rb_gt(this.read_buffer.$length(),integer)))return ret=($a=[this.read_buffer["$[]"](Opal.Range.$new(0,integer,!0)),this.read_buffer["$[]"](Opal.Range.$new(integer,-1,!1))])[0],this.read_buffer=$a[1],ret}while($truthy(parts=this.$sysread_noraise($truthy($ret_or_1=integer)?$ret_or_1:65536)));return ret=($a=[this.read_buffer,""])[0],this.read_buffer=$a[1],ret}),-1),$def(self,"$readlines",(function(separator){return null==$gvars["/"]&&($gvars["/"]=nil),null==separator&&(separator=$gvars["/"]),this.$each_line(separator).$to_a()}),-1),$def(self,"$each",(function $$each($a,$b){var $post_args,sep,args,block=$$each.$$p||nil,self=this,s=nil;if(null==$gvars["/"]&&($gvars["/"]=nil),$$each.$$p=null,($post_args=$slice(arguments)).length>0&&(sep=$post_args.shift()),null==sep&&(sep=$gvars["/"]),args=$post_args,block===nil)return $send(self,"enum_for",["each",sep].concat($to_a(args)));for(;$truthy(s=$send(self,"gets",[sep].concat($to_a(args))));)Opal.yield1(block,s);return self}),-1),$def(self,"$each_byte",(function $$each_byte(){var block=$$each_byte.$$p||nil,s=nil;if($$each_byte.$$p=null,block===nil)return this.$enum_for("each_byte");for(;$truthy(s=this.$getbyte());)Opal.yield1(block,s);return this})),$def(self,"$each_char",(function $$each_char(){var block=$$each_char.$$p||nil,s=nil;if($$each_char.$$p=null,block===nil)return this.$enum_for("each_char");for(;$truthy(s=this.$getc());)Opal.yield1(block,s);return this})),$def(self,"$close",$assign_ivar_val("closed","both")),$def(self,"$close_read",(function(){return $eqeq(this.closed,"write")?this.closed="both":this.closed="read"})),$def(self,"$close_write",(function(){return $eqeq(this.closed,"read")?this.closed="both":this.closed="write"})),$def(self,"$closed?",(function(){return this.closed["$=="]("both")})),$def(self,"$closed_read?",(function(){var $ret_or_1;return $truthy($ret_or_1=this.closed["$=="]("read"))?$ret_or_1:this.closed["$=="]("both")})),$def(self,"$closed_write?",(function(){var $ret_or_1;return $truthy($ret_or_1=this.closed["$=="]("write"))?$ret_or_1:this.closed["$=="]("both")})),$def(self,"$check_writable",(function(){return $truthy(this["$closed_write?"]())?$Kernel.$raise($$$("IOError"),"not opened for writing"):nil})),$def(self,"$check_readable",(function(){return $truthy(this["$closed_read?"]())?$Kernel.$raise($$$("IOError"),"not opened for reading"):nil})),$alias(self,"each_line","each"),$alias(self,"eof?","eof"),$const_set("::","STDIN",$gvars.stdin=$$$("IO").$new(0,"r")),$const_set("::","STDOUT",$gvars.stdout=$$$("IO").$new(1,"w")),$const_set("::","STDERR",$gvars.stderr=$$$("IO").$new(2,"w"));var console=Opal.global.console;return $$$("STDOUT")["$write_proc="]("object"==typeof process&&"object"==typeof process.stdout?function(s){process.stdout.write(s)}:function(s){console.log(s)}),$$$("STDERR")["$write_proc="]("object"==typeof process&&"object"==typeof process.stderr?function(s){process.stderr.write(s)}:function(s){console.warn(s)}),$a=[function(s){var p=prompt();return null!==p?p+"\n":nil}],$send($$$("STDIN"),"read_proc=",$a),$a[$a.length-1]},Opal.modules["opal/regexp_anchors"]=function(Opal){var $module=Opal.module,$const_set=Opal.const_set,$nesting=[],$$$=(Opal.nil,Opal.$$$);return Opal.add_stubs("new"),function($base,$parent_nesting){var self=$module($base,"Opal"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $const_set(self,"REGEXP_START","^"),$const_set(self,"REGEXP_END","$"),$const_set(self,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),$const_set(self,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),$const_set(self,"INLINE_IDENTIFIER_REGEXP",$$("Regexp").$new("[^"+$$$(self,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+$$$(self,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),$const_set(self,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),$const_set(self,"CONST_NAME_REGEXP",$$("Regexp").$new($$$(self,"REGEXP_START")+"(::)?[A-Z][^"+$$$(self,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+$$$(self,"REGEXP_END")))}($nesting[0],$nesting)},Opal.modules["opal/mini"]=function(Opal){var $Object=Opal.Object;Opal.nil;return Opal.add_stubs("require"),$Object.$require("opal/base"),$Object.$require("corelib/nil"),$Object.$require("corelib/boolean"),$Object.$require("corelib/string"),$Object.$require("corelib/comparable"),$Object.$require("corelib/enumerable"),$Object.$require("corelib/enumerator"),$Object.$require("corelib/array"),$Object.$require("corelib/hash"),$Object.$require("corelib/number"),$Object.$require("corelib/range"),$Object.$require("corelib/proc"),$Object.$require("corelib/method"),$Object.$require("corelib/regexp"),$Object.$require("corelib/variables"),$Object.$require("corelib/io"),$Object.$require("opal/regexp_anchors")},Opal.modules["corelib/kernel/format"]=function(Opal){var self,$coerce_to=Opal.coerce_to,$module=Opal.module,$slice=Opal.slice,$truthy=Opal.truthy,$eqeq=Opal.eqeq,$Opal=Opal.Opal,$Kernel=Opal.Kernel,$gvars=Opal.gvars,$def=Opal.def,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),self=$module("::","Kernel"),$def(self,"$format",(function(format_string,$a){var $post_args,args,ary=nil;null==$gvars.DEBUG&&($gvars.DEBUG=nil),$post_args=$slice(arguments,1),$eqeq((args=$post_args).$length(),1)&&$truthy(args["$[]"](0)["$respond_to?"]("to_ary"))&&(ary=$Opal["$coerce_to?"](args["$[]"](0),$$$("Array"),"to_ary"),$truthy(ary["$nil?"]())||(args=ary.$to_a()));var end_slice,i,arg,str,exponent,width,precision,tmp_num,hash_parameter_key,closing_brace_char,base_number,base_prefix,base_neg_zero_regex,base_neg_zero_digit,next_arg,flags,result="",begin_slice=0,len=format_string.length,seq_arg_num=1,pos_arg_num=0,FNONE=0,FSHARP=1,FMINUS=2,FPLUS=4,FZERO=8,FSPACE=16,FWIDTH=32,FPREC=64,FPREC0=128;function CHECK_FOR_FLAGS(){flags&FWIDTH&&$Kernel.$raise($$$("ArgumentError"),"flag after width"),flags&FPREC0&&$Kernel.$raise($$$("ArgumentError"),"flag after precision")}function CHECK_FOR_WIDTH(){flags&FWIDTH&&$Kernel.$raise($$$("ArgumentError"),"width given twice"),flags&FPREC0&&$Kernel.$raise($$$("ArgumentError"),"width after precision")}function GET_NTH_ARG(num){return num>=args.length&&$Kernel.$raise($$$("ArgumentError"),"too few arguments"),args[num]}function GET_NEXT_ARG(){switch(pos_arg_num){case-1:$Kernel.$raise($$$("ArgumentError"),"unnumbered("+seq_arg_num+") mixed with numbered");case-2:$Kernel.$raise($$$("ArgumentError"),"unnumbered("+seq_arg_num+") mixed with named")}return GET_NTH_ARG((pos_arg_num=seq_arg_num++)-1)}function GET_POS_ARG(num){return pos_arg_num>0&&$Kernel.$raise($$$("ArgumentError"),"numbered("+num+") after unnumbered("+pos_arg_num+")"),-2===pos_arg_num&&$Kernel.$raise($$$("ArgumentError"),"numbered("+num+") after named"),num<1&&$Kernel.$raise($$$("ArgumentError"),"invalid index - "+num+"$"),pos_arg_num=-1,GET_NTH_ARG(num-1)}function GET_ARG(){return void 0===next_arg?GET_NEXT_ARG():next_arg}function READ_NUM(label){for(var num,str="";;i++){if(i===len&&$Kernel.$raise($$$("ArgumentError"),"malformed format string - %*[0-9]"),format_string.charCodeAt(i)<48||format_string.charCodeAt(i)>57)return i--,(num=parseInt(str,10)||0)>2147483647&&$Kernel.$raise($$$("ArgumentError"),label+" too big"),num;str+=format_string.charAt(i)}}function READ_NUM_AFTER_ASTER(label){var arg,num=READ_NUM(label);return"$"===format_string.charAt(i+1)?(i++,arg=GET_POS_ARG(num)):arg=GET_NEXT_ARG(),arg.$to_int()}for(i=format_string.indexOf("%");-1!==i;i=format_string.indexOf("%",i)){switch(str=void 0,flags=FNONE,width=-1,precision=-1,next_arg=void 0,end_slice=i,i++,format_string.charAt(i)){case"%":begin_slice=i;case"":case"\n":case"\0":i++;continue}format_sequence:for(;i<len;i++)switch(format_string.charAt(i)){case" ":CHECK_FOR_FLAGS(),flags|=FSPACE;continue format_sequence;case"#":CHECK_FOR_FLAGS(),flags|=FSHARP;continue format_sequence;case"+":CHECK_FOR_FLAGS(),flags|=FPLUS;continue format_sequence;case"-":CHECK_FOR_FLAGS(),flags|=FMINUS;continue format_sequence;case"0":CHECK_FOR_FLAGS(),flags|=FZERO;continue format_sequence;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(tmp_num=READ_NUM("width"),"$"===format_string.charAt(i+1)){if(i+2===len){str="%",i++;break format_sequence}void 0!==next_arg&&$Kernel.$raise($$$("ArgumentError"),"value given twice - %"+tmp_num+"$"),next_arg=GET_POS_ARG(tmp_num),i++}else CHECK_FOR_WIDTH(),flags|=FWIDTH,width=tmp_num;continue format_sequence;case"<":case"{":for(closing_brace_char="<"===format_string.charAt(i)?">":"}",hash_parameter_key="",i++;;i++){if(i===len&&$Kernel.$raise($$$("ArgumentError"),"malformed name - unmatched parenthesis"),format_string.charAt(i)===closing_brace_char){if(pos_arg_num>0&&$Kernel.$raise($$$("ArgumentError"),"named "+hash_parameter_key+" after unnumbered("+pos_arg_num+")"),-1===pos_arg_num&&$Kernel.$raise($$$("ArgumentError"),"named "+hash_parameter_key+" after numbered"),pos_arg_num=-2,void 0!==args[0]&&args[0].$$is_hash||$Kernel.$raise($$$("ArgumentError"),"one hash required"),next_arg=args[0].$fetch(hash_parameter_key),">"===closing_brace_char)continue format_sequence;if(str=next_arg.toString(),-1!==precision&&(str=str.slice(0,precision)),flags&FMINUS)for(;str.length<width;)str+=" ";else for(;str.length<width;)str=" "+str;break format_sequence}hash_parameter_key+=format_string.charAt(i)}case"*":i++,CHECK_FOR_WIDTH(),flags|=FWIDTH,(width=READ_NUM_AFTER_ASTER("width"))<0&&(flags|=FMINUS,width=-width);continue format_sequence;case".":if(flags&FPREC0&&$Kernel.$raise($$$("ArgumentError"),"precision given twice"),flags|=FPREC|FPREC0,precision=0,i++,"*"===format_string.charAt(i)){i++,(precision=READ_NUM_AFTER_ASTER("precision"))<0&&(flags&=~FPREC);continue format_sequence}precision=READ_NUM("precision");continue format_sequence;case"d":case"i":case"u":if((arg=$Kernel.$Integer(GET_ARG()))>=0){for(str=arg.toString();str.length<precision;)str="0"+str;if(flags&FMINUS)for((flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str);str.length<width;)str+=" ";else if(flags&FZERO&&-1===precision){for(;str.length<width-(flags&FPLUS||flags&FSPACE?1:0);)str="0"+str;(flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str)}else for((flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str);str.length<width;)str=" "+str}else{for(str=(-arg).toString();str.length<precision;)str="0"+str;if(flags&FMINUS)for(str="-"+str;str.length<width;)str+=" ";else if(flags&FZERO&&-1===precision){for(;str.length<width-1;)str="0"+str;str="-"+str}else for(str="-"+str;str.length<width;)str=" "+str}break format_sequence;case"b":case"B":case"o":case"x":case"X":switch(format_string.charAt(i)){case"b":case"B":base_number=2,base_prefix="0b",base_neg_zero_regex=/^1+/,base_neg_zero_digit="1";break;case"o":base_number=8,base_prefix="0",base_neg_zero_regex=/^3?7+/,base_neg_zero_digit="7";break;case"x":case"X":base_number=16,base_prefix="0x",base_neg_zero_regex=/^f+/,base_neg_zero_digit="f"}if((arg=$Kernel.$Integer(GET_ARG()))>=0){for(str=arg.toString(base_number);str.length<precision;)str="0"+str;if(flags&FMINUS)for((flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str),flags&FSHARP&&0!==arg&&(str=base_prefix+str);str.length<width;)str+=" ";else if(flags&FZERO&&-1===precision){for(;str.length<width-(flags&FPLUS||flags&FSPACE?1:0)-(flags&FSHARP&&0!==arg?base_prefix.length:0);)str="0"+str;flags&FSHARP&&0!==arg&&(str=base_prefix+str),(flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str)}else for(flags&FSHARP&&0!==arg&&(str=base_prefix+str),(flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str);str.length<width;)str=" "+str}else if(flags&FPLUS||flags&FSPACE){for(str=(-arg).toString(base_number);str.length<precision;)str="0"+str;if(flags&FMINUS)for(flags&FSHARP&&(str=base_prefix+str),str="-"+str;str.length<width;)str+=" ";else if(flags&FZERO&&-1===precision){for(;str.length<width-1-(flags&FSHARP?2:0);)str="0"+str;flags&FSHARP&&(str=base_prefix+str),str="-"+str}else for(flags&FSHARP&&(str=base_prefix+str),str="-"+str;str.length<width;)str=" "+str}else{for(str=(arg>>>0).toString(base_number).replace(base_neg_zero_regex,base_neg_zero_digit);str.length<precision-2;)str=base_neg_zero_digit+str;if(flags&FMINUS)for(str=".."+str,flags&FSHARP&&(str=base_prefix+str);str.length<width;)str+=" ";else if(flags&FZERO&&-1===precision){for(;str.length<width-2-(flags&FSHARP?base_prefix.length:0);)str=base_neg_zero_digit+str;str=".."+str,flags&FSHARP&&(str=base_prefix+str)}else for(str=".."+str,flags&FSHARP&&(str=base_prefix+str);str.length<width;)str=" "+str}format_string.charAt(i)===format_string.charAt(i).toUpperCase()&&(str=str.toUpperCase());break format_sequence;case"f":case"e":case"E":case"g":case"G":if((arg=$Kernel.$Float(GET_ARG()))>=0||isNaN(arg)){if(arg===1/0)str="Inf";else switch(format_string.charAt(i)){case"f":str=arg.toFixed(-1===precision?6:precision);break;case"e":case"E":str=arg.toExponential(-1===precision?6:precision);break;case"g":case"G":str=arg.toExponential(),(exponent=parseInt(str.split("e")[1],10))<-4||exponent>=(-1===precision?6:precision)||(str=arg.toPrecision(-1===precision?flags&FSHARP?6:void 0:precision))}if(flags&FMINUS)for((flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str);str.length<width;)str+=" ";else if(flags&FZERO&&arg!==1/0&&!isNaN(arg)){for(;str.length<width-(flags&FPLUS||flags&FSPACE?1:0);)str="0"+str;(flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str)}else for((flags&FPLUS||flags&FSPACE)&&(str=(flags&FPLUS?"+":" ")+str);str.length<width;)str=" "+str}else{if(arg===-1/0)str="Inf";else switch(format_string.charAt(i)){case"f":str=(-arg).toFixed(-1===precision?6:precision);break;case"e":case"E":str=(-arg).toExponential(-1===precision?6:precision);break;case"g":case"G":str=(-arg).toExponential(),(exponent=parseInt(str.split("e")[1],10))<-4||exponent>=(-1===precision?6:precision)||(str=(-arg).toPrecision(-1===precision?flags&FSHARP?6:void 0:precision))}if(flags&FMINUS)for(str="-"+str;str.length<width;)str+=" ";else if(flags&FZERO&&arg!==-1/0){for(;str.length<width-1;)str="0"+str;str="-"+str}else for(str="-"+str;str.length<width;)str=" "+str}format_string.charAt(i)!==format_string.charAt(i).toUpperCase()||arg===1/0||arg===-1/0||isNaN(arg)||(str=str.toUpperCase()),str=str.replace(/([eE][-+]?)([0-9])$/,"$10$2");break format_sequence;case"a":case"A":$Kernel.$raise($$$("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if((arg=GET_ARG())["$respond_to?"]("to_ary")&&(arg=arg.$to_ary()[0]),1!==(str=arg["$respond_to?"]("to_str")?arg.$to_str():String.fromCharCode($coerce_to(arg,$$$("Integer"),"to_int"))).length&&$Kernel.$raise($$$("ArgumentError"),"%c requires a character"),flags&FMINUS)for(;str.length<width;)str+=" ";else for(;str.length<width;)str=" "+str;break format_sequence;case"p":if(str=GET_ARG().$inspect(),-1!==precision&&(str=str.slice(0,precision)),flags&FMINUS)for(;str.length<width;)str+=" ";else for(;str.length<width;)str=" "+str;break format_sequence;case"s":if(str=GET_ARG().$to_s(),-1!==precision&&(str=str.slice(0,precision)),flags&FMINUS)for(;str.length<width;)str+=" ";else for(;str.length<width;)str=" "+str;break format_sequence;default:$Kernel.$raise($$$("ArgumentError"),"malformed format string - %"+format_string.charAt(i))}void 0===str&&$Kernel.$raise($$$("ArgumentError"),"malformed format string - %"),result+=format_string.slice(begin_slice,end_slice)+str,begin_slice=i+1}return $gvars.DEBUG&&pos_arg_num>=0&&seq_arg_num<args.length&&$Kernel.$raise($$$("ArgumentError"),"too many arguments for format string"),result+format_string.slice(begin_slice)}),-2),$alias(self,"sprintf","format")},Opal.modules["corelib/string/encoding"]=function(Opal){var $a,$klass=Opal.klass,$hash2=Opal.hash2,$rb_plus=Opal.rb_plus,$truthy=Opal.truthy,$send=Opal.send,$defs=Opal.defs,$eqeq=Opal.eqeq,$def=Opal.def,$return_ivar=Opal.return_ivar,$return_val=Opal.return_val,$slice=Opal.slice,$Kernel=Opal.Kernel,$Opal=Opal.Opal,$rb_lt=Opal.rb_lt,self=Opal.top,$$=Opal.$r([]),nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),self.$require("corelib/string"),function($base,$super){var self=$klass("::",null,"Encoding"),$proto=self.$$prototype;$proto.name=$proto.dummy=nil,$defs(self,"$register",(function $$register(name,options){var names,ascii,dummy,block=$$register.$$p||nil,$ret_or_1=nil,encoding=nil,register=nil;return $$register.$$p=null,null==options&&(options=$hash2([],{})),names=$rb_plus([name],$truthy($ret_or_1=options["$[]"]("aliases"))?$ret_or_1:[]),ascii=$truthy($ret_or_1=options["$[]"]("ascii"))&&$ret_or_1,dummy=$truthy($ret_or_1=options["$[]"]("dummy"))&&$ret_or_1,$truthy(options["$[]"]("inherits"))?(encoding=options["$[]"]("inherits").$clone()).$initialize(name,names,ascii,dummy):encoding=this.$new(name,names,ascii,dummy),block!==nil&&$send(encoding,"instance_eval",[],block.$to_proc()),register=Opal.encodings,$send(names,"each",[],(function $$1(encoding_name){return null==encoding_name&&(encoding_name=nil),(null==$$1.$$s?this:$$1.$$s).$const_set(encoding_name.$tr("-","_"),encoding),register[encoding_name]=encoding}),{$$s:this})}),-2),$defs(self,"$find",(function(name){return $eqeq(name,"default_external")?this.$default_external():Opal.find_encoding(name)})),self.$singleton_class().$attr_accessor("default_external"),self.$attr_reader("name","names"),$def(self,"$initialize",(function(name,names,ascii,dummy){return this.name=name,this.names=names,this.ascii=ascii,this.dummy=dummy})),$def(self,"$ascii_compatible?",$return_ivar("ascii")),$def(self,"$dummy?",$return_ivar("dummy")),$def(self,"$binary?",$return_val(!1)),$def(self,"$to_s",$return_ivar("name")),$def(self,"$inspect",(function(){return"#<Encoding:"+this.name+($truthy(this.dummy)?" (dummy)":nil)+">"})),$def(self,"$charsize",(function(string){for(var len=0,i=0,length=string.length;i<length;i++){var charcode=string.charCodeAt(i);charcode>=55296&&charcode<=56319||len++}return len})),$def(self,"$each_char",(function $$each_char(string){var block=$$each_char.$$p||nil;$$each_char.$$p=null;for(var low_surrogate="",i=0,length=string.length;i<length;i++){var charcode=string.charCodeAt(i),chr=string.charAt(i);charcode>=56320&&charcode<=57343?low_surrogate=chr:(charcode>=55296&&charcode<=56319&&(chr=low_surrogate+chr),"UTF-8"!=string.encoding.name&&((chr=new String(chr)).encoding=string.encoding),Opal.yield1(block,chr))}})),$def(self,"$each_byte",(function($a){return $slice(arguments),$Kernel.$raise($$$("NotImplementedError"))}),-1),$def(self,"$bytesize",(function($a){return $slice(arguments),$Kernel.$raise($$$("NotImplementedError"))}),-1),$klass("::",$$$("StandardError"),"EncodingError"),$klass("::",$$$("EncodingError"),"CompatibilityError")}(),$send($$$("Encoding"),"register",["UTF-8",$hash2(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],(function $$2(){var self=null==$$2.$$s?this:$$2.$$s;return $def(self,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var codePoint,units=1/0,length=string.length,leadSurrogate=null,i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&(Opal.yield1(block,239),Opal.yield1(block,191),Opal.yield1(block,189));continue}if(i+1===length){(units-=3)>-1&&(Opal.yield1(block,239),Opal.yield1(block,191),Opal.yield1(block,189));continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&(Opal.yield1(block,239),Opal.yield1(block,191),Opal.yield1(block,189)),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&(Opal.yield1(block,239),Opal.yield1(block,191),Opal.yield1(block,189));if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;Opal.yield1(block,codePoint)}else if(codePoint<2048){if((units-=2)<0)break;Opal.yield1(block,codePoint>>6|192),Opal.yield1(block,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;Opal.yield1(block,codePoint>>12|224),Opal.yield1(block,codePoint>>6&63|128),Opal.yield1(block,63&codePoint|128)}else if(codePoint<1114112){if((units-=4)<0)break;Opal.yield1(block,codePoint>>18|240),Opal.yield1(block,codePoint>>12&63|128),Opal.yield1(block,codePoint>>6&63|128),Opal.yield1(block,63&codePoint|128)}}})),$def(self,"$bytesize",(function(string){return string.$bytes().$length()}))}),{$$s:self}),$send($$$("Encoding"),"register",["UTF-16LE"],(function $$3(){var self=null==$$3.$$s?this:$$3.$$s;return $def(self,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var i=0,length=string.length;i<length;i++){var code=string.charCodeAt(i);Opal.yield1(block,255&code),Opal.yield1(block,code>>8)}})),$def(self,"$bytesize",(function(string){return 2*string.length}))}),{$$s:self}),$send($$$("Encoding"),"register",["UTF-16BE",$hash2(["inherits"],{inherits:$$$($$$("Encoding"),"UTF_16LE")})],(function $$4(){return $def(null==$$4.$$s?this:$$4.$$s,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var i=0,length=string.length;i<length;i++){var code=string.charCodeAt(i);Opal.yield1(block,code>>8),Opal.yield1(block,255&code)}}))}),{$$s:self}),$send($$$("Encoding"),"register",["UTF-32LE"],(function $$5(){var self=null==$$5.$$s?this:$$5.$$s;return $def(self,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var i=0,length=string.length;i<length;i++){var code=string.charCodeAt(i);Opal.yield1(block,255&code),Opal.yield1(block,code>>8),Opal.yield1(block,0),Opal.yield1(block,0)}})),$def(self,"$bytesize",(function(string){return 4*string.length}))}),{$$s:self}),$send($$$("Encoding"),"register",["UTF-32BE",$hash2(["inherits"],{inherits:$$$($$$("Encoding"),"UTF_32LE")})],(function $$6(){return $def(null==$$6.$$s?this:$$6.$$s,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var i=0,length=string.length;i<length;i++){var code=string.charCodeAt(i);Opal.yield1(block,0),Opal.yield1(block,0),Opal.yield1(block,code>>8),Opal.yield1(block,255&code)}}))}),{$$s:self}),$send($$$("Encoding"),"register",["ASCII-8BIT",$hash2(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],(function $$7(){var self=null==$$7.$$s?this:$$7.$$s;return $def(self,"$each_char",(function $$each_char(string){var block=$$each_char.$$p||nil;$$each_char.$$p=null;for(var i=0,length=string.length;i<length;i++){var chr=new String(string.charAt(i));chr.encoding=string.encoding,Opal.yield1(block,chr)}})),$def(self,"$charsize",(function(string){return string.length})),$def(self,"$each_byte",(function $$each_byte(string){var block=$$each_byte.$$p||nil;$$each_byte.$$p=null;for(var i=0,length=string.length;i<length;i++){var code=string.charCodeAt(i);Opal.yield1(block,255&code)}})),$def(self,"$bytesize",(function(string){return string.length})),$def(self,"$binary?",$return_val(!0))}),{$$s:self}),$$$("Encoding").$register("ISO-8859-1",$hash2(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:$$$($$$("Encoding"),"ASCII_8BIT")})),$$$("Encoding").$register("US-ASCII",$hash2(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:$$$($$$("Encoding"),"ASCII_8BIT")})),function($base,$super){var self=$klass("::",null,"String"),$proto=self.$$prototype;$proto.internal_encoding=$proto.bytes=$proto.encoding=nil,self.$attr_reader("encoding"),self.$attr_reader("internal_encoding"),Opal.prop(String.prototype,"bytes",nil),Opal.prop(String.prototype,"encoding",$$$($$$("Encoding"),"UTF_8")),Opal.prop(String.prototype,"internal_encoding",$$$($$$("Encoding"),"UTF_8")),$def(self,"$b",(function(){return this.$dup().$force_encoding("binary")})),$def(self,"$bytesize",(function(){return this.internal_encoding.$bytesize(this)})),$def(self,"$each_byte",(function $$each_byte(){var block=$$each_byte.$$p||nil;return $$each_byte.$$p=null,block===nil?$send(this,"enum_for",["each_byte"],(function $$8(){return(null==$$8.$$s?this:$$8.$$s).$bytesize()}),{$$s:this}):($send(this.internal_encoding,"each_byte",[this],block.$to_proc()),this)})),$def(self,"$bytes",(function(){var $ret_or_1;return"string"==typeof this?new String(this).$each_byte().$to_a():(this.bytes=$truthy($ret_or_1=this.bytes)?$ret_or_1:this.$each_byte().$to_a(),this.bytes.$dup())})),$def(self,"$each_char",(function $$each_char(){var block=$$each_char.$$p||nil;return $$each_char.$$p=null,block===nil?$send(this,"enum_for",["each_char"],(function $$9(){return(null==$$9.$$s?this:$$9.$$s).$length()}),{$$s:this}):($send(this.encoding,"each_char",[this],block.$to_proc()),this)})),$def(self,"$chars",(function $$chars(){var block=$$chars.$$p||nil;return $$chars.$$p=null,$truthy(block)?$send(this,"each_char",[],block.$to_proc()):this.$each_char().$to_a()})),$def(self,"$each_codepoint",(function $$each_codepoint(){var block=$$each_codepoint.$$p||nil;if($$each_codepoint.$$p=null,block===nil)return this.$enum_for("each_codepoint");for(var i=0,length=this.length;i<length;i++)Opal.yield1(block,this.codePointAt(i));return this})),$def(self,"$codepoints",(function $$codepoints(){var block=$$codepoints.$$p||nil;return $$codepoints.$$p=null,block!==nil?$send(this,"each_codepoint",[],block.$to_proc()):this.$each_codepoint().$to_a()})),$def(self,"$encode",(function(encoding){return Opal.enc(this,encoding)})),$def(self,"$force_encoding",(function(encoding){var str=this;return encoding===str.encoding?str:(encoding=$Opal["$coerce_to!"](encoding,$$$("String"),"to_s"),(encoding=$$$("Encoding").$find(encoding))===str.encoding?str:str=Opal.set_encoding(str,encoding))})),$def(self,"$getbyte",(function(idx){var string_bytes=nil;return string_bytes=this.$bytes(),idx=$Opal["$coerce_to!"](idx,$$$("Integer"),"to_int"),$truthy($rb_lt(string_bytes.$length(),idx))?nil:string_bytes["$[]"](idx)})),$def(self,"$initialize_copy",(function(other){return"\n      self.encoding = other.encoding;\n      self.internal_encoding = other.internal_encoding;\n    "})),$def(self,"$valid_encoding?",$return_val(!0))}(),$a=[$$$($$("Encoding"),"UTF_8")],$send($$$("Encoding"),"default_external=",$a),$a[$a.length-1]},Opal.modules["corelib/math"]=function(Opal){var $type_error=Opal.type_error,$module=Opal.module,$const_set=Opal.const_set,$Class=Opal.Class,$slice=Opal.slice,$Kernel=Opal.Kernel,$defs=Opal.defs,$truthy=Opal.truthy,$send=Opal.send,$def=Opal.def,$rb_minus=Opal.rb_minus,$eqeqeq=Opal.eqeqeq,$rb_divide=Opal.rb_divide,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function($base,$parent_nesting){var self=$module("::","Math"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $const_set(self,"E",Math.E),$const_set(self,"PI",Math.PI),$const_set(self,"DomainError",$Class.$new($$$("StandardError"))),$defs(self,"$checked",(function(method,$a){var args;if(args=$slice(arguments,1),isNaN(args[0])||2==args.length&&isNaN(args[1]))return NaN;var result=Math[method].apply(null,args);return isNaN(result)&&$Kernel.$raise($$("DomainError"),'Numerical argument is out of domain - "'+method+'"'),result}),-2),$defs(self,"$float!",(function(value){try{return $Kernel.$Float(value)}catch($err){if(!Opal.rescue($err,[$$$("ArgumentError")]))throw $err;try{return $Kernel.$raise($type_error(value,$$$("Float")))}finally{Opal.pop_exception()}}})),$defs(self,"$integer!",(function(value){try{return $Kernel.$Integer(value)}catch($err){if(!Opal.rescue($err,[$$$("ArgumentError")]))throw $err;try{return $Kernel.$raise($type_error(value,$$$("Integer")))}finally{Opal.pop_exception()}}})),self.$module_function(),$truthy(void 0!==Math.erf)||Opal.prop(Math,"erf",(function(x){var sign=1;x<0&&(sign=-1);var t=1/(1+.3275911*(x=Math.abs(x)));return sign*(1-((((1.061405429*t-1.453152027)*t+1.421413741)*t-.284496736)*t+.254829592)*t*Math.exp(-x*x))})),$truthy(void 0!==Math.erfc)||Opal.prop(Math,"erfc",(function(x){var z=Math.abs(x),t=1/(.5*z+1),A10=-z*z-1.26551223+t*(t*(t*(t*(t*(t*(t*(t*(.17087277*t-.82215223)+1.48851587)-1.13520398)+.27886807)-.18628806)+.09678418)+.37409196)+1.00002368),a=t*Math.exp(A10);return x<0?2-a:a})),$send(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],(function $Math$3(method){return null==method&&(method=nil),$send(null==$Math$3.$$s?this:$Math$3.$$s,"define_method",[method],(function(x){return null==x&&(x=nil),$$$("Math").$checked(method,$$$("Math")["$float!"](x))}))}),{$$s:self}),$def(self,"$atan2",(function(y,x){return $$$("Math").$checked("atan2",$$$("Math")["$float!"](y),$$$("Math")["$float!"](x))})),$def(self,"$hypot",(function(x,y){return $$$("Math").$checked("hypot",$$$("Math")["$float!"](x),$$$("Math")["$float!"](y))})),$def(self,"$frexp",(function(x){if(x=$$("Math")["$float!"](x),isNaN(x))return[NaN,0];var ex=Math.floor(Math.log(Math.abs(x))/Math.log(2))+1;return[x/Math.pow(2,ex),ex]})),$def(self,"$gamma",(function(n){var i,t,x,value,result,twoN,threeN,fourN,fiveN;n=$$("Math")["$float!"](n);var P=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(n))return NaN;if(0===n&&1/n<0)return-1/0;if(-1!==n&&n!==-1/0||$Kernel.$raise($$("DomainError"),'Numerical argument is out of domain - "gamma"'),$$("Integer")["$==="](n)){if(n<=0)return isFinite(n)?1/0:NaN;if(n>171)return 1/0;for(value=n-2,result=n-1;value>1;)result*=value,value--;return 0==result&&(result=1),result}if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*$$$("Math").$gamma($rb_minus(1,n)));if(n>=171.35)return 1/0;if(n>85)return fiveN=(fourN=(threeN=(twoN=n*n)*n)*n)*n,Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n));for(n-=1,x=P[0],i=1;i<P.length;++i)x+=P[i]/(n+i);return t=n+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x})),$def(self,"$ldexp",(function(mantissa,exponent){return mantissa=$$("Math")["$float!"](mantissa),exponent=$$("Math")["$integer!"](exponent),isNaN(exponent)&&$Kernel.$raise($$$("RangeError"),"float NaN out of range of integer"),mantissa*Math.pow(2,exponent)})),$def(self,"$lgamma",(function(n){return-1==n?[1/0,1]:[Math.log(Math.abs($$$("Math").$gamma(n))),$$$("Math").$gamma(n)<0?-1:1]})),$def(self,"$log",(function(x,base){return $eqeqeq($$$("String"),x)&&$Kernel.$raise($type_error(x,$$$("Float"))),$truthy(null==base)?$$$("Math").$checked("log",$$$("Math")["$float!"](x)):($eqeqeq($$$("String"),base)&&$Kernel.$raise($type_error(base,$$$("Float"))),$rb_divide($$$("Math").$checked("log",$$$("Math")["$float!"](x)),$$$("Math").$checked("log",$$$("Math")["$float!"](base))))}),-2),$def(self,"$log10",(function(x){return $eqeqeq($$$("String"),x)&&$Kernel.$raise($type_error(x,$$$("Float"))),$$$("Math").$checked("log10",$$$("Math")["$float!"](x))})),$def(self,"$log2",(function(x){return $eqeqeq($$$("String"),x)&&$Kernel.$raise($type_error(x,$$$("Float"))),$$$("Math").$checked("log2",$$$("Math")["$float!"](x))})),$def(self,"$tan",(function(x){return x=$$$("Math")["$float!"](x),$truthy(x["$infinite?"]())?$$$($$$("Float"),"NAN"):$$$("Math").$checked("tan",$$$("Math")["$float!"](x))}))}(0,[])},Opal.modules["corelib/complex/base"]=function(Opal){var $module=Opal.module,$truthy=Opal.truthy,$def=Opal.def,$klass=Opal.klass,$nesting=[],nil=Opal.nil;return Opal.add_stubs("new,from_string"),function($base,$parent_nesting){var self=$module("::","Kernel"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$Complex",(function(real,imag){return null==imag&&(imag=nil),$truthy(imag)?$$("Complex").$new(real,imag):$$("Complex").$new(real,0)}),-2)}(0,$nesting),function($base,$super,$parent_nesting){var self=$klass("::",null,"String"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $def(self,"$to_c",(function(){return $$("Complex").$from_string(this)}))}(0,0,$nesting)},Opal.modules["corelib/complex"]=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$eqeqeq=Opal.eqeqeq,$Kernel=Opal.Kernel,$defs=Opal.defs,$rb_times=Opal.rb_times,$def=Opal.def,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$rb_divide=Opal.rb_divide,$eqeq=Opal.eqeq,$to_ary=Opal.to_ary,$rb_gt=Opal.rb_gt,$neqeq=Opal.neqeq,$return_val=Opal.return_val,$const_set=Opal.const_set,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),self.$require("corelib/numeric"),self.$require("corelib/complex/base"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Complex"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;return $proto.real=$proto.imag=nil,$defs(self,"$rect",(function(real,imag){return null==imag&&(imag=0),$eqeqeq($$$("Numeric"),real)&&$truthy(real["$real?"]())&&$eqeqeq($$$("Numeric"),imag)&&$truthy(imag["$real?"]())||$Kernel.$raise($$$("TypeError"),"not a real"),this.$new(real,imag)}),-2),$defs(self,"$polar",(function(r,theta){return null==theta&&(theta=0),$eqeqeq($$$("Numeric"),r)&&$truthy(r["$real?"]())&&$eqeqeq($$$("Numeric"),theta)&&$truthy(theta["$real?"]())||$Kernel.$raise($$$("TypeError"),"not a real"),this.$new($rb_times(r,$$$("Math").$cos(theta)),$rb_times(r,$$$("Math").$sin(theta)))}),-2),self.$attr_reader("real","imag"),$def(self,"$initialize",(function(real,imag){return null==imag&&(imag=0),this.real=real,this.imag=imag,this.$freeze()}),-2),$def(self,"$coerce",(function(other){return $eqeqeq($$$("Complex"),other)?[other,this]:$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?[$$$("Complex").$new(other,0),this]:$Kernel.$raise($$$("TypeError"),other.$class()+" can't be coerced into Complex")})),$def(self,"$==",(function(other){var $ret_or_1=nil;return $eqeqeq($$$("Complex"),other)?$truthy($ret_or_1=this.real["$=="](other.$real()))?this.imag["$=="](other.$imag()):$ret_or_1:$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?$truthy($ret_or_1=this.real["$=="](other))?this.imag["$=="](0):$ret_or_1:other["$=="](this)})),$def(self,"$-@",(function(){return $Kernel.$Complex(this.real["$-@"](),this.imag["$-@"]())})),$def(self,"$+",(function(other){return $eqeqeq($$$("Complex"),other)?$Kernel.$Complex($rb_plus(this.real,other.$real()),$rb_plus(this.imag,other.$imag())):$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?$Kernel.$Complex($rb_plus(this.real,other),this.imag):this.$__coerced__("+",other)})),$def(self,"$-",(function(other){return $eqeqeq($$$("Complex"),other)?$Kernel.$Complex($rb_minus(this.real,other.$real()),$rb_minus(this.imag,other.$imag())):$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?$Kernel.$Complex($rb_minus(this.real,other),this.imag):this.$__coerced__("-",other)})),$def(self,"$*",(function(other){return $eqeqeq($$$("Complex"),other)?$Kernel.$Complex($rb_minus($rb_times(this.real,other.$real()),$rb_times(this.imag,other.$imag())),$rb_plus($rb_times(this.real,other.$imag()),$rb_times(this.imag,other.$real()))):$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?$Kernel.$Complex($rb_times(this.real,other),$rb_times(this.imag,other)):this.$__coerced__("*",other)})),$def(self,"$/",(function(other){return $eqeqeq($$$("Complex"),other)?$eqeqeq($$$("Number"),this.real)&&$truthy(this.real["$nan?"]())||$eqeqeq($$$("Number"),this.imag)&&$truthy(this.imag["$nan?"]())||$eqeqeq($$$("Number"),other.$real())&&$truthy(other.$real()["$nan?"]())||$eqeqeq($$$("Number"),other.$imag())&&$truthy(other.$imag()["$nan?"]())?$$$("Complex").$new($$$($$$("Float"),"NAN"),$$$($$$("Float"),"NAN")):$rb_divide($rb_times(this,other.$conj()),other.$abs2()):$eqeqeq($$$("Numeric"),other)&&$truthy(other["$real?"]())?$Kernel.$Complex(this.real.$quo(other),this.imag.$quo(other)):this.$__coerced__("/",other)})),$def(self,"$**",(function(other){var $a,$b,r=nil,theta=nil,ore=nil,oim=nil,nr=nil,ntheta=nil,x=nil,z=nil,n=nil,div=nil,mod=nil;if($eqeq(other,0))return $$$("Complex").$new(1,0);if($eqeqeq($$$("Complex"),other))return $b=this.$polar(),r=null==($a=$to_ary($b))[0]?nil:$a[0],theta=null==$a[1]?nil:$a[1],ore=other.$real(),oim=other.$imag(),nr=$$$("Math").$exp($rb_minus($rb_times(ore,$$$("Math").$log(r)),$rb_times(oim,theta))),ntheta=$rb_plus($rb_times(theta,ore),$rb_times(oim,$$$("Math").$log(r))),$$$("Complex").$polar(nr,ntheta);if($eqeqeq($$$("Integer"),other)){if($truthy($rb_gt(other,0))){for(z=x=this,n=$rb_minus(other,1);$neqeq(n,0);){for($b=n.$divmod(2),div=null==($a=$to_ary($b))[0]?nil:$a[0],mod=null==$a[1]?nil:$a[1];$eqeq(mod,0);)x=$Kernel.$Complex($rb_minus($rb_times(x.$real(),x.$real()),$rb_times(x.$imag(),x.$imag())),$rb_times($rb_times(2,x.$real()),x.$imag())),$b=(n=div).$divmod(2),div=null==($a=$to_ary($b))[0]?nil:$a[0],mod=null==$a[1]?nil:$a[1];z=$rb_times(z,x),n=$rb_minus(n,1)}return z}return $rb_divide($$$("Rational").$new(1,1),this)["$**"](other["$-@"]())}return $eqeqeq($$$("Float"),other)||$eqeqeq($$$("Rational"),other)?($b=this.$polar(),r=null==($a=$to_ary($b))[0]?nil:$a[0],theta=null==$a[1]?nil:$a[1],$$$("Complex").$polar(r["$**"](other),$rb_times(theta,other))):this.$__coerced__("**",other)})),$def(self,"$abs",(function(){return $$$("Math").$hypot(this.real,this.imag)})),$def(self,"$abs2",(function(){return $rb_plus($rb_times(this.real,this.real),$rb_times(this.imag,this.imag))})),$def(self,"$angle",(function(){return $$$("Math").$atan2(this.imag,this.real)})),$def(self,"$conj",(function(){return $Kernel.$Complex(this.real,this.imag["$-@"]())})),$def(self,"$denominator",(function(){return this.real.$denominator().$lcm(this.imag.$denominator())})),$def(self,"$eql?",(function(other){var $ret_or_1,$ret_or_2;return $truthy($ret_or_1=$truthy($ret_or_2=$$("Complex")["$==="](other))?this.real.$class()["$=="](this.imag.$class()):$ret_or_2)?this["$=="](other):$ret_or_1})),$def(self,"$fdiv",(function(other){return $eqeqeq($$$("Numeric"),other)||$Kernel.$raise($$$("TypeError"),other.$class()+" can't be coerced into Complex"),$rb_divide(this,other)})),$def(self,"$finite?",(function(){var $ret_or_1;return $truthy($ret_or_1=this.real["$finite?"]())?this.imag["$finite?"]():$ret_or_1})),$def(self,"$hash",(function(){return"Complex:"+this.real+":"+this.imag})),$def(self,"$infinite?",(function(){var $ret_or_1;return $truthy($ret_or_1=this.real["$infinite?"]())?$ret_or_1:this.imag["$infinite?"]()})),$def(self,"$inspect",(function(){return"("+this+")"})),$def(self,"$numerator",(function(){var d;return d=this.$denominator(),$Kernel.$Complex($rb_times(this.real.$numerator(),$rb_divide(d,this.real.$denominator())),$rb_times(this.imag.$numerator(),$rb_divide(d,this.imag.$denominator())))})),$def(self,"$polar",(function(){return[this.$abs(),this.$arg()]})),$def(self,"$rationalize",(function(eps){var self=this;return arguments.length>1&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),$neqeq(self.imag,0)&&$Kernel.$raise($$$("RangeError"),"can't convert "+self+" into Rational"),self.$real().$rationalize(eps)}),-1),$def(self,"$real?",$return_val(!1)),$def(self,"$rect",(function(){return[this.real,this.imag]})),$def(self,"$to_f",(function(){return $eqeq(this.imag,0)||$Kernel.$raise($$$("RangeError"),"can't convert "+this+" into Float"),this.real.$to_f()})),$def(self,"$to_i",(function(){return $eqeq(this.imag,0)||$Kernel.$raise($$$("RangeError"),"can't convert "+this+" into Integer"),this.real.$to_i()})),$def(self,"$to_r",(function(){return $eqeq(this.imag,0)||$Kernel.$raise($$$("RangeError"),"can't convert "+this+" into Rational"),this.real.$to_r()})),$def(self,"$to_s",(function(){var result=nil;return result=this.real.$inspect(),result=$rb_plus(result,$eqeqeq($$$("Number"),this.imag)&&$truthy(this.imag["$nan?"]())||$truthy(this.imag["$positive?"]())||$truthy(this.imag["$zero?"]())?"+":"-"),result=$rb_plus(result,this.imag.$abs().$inspect()),$eqeqeq($$$("Number"),this.imag)&&($truthy(this.imag["$nan?"]())||$truthy(this.imag["$infinite?"]()))&&(result=$rb_plus(result,"*")),$rb_plus(result,"i")})),$const_set($nesting[0],"I",self.$new(0,1)),$defs(self,"$from_string",(function(str){var real,imag,re=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;str.match(re);function isFloat(){return re.test(str)}function cutFloat(){var number=str.match(re)[0];return str=str.slice(number.length),number.replace(/_/g,"")}function cutNumber(){if(isFloat()){var numerator=parseFloat(cutFloat());if("/"===str[0]){if(str=str.slice(1),isFloat()){var denominator=parseFloat(cutFloat());return $Kernel.$Rational(numerator,denominator)}return str="/"+str,numerator}return numerator}return null}return(real=cutNumber())?(imag=cutNumber())?$Kernel.$Complex(real,imag):"i"===str[0]?$Kernel.$Complex(0,real):$Kernel.$Complex(real,0):"i"===str[0]?$Kernel.$Complex(0,1):"-"===str[0]&&"i"===str[1]?$Kernel.$Complex(0,-1):"+"===str[0]&&"i"===str[1]?$Kernel.$Complex(0,1):$Kernel.$Complex(0,0)})),function(self,$parent_nesting){$alias(self,"rectangular","rect")}(Opal.get_singleton_class(self)),$alias(self,"arg","angle"),$alias(self,"conjugate","conj"),$alias(self,"divide","/"),$alias(self,"imaginary","imag"),$alias(self,"magnitude","abs"),$alias(self,"phase","arg"),$alias(self,"quo","/"),$alias(self,"rectangular","rect"),Opal.udef(self,"$negative?"),Opal.udef(self,"$positive?"),Opal.udef(self,"$step"),nil}(0,$$$("Numeric"),[])},Opal.modules["corelib/rational/base"]=function(Opal){var self,$module=Opal.module,$def=Opal.def,$klass=Opal.klass,$$$=(Opal.nil,Opal.$$$);return Opal.add_stubs("convert,from_string"),self=$module("::","Kernel"),$def(self,"$Rational",(function(numerator,denominator){return null==denominator&&(denominator=1),$$$("Rational").$convert(numerator,denominator)}),-2),function($base,$super){var self=$klass("::",null,"String");return $def(self,"$to_r",(function(){return $$$("Rational").$from_string(this)}))}()},Opal.modules["corelib/rational"]=function(Opal){var $klass=Opal.klass,$eqeq=Opal.eqeq,$Kernel=Opal.Kernel,$truthy=Opal.truthy,$rb_lt=Opal.rb_lt,$rb_divide=Opal.rb_divide,$defs=Opal.defs,$eqeqeq=Opal.eqeqeq,$not=Opal.not,$Opal=Opal.Opal,$def=Opal.def,$return_ivar=Opal.return_ivar,$rb_minus=Opal.rb_minus,$rb_times=Opal.rb_times,$rb_plus=Opal.rb_plus,$rb_gt=Opal.rb_gt,$rb_le=Opal.rb_le,$return_self=Opal.return_self,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,<=,truncate,send"),self.$require("corelib/numeric"),self.$require("corelib/rational/base"),function($base,$super){var self=$klass("::",$super,"Rational"),$proto=self.$$prototype;return $proto.num=$proto.den=nil,$defs(self,"$reduce",(function(num,den){var gcd;if(num=num.$to_i(),den=den.$to_i(),$eqeq(den,0))$Kernel.$raise($$$("ZeroDivisionError"),"divided by 0");else if($truthy($rb_lt(den,0)))num=num["$-@"](),den=den["$-@"]();else if($eqeq(den,1))return this.$new(num,den);return gcd=num.$gcd(den),this.$new($rb_divide(num,gcd),$rb_divide(den,gcd))})),$defs(self,"$convert",(function(num,den){return($truthy(num["$nil?"]())||$truthy(den["$nil?"]()))&&$Kernel.$raise($$$("TypeError"),"cannot convert nil into Rational"),$eqeqeq($$$("Integer"),num)&&$eqeqeq($$$("Integer"),den)?this.$reduce(num,den):(($eqeqeq($$$("Float"),num)||$eqeqeq($$$("String"),num)||$eqeqeq($$$("Complex"),num))&&(num=num.$to_r()),($eqeqeq($$$("Float"),den)||$eqeqeq($$$("String"),den)||$eqeqeq($$$("Complex"),den))&&(den=den.$to_r()),$truthy(den["$equal?"](1))&&$not($$$("Integer")["$==="](num))?$Opal["$coerce_to!"](num,$$$("Rational"),"to_r"):$eqeqeq($$$("Numeric"),num)&&$eqeqeq($$$("Numeric"),den)?$rb_divide(num,den):this.$reduce(num,den))})),$def(self,"$initialize",(function(num,den){return this.num=num,this.den=den,this.$freeze()})),$def(self,"$numerator",$return_ivar("num")),$def(self,"$denominator",$return_ivar("den")),$def(self,"$coerce",(function(other){var $ret_or_1;return $eqeqeq($$$("Rational"),$ret_or_1=other)?[other,this]:$eqeqeq($$$("Integer"),$ret_or_1)?[other.$to_r(),this]:$eqeqeq($$$("Float"),$ret_or_1)?[other,this.$to_f()]:nil})),$def(self,"$==",(function(other){var $ret_or_1,$ret_or_2=nil;return $eqeqeq($$$("Rational"),$ret_or_1=other)?$truthy($ret_or_2=this.num["$=="](other.$numerator()))?this.den["$=="](other.$denominator()):$ret_or_2:$eqeqeq($$$("Integer"),$ret_or_1)?$truthy($ret_or_2=this.num["$=="](other))?this.den["$=="](1):$ret_or_2:$eqeqeq($$$("Float"),$ret_or_1)?this.$to_f()["$=="](other):other["$=="](this)})),$def(self,"$<=>",(function(other){var $ret_or_1;return $eqeqeq($$$("Rational"),$ret_or_1=other)?$rb_minus($rb_times(this.num,other.$denominator()),$rb_times(this.den,other.$numerator()))["$<=>"](0):$eqeqeq($$$("Integer"),$ret_or_1)?$rb_minus(this.num,$rb_times(this.den,other))["$<=>"](0):$eqeqeq($$$("Float"),$ret_or_1)?this.$to_f()["$<=>"](other):this.$__coerced__("<=>",other)})),$def(self,"$+",(function(other){var $ret_or_1,num=nil,den=nil;return $eqeqeq($$$("Rational"),$ret_or_1=other)?(num=$rb_plus($rb_times(this.num,other.$denominator()),$rb_times(this.den,other.$numerator())),den=$rb_times(this.den,other.$denominator()),$Kernel.$Rational(num,den)):$eqeqeq($$$("Integer"),$ret_or_1)?$Kernel.$Rational($rb_plus(this.num,$rb_times(other,this.den)),this.den):$eqeqeq($$$("Float"),$ret_or_1)?$rb_plus(this.$to_f(),other):this.$__coerced__("+",other)})),$def(self,"$-",(function(other){var $ret_or_1,num=nil,den=nil;return $eqeqeq($$$("Rational"),$ret_or_1=other)?(num=$rb_minus($rb_times(this.num,other.$denominator()),$rb_times(this.den,other.$numerator())),den=$rb_times(this.den,other.$denominator()),$Kernel.$Rational(num,den)):$eqeqeq($$$("Integer"),$ret_or_1)?$Kernel.$Rational($rb_minus(this.num,$rb_times(other,this.den)),this.den):$eqeqeq($$$("Float"),$ret_or_1)?$rb_minus(this.$to_f(),other):this.$__coerced__("-",other)})),$def(self,"$*",(function(other){var $ret_or_1,num=nil,den=nil;return $eqeqeq($$$("Rational"),$ret_or_1=other)?(num=$rb_times(this.num,other.$numerator()),den=$rb_times(this.den,other.$denominator()),$Kernel.$Rational(num,den)):$eqeqeq($$$("Integer"),$ret_or_1)?$Kernel.$Rational($rb_times(this.num,other),this.den):$eqeqeq($$$("Float"),$ret_or_1)?$rb_times(this.$to_f(),other):this.$__coerced__("*",other)})),$def(self,"$/",(function(other){var $ret_or_1,num=nil,den=nil;return $eqeqeq($$$("Rational"),$ret_or_1=other)?(num=$rb_times(this.num,other.$denominator()),den=$rb_times(this.den,other.$numerator()),$Kernel.$Rational(num,den)):$eqeqeq($$$("Integer"),$ret_or_1)?$eqeq(other,0)?$rb_divide(this.$to_f(),0):$Kernel.$Rational(this.num,$rb_times(this.den,other)):$eqeqeq($$$("Float"),$ret_or_1)?$rb_divide(this.$to_f(),other):this.$__coerced__("/",other)})),$def(self,"$**",(function(other){var $ret_or_1;return $eqeqeq($$$("Integer"),$ret_or_1=other)?$eqeq(this,0)&&$truthy($rb_lt(other,0))?$$$($$$("Float"),"INFINITY"):$truthy($rb_gt(other,0))?$Kernel.$Rational(this.num["$**"](other),this.den["$**"](other)):$truthy($rb_lt(other,0))?$Kernel.$Rational(this.den["$**"](other["$-@"]()),this.num["$**"](other["$-@"]())):$Kernel.$Rational(1,1):$eqeqeq($$$("Float"),$ret_or_1)?this.$to_f()["$**"](other):$eqeqeq($$$("Rational"),$ret_or_1)?$eqeq(other,0)?$Kernel.$Rational(1,1):$eqeq(other.$denominator(),1)?$truthy($rb_lt(other,0))?$Kernel.$Rational(this.den["$**"](other.$numerator().$abs()),this.num["$**"](other.$numerator().$abs())):$Kernel.$Rational(this.num["$**"](other.$numerator()),this.den["$**"](other.$numerator())):$eqeq(this,0)&&$truthy($rb_lt(other,0))?$Kernel.$raise($$$("ZeroDivisionError"),"divided by 0"):this.$to_f()["$**"](other):this.$__coerced__("**",other)})),$def(self,"$abs",(function(){return $Kernel.$Rational(this.num.$abs(),this.den.$abs())})),$def(self,"$ceil",(function(precision){return null==precision&&(precision=0),$eqeq(precision,0)?$rb_divide(this.num["$-@"](),this.den)["$-@"]().$ceil():this.$with_precision("ceil",precision)}),-1),$def(self,"$floor",(function(precision){return null==precision&&(precision=0),$eqeq(precision,0)?$rb_divide(this.num["$-@"](),this.den)["$-@"]().$floor():this.$with_precision("floor",precision)}),-1),$def(self,"$hash",(function(){return"Rational:"+this.num+":"+this.den})),$def(self,"$inspect",(function(){return"("+this+")"})),$def(self,"$rationalize",(function(eps){var self=this;if(arguments.length>1&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==eps)return self;for(var p2,q2,c,k,t,e=eps.$abs(),a=$rb_minus(self,e),b=$rb_plus(self,e),p0=0,p1=1,q0=1,q1=0;c=a.$ceil(),!$rb_le(c,b);)p2=(k=c-1)*p1+p0,q2=k*q1+q0,t=$rb_divide(1,$rb_minus(b,k)),b=$rb_divide(1,$rb_minus(a,k)),a=t,p0=p1,q0=q1,p1=p2,q1=q2;return $Kernel.$Rational(c*p1+p0,c*q1+q0)}),-1),$def(self,"$round",(function(precision){var num,den,approx=nil;return null==precision&&(precision=0),$eqeq(precision,0)?$eqeq(this.num,0)?0:$eqeq(this.den,1)?this.num:(num=$rb_plus($rb_times(this.num.$abs(),2),this.den),den=$rb_times(this.den,2),approx=$rb_divide(num,den).$truncate(),$truthy($rb_lt(this.num,0))?approx["$-@"]():approx):this.$with_precision("round",precision)}),-1),$def(self,"$to_f",(function(){return $rb_divide(this.num,this.den)})),$def(self,"$to_i",(function(){return this.$truncate()})),$def(self,"$to_r",$return_self),$def(self,"$to_s",(function(){return this.num+"/"+this.den})),$def(self,"$truncate",(function(precision){return null==precision&&(precision=0),$eqeq(precision,0)?$truthy($rb_lt(this.num,0))?this.$ceil():this.$floor():this.$with_precision("truncate",precision)}),-1),$def(self,"$with_precision",(function(method,precision){var p,s=nil;return $eqeqeq($$$("Integer"),precision)||$Kernel.$raise($$$("TypeError"),"not an Integer"),p=10["$**"](precision),s=$rb_times(this,p),$truthy($rb_lt(precision,1))?$rb_divide(s.$send(method),p).$to_i():$Kernel.$Rational(s.$send(method),p)})),$defs(self,"$from_string",(function(string){var numerator,denominator,str=string.trimLeft(),re=/^[+-]?[\d_]+(\.[\d_]+)?/;str.match(re);function isFloat(){return re.test(str)}function cutFloat(){var number=str.match(re)[0];return str=str.slice(number.length),number.replace(/_/g,"")}return isFloat()?(numerator=parseFloat(cutFloat()),"/"===str[0]?(str=str.slice(1),isFloat()?(denominator=parseFloat(cutFloat()),$Kernel.$Rational(numerator,denominator)):$Kernel.$Rational(numerator,1)):$Kernel.$Rational(numerator,1)):$Kernel.$Rational(0,1)})),$alias(self,"divide","/"),$alias(self,"quo","/")}(0,$$$("Numeric"))},Opal.modules["corelib/time"]=function(Opal){var $slice=Opal.slice,$deny_frozen_access=Opal.deny_frozen_access,$klass=Opal.klass,$Kernel=Opal.Kernel,$Opal=Opal.Opal,$defs=Opal.defs,$eqeqeq=Opal.eqeqeq,$def=Opal.def,$truthy=Opal.truthy,$rb_gt=Opal.rb_gt,$rb_lt=Opal.rb_lt,$send=Opal.send,$rb_plus=Opal.rb_plus,$rb_divide=Opal.rb_divide,$rb_minus=Opal.rb_minus,$range=Opal.range,$neqeq=Opal.neqeq,$rb_le=Opal.rb_le,$eqeq=Opal.eqeq,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),self.$require("corelib/comparable"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"Time"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);self.$include($$$("Comparable"));var days_of_week=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],short_days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],short_months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long_months=["January","February","March","April","May","June","July","August","September","October","November","December"];function time_params(year,month,day,hour,min,sec){if(year=year.$$is_string?parseInt(year,10):$Opal["$coerce_to!"](year,$$$("Integer"),"to_int"),month===nil)month=1;else if(!month.$$is_number)if(month["$respond_to?"]("to_str"))switch((month=month.$to_str()).toLowerCase()){case"jan":month=1;break;case"feb":month=2;break;case"mar":month=3;break;case"apr":month=4;break;case"may":month=5;break;case"jun":month=6;break;case"jul":month=7;break;case"aug":month=8;break;case"sep":month=9;break;case"oct":month=10;break;case"nov":month=11;break;case"dec":month=12;break;default:month=month.$to_i()}else month=$Opal["$coerce_to!"](month,$$$("Integer"),"to_int");return(month<1||month>12)&&$Kernel.$raise($$$("ArgumentError"),"month out of range: "+month),month-=1,((day=day===nil?1:day.$$is_string?parseInt(day,10):$Opal["$coerce_to!"](day,$$$("Integer"),"to_int"))<1||day>31)&&$Kernel.$raise($$$("ArgumentError"),"day out of range: "+day),((hour=hour===nil?0:hour.$$is_string?parseInt(hour,10):$Opal["$coerce_to!"](hour,$$$("Integer"),"to_int"))<0||hour>24)&&$Kernel.$raise($$$("ArgumentError"),"hour out of range: "+hour),((min=min===nil?0:min.$$is_string?parseInt(min,10):$Opal["$coerce_to!"](min,$$$("Integer"),"to_int"))<0||min>59)&&$Kernel.$raise($$$("ArgumentError"),"min out of range: "+min),sec===nil?sec=0:sec.$$is_number||(sec=sec.$$is_string?parseInt(sec,10):$Opal["$coerce_to!"](sec,$$$("Integer"),"to_int")),(sec<0||sec>60)&&$Kernel.$raise($$$("ArgumentError"),"sec out of range: "+sec),[year,month,day,hour,min,sec]}return $defs(self,"$at",(function(seconds,frac){var result;return $$$("Time")["$==="](seconds)?(void 0!==frac&&$Kernel.$raise($$$("TypeError"),"can't convert Time into an exact number"),(result=new Date(seconds.getTime())).timezone=seconds.timezone,result):(seconds.$$is_number||(seconds=$Opal["$coerce_to!"](seconds,$$$("Integer"),"to_int")),void 0===frac?new Date(1e3*seconds):(frac.$$is_number||(frac=$Opal["$coerce_to!"](frac,$$$("Integer"),"to_int")),new Date(1e3*seconds+frac/1e3)))}),-2),$defs(self,"$new",(function(year,month,day,hour,min,sec,utc_offset){var args,result,timezone,utc_date;return null==month&&(month=nil),null==day&&(day=nil),null==hour&&(hour=nil),null==min&&(min=nil),null==sec&&(sec=nil),null==utc_offset&&(utc_offset=nil),void 0===year?new Date:(year=(args=time_params(year,month,day,hour,min,sec))[0],month=args[1],day=args[2],hour=args[3],min=args[4],sec=args[5],utc_offset===nil?(result=new Date(year,month,day,hour,min,0,1e3*sec),year<100&&result.setFullYear(year),result):(timezone=this.$_parse_offset(utc_offset),utc_date=new Date(Date.UTC(year,month,day,hour,min,0,1e3*sec)),year<100&&utc_date.setUTCFullYear(year),(result=new Date(utc_date.getTime()-36e5*timezone)).timezone=timezone,result))}),-1),$defs(self,"$_parse_offset",(function(utc_offset){var timezone;if(utc_offset.$$is_string)if("UTC"==utc_offset)timezone=0;else if(/^[+-]\d\d:[0-5]\d$/.test(utc_offset)){timezone=("-"==utc_offset[0]?-1:1)*(+(utc_offset[1]+utc_offset[2])+ +(utc_offset[4]+utc_offset[5])/60)}else $Kernel.$raise($$$("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+utc_offset);else utc_offset.$$is_number?timezone=utc_offset/3600:$Kernel.$raise($$$("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return timezone})),$defs(self,"$local",(function(year,month,day,hour,min,sec,millisecond,_dummy1,_dummy2,_dummy3){var args,result;return null==month&&(month=nil),null==day&&(day=nil),null==hour&&(hour=nil),null==min&&(min=nil),null==sec&&(sec=nil),null==millisecond&&(millisecond=nil),null==_dummy1&&(_dummy1=nil),null==_dummy2&&(_dummy2=nil),null==_dummy3&&(_dummy3=nil),10===arguments.length&&(year=(args=$slice(arguments))[5],month=args[4],day=args[3],hour=args[2],min=args[1],sec=args[0]),year=(args=time_params(year,month,day,hour,min,sec))[0],month=args[1],day=args[2],hour=args[3],min=args[4],sec=args[5],result=new Date(year,month,day,hour,min,0,1e3*sec),year<100&&result.setFullYear(year),result}),-2),$defs(self,"$gm",(function(year,month,day,hour,min,sec,millisecond,_dummy1,_dummy2,_dummy3){var args,result;return null==month&&(month=nil),null==day&&(day=nil),null==hour&&(hour=nil),null==min&&(min=nil),null==sec&&(sec=nil),null==millisecond&&(millisecond=nil),null==_dummy1&&(_dummy1=nil),null==_dummy2&&(_dummy2=nil),null==_dummy3&&(_dummy3=nil),10===arguments.length&&(year=(args=$slice(arguments))[5],month=args[4],day=args[3],hour=args[2],min=args[1],sec=args[0]),year=(args=time_params(year,month,day,hour,min,sec))[0],month=args[1],day=args[2],hour=args[3],min=args[4],sec=args[5],result=new Date(Date.UTC(year,month,day,hour,min,0,1e3*sec)),year<100&&result.setUTCFullYear(year),result.timezone=0,result}),-2),$defs(self,"$now",(function(){return this.$new()})),$def(self,"$+",(function(other){$eqeqeq($$$("Time"),other)&&$Kernel.$raise($$$("TypeError"),"time + time?"),other.$$is_number||(other=$Opal["$coerce_to!"](other,$$$("Integer"),"to_int"));var result=new Date(this.getTime()+1e3*other);return result.timezone=this.timezone,result})),$def(self,"$-",(function(other){if($eqeqeq($$$("Time"),other))return(this.getTime()-other.getTime())/1e3;other.$$is_number||(other=$Opal["$coerce_to!"](other,$$$("Integer"),"to_int"));var result=new Date(this.getTime()-1e3*other);return result.timezone=this.timezone,result})),$def(self,"$<=>",(function(other){var r=nil;return $eqeqeq($$$("Time"),other)?this.$to_f()["$<=>"](other.$to_f()):(r=other["$<=>"](this),$truthy(r["$nil?"]())?nil:$truthy($rb_gt(r,0))?-1:$truthy($rb_lt(r,0))?1:0)})),$def(self,"$==",(function(other){var $ret_or_1;return $truthy($ret_or_1=$$$("Time")["$==="](other))?this.$to_f()===other.$to_f():$ret_or_1})),$def(self,"$asctime",(function(){return this.$strftime("%a %b %e %H:%M:%S %Y")})),$send([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],(function $Time$6(method,getter,utcgetter,difference){var self=null==$Time$6.$$s?this:$Time$6.$$s;return null==method&&(method=nil),null==getter&&(getter=nil),null==utcgetter&&(utcgetter=nil),null==difference&&(difference=0),$send(self,"define_method",[method],(function $$7(){var self=null==$$7.$$s?this:$$7.$$s;return difference+(null!=self.timezone?new Date(self.getTime()+36e5*self.timezone)[utcgetter]():self[getter]())}),{$$s:self})}),{$$arity:-4,$$s:self}),$def(self,"$yday",(function(){var start_of_year,start_of_day;return start_of_year=$$("Time").$new(this.$year()).$to_i(),start_of_day=$$("Time").$new(this.$year(),this.$month(),this.$day()).$to_i(),86400,$rb_plus($rb_divide($rb_minus(start_of_day,start_of_year),86400).$round(),1)})),$def(self,"$isdst",(function(){var jan=new Date(this.getFullYear(),0,1),jul=new Date(this.getFullYear(),6,1);return this.getTimezoneOffset()<Math.max(jan.getTimezoneOffset(),jul.getTimezoneOffset())})),$def(self,"$dup",(function(){var copy=nil;return(copy=new Date(this.getTime())).$copy_instance_variables(this),copy.$initialize_dup(this),copy})),$def(self,"$eql?",(function(other){var $ret_or_1;return $truthy($ret_or_1=other["$is_a?"]($$$("Time")))?this["$<=>"](other)["$zero?"]():$ret_or_1})),$send([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],(function $Time$9(method,weekday){var self=null==$Time$9.$$s?this:$Time$9.$$s;return null==method&&(method=nil),null==weekday&&(weekday=nil),$send(self,"define_method",[method],(function $$10(){return(null==$$10.$$s?this:$$10.$$s).$wday()===weekday}),{$$s:self})}),{$$s:self}),$def(self,"$hash",(function(){return"Time:"+this.getTime()})),$def(self,"$inspect",(function(){return $truthy(this["$utc?"]())?this.$strftime("%Y-%m-%d %H:%M:%S UTC"):this.$strftime("%Y-%m-%d %H:%M:%S %z")})),$def(self,"$succ",(function(){var result=new Date(this.getTime()+1e3);return result.timezone=this.timezone,result})),$def(self,"$usec",(function(){return 1e3*this.getMilliseconds()})),$def(self,"$zone",(function(){if(0===this.timezone)return"UTC";if(null!=this.timezone)return nil;var result,string=this.toString();return"GMT"==(result=-1==string.indexOf("(")?string.match(/[A-Z]{3,4}/)[0]:string.match(/\((.+)\)(?:\s|$)/)[1])&&/(GMT\W*\d{4})/.test(string)?RegExp.$1:result})),$def(self,"$getgm",(function(){var result=new Date(this.getTime());return result.timezone=0,result})),$def(self,"$gmtime",(function(){return 0!==this.timezone&&($deny_frozen_access(this),this.timezone=0),this})),$def(self,"$gmt?",(function(){return 0===this.timezone})),$def(self,"$gmt_offset",(function(){return null!=this.timezone?60*this.timezone:60*-this.getTimezoneOffset()})),$def(self,"$strftime",(function(format){var self=this;return format.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,(function(full,flags,width,_,conv){var jd,c,s,result="",zero=-1!==flags.indexOf("0"),pad=-1===flags.indexOf("-"),blank=-1!==flags.indexOf("_"),upcase=-1!==flags.indexOf("^"),invert=-1!==flags.indexOf("#"),colons=(flags.match(":")||[]).length;switch(width=parseInt(width,10),zero&&blank&&(flags.indexOf("0")<flags.indexOf("_")?zero=!1:blank=!1),conv){case"Y":result+=self.$year();break;case"C":zero=!blank,result+=Math.round(self.$year()/100);break;case"y":zero=!blank,result+=self.$year()%100;break;case"m":zero=!blank,result+=self.$mon();break;case"B":result+=long_months[self.$mon()-1];break;case"b":case"h":blank=!zero,result+=short_months[self.$mon()-1];break;case"d":zero=!blank,result+=self.$day();break;case"e":blank=!zero,result+=self.$day();break;case"j":zero=!blank,width=isNaN(width)?3:width,result+=self.$yday();break;case"H":zero=!blank,result+=self.$hour();break;case"k":blank=!zero,result+=self.$hour();break;case"I":zero=!blank,result+=self.$hour()%12||12;break;case"l":blank=!zero,result+=self.$hour()%12||12;break;case"P":result+=self.$hour()>=12?"pm":"am";break;case"p":result+=self.$hour()>=12?"PM":"AM";break;case"M":zero=!blank,result+=self.$min();break;case"S":zero=!blank,result+=self.$sec();break;case"L":zero=!blank,width=isNaN(width)?3:width,result+=self.getMilliseconds();break;case"N":width=isNaN(width)?9:width,result=(result+=self.getMilliseconds().toString().$rjust(3,"0")).$ljust(width,"0");break;case"z":var offset=null==self.timezone?self.getTimezoneOffset():60*-self.timezone,hours=Math.floor(Math.abs(offset)/60),minutes=Math.abs(offset)%60;result+=offset<0?"+":"-",result+=hours<10?"0":"",result+=hours,colons>0&&(result+=":"),result+=minutes<10?"0":"",result+=minutes,colons>1&&(result+=":00");break;case"Z":result+=self.$zone();break;case"A":result+=days_of_week[self.$wday()];break;case"a":result+=short_days[self.$wday()];break;case"u":result+=self.$wday()+1;break;case"w":result+=self.$wday();break;case"V":result+=self.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":result+=self.$cweek_cyear()["$[]"](1);break;case"g":result+=self.$cweek_cyear()["$[]"](1)["$[]"]($range(-2,-1,!1));break;case"s":result+=self.$to_i();break;case"n":result+="\n";break;case"t":result+="\t";break;case"%":result+="%";break;case"c":result+=self.$strftime("%a %b %e %T %Y");break;case"D":case"x":result+=self.$strftime("%m/%d/%y");break;case"F":result+=self.$strftime("%Y-%m-%d");break;case"v":result+=self.$strftime("%e-%^b-%4Y");break;case"r":result+=self.$strftime("%I:%M:%S %p");break;case"R":result+=self.$strftime("%H:%M");break;case"T":case"X":result+=self.$strftime("%H:%M:%S");break;case"J":if((jd=self.$to_date().$jd())<2405160){result+=self.$strftime("%Y-%m-%d");break}jd<2419614?(c="M",s=1867):jd<2424875?(c="T",s=1911):jd<2447535?(c="S",s=1925):jd<2458605?(c="H",s=1988):(c="R",s=2018),result+=self.$format("%c%02d",c,$rb_minus(self.$year(),s)),result+=self.$strftime("-%m-%d");break;default:return full}return upcase&&(result=result.toUpperCase()),invert&&(result=result.replace(/[A-Z]/,(function(c){c.toLowerCase()})).replace(/[a-z]/,(function(c){c.toUpperCase()}))),pad&&(zero||blank)&&(result=result.$rjust(isNaN(width)?2:width,blank?" ":"0")),result}))})),$def(self,"$to_a",(function(){return[this.$sec(),this.$min(),this.$hour(),this.$day(),this.$month(),this.$year(),this.$wday(),this.$yday(),this.$isdst(),this.$zone()]})),$def(self,"$to_f",(function(){return this.getTime()/1e3})),$def(self,"$to_i",(function(){return parseInt(this.getTime()/1e3,10)})),$def(self,"$cweek_cyear",(function(){var jan01_wday,year=nil,offset=nil,week=nil,dec31_wday=nil;return jan01_wday=$$$("Time").$new(this.$year(),1,1).$wday(),0,year=this.$year(),$truthy($rb_le(jan01_wday,4))&&$neqeq(jan01_wday,0)?offset=$rb_minus(jan01_wday,1):(offset=$rb_minus($rb_minus(jan01_wday,7),1),$eqeq(offset,-8)&&(offset=-1)),week=$rb_divide($rb_plus(this.$yday(),offset),7).$ceil(),$truthy($rb_le(week,0))?$$$("Time").$new($rb_minus(this.$year(),1),12,31).$cweek_cyear():($eqeq(week,53)&&(dec31_wday=$$$("Time").$new(this.$year(),12,31).$wday(),$truthy($rb_le(dec31_wday,3))&&$neqeq(dec31_wday,0)&&(week=1,year=$rb_plus(year,1))),[week,year])})),function(self,$parent_nesting){$alias(self,"mktime","local"),$alias(self,"utc","gm")}(Opal.get_singleton_class(self)),$alias(self,"ctime","asctime"),$alias(self,"dst?","isdst"),$alias(self,"getutc","getgm"),$alias(self,"gmtoff","gmt_offset"),$alias(self,"mday","day"),$alias(self,"month","mon"),$alias(self,"to_s","inspect"),$alias(self,"tv_sec","to_i"),$alias(self,"tv_usec","usec"),$alias(self,"utc","gmtime"),$alias(self,"utc?","gmt?"),$alias(self,"utc_offset","gmt_offset")}(0,Date,[])},Opal.modules["corelib/struct"]=function(Opal){var $klass=Opal.klass,$slice=Opal.slice,$extract_kwargs=Opal.extract_kwargs,$ensure_kwargs=Opal.ensure_kwargs,$truthy=Opal.truthy,$neqeq=Opal.neqeq,$eqeq=Opal.eqeq,$Opal=Opal.Opal,$send=Opal.send,$Class=Opal.Class,$to_a=Opal.to_a,$def=Opal.def,$defs=Opal.defs,$Kernel=Opal.Kernel,$hash2=Opal.hash2,$rb_gt=Opal.rb_gt,$rb_minus=Opal.rb_minus,$eqeqeq=Opal.eqeqeq,$rb_lt=Opal.rb_lt,$rb_ge=Opal.rb_ge,$rb_plus=Opal.rb_plus,$alias=Opal.alias,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,args,each_with_object,flatten,to_a,respond_to?,dig"),self.$require("corelib/enumerable"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Struct"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);self.$include($$$("Enumerable")),$defs(self,"$new",(function $Struct_new$1(const_name,$a,$b){var $post_args,$kwargs,args,keyword_init,block=$Struct_new$1.$$p||nil,self=this,klass=nil;if($Struct_new$1.$$p=null,$post_args=$slice(arguments,1),$kwargs=$extract_kwargs($post_args),$kwargs=$ensure_kwargs($kwargs),args=$post_args,null==(keyword_init=$kwargs.$$smap.keyword_init)&&(keyword_init=!1),$truthy(const_name))if($eqeq(const_name.$class(),$$$("String"))&&$neqeq(const_name["$[]"](0).$upcase(),const_name["$[]"](0)))args.$unshift(const_name),const_name=nil;else try{const_name=$Opal["$const_name!"](const_name)}catch($err){if(!Opal.rescue($err,[$$$("TypeError"),$$$("NameError")]))throw $err;try{args.$unshift(const_name),const_name=nil}finally{Opal.pop_exception()}}return $send(args,"map",[],(function(arg){return null==arg&&(arg=nil),$Opal["$coerce_to!"](arg,$$$("String"),"to_str")})),klass=$send($Class,"new",[self],(function $$3(){var self=null==$$3.$$s?this:$$3.$$s;return $send(args,"each",[],(function $$4(arg){return null==arg&&(arg=nil),(null==$$4.$$s?this:$$4.$$s).$define_struct_attribute(arg)}),{$$s:self}),function(self,$parent_nesting){return $def(self,"$new",(function($a){var args,self=this,instance=nil;return args=$slice(arguments),(instance=self.$allocate()).$$data={},$send(instance,"initialize",$to_a(args)),instance}),-1),self.$alias_method("[]","new")}(Opal.get_singleton_class(self))}),{$$s:self}),$truthy(block)&&$send(klass,"module_eval",[],block.$to_proc()),klass.$$keyword_init=keyword_init,$truthy(const_name)&&$$$("Struct").$const_set(const_name,klass),klass}),-2),$defs(self,"$define_struct_attribute",(function(name){return $eqeq(this,$$$("Struct"))&&$Kernel.$raise($$$("ArgumentError"),"you cannot define attributes to the Struct class"),this.$members()["$<<"](name),$send(this,"define_method",[name],(function $$6(){return(null==$$6.$$s?this:$$6.$$s).$$data[name]}),{$$s:this}),$send(this,"define_method",[name+"="],(function $$7(value){return null==value&&(value=nil),(null==$$7.$$s?this:$$7.$$s).$$data[name]=value}),{$$s:this})})),$defs(self,"$members",(function(){var $ret_or_1;return null==this.members&&(this.members=nil),$eqeq(this,$$$("Struct"))&&$Kernel.$raise($$$("ArgumentError"),"the Struct class has no members"),this.members=$truthy($ret_or_1=this.members)?$ret_or_1:[]})),$defs(self,"$inherited",(function(klass){var members;return null==this.members&&(this.members=nil),members=this.members,$send(klass,"instance_eval",[],(function $$8(){return(null==$$8.$$s?this:$$8.$$s).members=members}),{$$s:this})})),$def(self,"$initialize",(function($a){var $post_args,args,self=this,kwargs=nil,$ret_or_1=nil,extra=nil;return $post_args=$slice(arguments),args=$post_args,$truthy(self.$class().$$keyword_init)?(kwargs=$truthy($ret_or_1=args.$last())?$ret_or_1:$hash2([],{}),($truthy($rb_gt(args.$length(),1))||$truthy(1===args.length&&!kwargs.$$is_hash))&&$Kernel.$raise($$$("ArgumentError"),"wrong number of arguments (given "+args.$length()+", expected 0)"),extra=$rb_minus(kwargs.$keys(),self.$class().$members()),$truthy(extra["$any?"]())&&$Kernel.$raise($$$("ArgumentError"),"unknown keywords: "+extra.$join(", ")),$send(self.$class().$members(),"each",[],(function $$9(name){var $b,self=null==$$9.$$s?this:$$9.$$s;return null==name&&(name=nil),$b=[name,kwargs["$[]"](name)],$send(self,"[]=",$b),$b[$b.length-1]}),{$$s:self})):($truthy($rb_gt(args.$length(),self.$class().$members().$length()))&&$Kernel.$raise($$$("ArgumentError"),"struct size differs"),$send(self.$class().$members(),"each_with_index",[],(function $$10(name,index){var $b,self=null==$$10.$$s?this:$$10.$$s;return null==name&&(name=nil),null==index&&(index=nil),$b=[name,args["$[]"](index)],$send(self,"[]=",$b),$b[$b.length-1]}),{$$s:self}))}),-1),$def(self,"$initialize_copy",(function(from){this.$$data={};var i,max,name,keys=Object.keys(from.$$data);for(i=0,max=keys.length;i<max;i++)name=keys[i],this.$$data[name]=from.$$data[name]})),$defs(self,"$keyword_init?",(function(){return this.$$keyword_init})),$def(self,"$members",(function(){return this.$class().$members()})),$def(self,"$hash",(function(){return $$("Hash").$new(this.$$data).$hash()})),$def(self,"$[]",(function(name){return $eqeqeq($$$("Integer"),name)?($truthy($rb_lt(name,this.$class().$members().$size()["$-@"]()))&&$Kernel.$raise($$$("IndexError"),"offset "+name+" too small for struct(size:"+this.$class().$members().$size()+")"),$truthy($rb_ge(name,this.$class().$members().$size()))&&$Kernel.$raise($$$("IndexError"),"offset "+name+" too large for struct(size:"+this.$class().$members().$size()+")"),name=this.$class().$members()["$[]"](name)):$eqeqeq($$$("String"),name)?this.$$data.hasOwnProperty(name)||$Kernel.$raise($$$("NameError").$new("no member '"+name+"' in struct",name)):$Kernel.$raise($$$("TypeError"),"no implicit conversion of "+name.$class()+" into Integer"),name=$Opal["$coerce_to!"](name,$$$("String"),"to_str"),this.$$data[name]})),$def(self,"$[]=",(function(name,value){return $eqeqeq($$$("Integer"),name)?($truthy($rb_lt(name,this.$class().$members().$size()["$-@"]()))&&$Kernel.$raise($$$("IndexError"),"offset "+name+" too small for struct(size:"+this.$class().$members().$size()+")"),$truthy($rb_ge(name,this.$class().$members().$size()))&&$Kernel.$raise($$$("IndexError"),"offset "+name+" too large for struct(size:"+this.$class().$members().$size()+")"),name=this.$class().$members()["$[]"](name)):$eqeqeq($$$("String"),name)?$truthy(this.$class().$members()["$include?"](name.$to_sym()))||$Kernel.$raise($$$("NameError").$new("no member '"+name+"' in struct",name)):$Kernel.$raise($$$("TypeError"),"no implicit conversion of "+name.$class()+" into Integer"),name=$Opal["$coerce_to!"](name,$$$("String"),"to_str"),this.$$data[name]=value})),$def(self,"$==",(function(other){if(!$truthy(other["$instance_of?"](this.$class())))return!1;var recursed1={},recursed2={};return function _eqeq(struct,other){var key,a,b;for(key in recursed1[struct.$__id__()]=!0,recursed2[other.$__id__()]=!0,struct.$$data)if(a=struct.$$data[key],b=other.$$data[key],$$$("Struct")["$==="](a)){if(!(recursed1.hasOwnProperty(a.$__id__())&&recursed2.hasOwnProperty(b.$__id__())||_eqeq(a,b)))return!1}else if(!a["$=="](b))return!1;return!0}(this,other)})),$def(self,"$eql?",(function(other){if(!$truthy(other["$instance_of?"](this.$class())))return!1;var recursed1={},recursed2={};return function _eqeq(struct,other){var key,a,b;for(key in recursed1[struct.$__id__()]=!0,recursed2[other.$__id__()]=!0,struct.$$data)if(a=struct.$$data[key],b=other.$$data[key],$$$("Struct")["$==="](a)){if(!(recursed1.hasOwnProperty(a.$__id__())&&recursed2.hasOwnProperty(b.$__id__())||_eqeq(a,b)))return!1}else if(!a["$eql?"](b))return!1;return!0}(this,other)})),$def(self,"$each",(function $$each(){var $yield=$$each.$$p||nil;return $$each.$$p=null,$yield===nil?$send(this,"enum_for",["each"],(function $$16(){return(null==$$16.$$s?this:$$16.$$s).$size()}),{$$s:this}):($send(this.$class().$members(),"each",[],(function $$17(name){var self=null==$$17.$$s?this:$$17.$$s;return null==name&&(name=nil),Opal.yield1($yield,self["$[]"](name))}),{$$s:this}),this)})),$def(self,"$each_pair",(function $$each_pair(){var $yield=$$each_pair.$$p||nil;return $$each_pair.$$p=null,$yield===nil?$send(this,"enum_for",["each_pair"],(function $$18(){return(null==$$18.$$s?this:$$18.$$s).$size()}),{$$s:this}):($send(this.$class().$members(),"each",[],(function $$19(name){var self=null==$$19.$$s?this:$$19.$$s;return null==name&&(name=nil),Opal.yield1($yield,[name,self["$[]"](name)])}),{$$s:this}),this)})),$def(self,"$length",(function(){return this.$class().$members().$length()})),$def(self,"$to_a",(function(){return $send(this.$class().$members(),"map",[],(function $$20(name){return null==name&&(name=nil),(null==$$20.$$s?this:$$20.$$s)["$[]"](name)}),{$$s:this})}));var inspect_stack=[];return $def(self,"$inspect",(function(){var self=this,result=nil,pushed=nil;return function(){try{return result="#<struct ",$truthy(inspect_stack["$include?"](self.$__id__()))?$rb_plus(result,":...>"):(inspect_stack["$<<"](self.$__id__()),pushed=!0,$eqeqeq($$$("Struct"),self)&&$truthy(self.$class().$name())&&(result=$rb_plus(result,self.$class()+" ")),result=$rb_plus(result,$send(self.$each_pair(),"map",[],(function(name,value){return null==name&&(name=nil),null==value&&(value=nil),name+"="+$$("Opal").$inspect(value)})).$join(", ")),result=$rb_plus(result,">"))}finally{$truthy(pushed)&&inspect_stack.pop()}}()})),$def(self,"$to_h",(function $$to_h(){var block=$$to_h.$$p||nil;return $$to_h.$$p=null,block!==nil?$send($send(this,"map",[],block.$to_proc()),"to_h",$to_a(this.$args())):$send(this.$class().$members(),"each_with_object",[$hash2([],{})],(function $$22(name,h){var $a;return null==name&&(name=nil),null==h&&(h=nil),$a=[name,(null==$$22.$$s?this:$$22.$$s)["$[]"](name)],$send(h,"[]=",$a),$a[$a.length-1]}),{$$s:this})})),$def(self,"$values_at",(function($a){var $post_args,args,self=this;$post_args=$slice(arguments);for(var result=[],i=0,len=(args=$send(args=$post_args,"map",[],(function(arg){return null==arg&&(arg=nil),arg.$$is_range?arg.$to_a():arg})).$flatten()).length;i<len;i++)args[i].$$is_number||$Kernel.$raise($$$("TypeError"),"no implicit conversion of "+args[i].$class()+" into Integer"),result.push(self["$[]"](args[i]));return result}),-1),$def(self,"$dig",(function(key,$a){var keys,self=this,item=nil;return keys=$slice(arguments,1),(item=$truthy(key.$$is_string&&self.$$data.hasOwnProperty(key))&&self.$$data[key]||nil)===nil||0===keys.length?item:($truthy(item["$respond_to?"]("dig"))||$Kernel.$raise($$$("TypeError"),item.$class()+" does not have #dig method"),$send(item,"dig",$to_a(keys)))}),-2),$alias(self,"size","length"),$alias(self,"to_s","inspect"),$alias(self,"values","to_a")}(0,0,[])},Opal.modules["corelib/set"]=function(Opal){var $freeze=Opal.freeze,$klass=Opal.klass,$slice=Opal.slice,$defs=Opal.defs,$hash2=Opal.hash2,$truthy=Opal.truthy,$eqeqeq=Opal.eqeqeq,$Kernel=Opal.Kernel,$send=Opal.send,$def=Opal.def,$eqeq=Opal.eqeq,$rb_lt=Opal.rb_lt,$rb_le=Opal.rb_le,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Set"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function is_set(set){$truthy(set["$is_a?"]($$$("Set")))||$Kernel.$raise($$$("ArgumentError"),"value must be a set")}return self.$$prototype.hash=nil,self.$include($$$("Enumerable")),$defs(self,"$[]",(function($a){var ary,self=this;return ary=$slice(arguments),self.$new(ary)}),-1),$def(self,"$initialize",(function $$initialize(enum$){var block=$$initialize.$$p||nil;return $$initialize.$$p=null,null==enum$&&(enum$=nil),this.hash=$hash2([],{}),$truthy(enum$["$nil?"]())?nil:($eqeqeq($$$("Enumerable"),enum$)||$Kernel.$raise($$$("ArgumentError"),"value must be enumerable"),$truthy(block)?$send(enum$,"each",[],(function $$2(item){return null==item&&(item=nil),(null==$$2.$$s?this:$$2.$$s).$add(Opal.yield1(block,item))}),{$$s:this}):this.$merge(enum$))}),-1),$def(self,"$dup",(function(){return this.$class().$new().$merge(this)})),$def(self,"$-",(function(enum$){return $truthy(enum$["$respond_to?"]("each"))||$Kernel.$raise($$$("ArgumentError"),"value must be enumerable"),this.$dup().$subtract(enum$)})),$def(self,"$inspect",(function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"})),$def(self,"$==",(function(other){return!!$truthy(this["$equal?"](other))||($truthy(other["$instance_of?"](this.$class()))?this.hash["$=="](other.$instance_variable_get("@hash")):!(!$truthy(other["$is_a?"]($$$("Set")))||!$eqeq(this.$size(),other.$size()))&&$send(other,"all?",[],(function $$5(o){var self=null==$$5.$$s?this:$$5.$$s;return null==self.hash&&(self.hash=nil),null==o&&(o=nil),self.hash["$include?"](o)}),{$$s:this}))})),$def(self,"$add",(function(o){return this.hash["$[]="](o,!0),this})),$def(self,"$classify",(function $$classify(){var block=$$classify.$$p||nil,result=nil;return $$classify.$$p=null,block===nil?this.$enum_for("classify"):(result=$send($$$("Hash"),"new",[],(function $$6(h,k){var $a;return null==h&&(h=nil),null==k&&(k=nil),$a=[k,(null==$$6.$$s?this:$$6.$$s).$class().$new()],$send(h,"[]=",$a),$a[$a.length-1]}),{$$s:this}),$send(this,"each",[],(function(item){return null==item&&(item=nil),result["$[]"](Opal.yield1(block,item)).$add(item)})),result)})),$def(self,"$collect!",(function $Set_collect$excl$8(){var block=$Set_collect$excl$8.$$p||nil,result=nil;return $Set_collect$excl$8.$$p=null,block===nil?this.$enum_for("collect!"):(result=this.$class().$new(),$send(this,"each",[],(function(item){return null==item&&(item=nil),result["$<<"](Opal.yield1(block,item))})),this.$replace(result))})),$def(self,"$compare_by_identity",(function(){return $truthy(this.hash["$respond_to?"]("compare_by_identity"))?(this.hash.$compare_by_identity(),this):this.$raise($$("NotImplementedError"),this.$class().$name()+"#compare_by_identity is not implemented")})),$def(self,"$compare_by_identity?",(function(){var $ret_or_1;return $truthy($ret_or_1=this.hash["$respond_to?"]("compare_by_identity?"))?this.hash["$compare_by_identity?"]():$ret_or_1})),$def(self,"$delete",(function(o){return this.hash.$delete(o),this})),$def(self,"$delete?",(function(o){return $truthy(this["$include?"](o))?(this.$delete(o),this):nil})),$def(self,"$delete_if",(function $$delete_if(){var $yield=$$delete_if.$$p||nil;return $$delete_if.$$p=null,$yield===nil?this.$enum_for("delete_if"):($send($send(this,"select",[],(function(o){return null==o&&(o=nil),Opal.yield1($yield,o)})),"each",[],(function $$14(o){var self=null==$$14.$$s?this:$$14.$$s;return null==self.hash&&(self.hash=nil),null==o&&(o=nil),self.hash.$delete(o)}),{$$s:this}),this)})),$def(self,"$freeze",(function(){return $truthy(this["$frozen?"]())?this:(this.hash.$freeze(),$freeze(this))})),$def(self,"$keep_if",(function $$keep_if(){var $yield=$$keep_if.$$p||nil;return $$keep_if.$$p=null,$yield===nil?this.$enum_for("keep_if"):($send($send(this,"reject",[],(function(o){return null==o&&(o=nil),Opal.yield1($yield,o)})),"each",[],(function $$16(o){var self=null==$$16.$$s?this:$$16.$$s;return null==self.hash&&(self.hash=nil),null==o&&(o=nil),self.hash.$delete(o)}),{$$s:this}),this)})),$def(self,"$reject!",(function $Set_reject$excl$17(){var before,block=$Set_reject$excl$17.$$p||nil;return $Set_reject$excl$17.$$p=null,block===nil?this.$enum_for("reject!"):(before=this.$size(),$send(this,"delete_if",[],block.$to_proc()),$eqeq(this.$size(),before)?nil:this)})),$def(self,"$select!",(function $Set_select$excl$18(){var before,block=$Set_select$excl$18.$$p||nil;return $Set_select$excl$18.$$p=null,block===nil?this.$enum_for("select!"):(before=this.$size(),$send(this,"keep_if",[],block.$to_proc()),$eqeq(this.$size(),before)?nil:this)})),$def(self,"$add?",(function(o){return $truthy(this["$include?"](o))?nil:this.$add(o)})),$def(self,"$each",(function $$each(){var block=$$each.$$p||nil;return $$each.$$p=null,block===nil?this.$enum_for("each"):($send(this.hash,"each_key",[],block.$to_proc()),this)})),$def(self,"$empty?",(function(){return this.hash["$empty?"]()})),$def(self,"$eql?",(function(other){return this.hash["$eql?"]($send(other,"instance_eval",[],(function $$22(){var self=null==$$22.$$s?this:$$22.$$s;return null==self.hash&&(self.hash=nil),self.hash}),{$$s:this}))})),$def(self,"$clear",(function(){return this.hash.$clear(),this})),$def(self,"$include?",(function(o){return this.hash["$include?"](o)})),$def(self,"$merge",(function(enum$){return $send(enum$,"each",[],(function $$24(item){return null==item&&(item=nil),(null==$$24.$$s?this:$$24.$$s).$add(item)}),{$$s:this}),this})),$def(self,"$replace",(function(enum$){return this.$clear(),this.$merge(enum$),this})),$def(self,"$size",(function(){return this.hash.$size()})),$def(self,"$subtract",(function(enum$){return $send(enum$,"each",[],(function $$25(item){return null==item&&(item=nil),(null==$$25.$$s?this:$$25.$$s).$delete(item)}),{$$s:this}),this})),$def(self,"$|",(function(enum$){return $truthy(enum$["$respond_to?"]("each"))||$Kernel.$raise($$$("ArgumentError"),"value must be enumerable"),this.$dup().$merge(enum$)})),$def(self,"$superset?",(function(set){return is_set(set),!$truthy($rb_lt(this.$size(),set.$size()))&&$send(set,"all?",[],(function $$28(o){return null==o&&(o=nil),(null==$$28.$$s?this:$$28.$$s)["$include?"](o)}),{$$s:this})})),$def(self,"$proper_superset?",(function(set){return is_set(set),!$truthy($rb_le(this.$size(),set.$size()))&&$send(set,"all?",[],(function $$30(o){return null==o&&(o=nil),(null==$$30.$$s?this:$$30.$$s)["$include?"](o)}),{$$s:this})})),$def(self,"$subset?",(function(set){return is_set(set),!$truthy($rb_lt(set.$size(),this.$size()))&&$send(this,"all?",[],(function(o){return null==o&&(o=nil),set["$include?"](o)}))})),$def(self,"$proper_subset?",(function(set){return is_set(set),!$truthy($rb_le(set.$size(),this.$size()))&&$send(this,"all?",[],(function(o){return null==o&&(o=nil),set["$include?"](o)}))})),$def(self,"$intersect?",(function(set){return is_set(set),$truthy($rb_lt(this.$size(),set.$size()))?$send(this,"any?",[],(function(o){return null==o&&(o=nil),set["$include?"](o)})):$send(set,"any?",[],(function $$37(o){return null==o&&(o=nil),(null==$$37.$$s?this:$$37.$$s)["$include?"](o)}),{$$s:this})})),$def(self,"$disjoint?",(function(set){return this["$intersect?"](set)["$!"]()})),$def(self,"$to_a",(function(){return this.hash.$keys()})),$alias(self,"+","|"),$alias(self,"<","proper_subset?"),$alias(self,"<<","add"),$alias(self,"<=","subset?"),$alias(self,">","proper_superset?"),$alias(self,">=","superset?"),$alias(self,"difference","-"),$alias(self,"filter!","select!"),$alias(self,"length","size"),$alias(self,"map!","collect!"),$alias(self,"member?","include?"),$alias(self,"union","|")}(0,0,[])},Opal.modules["corelib/dir"]=function(Opal){var $klass=Opal.klass,$def=Opal.def,$truthy=Opal.truthy,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("[],pwd"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Dir");[self].concat($parent_nesting);return function(self,$parent_nesting){return $def(self,"$chdir",(function $$chdir(dir){var $yield=$$chdir.$$p||nil,prev_cwd=nil;return $$chdir.$$p=null,function(){try{return prev_cwd=Opal.current_dir,Opal.current_dir=dir,Opal.yieldX($yield,[])}finally{Opal.current_dir=prev_cwd}}()})),$def(self,"$pwd",(function(){return Opal.current_dir||"."})),$def(self,"$home",(function(){var $ret_or_1;return $truthy($ret_or_1=$$$("ENV")["$[]"]("HOME"))?$ret_or_1:"."})),$alias(self,"getwd","pwd")}(Opal.get_singleton_class(self))}(0,0,[])},Opal.modules["corelib/file"]=function(Opal){var $truthy=Opal.truthy,$klass=Opal.klass,$const_set=Opal.const_set,$Opal=Opal.Opal,$regexp=Opal.regexp,$rb_plus=Opal.rb_plus,$def=Opal.def,$Kernel=Opal.Kernel,$eqeq=Opal.eqeq,$rb_lt=Opal.rb_lt,$rb_minus=Opal.rb_minus,$range=Opal.range,$send=Opal.send,$slice=Opal.slice,$alias=Opal.alias,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function($base,$super,$parent_nesting){var self=$klass("::",$super,"File"),$nesting=[self].concat($parent_nesting),windows_root_rx=nil;return $const_set($nesting[0],"Separator",$const_set($nesting[0],"SEPARATOR","/")),$const_set($nesting[0],"ALT_SEPARATOR",nil),$const_set($nesting[0],"PATH_SEPARATOR",":"),$const_set($nesting[0],"FNM_SYSCASE",0),windows_root_rx=/^[a-zA-Z]:(?:\\|\/)/,function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);function $coerce_to_path(path){return $truthy(path["$respond_to?"]("to_path"))&&(path=path.$to_path()),path=$Opal["$coerce_to!"](path,$$$("String"),"to_str")}function $sep_chars(){return $$("ALT_SEPARATOR")===nil?Opal.escape_regexp($$("SEPARATOR")):Opal.escape_regexp($rb_plus($$("SEPARATOR"),$$("ALT_SEPARATOR")))}return $def(self,"$absolute_path",(function(path,basedir){var sep,sep_chars,$ret_or_1,path_abs,basedir_abs,part,new_parts=nil,parts=nil,leading_sep=nil,abs=nil,new_path=nil;null==basedir&&(basedir=nil),sep=$$("SEPARATOR"),sep_chars=$sep_chars(),new_parts=[],path=$truthy(path["$respond_to?"]("to_path"))?path.$to_path():path,path=$Opal["$coerce_to!"](path,$$$("String"),"to_str"),basedir=$truthy($ret_or_1=basedir)?$ret_or_1:$$$("Dir").$pwd(),path_abs=path.substr(0,sep.length)===sep||windows_root_rx.test(path),basedir_abs=basedir.substr(0,sep.length)===sep||windows_root_rx.test(basedir),$truthy(path_abs)?(parts=path.$split($regexp(["[",sep_chars,"]"])),leading_sep=windows_root_rx.test(path)?"":path.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),abs=!0):(parts=$rb_plus(basedir.$split($regexp(["[",sep_chars,"]"])),path.$split($regexp(["[",sep_chars,"]"]))),leading_sep=windows_root_rx.test(basedir)?"":basedir.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),abs=basedir_abs);for(var i=0,ii=parts.length;i<ii;i++)(part=parts[i])===nil||""===part&&(0===new_parts.length||abs)||"."===part&&(0===new_parts.length||abs)||(".."===part?new_parts.pop():new_parts.push(part));return abs||"."===parts[0]||new_parts.$unshift("."),new_path=new_parts.$join(sep),$truthy(abs)&&(new_path=$rb_plus(leading_sep,new_path)),new_path}),-2),$def(self,"$expand_path",(function(path,basedir){var sep,sep_chars,home=nil,leading_sep=nil,home_path_regexp=nil;return null==basedir&&(basedir=nil),sep=$$("SEPARATOR"),sep_chars=$sep_chars(),$truthy("~"===path[0]||basedir&&"~"===basedir[0])&&(home=$$("Dir").$home(),$truthy(home)||$Kernel.$raise($$$("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),leading_sep=windows_root_rx.test(home)?"":home.$sub($regexp(["^([",sep_chars,"]+).*$"]),"\\1"),$truthy(home["$start_with?"](leading_sep))||$Kernel.$raise($$$("ArgumentError"),"non-absolute home"),home=$rb_plus(home,sep),home_path_regexp=$regexp(["^\\~(?:",sep,"|$)"]),path=path.$sub(home_path_regexp,home),$truthy(basedir)&&(basedir=basedir.$sub(home_path_regexp,home))),this.$absolute_path(path,basedir)}),-2),$def(self,"$dirname",(function(path,level){var sep_chars;if(null==level&&(level=1),$eqeq(level,0))return path;$truthy($rb_lt(level,0))&&$Kernel.$raise($$$("ArgumentError"),"level can't be negative"),sep_chars=$sep_chars();var out,absolute=(path=$coerce_to_path(path)).match(new RegExp("^["+sep_chars+"]"));return out=""===(path=(path=(path=path.replace(new RegExp("["+sep_chars+"]+$"),"")).replace(new RegExp("[^"+sep_chars+"]+$"),"")).replace(new RegExp("["+sep_chars+"]+$"),""))?absolute?"/":".":path,1==level?out:this.$dirname(out,$rb_minus(level,1))}),-2),$def(self,"$basename",(function(name,suffix){var sep_chars;return null==suffix&&(suffix=nil),sep_chars=$sep_chars(),0==(name=$coerce_to_path(name)).length||(suffix=suffix!==nil?$Opal["$coerce_to!"](suffix,$$$("String"),"to_str"):null,name=(name=name.replace(new RegExp("(.)["+sep_chars+"]*$"),"$1")).replace(new RegExp("^(?:.*["+sep_chars+"])?([^"+sep_chars+"]+)$"),"$1"),".*"===suffix?name=name.replace(/\.[^\.]+$/,""):null!==suffix&&(suffix=Opal.escape_regexp(suffix),name=name.replace(new RegExp(suffix+"$"),""))),name}),-2),$def(self,"$extname",(function(path){var filename=nil,last_dot_idx=nil;return path=$coerce_to_path(path),filename=this.$basename(path),$truthy(filename["$empty?"]())?"":(last_dot_idx=filename["$[]"]($range(1,-1,!1)).$rindex("."),$truthy(last_dot_idx["$nil?"]())||$eqeq($rb_plus(last_dot_idx,1),$rb_minus(filename.$length(),1))?"":filename["$[]"](Opal.Range.$new($rb_plus(last_dot_idx,1),-1,!1)))})),$def(self,"$exist?",(function(path){return null!=Opal.modules[path]})),$def(self,"$directory?",(function(path){var files=nil;for(var key in files=[],Opal.modules)files.push(key);return path=path.$gsub($regexp(["(^.",$$("SEPARATOR"),"+|",$$("SEPARATOR"),"+$)"])),$send(files,"find",[],(function(f){return null==f&&(f=nil),f["$=~"]($regexp(["^",path]))}))})),$def(self,"$join",(function($a){var $post_args,paths,result=nil;return $post_args=$slice(arguments),$truthy((paths=$post_args)["$empty?"]())?"":(result="",paths=$send(paths.$flatten().$each_with_index(),"map",[],(function(item,index){return null==item&&(item=nil),null==index&&(index=nil),$eqeq(index,0)&&$truthy(item["$empty?"]())||$eqeq(paths.$length(),$rb_plus(index,1))&&$truthy(item["$empty?"]())?$$("SEPARATOR"):item})),paths=$send(paths,"reject",[],"empty?".$to_proc()),$send(paths,"each_with_index",[],(function(item,index){var next_item=nil;return null==item&&(item=nil),null==index&&(index=nil),next_item=paths["$[]"]($rb_plus(index,1)),$truthy(next_item["$nil?"]())?result=""+result+item:($truthy(item["$end_with?"]($$("SEPARATOR")))&&$truthy(next_item["$start_with?"]($$("SEPARATOR")))&&(item=item.$sub($regexp([$$("SEPARATOR"),"+$"]),"")),result=$truthy(item["$end_with?"]($$("SEPARATOR")))||$truthy(next_item["$start_with?"]($$("SEPARATOR")))?""+result+item:""+result+item+$$("SEPARATOR"))})),result)}),-1),$def(self,"$split",(function(path){return path.$split($$("SEPARATOR"))})),$alias(self,"realpath","expand_path"),$alias(self,"exists?","exist?")}(Opal.get_singleton_class(self),$nesting)}(0,$$$("IO"),[])},Opal.modules["corelib/process/base"]=function(Opal){var self,$klass=Opal.klass,$slice=Opal.slice,$defs=Opal.defs,$return_val=Opal.return_val,nil=Opal.nil;return self=$klass("::",null,"Signal"),$defs(self,"$trap",(function($a){return $slice(arguments),nil}),-1),function($base,$super){var self=$klass("::",null,"GC");return $defs(self,"$start",$return_val(nil))}()},Opal.modules["corelib/process"]=function(Opal){var $module=Opal.module,$defs=Opal.defs,$truthy=Opal.truthy,$return_val=Opal.return_val,$Kernel=Opal.Kernel,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function($base){var self=$module("::","Process"),monotonic=nil;if(self.__clocks__=[],$defs(self,"$__register_clock__",(function(name,func){return null==this.__clocks__&&(this.__clocks__=nil),this.$const_set(name,this.__clocks__.$size()),this.__clocks__["$<<"](func)})),self.$__register_clock__("CLOCK_REALTIME",(function(){return Date.now()})),monotonic=!1,Opal.global.performance)monotonic=function(){return performance.now()};else if(Opal.global.process&&process.hrtime){var hrtime_base=process.hrtime();monotonic=function(){var hrtime=process.hrtime(hrtime_base),us=hrtime[1]/1e3|0;return 1e3*hrtime[0]+us/1e3}}return $truthy(monotonic)&&self.$__register_clock__("CLOCK_MONOTONIC",monotonic),$defs(self,"$pid",$return_val(0)),$defs(self,"$times",(function(){var t;return t=$$$("Time").$now().$to_f(),$$$($$$("Benchmark"),"Tms").$new(t,t,t,t,t)})),$defs(self,"$clock_gettime",(function(clock_id,unit){var clock=nil;null==this.__clocks__&&(this.__clocks__=nil),null==unit&&(unit="float_second"),$truthy(clock=this.__clocks__["$[]"](clock_id))||$Kernel.$raise($$$($$$("Errno"),"EINVAL"),"clock_gettime("+clock_id+") "+this.__clocks__["$[]"](clock_id));var ms=clock();switch(unit){case"float_second":return ms/1e3;case"float_millisecond":return ms/1;case"float_microsecond":return 1e3*ms;case"second":return ms/1e3|0;case"millisecond":return ms/1|0;case"microsecond":return 1e3*ms|0;case"nanosecond":return 1e6*ms|0;default:$Kernel.$raise($$$("ArgumentError"),"unexpected unit: "+unit)}}),-2)}()},Opal.modules["corelib/random/formatter"]=function(Opal){var $klass=Opal.klass,$module=Opal.module,$def=Opal.def,$range=Opal.range,$send=Opal.send,$rb_divide=Opal.rb_divide,$Kernel=Opal.Kernel,$Opal=Opal.Opal,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function($base,$super,$parent_nesting){var self=$klass("::",null,"Random"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"Formatter"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$hex",(function(count){null==count&&(count=nil),count=$$$("Random").$_verify_count(count);for(var bytes=this.$bytes(count),out="",i=0;i<count;i++)out+=bytes.charCodeAt(i).toString(16).padStart(2,"0");return out.$encode("US-ASCII")}),-1),$def(self,"$random_bytes",(function(count){return null==count&&(count=nil),this.$bytes(count)}),-1),$def(self,"$base64",(function(count){return null==count&&(count=nil),$$$("Base64").$strict_encode64(this.$random_bytes(count)).$encode("US-ASCII")}),-1),$def(self,"$urlsafe_base64",(function(count,padding){return null==count&&(count=nil),null==padding&&(padding=!1),$$$("Base64").$urlsafe_encode64(this.$random_bytes(count),padding).$encode("US-ASCII")}),-1),$def(self,"$uuid",(function(){var str=nil;return(str=this.$hex(16).$split(""))["$[]="](12,"4"),str["$[]="](16,(3&parseInt(str["$[]"](16),16)|8).toString(16)),str=[str["$[]"]($range(0,8,!0)),str["$[]"]($range(8,12,!0)),str["$[]"]($range(12,16,!0)),str["$[]"]($range(16,20,!0)),str["$[]"]($range(20,32,!0))],(str=$send(str,"map",[],"join".$to_proc())).$join("-")})),$def(self,"$random_float",(function(){var bs=nil,num=nil;return bs=this.$bytes(4),num=0,$send(4,"times",[],(function(i){return null==i&&(i=nil),num=(num=num["$<<"](8))["$|"](bs["$[]"](i).$ord())})),$rb_divide(num.$abs(),2147483647)})),$def(self,"$random_number",(function(limit){var self=this;function randomFloat(){return self.$random_float()}function randomInt(max){return Math.floor(randomFloat()*max)}return null==limit?randomFloat():limit.$$is_range?function(){var min=limit.begin,max=limit.end;if(min===nil||max===nil)return nil;var length=max-min;return length<0?nil:0===length?min:(max%1!=0||min%1!=0||limit.excl||length++,randomInt(length)+min)}():limit.$$is_number?(limit<=0&&$Kernel.$raise($$$("ArgumentError"),"invalid argument - "+limit),limit%1==0?randomInt(limit):randomFloat()*limit):((limit=$Opal["$coerce_to!"](limit,$$$("Integer"),"to_int"))<=0&&$Kernel.$raise($$$("ArgumentError"),"invalid argument - "+limit),randomInt(limit))}),-1),$def(self,"$alphanumeric",(function(count){var map=nil;return null==count&&(count=nil),count=$$("Random").$_verify_count(count),map=$send([$range("0","9",!1),$range("a","z",!1),$range("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),$send($$$("Array"),"new",[count],(function $$2(i){var self=null==$$2.$$s?this:$$2.$$s;return null==i&&(i=nil),map["$[]"](self.$random_number(map.$length()))}),{$$s:this}).$join()}),-1)}(self,$nesting),self.$include($$$($$$("Random"),"Formatter")),self.$extend($$$($$$("Random"),"Formatter"))}(0,0,[])},Opal.modules["corelib/random/mersenne_twister"]=function(Opal){var $a,self,MAX_INT,$klass=Opal.klass,$const_set=Opal.const_set,$send=Opal.send,nil=Opal.nil,$$$=Opal.$$$,mersenne_twister=nil;return Opal.add_stubs("generator="),mersenne_twister=function(){var N=624,M=397,TWIST=function(u,v){return function(u,v){return 2147483648&u|2147483647&v}(u,v)>>>1^(1&v?2567483615:0)};function genrand_int32(mt){var y;return--mt.left<=0&&function(mt){var j,p=0,_p=mt.state;for(mt.left=N,mt.next=0,j=228;--j;p++)_p[p]=_p[p+M]^TWIST(_p[p+0],_p[p+1]);for(j=M;--j;p++)_p[p]=_p[p+(M-N)]^TWIST(_p[p+0],_p[p+1]);_p[p]=_p[p+(M-N)]^TWIST(_p[p+0],_p[0])}(mt),y=mt.state[mt.next++],y^=y>>>11,y^=y<<7&2636928640,y^=y<<15&4022730752,(y^=y>>>18)>>>0}return{genrand_real:function(mt){return function(a,b){return(67108864*(a>>>=5)+(b>>>=6))*(1/9007199254740992)}(genrand_int32(mt),genrand_int32(mt))},init:function(s){var mt={left:0,next:N,state:new Array(N)};return function(mt,s){var j;for(mt.state[0]=s>>>0,j=1;j<N;j++)mt.state[j]=1812433253*(mt.state[j-1]^mt.state[j-1]>>30>>>0)+j,mt.state[j]&=4294967295;mt.left=1,mt.next=N}(mt,s),mt}}}(),self=$klass("::",null,"Random"),MAX_INT=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,$const_set(self,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*MAX_INT)},reseed:function(seed){return mersenne_twister.init(seed)},rand:function(mt){return mersenne_twister.genrand_real(mt)}}),$a=[$$$(self,"MERSENNE_TWISTER_GENERATOR")],$send(self,"generator=",$a),$a[$a.length-1]},Opal.modules["corelib/random"]=function(Opal){var $truthy=Opal.truthy,$klass=Opal.klass,$Kernel=Opal.Kernel,$defs=Opal.defs,$Opal=Opal.Opal,$def=Opal.def,$eqeqeq=Opal.eqeqeq,$send=Opal.send,self=Opal.top,$$$=(Opal.nil,Opal.$$$);return Opal.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),self.$require("corelib/random/formatter"),function($base,$super){var self=$klass("::",null,"Random");self.$attr_reader("seed","state"),$defs(self,"$_verify_count",(function(count){return $truthy(count)||(count=16),"number"!=typeof count&&(count=count.$to_int()),count<0&&$Kernel.$raise($$$("ArgumentError"),"negative string size (or size too big)"),count=Math.floor(count)})),$def(self,"$initialize",(function(seed){return null==seed&&(seed=$$$("Random").$new_seed()),seed=$Opal["$coerce_to!"](seed,$$$("Integer"),"to_int"),this.state=seed,this.$reseed(seed)}),-1),$def(self,"$reseed",(function(seed){return this.seed=seed,this.$rng=Opal.$$rand.reseed(seed)})),$defs(self,"$new_seed",(function(){return Opal.$$rand.new_seed()})),$defs(self,"$rand",(function(limit){return $$$(this,"DEFAULT").$rand(limit)}),-1),$defs(self,"$srand",(function(n){var previous_seed;return null==n&&(n=$$$("Random").$new_seed()),n=$Opal["$coerce_to!"](n,$$$("Integer"),"to_int"),previous_seed=$$$(this,"DEFAULT").$seed(),$$$(this,"DEFAULT").$reseed(n),previous_seed}),-1),$defs(self,"$urandom",(function(size){return $$$("SecureRandom").$bytes(size)})),$def(self,"$==",(function(other){var $ret_or_1;return!!$eqeqeq($$$("Random"),other)&&($truthy($ret_or_1=this.$seed()["$=="](other.$seed()))?this.$state()["$=="](other.$state()):$ret_or_1)})),$def(self,"$bytes",(function(length){return length=$$$("Random").$_verify_count(length),$send($$$("Array"),"new",[length],(function $$2(){return(null==$$2.$$s?this:$$2.$$s).$rand(255).$chr()}),{$$s:this}).$join().$encode("ASCII-8BIT")})),$defs(self,"$bytes",(function(length){return $$$(this,"DEFAULT").$bytes(length)})),$def(self,"$rand",(function(limit){return this.$random_number(limit)}),-1),$def(self,"$random_float",(function(){return this.state++,Opal.$$rand.rand(this.$rng)})),$defs(self,"$random_float",(function(){return $$$(this,"DEFAULT").$random_float()})),$defs(self,"$generator=",(function(generator){return Opal.$$rand=generator,$truthy(this["$const_defined?"]("DEFAULT"))?$$$(this,"DEFAULT").$reseed():this.$const_set("DEFAULT",this.$new(this.$new_seed()))}))}(),self.$require("corelib/random/mersenne_twister")},Opal.modules["corelib/unsupported"]=function(Opal){var $Kernel=Opal.Kernel,$klass=Opal.klass,$send=Opal.send,$slice=Opal.slice,$module=Opal.module,$def=Opal.def,$return_val=Opal.return_val,$alias=Opal.alias,$defs=Opal.defs,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;Opal.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var warnings={};function handle_unsupported_feature(message){switch(Opal.config.unsupported_features_severity){case"error":$Kernel.$raise($$$("NotImplementedError"),message);break;case"warning":!function(string){if(warnings[string])return;warnings[string]=!0,self.$warn(string)}(message)}}return function($base,$super){var self=$klass("::",null,"String"),ERROR="String#%s not supported. Mutable String methods are not supported in Opal.";$send(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],(function $String$1(method_name){return null==method_name&&(method_name=nil),$send(null==$String$1.$$s?this:$String$1.$$s,"define_method",[method_name],(function($a){return $slice(arguments),$Kernel.$raise($$$("NotImplementedError"),ERROR["$%"](method_name))}),-1)}),{$$s:self})}(),function($base){var self=$module("::","Kernel"),ERROR="Object tainting is not supported by Opal";$def(self,"$taint",(function(){return handle_unsupported_feature(ERROR),this})),$def(self,"$untaint",(function(){return handle_unsupported_feature(ERROR),this})),$def(self,"$tainted?",(function(){return handle_unsupported_feature(ERROR),!1}))}(),function($base,$super){var self=$klass("::",null,"Module");$def(self,"$public",(function($a){var methods,self=this;return 0===(methods=$slice(arguments)).length?(self.$$module_function=!1,nil):1===methods.length?methods[0]:methods}),-1),$def(self,"$private_class_method",(function($a){var methods;return 1===(methods=$slice(arguments)).length?methods[0]:methods}),-1),$def(self,"$private_method_defined?",$return_val(!1)),$def(self,"$private_constant",(function($a){return $slice(arguments),nil}),-1),$alias(self,"nesting","public"),$alias(self,"private","public"),$alias(self,"protected","public"),$alias(self,"protected_method_defined?","private_method_defined?"),$alias(self,"public_class_method","private_class_method"),$alias(self,"public_instance_method","instance_method"),$alias(self,"public_instance_methods","instance_methods"),$alias(self,"public_method_defined?","method_defined?")}(),function($base){var self=$module("::","Kernel");$def(self,"$private_methods",(function($a){return $slice(arguments),[]}),-1),$alias(self,"protected_methods","private_methods"),$alias(self,"private_instance_methods","private_methods"),$alias(self,"protected_instance_methods","private_methods")}(),function($base,$parent_nesting){var self=$module("::","Kernel"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$eval",(function($a){return $slice(arguments),$Kernel.$raise($$$("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+$$("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details.")}),-1)}(0,[]),$defs(self,"$public",(function($a){var methods;return 1===(methods=$slice(arguments)).length?methods[0]:methods}),-1),$defs(self,"$private",(function($a){var methods;return 1===(methods=$slice(arguments)).length?methods[0]:methods}),-1)},Opal.modules["corelib/binding"]=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$def=Opal.def,$slice=Opal.slice,$send=Opal.send,$to_a=Opal.to_a,$Kernel=Opal.Kernel,$return_ivar=Opal.return_ivar,$eqeq=Opal.eqeq,$thrower=Opal.thrower,$module=Opal.module,$const_set=Opal.const_set,self=Opal.top,nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function($base,$super){var self=$klass("::",null,"Binding"),$proto=self.$$prototype;$proto.jseval=$proto.scope_variables=nil,$def(self,"$initialize",(function(jseval,scope_variables,receiver,source_location){var $a;return null==scope_variables&&(scope_variables=[]),null==source_location&&(source_location=nil),$a=[jseval,scope_variables,receiver,source_location],this.jseval=$a[0],this.scope_variables=$a[1],this.receiver=$a[2],this.source_location=$a[3],$truthy(void 0!==typeof receiver)?nil:this.$js_eval("self")}),-2),$def(self,"$js_eval",(function($a){var args,self=this;return args=$slice(arguments),$truthy(self.jseval)?$send(self.jseval,"call",$to_a(args)):$Kernel.$raise("Evaluation on a Proc#binding is not supported")}),-1),$def(self,"$local_variable_get",(function(symbol){try{return this.$js_eval(symbol)}catch($err){if(!Opal.rescue($err,[$$$("Exception")]))throw $err;try{return $Kernel.$raise($$$("NameError"),"local variable `"+symbol+"' is not defined for "+this.$inspect())}finally{Opal.pop_exception()}}})),$def(self,"$local_variable_set",(function(symbol,value){return Opal.Binding.tmp_value=value,this.$js_eval(symbol+" = Opal.Binding.tmp_value"),delete Opal.Binding.tmp_value,value})),$def(self,"$local_variables",$return_ivar("scope_variables")),$def(self,"$local_variable_defined?",(function(value){return this.scope_variables["$include?"](value)})),$def(self,"$eval",(function(str,file,line){try{$thrower("eval_return");return null==file&&(file=nil),null==line&&(line=nil),$eqeq(str,"self")?this.$receiver():$Kernel.$eval(str,this,file,line)}catch($e){if($e===Opal.t_eval_return)return $e.$v;throw $e}}),-2),self.$attr_reader("receiver","source_location")}(),function($base){var self=$module("::","Kernel");$def(self,"$binding",(function(){return $Kernel.$raise("Opal doesn't support dynamic calls to binding")}))}(),$const_set([][0],"TOPLEVEL_BINDING",$$$("Binding").$new((function(js){return new Function("self","return "+js)(self)}),[],self,["<main>",0]))},Opal.modules["corelib/irb"]=function(Opal){var $module=Opal.module,$truthy=Opal.truthy,$Kernel=Opal.Kernel,$defs=Opal.defs,$hash=Opal.hash,$gvars=Opal.gvars,$lambda=Opal.lambda,$send=Opal.send,$rb_plus=Opal.rb_plus,$const_set=Opal.const_set,$klass=Opal.klass,$def=Opal.def,$Opal=Opal.Opal,$range=Opal.range,$eqeq=Opal.eqeq,$thrower=Opal.thrower,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;Opal.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function($base,$parent_nesting){var $nesting=[$module($base,"Opal")].concat($parent_nesting);(function($base,$parent_nesting){var self=$module($base,"IRB"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$defs(self,"$ensure_loaded",(function(library){var url,libcode;if($truthy(Opal.loaded_features["$include?"](library)))return nil;if(url="https://cdn.opalrb.com/opal/"+($truthy($$("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":$$("RUBY_ENGINE_VERSION"))+"/"+library+".js","undefined"!=typeof XMLHttpRequest){var r=new XMLHttpRequest;r.open("GET",url,!1),r.send(""),libcode=r.responseText}else $Kernel.$raise("You need to provision "+library+" yourself in this environment");return new Function("Opal",libcode)(Opal),Opal.require(library),$truthy(Opal.loaded_features["$include?"](library))?nil:$Kernel.$raise("Could not load "+library+" for some reason")})),self.$singleton_class().$attr_accessor("output"),$defs(self,"$prepare_console",(function $$prepare_console(){var $a,block=$$prepare_console.$$p||nil,self=this,original=nil,original_read_proc=nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==$gvars.stderr&&($gvars.stderr=nil),null==$gvars.stdin&&($gvars.stdin=nil),$$prepare_console.$$p=null,function(){try{return self["$output="](""),original=$hash($gvars.stdout,$lambda((function(i){return null==i&&(i=nil),$gvars.stdout=i})),$gvars.stderr,$lambda((function(i){return null==i&&(i=nil),$gvars.stderr=i}))),$truthy(self["$browser?"]())&&($send(original,"each",[],(function $$3(pipe,pipe_setter){var self=null==$$3.$$s?this:$$3.$$s,new_pipe=nil;return null==pipe&&(pipe=nil),null==pipe_setter&&(pipe_setter=nil),(new_pipe=pipe.$dup())["$write_proc="]($send(self,"proc",[],(function $$4(str){var self=null==$$4.$$s?this:$$4.$$s;return null==str&&(str=nil),self["$output="]($rb_plus(self.$output(),str)),self["$output="](self.$output().$split("\n").$last(30).$join("\n")),$truthy(str["$end_with?"]("\n"))&&self["$output="]($rb_plus(self.$output(),"\n")),pipe.$write_proc().$call(str)}),{$$s:self})),new_pipe["$tty="](!1),pipe_setter.$call(new_pipe)}),{$$s:self}),original_read_proc=$gvars.stdin.$read_proc(),$gvars.stdin["$read_proc="]((function(s){var p=prompt(self.$output());return null!==p?p+"\n":nil}))),Opal.yieldX(block,[])}finally{$send(original,"each",[],(function(pipe,pipe_setter){return null==pipe&&(pipe=nil),null==pipe_setter&&(pipe_setter=nil),pipe_setter.$call(pipe)})),$a=[original_read_proc],$send($gvars.stdin,"read_proc=",$a),$a[$a.length-1],$send(self,"output=",$a=[""]),$a[$a.length-1]}}()})),$defs(self,"$browser?",(function(){return"undefined"!=typeof document&&"undefined"!=typeof prompt})),$const_set($nesting[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function($base,$super){var self=$klass($base,null,"Silencer"),$proto=self.$$prototype;$proto.collector=$proto.stderr=nil,$def(self,"$initialize",(function(){return null==$gvars.stderr&&($gvars.stderr=nil),this.stderr=$gvars.stderr})),$def(self,"$silence",(function $$silence(){var $yield=$$silence.$$p||nil,self=this;return $$silence.$$p=null,function(){try{return self.collector=$$$("StringIO").$new(),$gvars.stderr=self.collector,Opal.yieldX($yield,[])}finally{$gvars.stderr=self.stderr}}()})),$def(self,"$warnings",(function(){return this.collector.$string()}))}($nesting[0])})($nesting[0],$nesting)}($nesting[0],$nesting),function($base,$super,$parent_nesting){var self=$klass("::",null,"Binding"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$irb",(function(){try{var $t_return=$thrower("return"),silencer=nil;return $$$($Opal,"IRB").$ensure_loaded("opal-replutils"),silencer=$$$($$$($Opal,"IRB"),"Silencer").$new(),$send($$$($Opal,"IRB"),"prepare_console",[],(function $$7(){var self=null==$$7.$$s?this:$$7.$$s;return function(){try{var $t_break=$thrower("break");return $send(self,"loop",[],(function $$8(){var self=null==$$8.$$s?this:$$8.$$s,line=nil,code=nil,mode=nil,js_code=nil,e=nil;for(self.$print(">> "),line=self.$gets(),$truthy(line)||$t_break.$throw(),code="",$truthy($$$($Opal,"IRB")["$browser?"]())&&self.$puts(line),$truthy(line["$start_with?"]("ls "))?(code=line["$[]"]($range(3,-1,!1)),mode="ls"):$eqeq(line,"ls\n")?(code="self",mode="ls"):$truthy(line["$start_with?"]("show "))?(code=line["$[]"]($range(5,-1,!1)),mode="show"):(code=line,mode="inspect"),js_code=nil;;){try{$send(silencer,"silence",[],(function(){return js_code=Opal.compile(code,{irb:!0})}))}catch($err){if(!Opal.rescue($err,[$$("SyntaxError")]))throw $err;e=$err;try{if($truthy($$$($$$($Opal,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){self.$print(".. "),line=self.$gets(),$truthy(line)||$t_return.$throw(),$truthy($$$($Opal,"IRB")["$browser?"]())&&self.$puts(line),code=$rb_plus(code,line);continue}$truthy(silencer.$warnings()["$empty?"]())?self.$warn(e.$full_message()):self.$warn(silencer.$warnings())}finally{Opal.pop_exception()}}break}return $eqeq(mode,"show")&&(self.$puts(js_code),$t_return.$throw()),self.$puts($$$("REPLUtils").$eval_and_print(js_code,mode,!1,self))}),{$$s:self,$$ret:$t_return})}catch($e){if($e===$t_break)return $e.$v;throw $e}}()}),{$$s:this})}catch($e){if($e===$t_return)return $e.$v;throw $e}}))}(0,0,$nesting),Opal.irb=function(fun){$$$("Binding").$new(fun).$irb()},Opal.load_parser=function(){Opal.Opal.IRB.$ensure_loaded("opal-parser")},void 0===Opal.eval&&(Opal.eval=function(str){return Opal.load_parser(),Opal.eval(str)}),void 0===Opal.compile&&(Opal.compile=function(str,options){return Opal.load_parser(),Opal.compile(str,options)})},Opal.queue((function(Opal){var $Object=Opal.Object;Opal.nil;return Opal.add_stubs("require,autoload"),$Object.$require("opal/base"),$Object.$require("opal/mini"),$Object.$require("corelib/kernel/format"),$Object.$require("corelib/string/encoding"),$Object.$autoload("Math","corelib/math"),$Object.$require("corelib/complex/base"),$Object.$autoload("Complex","corelib/complex"),$Object.$require("corelib/rational/base"),$Object.$autoload("Rational","corelib/rational"),$Object.$require("corelib/time"),$Object.$autoload("Struct","corelib/struct"),$Object.$autoload("Set","corelib/set"),$Object.$autoload("Dir","corelib/dir"),$Object.$autoload("File","corelib/file"),$Object.$require("corelib/process/base"),$Object.$autoload("Process","corelib/process"),$Object.$autoload("Random","corelib/random"),$Object.$require("corelib/unsupported"),$Object.$require("corelib/binding"),$Object.$require("corelib/irb")}));
