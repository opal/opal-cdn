Opal.modules.stringio=function(Opal){var $klass=Opal.klass,$defs=Opal.defs,$send2=Opal.send2,$find_super=Opal.find_super,$def=Opal.def,$eqeqeq=Opal.eqeqeq,$truthy=Opal.truthy,$rb_ge=Opal.rb_ge,$rb_gt=Opal.rb_gt,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$return_ivar=Opal.return_ivar,$eqeq=Opal.eqeq,$alias=Opal.alias,$nesting=[],$$=Opal.$r($nesting),nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("new,call,close,attr_accessor,check_readable,==,length,===,>=,raise,>,+,-,seek,check_writable,String,[],eof?,write,read,tell"),function($base,$super,$parent_nesting){var self=$klass($base,$super,"StringIO"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;return $proto.position=$proto.string=nil,$defs(self,"$open",(function $$open(string,mode){var res,block=$$open.$$p||nil,io=nil;return $$open.$$p=null,null==string&&(string=""),null==mode&&(mode=nil),io=this.$new(string,mode),res=block.$call(io),io.$close(),res}),-1),self.$attr_accessor("string"),$def(self,"$initialize",(function $$initialize(string,mode){return $$initialize.$$p=null,null==string&&(string=""),null==mode&&(mode="rw"),this.string=string,this.position=0,$send2(this,$find_super(this,"initialize",$$initialize,!1,!0),"initialize",[nil,mode],null)}),-1),$def(self,"$eof?",(function(){return this.$check_readable(),this.position["$=="](this.string.$length())}),0),$def(self,"$seek",(function(pos,whence){var $ret_or_1;return null==whence&&(whence=$$$($$("IO"),"SEEK_SET")),this.read_buffer="",$eqeqeq($$$($$("IO"),"SEEK_SET"),$ret_or_1=whence)?($truthy($rb_ge(pos,0))||this.$raise($$$($$("Errno"),"EINVAL")),this.position=pos):$eqeqeq($$$($$("IO"),"SEEK_CUR"),$ret_or_1)?$truthy($rb_gt($rb_plus(this.position,pos),this.string.$length()))?this.position=this.string.$length():this.position=$rb_plus(this.position,pos):$eqeqeq($$$($$("IO"),"SEEK_END"),$ret_or_1)&&($truthy($rb_gt(pos,this.string.$length()))?this.position=0:this.position=$rb_minus(this.position,pos)),0}),-2),$def(self,"$tell",$return_ivar("position"),0),$def(self,"$rewind",(function(){return this.$seek(0)}),0),$def(self,"$write",(function(string){var before=nil,after=nil;return this.$check_writable(),this.read_buffer="",string=this.$String(string),$eqeq(this.string.$length(),this.position)?(this.string=$rb_plus(this.string,string),this.position=$rb_plus(this.position,string.$length())):(before=this.string["$[]"](Opal.Range.$new(0,$rb_minus(this.position,1),!1)),after=this.string["$[]"](Opal.Range.$new($rb_plus(this.position,string.$length()),-1,!1)),this.string=$rb_plus($rb_plus(before,string),after),this.position=$rb_plus(this.position,string.$length()))}),1),$def(self,"$read",(function(length,outbuf){var string,str=nil;return null==length&&(length=nil),null==outbuf&&(outbuf=nil),this.$check_readable(),$truthy(this["$eof?"]())?nil:(string=$truthy(length)?(str=this.string["$[]"](this.position,length),this.position=$rb_plus(this.position,length),$truthy($rb_gt(this.position,this.string.$length()))&&(this.position=this.string.$length()),str):(str=this.string["$[]"](Opal.Range.$new(this.position,-1,!1)),this.position=this.string.$length(),str),$truthy(outbuf)?outbuf.$write(string):string)}),-1),$def(self,"$sysread",(function(length){return this.$check_readable(),this.$read(length)}),1),$alias(self,"eof","eof?"),$alias(self,"pos","tell"),$alias(self,"pos=","seek"),$alias(self,"readpartial","read")}($nesting[0],$$("IO"),$nesting)},Opal.modules.pp=function(Opal){var $klass=Opal.klass,$gvars=Opal.gvars,$send=Opal.send,$defs=Opal.defs,$slice=Opal.slice,$to_a=Opal.to_a,$module=Opal.module,$eqeq=Opal.eqeq,$hash2=Opal.hash2,$def=Opal.def,$truthy=Opal.truthy,$rb_plus=Opal.rb_plus,$eqeqeq=Opal.eqeqeq,$neqeq=Opal.neqeq,$not=Opal.not,$rb_gt=Opal.rb_gt,$rb_le=Opal.rb_le,self=Opal.top,$nesting=[],$$=Opal.$r($nesting),nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,new,guard_inspect_key,pp,flush,<<,bind_call,instance_method,to_proc,attr_accessor,==,[],current,[]=,compare_by_identity,include?,delete,text,is_a?,__getobj__,check_inspect_key,group,pretty_print_cycle,push_inspect_key,pretty_print,sharing_detection,pop_inspect_key,+,name,class,chomp,breakable,lambda,comma_breakable,__send__,call,object_address_group,seplist,pretty_print_instance_variables,===,to_s,instance_eval,include,!=,owner,inspect,respond_to?,!,pp_object,sort,instance_variables,raise,singleline_pp,dup,empty?,pp_hash,each,keys,sprintf,mcall,begin,exclude_end?,end,lines,>,size,named_captures,regexp,object_group,class_eval,string,<=,first,module_function"),self.$require("thread"),self.$require("stringio"),self.$require("prettyprint"),function($base,$super,$parent_nesting){var self=$klass($base,$super,"PP"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$defs($$("PP"),"$pp",(function(obj,out,width){var q=nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==out&&(out=$gvars.stdout),null==width&&(width=79),q=$$("PP").$new(out,width),$send(q,"guard_inspect_key",[],(function(){return q.$pp(obj)}),0),q.$flush(),out["$<<"]("\n")}),-2),$defs($$("PP"),"$singleline_pp",(function(obj,out){var q=nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==out&&(out=$gvars.stdout),q=$$("SingleLine").$new(out),$send(q,"guard_inspect_key",[],(function(){return q.$pp(obj)}),0),q.$flush(),out}),-2),$defs($$("PP"),"$mcall",(function $$mcall(obj,mod,meth,$a){var args,block=$$mcall.$$p||nil;return $$mcall.$$p=null,args=$slice.call(arguments,3),$send(mod.$instance_method(meth),"bind_call",[obj].concat($to_a(args)),block.$to_proc())}),-4),self.sharing_detection=!1,function(self,$parent_nesting){self.$attr_accessor("sharing_detection")}(Opal.get_singleton_class(self)),function($base,$parent_nesting){var self=$module($base,"PPMethods"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$guard_inspect_key",(function $$guard_inspect_key(){var $a,save,$yield=$$guard_inspect_key.$$p||nil;return $$guard_inspect_key.$$p=null,$eqeq($$("Thread").$current()["$[]"]("__recursive_key__"),nil)&&$$("Thread").$current()["$[]="]("__recursive_key__",$hash2([],{}).$compare_by_identity()),$eqeq($$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"),nil)&&$$("Thread").$current()["$[]"]("__recursive_key__")["$[]="]("inspect",$hash2([],{}).$compare_by_identity()),save=$$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"),function(){try{return $$("Thread").$current()["$[]"]("__recursive_key__")["$[]="]("inspect",$hash2([],{}).$compare_by_identity()),Opal.yieldX($yield,[])}finally{$a=["inspect",save],$send($$("Thread").$current()["$[]"]("__recursive_key__"),"[]=",$a)}}()}),0),$def(self,"$check_inspect_key",(function(id){var $ret_or_1,$ret_or_2;return $truthy($ret_or_1=$truthy($ret_or_2=$$("Thread").$current()["$[]"]("__recursive_key__"))?$$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"):$ret_or_2)?$$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect")["$include?"](id):$ret_or_1}),1),$def(self,"$push_inspect_key",(function(id){var $a;return $a=[id,!0],$send($$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"),"[]=",$a),$a[$a.length-1]}),1),$def(self,"$pop_inspect_key",(function(id){return $$("Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect").$delete(id)}),1),$def(self,"$pp",(function(obj){var self=this;return null===obj?(self.$text("null"),nil):void 0===obj?(self.$text("undefined"),nil):void 0===obj.$$class?(self.$text(Object.prototype.toString.apply(obj)),nil):($truthy($$$("::","Delegator","skip_raise")?"constant":nil)&&$truthy(obj["$is_a?"]($$$("Delegator")))&&(obj=obj.$__getobj__()),$truthy(self.$check_inspect_key(obj))?($send(self,"group",[],(function $$3(){var self=null==$$3.$$s?this:$$3.$$s;return obj.$pretty_print_cycle(self)}),{$$arity:0,$$s:self}),nil):function(){try{return self.$push_inspect_key(obj),$send(self,"group",[],(function $$4(){var self=null==$$4.$$s?this:$$4.$$s;return obj.$pretty_print(self)}),{$$arity:0,$$s:self})}finally{$truthy($$("PP").$sharing_detection())||self.$pop_inspect_key(obj)}}())}),-1),$def(self,"$object_group",(function $$object_group(obj){var block=$$object_group.$$p||nil;return $$object_group.$$p=null,$send(this,"group",[1,$rb_plus("#<",obj.$class().$name()),">"],block.$to_proc())}),1),$def(self,"$object_address_group",(function $$object_address_group(obj){var block=$$object_address_group.$$p||nil,str=nil;return $$object_address_group.$$p=null,str=(str=$$("Kernel").$instance_method("to_s").$bind_call(obj)).$chomp(">"),$send(this,"group",[1,str,">"],block.$to_proc())}),1),$def(self,"$comma_breakable",(function(){return this.$text(","),this.$breakable()}),0),$def(self,"$seplist",(function $$seplist(list,sep,iter_method){var $ret_or_1,$yield=$$seplist.$$p||nil,first=nil;return $$seplist.$$p=null,null==sep&&(sep=nil),null==iter_method&&(iter_method="each"),sep=$truthy($ret_or_1=sep)?$ret_or_1:$send(this,"lambda",[],(function $$5(){return(null==$$5.$$s?this:$$5.$$s).$comma_breakable()}),{$$arity:0,$$s:this}),first=!0,$send(list,"__send__",[iter_method],(function($a){var v;return v=$slice.call(arguments),$truthy(first)?first=!1:sep.$call(),Opal.yieldX($yield,$to_a(v))}),-1)}),-2),$def(self,"$pp_object",(function(obj){return $send(this,"object_address_group",[obj],(function $$7(){var self=null==$$7.$$s?this:$$7.$$s;return $send(self,"seplist",[obj.$pretty_print_instance_variables(),$send(self,"lambda",[],(function $$8(){return(null==$$8.$$s?this:$$8.$$s).$text(",")}),{$$arity:0,$$s:self})],(function $$9(v){var self=null==$$9.$$s?this:$$9.$$s;return null==v&&(v=nil),self.$breakable(),$eqeqeq($$("Symbol"),v)&&(v=v.$to_s()),self.$text(v),self.$text("="),$send(self,"group",[1],(function $$10(){var self=null==$$10.$$s?this:$$10.$$s;return self.$breakable(""),self.$pp(obj.$instance_eval(v))}),{$$arity:0,$$s:self})}),{$$arity:1,$$s:self})}),{$$arity:0,$$s:this})}),1),$def(self,"$pp_hash",(function(obj){return $send(this,"group",[1,"{","}"],(function $$11(){var self=null==$$11.$$s?this:$$11.$$s;return $send(self,"seplist",[obj,nil,"each_pair"],(function $$12(k,v){var self=null==$$12.$$s?this:$$12.$$s;return null==k&&(k=nil),null==v&&(v=nil),$send(self,"group",[],(function $$13(){var self=null==$$13.$$s?this:$$13.$$s;return self.$pp(k),self.$text("=>"),$send(self,"group",[1],(function $$14(){var self=null==$$14.$$s?this:$$14.$$s;return self.$breakable(""),self.$pp(v)}),{$$arity:0,$$s:self})}),{$$arity:0,$$s:self})}),{$$arity:2,$$s:self})}),{$$arity:0,$$s:this})}),1)}($nesting[0],$nesting),self.$include($$("PPMethods")),function($base,$super,$parent_nesting){var self=$klass($base,$super,"SingleLine"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);self.$include($$("PPMethods"))}($nesting[0],$$$($$("PrettyPrint"),"SingleLine"),$nesting),function($base,$parent_nesting){var self=$module($base,"ObjectMixin"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$pretty_print",(function(q){var umethod_method=nil,inspect_method=nil;umethod_method=$$("Object").$instance_method("method");try{inspect_method=umethod_method.$bind_call(this,"inspect")}catch($err){if(!Opal.rescue($err,[$$("NameError")]))throw $err;Opal.pop_exception()}return $truthy(inspect_method)&&$neqeq(inspect_method.$owner(),$$("Kernel"))||$not(inspect_method)&&$truthy(this["$respond_to?"]("inspect"))?q.$text(this.$inspect()):q.$pp_object(this)}),1),$def(self,"$pretty_print_cycle",(function(q){return $send(q,"object_address_group",[this],(function(){return q.$breakable(),q.$text("...")}),0)}),1),$def(self,"$pretty_print_instance_variables",(function(){return this.$instance_variables().$sort()}),0),$def(self,"$pretty_print_inspect",(function(){return $eqeq($$("Object").$instance_method("method").$bind_call(this,"pretty_print").$owner(),$$$($$("PP"),"ObjectMixin"))&&this.$raise("pretty_print is not overridden for "+this.$class()),$$("PP").$singleline_pp(this,"".$dup())}),0)}($nesting[0],$nesting)}($nesting[0],$$("PrettyPrint"),$nesting),function($base,$super){var self=$klass($base,null,"Array");$def(self,"$pretty_print",(function(q){return $send(q,"group",[1,"[","]"],(function $$16(){return $send(q,"seplist",[null==$$16.$$s?this:$$16.$$s],(function(v){return null==v&&(v=nil),q.$pp(v)}),1)}),{$$arity:0,$$s:this})}),1),$def(self,"$pretty_print_cycle",(function(q){return q.$text($truthy(this["$empty?"]())?"[]":"[...]")}),1)}($nesting[0]),function($base,$super){var self=$klass($base,null,"Hash");$def(self,"$pretty_print",(function(q){return q.$pp_hash(this)}),1),$def(self,"$pretty_print_cycle",(function(q){return q.$text($truthy(this["$empty?"]())?"{}":"{...}")}),1)}($nesting[0]),function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$pretty_print",(function(q){var h;return h=$hash2([],{}),$send($$("ENV").$keys().$sort(),"each",[],(function(k){var $a;return null==k&&(k=nil),$a=[k,$$("ENV")["$[]"](k)],$send(h,"[]=",$a),$a[$a.length-1]}),1),q.$pp_hash(h)}),1)}(Opal.get_singleton_class($$("ENV")),$nesting),function($base,$super,$parent_nesting){var self=$klass($base,null,"Struct"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);$def(self,"$pretty_print",(function(q){return $send(q,"group",[1,this.$sprintf("#<struct %s",$$("PP").$mcall(this,$$("Kernel"),"class").$name()),">"],(function $$19(){var self=null==$$19.$$s?this:$$19.$$s;return $send(q,"seplist",[$$("PP").$mcall(self,$$("Struct"),"members"),$send(self,"lambda",[],(function(){return q.$text(",")}),0)],(function $$21(member){var self=null==$$21.$$s?this:$$21.$$s;return null==member&&(member=nil),q.$breakable(),q.$text(member.$to_s()),q.$text("="),$send(q,"group",[1],(function $$22(){var self=null==$$22.$$s?this:$$22.$$s;return q.$breakable(""),q.$pp(self["$[]"](member))}),{$$arity:0,$$s:self})}),{$$arity:1,$$s:self})}),{$$arity:0,$$s:this})}),1),$def(self,"$pretty_print_cycle",(function(q){return q.$text(this.$sprintf("#<struct %s:...>",$$("PP").$mcall(this,$$("Kernel"),"class").$name()))}),1)}($nesting[0],0,$nesting),function($base,$super){var self=$klass($base,null,"Range");$def(self,"$pretty_print",(function(q){return q.$pp(this.$begin()),q.$breakable(""),q.$text($truthy(this["$exclude_end?"]())?"...":".."),q.$breakable(""),$truthy(this.$end())?q.$pp(this.$end()):nil}),1)}($nesting[0]),function($base,$super){var self=$klass($base,null,"String");$def(self,"$pretty_print",(function(q){var lines=nil;return lines=this.$lines(),$truthy($rb_gt(lines.$size(),1))?$send(q,"group",[0,"",""],(function $$23(){return $send(q,"seplist",[lines,$send(null==$$23.$$s?this:$$23.$$s,"lambda",[],(function(){return q.$text(" +"),q.$breakable()}),0)],(function(v){return null==v&&(v=nil),q.$pp(v)}),1)}),{$$arity:0,$$s:this}):q.$text(this.$inspect())}),1)}($nesting[0]),function($base,$super){var self=$klass($base,null,"MatchData");$def(self,"$pretty_print",(function(q){var nc=nil;return nc=[],$send(this.$regexp().$named_captures(),"each",[],(function(name,indexes){return null==name&&(name=nil),null==indexes&&(indexes=nil),$send(indexes,"each",[],(function(i){var $a;return null==i&&(i=nil),$send(nc,"[]=",$a=[i,name]),$a[$a.length-1]}),1)}),2),$send(q,"object_group",[this],(function $$28(){var self=null==$$28.$$s?this:$$28.$$s;return q.$breakable(),$send(q,"seplist",[Opal.Range.$new(0,self.$size(),!0),$send(self,"lambda",[],(function(){return q.$breakable()}),0)],(function $$30(i){var self=null==$$30.$$s?this:$$30.$$s;return null==i&&(i=nil),$eqeq(i,0)||($truthy(nc["$[]"](i))?q.$text(nc["$[]"](i)):q.$pp(i),q.$text(":")),q.$pp(self["$[]"](i))}),{$$arity:1,$$s:self})}),{$$arity:0,$$s:this})}),1)}($nesting[0]),function($base,$super,$parent_nesting){var self=$klass($base,$super,"Object"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);self.$include($$$($$("PP"),"ObjectMixin"))}($nesting[0],$$("BasicObject"),$nesting),$send([$$("Numeric"),$$("Symbol"),$$("FalseClass"),$$("TrueClass"),$$("NilClass"),$$("Module")],"each",[],(function $$31(c){return null==c&&(c=nil),$send(c,"class_eval",[],(function $$32(){return $def(null==$$32.$$s?this:$$32.$$s,"$pretty_print_cycle",(function(q){return q.$text(this.$inspect())}),1)}),{$$arity:0,$$s:null==$$31.$$s?this:$$31.$$s})}),{$$arity:1,$$s:self}),$send([$$("Numeric"),$$("FalseClass"),$$("TrueClass"),$$("Module")],"each",[],(function $$33(c){return null==c&&(c=nil),$send(c,"class_eval",[],(function $$34(){return $def(null==$$34.$$s?this:$$34.$$s,"$pretty_print",(function(q){return q.$text(this.$inspect())}),1)}),{$$arity:0,$$s:null==$$33.$$s?this:$$33.$$s})}),{$$arity:1,$$s:self}),function($base,$parent_nesting){var self=$module($base,"Kernel"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $def(self,"$pretty_inspect",(function(){return $$("PP").$pp(this,$$("StringIO").$new()).$string()}),0),$def(self,"$pp",(function($a){var $post_args,objs;return $post_args=$slice.call(arguments),$send(objs=$post_args,"each",[],(function(obj){return null==obj&&(obj=nil),$$("PP").$pp(obj)}),1),$truthy($rb_le(objs.$size(),1))?objs.$first():objs}),-1),self.$module_function("pp")}($nesting[0],$nesting)},Opal.modules.prettyprint=function(Opal){var $klass=Opal.klass,$send=Opal.send,$rb_times=Opal.rb_times,$defs=Opal.defs,$truthy=Opal.truthy,$def=Opal.def,$rb_lt=Opal.rb_lt,$rb_plus=Opal.rb_plus,$rb_minus=Opal.rb_minus,$eqeqeq=Opal.eqeqeq,$assign_ivar_val=Opal.assign_ivar_val,$return_ivar=Opal.return_ivar,$slice=Opal.slice,$thrower=Opal.thrower,$return_val=Opal.return_val,$nesting=[],nil=Opal.nil;return Opal.add_stubs("dup,lambda,*,new,to_proc,flush,attr_reader,last,<,+,deq,empty?,breakables,shift,output,-,width,!,===,first,length,<<,add,break_outmost_groups,group,breakable,break?,call,text,group_sub,nest,depth,push,enq,pop,delete,each,clear,indent,current_group,newline,genspace,group_queue,[],downto,slice!,break,[]="),function($base,$super,$parent_nesting){var self=$klass($base,null,"PrettyPrint"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;return $proto.group_stack=$proto.maxwidth=$proto.output_width=$proto.buffer_width=$proto.group_queue=$proto.buffer=$proto.output=$proto.newline=$proto.genspace=$proto.indent=nil,$defs($$("PrettyPrint"),"$format",(function $$format(output,maxwidth,newline,genspace){var $yield=$$format.$$p||nil,q=nil;return $$format.$$p=null,null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=79),null==newline&&(newline="\n"),null==genspace&&(genspace=$send(this,"lambda",[],(function(n){return null==n&&(n=nil),$rb_times(" ",n)}),1)),q=$send($$("PrettyPrint"),"new",[output,maxwidth,newline],genspace.$to_proc()),Opal.yield1($yield,q),q.$flush(),output}),-1),$defs($$("PrettyPrint"),"$singleline_format",(function $$singleline_format(output,maxwidth,newline,genspace){var q,$yield=$$singleline_format.$$p||nil;return $$singleline_format.$$p=null,null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=nil),null==newline&&(newline=nil),null==genspace&&(genspace=nil),q=$$("SingleLine").$new(output),Opal.yield1($yield,q),output}),-1),$def(self,"$initialize",(function $$initialize(output,maxwidth,newline){var $ret_or_1,root_group,genspace=$$initialize.$$p||nil;return $$initialize.$$p=null,null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=79),null==newline&&(newline="\n"),this.output=output,this.maxwidth=maxwidth,this.newline=newline,this.genspace=$truthy($ret_or_1=genspace)?$ret_or_1:$send(this,"lambda",[],(function(n){return null==n&&(n=nil),$rb_times(" ",n)}),1),this.output_width=0,this.buffer_width=0,this.buffer=[],root_group=$$("Group").$new(0),this.group_stack=[root_group],this.group_queue=$$("GroupQueue").$new(root_group),this.indent=0}),-1),self.$attr_reader("output"),self.$attr_reader("maxwidth"),self.$attr_reader("newline"),self.$attr_reader("genspace"),self.$attr_reader("indent"),self.$attr_reader("group_queue"),$def(self,"$current_group",(function(){return this.group_stack.$last()}),0),$def(self,"$break_outmost_groups",(function(){for(var group=nil,data=nil,$ret_or_1=nil,text=nil;$truthy($rb_lt(this.maxwidth,$rb_plus(this.output_width,this.buffer_width)));){if(!$truthy(group=this.group_queue.$deq()))return nil;for(;!$truthy(group.$breakables()["$empty?"]());)data=this.buffer.$shift(),this.output_width=data.$output(this.output,this.output_width),this.buffer_width=$rb_minus(this.buffer_width,data.$width());for(;$truthy($truthy($ret_or_1=this.buffer["$empty?"]()["$!"]())?$$("Text")["$==="](this.buffer.$first()):$ret_or_1);)text=this.buffer.$shift(),this.output_width=text.$output(this.output,this.output_width),this.buffer_width=$rb_minus(this.buffer_width,text.$width())}}),0),$def(self,"$text",(function(obj,width){var text=nil;return null==width&&(width=obj.$length()),$truthy(this.buffer["$empty?"]())?(this.output["$<<"](obj),this.output_width=$rb_plus(this.output_width,width)):(text=this.buffer.$last(),$eqeqeq($$("Text"),text)||(text=$$("Text").$new(),this.buffer["$<<"](text)),text.$add(obj,width),this.buffer_width=$rb_plus(this.buffer_width,width),this.$break_outmost_groups())}),-2),$def(self,"$fill_breakable",(function(sep,width){return null==sep&&(sep=" "),null==width&&(width=sep.$length()),$send(this,"group",[],(function $$3(){return(null==$$3.$$s?this:$$3.$$s).$breakable(sep,width)}),{$$arity:0,$$s:this})}),-1),$def(self,"$breakable",(function(sep,width){var group=nil;return null==sep&&(sep=" "),null==width&&(width=sep.$length()),group=this.group_stack.$last(),$truthy(group["$break?"]())?(this.$flush(),this.output["$<<"](this.newline),this.output["$<<"](this.genspace.$call(this.indent)),this.output_width=this.indent,this.buffer_width=0):(this.buffer["$<<"]($$("Breakable").$new(sep,width,this)),this.buffer_width=$rb_plus(this.buffer_width,width),this.$break_outmost_groups())}),-1),$def(self,"$group",(function $$group(indent,open_obj,close_obj,open_width,close_width){var $yield=$$group.$$p||nil;return $$group.$$p=null,null==indent&&(indent=0),null==open_obj&&(open_obj=""),null==close_obj&&(close_obj=""),null==open_width&&(open_width=open_obj.$length()),null==close_width&&(close_width=close_obj.$length()),this.$text(open_obj,open_width),$send(this,"group_sub",[],(function $$4(){return $send(null==$$4.$$s?this:$$4.$$s,"nest",[indent],(function(){return Opal.yieldX($yield,[])}),0)}),{$$arity:0,$$s:this}),this.$text(close_obj,close_width)}),-1),$def(self,"$group_sub",(function $$group_sub(){var $yield=$$group_sub.$$p||nil,self=this,group=nil;return $$group_sub.$$p=null,group=$$("Group").$new($rb_plus(self.group_stack.$last().$depth(),1)),self.group_stack.$push(group),self.group_queue.$enq(group),function(){try{return Opal.yieldX($yield,[])}finally{self.group_stack.$pop(),$truthy(group.$breakables()["$empty?"]())&&self.group_queue.$delete(group)}}()}),0),$def(self,"$nest",(function $$nest(indent){var $yield=$$nest.$$p||nil,self=this;return $$nest.$$p=null,self.indent=$rb_plus(self.indent,indent),function(){try{return Opal.yieldX($yield,[])}finally{self.indent=$rb_minus(self.indent,indent)}}()}),1),$def(self,"$flush",(function(){return $send(this.buffer,"each",[],(function $$6(data){var self=null==$$6.$$s?this:$$6.$$s;return null==self.output&&(self.output=nil),null==self.output_width&&(self.output_width=nil),null==data&&(data=nil),self.output_width=data.$output(self.output,self.output_width)}),{$$arity:1,$$s:this}),this.buffer.$clear(),this.buffer_width=0}),0),function($base,$super){var self=$klass($base,null,"Text"),$proto=self.$$prototype;$proto.objs=$proto.width=nil,$def(self,"$initialize",(function(){return this.objs=[],this.width=0}),0),self.$attr_reader("width"),$def(self,"$output",(function(out,output_width){return $send(this.objs,"each",[],(function(obj){return null==obj&&(obj=nil),out["$<<"](obj)}),1),$rb_plus(output_width,this.width)}),2),$def(self,"$add",(function(obj,width){return this.objs["$<<"](obj),this.width=$rb_plus(this.width,width)}),2)}($nesting[0]),function($base,$super){var self=$klass($base,null,"Breakable"),$proto=self.$$prototype;$proto.group=$proto.pp=$proto.indent=$proto.obj=$proto.width=nil,$def(self,"$initialize",(function(sep,width,q){return this.obj=sep,this.width=width,this.pp=q,this.indent=q.$indent(),this.group=q.$current_group(),this.group.$breakables().$push(this)}),3),self.$attr_reader("obj"),self.$attr_reader("width"),self.$attr_reader("indent"),$def(self,"$output",(function(out,output_width){return this.group.$breakables().$shift(),$truthy(this.group["$break?"]())?(out["$<<"](this.pp.$newline()),out["$<<"](this.pp.$genspace().$call(this.indent)),this.indent):($truthy(this.group.$breakables()["$empty?"]())&&this.pp.$group_queue().$delete(this.group),out["$<<"](this.obj),$rb_plus(output_width,this.width))}),2)}($nesting[0]),function($base,$super){var self=$klass($base,null,"Group");$def(self,"$initialize",(function(depth){return this.depth=depth,this.breakables=[],this.break=!1}),1),self.$attr_reader("depth"),self.$attr_reader("breakables"),$def(self,"$break",$assign_ivar_val("break",!0),0),$def(self,"$break?",$return_ivar("break"),0),$def(self,"$first?",(function(){var $a;return!$truthy(($a=this.first,null!=$a&&$a!==nil?"instance-variable":nil))&&(this.first=!1,!0)}),0)}($nesting[0]),function($base,$super){var self=$klass($base,null,"GroupQueue");self.$$prototype.queue=nil,$def(self,"$initialize",(function($a){var groups,self=this;return groups=$slice.call(arguments),self.queue=[],$send(groups,"each",[],(function $$9(g){return null==g&&(g=nil),(null==$$9.$$s?this:$$9.$$s).$enq(g)}),{$$arity:1,$$s:self})}),-1),$def(self,"$enq",(function(group){var depth;for(depth=group.$depth();!$truthy($rb_lt(depth,this.queue.$length()));)this.queue["$<<"]([]);return this.queue["$[]"](depth)["$<<"](group)}),1),$def(self,"$deq",(function(){try{var $t_return=$thrower("return");return $send(this.queue,"each",[],(function(gs){return null==gs&&(gs=nil),$send($rb_minus(gs.$length(),1),"downto",[0],(function(i){var group=nil;if(null==i&&(i=nil),$truthy(gs["$[]"](i).$breakables()["$empty?"]()))return nil;(group=gs["$slice!"](i,1).$first()).$break(),$t_return.$throw(group)}),{$$arity:1,$$ret:$t_return}),$send(gs,"each",[],(function(group){return null==group&&(group=nil),group.$break()}),1),gs.$clear()}),1),nil}catch($e){if($e===$t_return)return $e.$v;throw $e}}),0),$def(self,"$delete",(function(group){return this.queue["$[]"](group.$depth()).$delete(group)}),1)}($nesting[0]),function($base,$super){var self=$klass($base,null,"SingleLine"),$proto=self.$$prototype;return $proto.output=$proto.first=nil,$def(self,"$initialize",(function(output,maxwidth,newline){return null==maxwidth&&(maxwidth=nil),null==newline&&(newline=nil),this.output=output,this.first=[!0]}),-2),$def(self,"$text",(function(obj,width){return null==width&&(width=nil),this.output["$<<"](obj)}),-2),$def(self,"$breakable",(function(sep,width){return null==sep&&(sep=" "),null==width&&(width=nil),this.output["$<<"](sep)}),-1),$def(self,"$nest",(function $$nest(indent){var $yield=$$nest.$$p||nil;return $$nest.$$p=null,Opal.yieldX($yield,[])}),1),$def(self,"$group",(function $$group(indent,open_obj,close_obj,open_width,close_width){var $yield=$$group.$$p||nil;return $$group.$$p=null,null==indent&&(indent=nil),null==open_obj&&(open_obj=""),null==close_obj&&(close_obj=""),null==open_width&&(open_width=nil),null==close_width&&(close_width=nil),this.first.$push(!0),this.output["$<<"](open_obj),Opal.yieldX($yield,[]),this.output["$<<"](close_obj),this.first.$pop()}),-1),$def(self,"$flush",$return_val(nil),0),$def(self,"$first?",(function(){var result;return result=this.first["$[]"](-1),this.first["$[]="](-1,!1),result}),0)}($nesting[0])}($nesting[0],0,$nesting)},Opal.modules.thread=function(Opal){var $klass=Opal.klass,$truthy=Opal.truthy,$defs=Opal.defs,$slice=Opal.slice,$def=Opal.def,$send=Opal.send,$hash2=Opal.hash2,$Opal=Opal.Opal,$alias=Opal.alias,$return_ivar=Opal.return_ivar,$const_set=Opal.const_set,$assign_ivar_val=Opal.assign_ivar_val,$nesting=[],$$=Opal.$r($nesting),nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("allocate,core_initialize!,current,raise,[],coerce_key_name,[]=,key?,keys,private,coerce_to!,clear,empty?,size,shift,push,each,to_proc,pop,=~,last_match,to_i,inspect,attr_reader,path,locked?,lock,unlock"),$klass($nesting[0],$$("StandardError"),"ThreadError"),function($base,$super,$parent_nesting){var self=$klass($base,null,"Thread"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;$proto.fiber_locals=$proto.thread_locals=nil,$defs(self,"$current",(function(){return null==this.current&&(this.current=nil),$truthy(this.current)||(this.current=this.$allocate(),this.current["$core_initialize!"]()),this.current}),0),$defs(self,"$list",(function(){return[this.$current()]}),0),$def(self,"$initialize",(function($a){var self=this;return $slice.call(arguments),self.$raise($$("NotImplementedError"),"Thread creation not available")}),-1),$def(self,"$[]",(function(key){return this.fiber_locals["$[]"](this.$coerce_key_name(key))}),1),$def(self,"$[]=",(function(key,value){var $a;return $a=[this.$coerce_key_name(key),value],$send(this.fiber_locals,"[]=",$a),$a[$a.length-1]}),2),$def(self,"$key?",(function(key){return this.fiber_locals["$key?"](this.$coerce_key_name(key))}),1),$def(self,"$keys",(function(){return this.fiber_locals.$keys()}),0),$def(self,"$thread_variable_get",(function(key){return this.thread_locals["$[]"](this.$coerce_key_name(key))}),1),$def(self,"$thread_variable_set",(function(key,value){var $a;return $a=[this.$coerce_key_name(key),value],$send(this.thread_locals,"[]=",$a),$a[$a.length-1]}),2),$def(self,"$thread_variable?",(function(key){return this.thread_locals["$key?"](this.$coerce_key_name(key))}),1),$def(self,"$thread_variables",(function(){return this.thread_locals.$keys()}),0),self.$private(),$def(self,"$core_initialize!",(function(){return this.thread_locals=$hash2([],{}),this.fiber_locals=$hash2([],{})}),0),$def(self,"$coerce_key_name",(function(key){return $Opal["$coerce_to!"](key,$$("String"),"to_s")}),1),function($base,$super,$parent_nesting){var self=$klass($base,null,"Queue"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);self.$$prototype.storage=nil,$def(self,"$initialize",(function(){return this.$clear()}),0),$def(self,"$clear",(function(){return this.storage=[]}),0),$def(self,"$empty?",(function(){return this.storage["$empty?"]()}),0),$def(self,"$size",(function(){return this.storage.$size()}),0),$def(self,"$pop",(function(non_block){return null==non_block&&(non_block=!1),$truthy(this["$empty?"]())&&($truthy(non_block)&&this.$raise($$("ThreadError"),"Queue empty"),this.$raise($$("ThreadError"),"Deadlock")),this.storage.$shift()}),-1),$def(self,"$push",(function(value){return this.storage.$push(value)}),1),$def(self,"$each",(function $$each(){var block=$$each.$$p||nil;return $$each.$$p=null,$send(this.storage,"each",[],block.$to_proc())}),0),$alias(self,"<<","push"),$alias(self,"deq","pop"),$alias(self,"enq","push"),$alias(self,"length","size"),$alias(self,"shift","pop")}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $nesting=[$klass($base,null,"Backtrace")].concat($parent_nesting);(function($base,$super,$parent_nesting){var self=$klass($base,null,"Location"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting),$proto=self.$$prototype;$proto.label=$proto.str=nil,$def(self,"$initialize",(function(str){var $ret_or_1;return this.str=str,str["$=~"](/^(.*?):(\d+):(\d+):in `(.*?)'$/),this.path=$$("Regexp").$last_match(1),this.label=$$("Regexp").$last_match(4),this.lineno=$$("Regexp").$last_match(2).$to_i(),this.label["$=~"](/(\w+)$/),this.base_label=$truthy($ret_or_1=$$("Regexp").$last_match(1))?$ret_or_1:this.label}),1),$def(self,"$to_s",$return_ivar("str"),0),$def(self,"$inspect",(function(){return this.str.$inspect()}),0),self.$attr_reader("base_label","label","lineno","path"),$alias(self,"absolute_path","path")})($nesting[0],0,$nesting)}($nesting[0],0,$nesting)}($nesting[0],0,$nesting),$const_set($nesting[0],"Queue",$$$($$("Thread"),"Queue")),function($base,$super,$parent_nesting){var self=$klass($base,null,"Mutex"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$$prototype.locked=nil,$def(self,"$initialize",$assign_ivar_val("locked",!1),0),$def(self,"$lock",(function(){return $truthy(this.locked)&&this.$raise($$("ThreadError"),"Deadlock"),this.locked=!0,this}),0),$def(self,"$locked?",$return_ivar("locked"),0),$def(self,"$owned?",$return_ivar("locked"),0),$def(self,"$try_lock",(function(){return!$truthy(this["$locked?"]())&&(this.$lock(),!0)}),0),$def(self,"$unlock",(function(){return $truthy(this.locked)||this.$raise($$("ThreadError"),"Mutex not locked"),this.locked=!1,this}),0),$def(self,"$synchronize",(function $$synchronize(){var $yield=$$synchronize.$$p||nil,self=this;return $$synchronize.$$p=null,self.$lock(),function(){try{return Opal.yieldX($yield,[])}finally{self.$unlock()}}()}),0)}($nesting[0],0,$nesting)},Opal.modules["opal-replutils"]=function(Opal){var $module=Opal.module,$truthy=Opal.truthy,$lambda=Opal.lambda,$rb_plus=Opal.rb_plus,$send=Opal.send,$rb_minus=Opal.rb_minus,$def=Opal.def,$hash2=Opal.hash2,$klass=Opal.klass,$const_set=Opal.const_set,$defs=Opal.defs,$gvars=Opal.gvars,$send2=Opal.send2,$find_super=Opal.find_super,$slice=Opal.slice,$to_a=Opal.to_a,$regexp=Opal.regexp,$eqeqeq=Opal.eqeqeq,self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$;return Opal.add_stubs("require,module_function,methods,ancestors,class,instance_variables,include?,instance_methods,constants,class_variables,empty?,+,[],join,sort,map,each,&,-,name,default,colorize,inspect,pp,ls,call,full_message,gets,parse,eval_and_print,puts,[]=,new,string,guard_inspect_key,flush,<<,length,dig,scan,to_proc,tokenize,===,=~,token"),self.$require("pp"),self.$require("stringio"),function($base,$parent_nesting){var self=$module($base,"REPLUtils"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return self.$module_function(),$def(self,"$ls",(function(object,colorize){var methods=nil,imethods=nil,ancestors=nil,constants=nil,ivs=nil,cvs=nil,blue=nil,dark_blue=nil,out=nil;return methods=imethods=object.$methods(),ancestors=object.$class().$ancestors(),constants=[],ivs=object.$instance_variables(),cvs=[],$truthy([$$("Class"),$$("Module")]["$include?"](object.$class()))&&(imethods=object.$instance_methods(),ancestors=object.$ancestors(),constants=object.$constants(),cvs=object.$class_variables()),$truthy(colorize)?(blue=$lambda((function(i){return null==i&&(i=nil),"[1;34m"+i+"[0m"}),1),dark_blue=$lambda((function(i){return null==i&&(i=nil),"[34m"+i+"[0m"}),1)):blue=dark_blue=$lambda((function(i){return null==i&&(i=nil),i}),1),out="",$truthy(cvs["$empty?"]())||(out=$rb_plus(blue["$[]"]("class variables")+": "+$send(cvs,"map",[],(function(i){return null==i&&(i=nil),dark_blue["$[]"](i)}),1).$sort().$join("  ")+"\n",out)),$truthy(ivs["$empty?"]())||(out=$rb_plus(blue["$[]"]("instance variables")+": "+$send(ivs,"map",[],(function(i){return null==i&&(i=nil),dark_blue["$[]"](i)}),1).$sort().$join("  ")+"\n",out)),$send(ancestors,"each",[],(function(a){var meths=nil;return null==a&&(a=nil),meths=a.$instance_methods(!1)["$&"](imethods),methods=$rb_minus(methods,meths),imethods=$rb_minus(imethods,meths),$truthy(meths["$empty?"]())||$truthy([$$("Object"),$$("BasicObject"),$$("Kernel"),$$$($$("PP"),"ObjectMixin")]["$include?"](a))?nil:out=$rb_plus(blue["$[]"](a.$name()+"#methods")+": "+meths.$sort().$join("  ")+"\n",out)}),1),methods=methods["$&"](object.$methods(!1)),$truthy(methods["$empty?"]())||(out=$rb_plus(blue["$[]"]("self.methods")+": "+methods.$sort().$join("  ")+"\n",out)),$truthy(constants["$empty?"]())||(out=$rb_plus(blue["$[]"]("constants")+": "+$send(constants,"map",[],(function(i){return null==i&&(i=nil),dark_blue["$[]"](i)}),1).$sort().$join("  ")+"\n",out)),out}),2),$def(self,"$eval_and_print",(function $$eval_and_print(func,mode,colorize,binding){var self=this,printer=nil,e=nil;null==binding&&(binding=nil);try{printer=$truthy(colorize)?$lambda((function(i){null==i&&(i=nil);try{return $$("ColorPrinter").$default(i)}catch($err){if(!Opal.rescue($err,[$$("StandardError")]))throw $err;$err;try{return $$("ColorPrinter").$colorize($$("Opal").$inspect(i))}finally{Opal.pop_exception()}}}),1):$lambda((function(i){var out=nil;null==i&&(i=nil);try{return out=[],$$("PP").$pp(i,out),out.$join()}catch($err){if(!Opal.rescue($err,[$$("StandardError")]))throw $err;try{return $$("Opal").$inspect(i)}finally{Opal.pop_exception()}}}),1);var $_result=binding===nil?eval(func):binding.$js_eval(func);if("silent"==mode)return nil;if(null===$_result)return"=> null";if(void 0===$_result)return"=> undefined";if(void 0!==$_result.$$class){if("ls"==mode)return self.$ls($_result,colorize);var pretty=printer.$call($_result);return pretty.match(/\n.*?\n/)&&(pretty="\n"+pretty),"=> "+pretty}try{var json=JSON.stringify($_result,null,2);return colorize||(json=$$("ColorPrinter").$colorize(json)),"=> "+$_result.toString()+" => "+json}catch(e){return"=> "+$_result.toString()}}catch($err){if(!Opal.rescue($err,[$$("Exception")]))throw $err;e=$err;try{return e.$full_message($hash2(["highlight"],{highlight:!0}))}finally{Opal.pop_exception()}}}),-4),$def(self,"$js_repl",(function(){for(var line=nil,input=nil,out=nil;$truthy(line=this.$gets());)input=$$("JSON").$parse(line),out=this.$eval_and_print(input["$[]"]("code"),input["$[]"]("mode"),input["$[]"]("colors")),$truthy(out)&&this.$puts(out),this.$puts("<<<ready>>>")}),0),function($base,$super,$parent_nesting){var self=$klass($base,$super,"ColorPrinter"),$nesting=[self].concat($parent_nesting),$$=Opal.$r($nesting);return $const_set($nesting[0],"TOKEN_COLORS",$hash2(["debug","annotation","attribute_name","attribute_value","binary","char","class","class_variable","color","comment","constant","decorator","definition","directive","docstring","doctype","done","entity","error","exception","float","function","global_variable","hex","id","include","integer","imaginary","important","key","keyword","label","local_variable","namespace","octal","predefined","predefined_constant","predefined_type","preprocessor","pseudo_class","regexp","reserved","shell","string","symbol","tag","type","value","variable","insert","delete","change","head","reset"],{debug:"[1;37;44m",annotation:"[34m",attribute_name:"[35m",attribute_value:"[31m",binary:$hash2(["self","char","delimiter"],{self:"[31m",char:"[1;31m",delimiter:"[1;31m"}),char:$hash2(["self","delimiter"],{self:"[35m",delimiter:"[1;35m"}),class:"[1;35;4m",class_variable:"[36m",color:"[32m",comment:$hash2(["self","char","delimiter"],{self:"[1;30m",char:"[37m",delimiter:"[37m"}),constant:"[1;34;4m",decorator:"[35m",definition:"[1;33m",directive:"[33m",docstring:"[31m",doctype:"[1;34m",done:"[1;30;2m",entity:"[31m",error:"[1;37;41m",exception:"[1;31m",float:"[1;35m",function:"[1;34m",global_variable:"[1;32m",hex:"[1;36m",id:"[1;34m",include:"[31m",integer:"[1;34m",imaginary:"[1;34m",important:"[1;31m",key:$hash2(["self","char","delimiter"],{self:"[35m",char:"[1;35m",delimiter:"[1;35m"}),keyword:"[32m",label:"[1;33m",local_variable:"[33m",namespace:"[1;35m",octal:"[1;34m",predefined:"[36m",predefined_constant:"[1;36m",predefined_type:"[1;32m",preprocessor:"[1;36m",pseudo_class:"[1;34m",regexp:$hash2(["self","delimiter","modifier","char"],{self:"[35m",delimiter:"[1;35m",modifier:"[35m",char:"[1;35m"}),reserved:"[32m",shell:$hash2(["self","char","delimiter","escape"],{self:"[33m",char:"[1;33m",delimiter:"[1;33m",escape:"[1;33m"}),string:$hash2(["self","modifier","char","delimiter","escape"],{self:"[31m",modifier:"[1;31m",char:"[1;35m",delimiter:"[1;31m",escape:"[1;31m"}),symbol:$hash2(["self","delimiter"],{self:"[33m",delimiter:"[1;33m"}),tag:"[32m",type:"[1;34m",value:"[36m",variable:"[34m",insert:$hash2(["self","insert","eyecatcher"],{self:"[42m",insert:"[1;32;42m",eyecatcher:"[102m"}),delete:$hash2(["self","delete","eyecatcher"],{self:"[41m",delete:"[1;31;41m",eyecatcher:"[101m"}),change:$hash2(["self","change"],{self:"[44m",change:"[37;44m"}),head:$hash2(["self","filename"],{self:"[45m",filename:"[37;45m"}),reset:"[0m"})),$$("TOKEN_COLORS")["$[]="]("keyword",$$("TOKEN_COLORS")["$[]"]("reserved")),$$("TOKEN_COLORS")["$[]="]("method",$$("TOKEN_COLORS")["$[]"]("function")),$$("TOKEN_COLORS")["$[]="]("escape",$$("TOKEN_COLORS")["$[]"]("delimiter")),$defs(self,"$default",(function(obj,width){var pager=nil;return null==width&&(width=79),pager=$$("StringIO").$new(),this.$pp(obj,pager,width),pager.$string()}),-2),$defs(self,"$pp",(function(obj,output,max_width){var queue=nil;return null==$gvars.DEFAULT_OUTPUT&&($gvars.DEFAULT_OUTPUT=nil),null==output&&(output=$gvars.DEFAULT_OUTPUT),null==max_width&&(max_width=79),queue=$$("ColorPrinter").$new(output,max_width,"\n"),$send(queue,"guard_inspect_key",[],(function(){return queue.$pp(obj)}),0),queue.$flush(),output["$<<"]("\n")}),-2),$def(self,"$text",(function $$text(str,max_width){return $$text.$$p=null,null==max_width&&(max_width=str.$length()),$send2(this,$find_super(this,"text",$$text,!1,!0),"text",[$$("ColorPrinter").$colorize(str),max_width],null)}),-2),$defs(self,"$token",(function(string,$a){var name;return name=$slice.call(arguments,1),$rb_plus($rb_plus($send($$("TOKEN_COLORS"),"dig",$to_a(name)),string),$$("TOKEN_COLORS")["$[]"]("reset"))}),-2),$const_set($nesting[0],"NUMBER","[+-]?(?:0x[0-9a-fA-F]+|[0-9.]+(?:e[+-][0-9]+|i)?)"),$const_set($nesting[0],"REGEXP","/.*?/[iesu]*"),$const_set($nesting[0],"STRING",'".*?"'),$const_set($nesting[0],"TOKEN_REGEXP",$regexp(["(\\s+|=>|[@$:]?[a-z]\\w+|[A-Z]\\w+|",$$("NUMBER"),"|",$$("REGEXP"),"|",$$("STRING"),"|#<.*?[> ]|.)"])),$defs(self,"$tokenize",(function(str){return $send(str.$scan($$("TOKEN_REGEXP")),"map",[],"first".$to_proc())}),1),$defs(self,"$colorize",(function(str){var tokens;return tokens=this.$tokenize(str),$send(tokens,"map",[],(function $$12(tok){var $ret_or_1,self=null==$$12.$$s?this:$$12.$$s;return null==tok&&(tok=nil),$eqeqeq(/^[0-9+-]/,$ret_or_1=tok)?$truthy(/[.e]/["$=~"](tok))?self.$token(tok,"float"):self.$token(tok,"integer"):$eqeqeq(/^"/,$ret_or_1)?self.$token(tok,"string","self"):$eqeqeq(/^:/,$ret_or_1)?self.$token(tok,"symbol","self"):$eqeqeq(/^[A-Z]/,$ret_or_1)?self.$token(tok,"constant"):$eqeqeq("<",$ret_or_1)||$eqeqeq("#",$ret_or_1)||$eqeqeq(/^#</,$ret_or_1)||$eqeqeq("=",$ret_or_1)||$eqeqeq(">",$ret_or_1)?self.$token(tok,"keyword"):$eqeqeq(/^\/./,$ret_or_1)?self.$token(tok,"regexp","self"):$eqeqeq("true",$ret_or_1)||$eqeqeq("false",$ret_or_1)||$eqeqeq("nil",$ret_or_1)?self.$token(tok,"predefined_constant"):self.$token(tok,"reset")}),{$$arity:1,$$s:this}).$join()}),1)}($nesting[0],$$$("PP"),$nesting)}($nesting[0],$nesting)};
