Opal.modules.thread=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$klass=Opal.klass,$truthy=Opal.truthy,$send=Opal.send,$hash2=Opal.hash2,$alias=Opal.alias;return Opal.add_stubs(["$allocate","$core_initialize!","$current","$raise","$[]","$coerce_key_name","$[]=","$-","$key?","$keys","$private","$coerce_to!","$clear","$empty?","$size","$shift","$push","$each","$to_proc","$=~","$last_match","$to_i","$inspect","$attr_reader","$locked?","$lock","$unlock"]),function($base,$super,$parent_nesting){[$klass($base,$super,"ThreadError")].concat($parent_nesting)}($nesting[0],$$($nesting,"StandardError"),$nesting),function($base,$super,$parent_nesting){var $Thread_current$1,$Thread_list$2,$Thread_initialize$3,$Thread_$$$4,$Thread_$$$eq$5,$Thread_key$ques$6,$Thread_keys$7,$Thread_thread_variable_get$8,$Thread_thread_variable_set$9,$Thread_thread_variable$ques$10,$Thread_thread_variables$11,$Thread_core_initialize$excl$12,$Thread_coerce_key_name$13,self=$klass($base,null,"Thread"),$nesting=[self].concat($parent_nesting);self.$$prototype.fiber_locals=self.$$prototype.thread_locals=nil,Opal.defs(self,"$current",$Thread_current$1=function(){return null==this.current&&(this.current=nil),$truthy(this.current)||(this.current=this.$allocate(),this.current["$core_initialize!"]()),this.current},$Thread_current$1.$$arity=0),Opal.defs(self,"$list",$Thread_list$2=function(){return[this.$current()]},$Thread_list$2.$$arity=0),Opal.def(self,"$initialize",$Thread_initialize$3=function($a){var self=this;return Opal.slice.call(arguments,0,arguments.length),self.$raise($$($nesting,"NotImplementedError"),"Thread creation not available")},$Thread_initialize$3.$$arity=-1),Opal.def(self,"$[]",$Thread_$$$4=function(key){return this.fiber_locals["$[]"](this.$coerce_key_name(key))},$Thread_$$$4.$$arity=1),Opal.def(self,"$[]=",$Thread_$$$eq$5=function(key,value){var $writer;return $writer=[this.$coerce_key_name(key),value],$send(this.fiber_locals,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Thread_$$$eq$5.$$arity=2),Opal.def(self,"$key?",$Thread_key$ques$6=function(key){return this.fiber_locals["$key?"](this.$coerce_key_name(key))},$Thread_key$ques$6.$$arity=1),Opal.def(self,"$keys",$Thread_keys$7=function(){return this.fiber_locals.$keys()},$Thread_keys$7.$$arity=0),Opal.def(self,"$thread_variable_get",$Thread_thread_variable_get$8=function(key){return this.thread_locals["$[]"](this.$coerce_key_name(key))},$Thread_thread_variable_get$8.$$arity=1),Opal.def(self,"$thread_variable_set",$Thread_thread_variable_set$9=function(key,value){var $writer;return $writer=[this.$coerce_key_name(key),value],$send(this.thread_locals,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Thread_thread_variable_set$9.$$arity=2),Opal.def(self,"$thread_variable?",$Thread_thread_variable$ques$10=function(key){return this.thread_locals["$key?"](this.$coerce_key_name(key))},$Thread_thread_variable$ques$10.$$arity=1),Opal.def(self,"$thread_variables",$Thread_thread_variables$11=function(){return this.thread_locals.$keys()},$Thread_thread_variables$11.$$arity=0),self.$private(),Opal.def(self,"$core_initialize!",$Thread_core_initialize$excl$12=function(){return this.thread_locals=$hash2([],{}),this.fiber_locals=$hash2([],{})},$Thread_core_initialize$excl$12.$$arity=0),Opal.def(self,"$coerce_key_name",$Thread_coerce_key_name$13=function(key){return $$($nesting,"Opal")["$coerce_to!"](key,$$($nesting,"String"),"to_s")},$Thread_coerce_key_name$13.$$arity=1),function($base,$super,$parent_nesting){var $Queue_initialize$14,$Queue_clear$15,$Queue_empty$ques$16,$Queue_size$17,$Queue_pop$18,$Queue_push$19,$Queue_each$20,self=$klass($base,null,"Queue"),$nesting=[self].concat($parent_nesting);self.$$prototype.storage=nil,Opal.def(self,"$initialize",$Queue_initialize$14=function(){return this.$clear()},$Queue_initialize$14.$$arity=0),Opal.def(self,"$clear",$Queue_clear$15=function(){return this.storage=[]},$Queue_clear$15.$$arity=0),Opal.def(self,"$empty?",$Queue_empty$ques$16=function(){return this.storage["$empty?"]()},$Queue_empty$ques$16.$$arity=0),Opal.def(self,"$size",$Queue_size$17=function(){return this.storage.$size()},$Queue_size$17.$$arity=0),$alias(self,"length","size"),Opal.def(self,"$pop",$Queue_pop$18=function(non_block){return null==non_block&&(non_block=!1),$truthy(this["$empty?"]())&&($truthy(non_block)&&this.$raise($$($nesting,"ThreadError"),"Queue empty"),this.$raise($$($nesting,"ThreadError"),"Deadlock")),this.storage.$shift()},$Queue_pop$18.$$arity=-1),$alias(self,"shift","pop"),$alias(self,"deq","pop"),Opal.def(self,"$push",$Queue_push$19=function(value){return this.storage.$push(value)},$Queue_push$19.$$arity=1),$alias(self,"<<","push"),$alias(self,"enq","push"),Opal.def(self,"$each",$Queue_each$20=function(){var $iter=$Queue_each$20.$$p,block=$iter||nil;return $iter&&($Queue_each$20.$$p=null),$iter&&($Queue_each$20.$$p=null),$send(this.storage,"each",[],block.$to_proc())},$Queue_each$20.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $nesting=[$klass($base,null,"Backtrace")].concat($parent_nesting);(function($base,$super,$parent_nesting){var $Location_initialize$21,$Location_to_s$22,$Location_inspect$23,self=$klass($base,null,"Location"),$nesting=[self].concat($parent_nesting);self.$$prototype.label=self.$$prototype.str=nil,Opal.def(self,"$initialize",$Location_initialize$21=function(str){var self=this,$ret_or_1=nil;return self.str=str,str["$=~"](/^(.*?):(\d+):(\d+):in `(.*?)'$/),self.path=$$($nesting,"Regexp").$last_match(1),self.label=$$($nesting,"Regexp").$last_match(4),self.lineno=$$($nesting,"Regexp").$last_match(2).$to_i(),self.label["$=~"](/(\w+)$/),self.base_label=$truthy($ret_or_1=$$($nesting,"Regexp").$last_match(1))?$ret_or_1:self.label},$Location_initialize$21.$$arity=1),Opal.def(self,"$to_s",$Location_to_s$22=function(){return this.str},$Location_to_s$22.$$arity=0),Opal.def(self,"$inspect",$Location_inspect$23=function(){return this.str.$inspect()},$Location_inspect$23.$$arity=0),self.$attr_reader("base_label","label","lineno","path"),$alias(self,"absolute_path","path")})($nesting[0],0,$nesting)}($nesting[0],0,$nesting)}($nesting[0],0,$nesting),Opal.const_set($nesting[0],"Queue",$$$($$($nesting,"Thread"),"Queue")),function($base,$super,$parent_nesting){var $Mutex_initialize$24,$Mutex_lock$25,$Mutex_locked$ques$26,$Mutex_owned$ques$27,$Mutex_try_lock$28,$Mutex_unlock$29,$Mutex_synchronize$30,self=$klass($base,null,"Mutex"),$nesting=[self].concat($parent_nesting);return self.$$prototype.locked=nil,Opal.def(self,"$initialize",$Mutex_initialize$24=function(){return this.locked=!1},$Mutex_initialize$24.$$arity=0),Opal.def(self,"$lock",$Mutex_lock$25=function(){return $truthy(this.locked)&&this.$raise($$($nesting,"ThreadError"),"Deadlock"),this.locked=!0,this},$Mutex_lock$25.$$arity=0),Opal.def(self,"$locked?",$Mutex_locked$ques$26=function(){return this.locked},$Mutex_locked$ques$26.$$arity=0),Opal.def(self,"$owned?",$Mutex_owned$ques$27=function(){return this.locked},$Mutex_owned$ques$27.$$arity=0),Opal.def(self,"$try_lock",$Mutex_try_lock$28=function(){return!$truthy(this["$locked?"]())&&(this.$lock(),!0)},$Mutex_try_lock$28.$$arity=0),Opal.def(self,"$unlock",$Mutex_unlock$29=function(){return $truthy(this.locked)||this.$raise($$($nesting,"ThreadError"),"Mutex not locked"),this.locked=!1,this},$Mutex_unlock$29.$$arity=0),Opal.def(self,"$synchronize",$Mutex_synchronize$30=function(){var $iter=$Mutex_synchronize$30.$$p,$yield=$iter||nil,self=this;return $iter&&($Mutex_synchronize$30.$$p=null),self.$lock(),function(){try{return Opal.yieldX($yield,[])}finally{self.$unlock()}}()},$Mutex_synchronize$30.$$arity=0),nil&&"synchronize"}($nesting[0],0,$nesting)},Opal.modules.stringio=function(Opal){function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs>rhs:lhs["$>"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$klass=Opal.klass,$send2=Opal.send2,$find_super=Opal.find_super,$alias=Opal.alias,$truthy=Opal.truthy;return Opal.add_stubs(["$new","$call","$close","$attr_accessor","$check_readable","$==","$length","$===","$>=","$raise","$>","$+","$-","$seek","$check_writable","$String","$[]","$eof?","$write","$read"]),function($base,$super,$parent_nesting){var $StringIO_open$1,$StringIO_initialize$2,$StringIO_eof$ques$3,$StringIO_seek$4,$StringIO_tell$5,$StringIO_rewind$6,$StringIO_write$7,$StringIO_read$8,$StringIO_sysread$9,self=$klass($base,$super,"StringIO"),$nesting=[self].concat($parent_nesting);return self.$$prototype.position=self.$$prototype.string=nil,Opal.defs(self,"$open",$StringIO_open$1=function(string,mode){var res,$iter=$StringIO_open$1.$$p,block=$iter||nil,io=nil;return $iter&&($StringIO_open$1.$$p=null),$iter&&($StringIO_open$1.$$p=null),null==string&&(string=""),null==mode&&(mode=nil),io=this.$new(string,mode),res=block.$call(io),io.$close(),res},$StringIO_open$1.$$arity=-1),self.$attr_accessor("string"),Opal.def(self,"$initialize",$StringIO_initialize$2=function(string,mode){var $iter=$StringIO_initialize$2.$$p;return $iter&&($StringIO_initialize$2.$$p=null),null==string&&(string=""),null==mode&&(mode="rw"),this.string=string,this.position=0,$send2(this,$find_super(this,"initialize",$StringIO_initialize$2,!1,!0),"initialize",[nil,mode],null)},$StringIO_initialize$2.$$arity=-1),Opal.def(self,"$eof?",$StringIO_eof$ques$3=function(){return this.$check_readable(),this.position["$=="](this.string.$length())},$StringIO_eof$ques$3.$$arity=0),$alias(self,"eof","eof?"),Opal.def(self,"$seek",$StringIO_seek$4=function(pos,whence){var $case,lhs,rhs;return null==whence&&(whence=$$$($$($nesting,"IO"),"SEEK_SET")),this.read_buffer="",$case=whence,$$$($$($nesting,"IO"),"SEEK_SET")["$==="]($case)?($truthy((rhs=0,"number"==typeof(lhs=pos)&&"number"==typeof rhs?lhs>=rhs:lhs["$>="](rhs)))||this.$raise($$$($$($nesting,"Errno"),"EINVAL")),this.position=pos):$$$($$($nesting,"IO"),"SEEK_CUR")["$==="]($case)?$truthy($rb_gt($rb_plus(this.position,pos),this.string.$length()))?this.position=this.string.$length():this.position=$rb_plus(this.position,pos):$$$($$($nesting,"IO"),"SEEK_END")["$==="]($case)&&($truthy($rb_gt(pos,this.string.$length()))?this.position=0:this.position=$rb_minus(this.position,pos)),0},$StringIO_seek$4.$$arity=-2),Opal.def(self,"$tell",$StringIO_tell$5=function(){return this.position},$StringIO_tell$5.$$arity=0),$alias(self,"pos","tell"),$alias(self,"pos=","seek"),Opal.def(self,"$rewind",$StringIO_rewind$6=function(){return this.$seek(0)},$StringIO_rewind$6.$$arity=0),Opal.def(self,"$write",$StringIO_write$7=function(string){var before=nil,after=nil;return this.$check_writable(),this.read_buffer="",string=this.$String(string),this.string.$length()["$=="](this.position)?(this.string=$rb_plus(this.string,string),this.position=$rb_plus(this.position,string.$length())):(before=this.string["$[]"](Opal.Range.$new(0,$rb_minus(this.position,1),!1)),after=this.string["$[]"](Opal.Range.$new($rb_plus(this.position,string.$length()),-1,!1)),this.string=$rb_plus($rb_plus(before,string),after),this.position=$rb_plus(this.position,string.$length()))},$StringIO_write$7.$$arity=1),Opal.def(self,"$read",$StringIO_read$8=function(length,outbuf){var string,self=this,str=nil;return null==length&&(length=nil),null==outbuf&&(outbuf=nil),self.$check_readable(),$truthy(self["$eof?"]())?nil:(string=$truthy(length)?(str=self.string["$[]"](self.position,length),self.position=$rb_plus(self.position,length),$truthy($rb_gt(self.position,self.string.$length()))&&(self.position=self.string.$length()),str):(str=self.string["$[]"](Opal.Range.$new(self.position,-1,!1)),self.position=self.string.$length(),str),$truthy(outbuf)?outbuf.$write(string):string)},$StringIO_read$8.$$arity=-1),Opal.def(self,"$sysread",$StringIO_sysread$9=function(length){return this.$check_readable(),this.$read(length)},$StringIO_sysread$9.$$arity=1),$alias(self,"readpartial","read")}($nesting[0],$$($nesting,"IO"),$nesting)},Opal.modules.prettyprint=function(Opal){function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_lt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.$$$,Opal.$$),$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy;return Opal.add_stubs(["$dup","$lambda","$*","$new","$to_proc","$flush","$attr_reader","$last","$<","$+","$deq","$empty?","$breakables","$shift","$output","$-","$width","$!","$===","$first","$length","$<<","$add","$break_outmost_groups","$group","$breakable","$break?","$call","$text","$group_sub","$nest","$depth","$push","$enq","$pop","$delete","$each","$clear","$indent","$current_group","$newline","$genspace","$group_queue","$[]","$downto","$slice!","$break","$[]="]),function($base,$super,$parent_nesting){var $PrettyPrint_format$1,$PrettyPrint_singleline_format$3,$PrettyPrint_initialize$4,$PrettyPrint_current_group$6,$PrettyPrint_break_outmost_groups$7,$PrettyPrint_text$8,$PrettyPrint_fill_breakable$9,$PrettyPrint_breakable$11,$PrettyPrint_group$12,$PrettyPrint_group_sub$15,$PrettyPrint_nest$16,$PrettyPrint_flush$17,self=$klass($base,null,"PrettyPrint"),$nesting=[self].concat($parent_nesting);return self.$$prototype.group_stack=self.$$prototype.maxwidth=self.$$prototype.output_width=self.$$prototype.buffer_width=self.$$prototype.group_queue=self.$$prototype.buffer=self.$$prototype.output=self.$$prototype.newline=self.$$prototype.genspace=self.$$prototype.indent=nil,Opal.defs($$($nesting,"PrettyPrint"),"$format",$PrettyPrint_format$1=function(output,maxwidth,newline,genspace){var $$2,$iter=$PrettyPrint_format$1.$$p,$yield=$iter||nil,q=nil;return $iter&&($PrettyPrint_format$1.$$p=null),null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=79),null==newline&&(newline="\n"),null==genspace&&(genspace=$send(this,"lambda",[],(($$2=function(n){null==$$2.$$s||$$2.$$s;return null==n&&(n=nil),$rb_times(" ",n)}).$$s=this,$$2.$$arity=1,$$2))),q=$send($$($nesting,"PrettyPrint"),"new",[output,maxwidth,newline],genspace.$to_proc()),Opal.yield1($yield,q),q.$flush(),output},$PrettyPrint_format$1.$$arity=-1),Opal.defs($$($nesting,"PrettyPrint"),"$singleline_format",$PrettyPrint_singleline_format$3=function(output,maxwidth,newline,genspace){var q,$iter=$PrettyPrint_singleline_format$3.$$p,$yield=$iter||nil;return $iter&&($PrettyPrint_singleline_format$3.$$p=null),null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=nil),null==newline&&(newline=nil),null==genspace&&(genspace=nil),q=$$($nesting,"SingleLine").$new(output),Opal.yield1($yield,q),output},$PrettyPrint_singleline_format$3.$$arity=-1),Opal.def(self,"$initialize",$PrettyPrint_initialize$4=function(output,maxwidth,newline){var $$5,root_group,$iter=$PrettyPrint_initialize$4.$$p,genspace=$iter||nil,self=this,$ret_or_1=nil;return $iter&&($PrettyPrint_initialize$4.$$p=null),$iter&&($PrettyPrint_initialize$4.$$p=null),null==output&&(output="".$dup()),null==maxwidth&&(maxwidth=79),null==newline&&(newline="\n"),self.output=output,self.maxwidth=maxwidth,self.newline=newline,self.genspace=$truthy($ret_or_1=genspace)?$ret_or_1:$send(self,"lambda",[],(($$5=function(n){return null==$$5.$$s||$$5.$$s,null==n&&(n=nil),$rb_times(" ",n)}).$$s=self,$$5.$$arity=1,$$5)),self.output_width=0,self.buffer_width=0,self.buffer=[],root_group=$$($nesting,"Group").$new(0),self.group_stack=[root_group],self.group_queue=$$($nesting,"GroupQueue").$new(root_group),self.indent=0},$PrettyPrint_initialize$4.$$arity=-1),self.$attr_reader("output"),self.$attr_reader("maxwidth"),self.$attr_reader("newline"),self.$attr_reader("genspace"),self.$attr_reader("indent"),self.$attr_reader("group_queue"),Opal.def(self,"$current_group",$PrettyPrint_current_group$6=function(){return this.group_stack.$last()},$PrettyPrint_current_group$6.$$arity=0),Opal.def(self,"$break_outmost_groups",$PrettyPrint_break_outmost_groups$7=function(){for(var self=this,group=nil,data=nil,$ret_or_2=nil,text=nil;$truthy($rb_lt(self.maxwidth,$rb_plus(self.output_width,self.buffer_width)));){if(!$truthy(group=self.group_queue.$deq()))return nil;for(;!$truthy(group.$breakables()["$empty?"]());)data=self.buffer.$shift(),self.output_width=data.$output(self.output,self.output_width),self.buffer_width=$rb_minus(self.buffer_width,data.$width());for(;$truthy($truthy($ret_or_2=self.buffer["$empty?"]()["$!"]())?$$($nesting,"Text")["$==="](self.buffer.$first()):$ret_or_2);)text=self.buffer.$shift(),self.output_width=text.$output(self.output,self.output_width),self.buffer_width=$rb_minus(self.buffer_width,text.$width())}},$PrettyPrint_break_outmost_groups$7.$$arity=0),Opal.def(self,"$text",$PrettyPrint_text$8=function(obj,width){var text=nil;return null==width&&(width=obj.$length()),$truthy(this.buffer["$empty?"]())?(this.output["$<<"](obj),this.output_width=$rb_plus(this.output_width,width)):(text=this.buffer.$last(),$truthy($$($nesting,"Text")["$==="](text))||(text=$$($nesting,"Text").$new(),this.buffer["$<<"](text)),text.$add(obj,width),this.buffer_width=$rb_plus(this.buffer_width,width),this.$break_outmost_groups())},$PrettyPrint_text$8.$$arity=-2),Opal.def(self,"$fill_breakable",$PrettyPrint_fill_breakable$9=function(sep,width){var $$10;return null==sep&&(sep=" "),null==width&&(width=sep.$length()),$send(this,"group",[],(($$10=function(){return(null==$$10.$$s?this:$$10.$$s).$breakable(sep,width)}).$$s=this,$$10.$$arity=0,$$10))},$PrettyPrint_fill_breakable$9.$$arity=-1),Opal.def(self,"$breakable",$PrettyPrint_breakable$11=function(sep,width){var group=nil;return null==sep&&(sep=" "),null==width&&(width=sep.$length()),group=this.group_stack.$last(),$truthy(group["$break?"]())?(this.$flush(),this.output["$<<"](this.newline),this.output["$<<"](this.genspace.$call(this.indent)),this.output_width=this.indent,this.buffer_width=0):(this.buffer["$<<"]($$($nesting,"Breakable").$new(sep,width,this)),this.buffer_width=$rb_plus(this.buffer_width,width),this.$break_outmost_groups())},$PrettyPrint_breakable$11.$$arity=-1),Opal.def(self,"$group",$PrettyPrint_group$12=function(indent,open_obj,close_obj,open_width,close_width){var $$13,$iter=$PrettyPrint_group$12.$$p,$yield=$iter||nil;return $iter&&($PrettyPrint_group$12.$$p=null),null==indent&&(indent=0),null==open_obj&&(open_obj=""),null==close_obj&&(close_obj=""),null==open_width&&(open_width=open_obj.$length()),null==close_width&&(close_width=close_obj.$length()),this.$text(open_obj,open_width),$send(this,"group_sub",[],($$13=function(){var $$14,self=null==$$13.$$s?this:$$13.$$s;return $send(self,"nest",[indent],(($$14=function(){null==$$14.$$s||$$14.$$s;return Opal.yieldX($yield,[])}).$$s=self,$$14.$$arity=0,$$14))},$$13.$$s=this,$$13.$$arity=0,$$13)),this.$text(close_obj,close_width)},$PrettyPrint_group$12.$$arity=-1),Opal.def(self,"$group_sub",$PrettyPrint_group_sub$15=function(){var $iter=$PrettyPrint_group_sub$15.$$p,$yield=$iter||nil,self=this,group=nil;return $iter&&($PrettyPrint_group_sub$15.$$p=null),group=$$($nesting,"Group").$new($rb_plus(self.group_stack.$last().$depth(),1)),self.group_stack.$push(group),self.group_queue.$enq(group),function(){try{return Opal.yieldX($yield,[])}finally{self.group_stack.$pop(),$truthy(group.$breakables()["$empty?"]())&&self.group_queue.$delete(group)}}()},$PrettyPrint_group_sub$15.$$arity=0),Opal.def(self,"$nest",$PrettyPrint_nest$16=function(indent){var $iter=$PrettyPrint_nest$16.$$p,$yield=$iter||nil,self=this;return $iter&&($PrettyPrint_nest$16.$$p=null),self.indent=$rb_plus(self.indent,indent),function(){try{return Opal.yieldX($yield,[])}finally{self.indent=$rb_minus(self.indent,indent)}}()},$PrettyPrint_nest$16.$$arity=1),Opal.def(self,"$flush",$PrettyPrint_flush$17=function(){var $$18;return $send(this.buffer,"each",[],($$18=function(data){var self=null==$$18.$$s?this:$$18.$$s;return null==self.output&&(self.output=nil),null==self.output_width&&(self.output_width=nil),null==data&&(data=nil),self.output_width=data.$output(self.output,self.output_width)},$$18.$$s=this,$$18.$$arity=1,$$18)),this.buffer.$clear(),this.buffer_width=0},$PrettyPrint_flush$17.$$arity=0),function($base,$super,$parent_nesting){var $Text_initialize$19,$Text_output$20,$Text_add$22,self=$klass($base,null,"Text");[self].concat($parent_nesting);self.$$prototype.objs=self.$$prototype.width=nil,Opal.def(self,"$initialize",$Text_initialize$19=function(){return this.objs=[],this.width=0},$Text_initialize$19.$$arity=0),self.$attr_reader("width"),Opal.def(self,"$output",$Text_output$20=function(out,output_width){var $$21;return $send(this.objs,"each",[],(($$21=function(obj){null==$$21.$$s||$$21.$$s;return null==obj&&(obj=nil),out["$<<"](obj)}).$$s=this,$$21.$$arity=1,$$21)),$rb_plus(output_width,this.width)},$Text_output$20.$$arity=2),Opal.def(self,"$add",$Text_add$22=function(obj,width){return this.objs["$<<"](obj),this.width=$rb_plus(this.width,width)},$Text_add$22.$$arity=2)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $Breakable_initialize$23,$Breakable_output$24,self=$klass($base,null,"Breakable");[self].concat($parent_nesting);self.$$prototype.group=self.$$prototype.pp=self.$$prototype.indent=self.$$prototype.obj=self.$$prototype.width=nil,Opal.def(self,"$initialize",$Breakable_initialize$23=function(sep,width,q){return this.obj=sep,this.width=width,this.pp=q,this.indent=q.$indent(),this.group=q.$current_group(),this.group.$breakables().$push(this)},$Breakable_initialize$23.$$arity=3),self.$attr_reader("obj"),self.$attr_reader("width"),self.$attr_reader("indent"),Opal.def(self,"$output",$Breakable_output$24=function(out,output_width){return this.group.$breakables().$shift(),$truthy(this.group["$break?"]())?(out["$<<"](this.pp.$newline()),out["$<<"](this.pp.$genspace().$call(this.indent)),this.indent):($truthy(this.group.$breakables()["$empty?"]())&&this.pp.$group_queue().$delete(this.group),out["$<<"](this.obj),$rb_plus(output_width,this.width))},$Breakable_output$24.$$arity=2)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $Group_initialize$25,$Group_break$26,$Group_break$ques$27,$Group_first$ques$28,self=$klass($base,null,"Group");[self].concat($parent_nesting);self.$$prototype.break=nil,Opal.def(self,"$initialize",$Group_initialize$25=function(depth){return this.depth=depth,this.breakables=[],this.break=!1},$Group_initialize$25.$$arity=1),self.$attr_reader("depth"),self.$attr_reader("breakables"),Opal.def(self,"$break",$Group_break$26=function(){return this.break=!0},$Group_break$26.$$arity=0),Opal.def(self,"$break?",$Group_break$ques$27=function(){return this.break},$Group_break$ques$27.$$arity=0),Opal.def(self,"$first?",$Group_first$ques$28=function(){var $a;return!$truthy(($a=this.first,null!=$a&&$a!==nil?"instance-variable":nil))&&(this.first=!1,!0)},$Group_first$ques$28.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $GroupQueue_initialize$29,$GroupQueue_enq$31,$GroupQueue_deq$32,$GroupQueue_delete$36,self=$klass($base,null,"GroupQueue");[self].concat($parent_nesting);self.$$prototype.queue=nil,Opal.def(self,"$initialize",$GroupQueue_initialize$29=function($a){var groups,$$30,self=this;return groups=Opal.slice.call(arguments,0,arguments.length),self.queue=[],$send(groups,"each",[],($$30=function(g){var self=null==$$30.$$s?this:$$30.$$s;return null==g&&(g=nil),self.$enq(g)},$$30.$$s=self,$$30.$$arity=1,$$30))},$GroupQueue_initialize$29.$$arity=-1),Opal.def(self,"$enq",$GroupQueue_enq$31=function(group){var depth;for(depth=group.$depth();!$truthy($rb_lt(depth,this.queue.$length()));)this.queue["$<<"]([]);return this.queue["$[]"](depth)["$<<"](group)},$GroupQueue_enq$31.$$arity=1),Opal.def(self,"$deq",$GroupQueue_deq$32=function(){try{var $$33;return $send(this.queue,"each",[],($$33=function(gs){var $$34,$$35,self=null==$$33.$$s?this:$$33.$$s;return null==gs&&(gs=nil),$send($rb_minus(gs.$length(),1),"downto",[0],(($$34=function(i){null==$$34.$$s||$$34.$$s;var group=nil;if(null==i&&(i=nil),$truthy(gs["$[]"](i).$breakables()["$empty?"]()))return nil;(group=gs["$slice!"](i,1).$first()).$break(),Opal.ret(group)}).$$s=self,$$34.$$arity=1,$$34)),$send(gs,"each",[],(($$35=function(group){null==$$35.$$s||$$35.$$s;return null==group&&(group=nil),group.$break()}).$$s=self,$$35.$$arity=1,$$35)),gs.$clear()},$$33.$$s=this,$$33.$$arity=1,$$33)),nil}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$GroupQueue_deq$32.$$arity=0),Opal.def(self,"$delete",$GroupQueue_delete$36=function(group){return this.queue["$[]"](group.$depth()).$delete(group)},$GroupQueue_delete$36.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $SingleLine_initialize$37,$SingleLine_text$38,$SingleLine_breakable$39,$SingleLine_nest$40,$SingleLine_group$41,$SingleLine_flush$42,$SingleLine_first$ques$43,self=$klass($base,null,"SingleLine");[self].concat($parent_nesting);return self.$$prototype.output=self.$$prototype.first=nil,Opal.def(self,"$initialize",$SingleLine_initialize$37=function(output,maxwidth,newline){return null==maxwidth&&(maxwidth=nil),null==newline&&(newline=nil),this.output=output,this.first=[!0]},$SingleLine_initialize$37.$$arity=-2),Opal.def(self,"$text",$SingleLine_text$38=function(obj,width){return null==width&&(width=nil),this.output["$<<"](obj)},$SingleLine_text$38.$$arity=-2),Opal.def(self,"$breakable",$SingleLine_breakable$39=function(sep,width){return null==sep&&(sep=" "),null==width&&(width=nil),this.output["$<<"](sep)},$SingleLine_breakable$39.$$arity=-1),Opal.def(self,"$nest",$SingleLine_nest$40=function(indent){var $iter=$SingleLine_nest$40.$$p,$yield=$iter||nil;return $iter&&($SingleLine_nest$40.$$p=null),Opal.yieldX($yield,[])},$SingleLine_nest$40.$$arity=1),Opal.def(self,"$group",$SingleLine_group$41=function(indent,open_obj,close_obj,open_width,close_width){var $iter=$SingleLine_group$41.$$p,$yield=$iter||nil;return $iter&&($SingleLine_group$41.$$p=null),null==indent&&(indent=nil),null==open_obj&&(open_obj=""),null==close_obj&&(close_obj=""),null==open_width&&(open_width=nil),null==close_width&&(close_width=nil),this.first.$push(!0),this.output["$<<"](open_obj),Opal.yieldX($yield,[]),this.output["$<<"](close_obj),this.first.$pop()},$SingleLine_group$41.$$arity=-1),Opal.def(self,"$flush",$SingleLine_flush$42=function(){return nil},$SingleLine_flush$42.$$arity=0),Opal.def(self,"$first?",$SingleLine_first$ques$43=function(){var result,$writer;return result=this.first["$[]"](-1),$writer=[-1,!1],$send(this.first,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),result},$SingleLine_first$ques$43.$$arity=0),nil&&"first?"}($nesting[0],0,$nesting)}($nesting[0],0,$nesting)},Opal.modules.pp=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_le(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)}var $$59,$$62,self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$klass=Opal.klass,$gvars=Opal.gvars,$send=Opal.send,$module=Opal.module,$hash2=Opal.hash2,$truthy=Opal.truthy;return Opal.add_stubs(["$require","$new","$guard_inspect_key","$pp","$flush","$<<","$bind_call","$instance_method","$to_proc","$attr_accessor","$==","$[]","$current","$compare_by_identity","$[]=","$-","$include?","$delete","$is_a?","$__getobj__","$check_inspect_key","$group","$pretty_print_cycle","$push_inspect_key","$pretty_print","$sharing_detection","$pop_inspect_key","$+","$name","$class","$chomp!","$text","$breakable","$lambda","$comma_breakable","$__send__","$call","$object_address_group","$seplist","$pretty_print_instance_variables","$===","$to_s","$instance_eval","$include","$!=","$owner","$inspect","$!","$respond_to?","$pp_object","$sort","$instance_variables","$raise","$singleline_pp","$dup","$empty?","$pp_hash","$each","$keys","$sprintf","$mcall","$begin","$exclude_end?","$end","$lines","$>","$size","$named_captures","$regexp","$object_group","$class_eval","$string","$<=","$first","$module_function"]),self.$require("thread"),self.$require("stringio"),self.$require("prettyprint"),function($base,$super,$parent_nesting){var $PP_pp$1,$PP_singleline_pp$3,$PP_mcall$5,self=$klass($base,$super,"PP"),$nesting=[self].concat($parent_nesting);Opal.defs($$($nesting,"PP"),"$pp",$PP_pp$1=function(obj,out,width){var $$2,q=nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==out&&(out=$gvars.stdout),null==width&&(width=79),q=$$($nesting,"PP").$new(out,width),$send(q,"guard_inspect_key",[],(($$2=function(){null==$$2.$$s||$$2.$$s;return q.$pp(obj)}).$$s=this,$$2.$$arity=0,$$2)),q.$flush(),out["$<<"]("\n")},$PP_pp$1.$$arity=-2),Opal.defs($$($nesting,"PP"),"$singleline_pp",$PP_singleline_pp$3=function(obj,out){var $$4,q=nil;return null==$gvars.stdout&&($gvars.stdout=nil),null==out&&(out=$gvars.stdout),q=$$($nesting,"SingleLine").$new(out),$send(q,"guard_inspect_key",[],(($$4=function(){null==$$4.$$s||$$4.$$s;return q.$pp(obj)}).$$s=this,$$4.$$arity=0,$$4)),q.$flush(),out},$PP_singleline_pp$3.$$arity=-2),Opal.defs($$($nesting,"PP"),"$mcall",$PP_mcall$5=function(obj,mod,meth,$a){var args,$iter=$PP_mcall$5.$$p,block=$iter||nil;return $iter&&($PP_mcall$5.$$p=null),$iter&&($PP_mcall$5.$$p=null),args=Opal.slice.call(arguments,3,arguments.length),$send(mod.$instance_method(meth),"bind_call",[obj].concat(Opal.to_a(args)),block.$to_proc())},$PP_mcall$5.$$arity=-4),self.sharing_detection=!1,function(self,$parent_nesting){[self].concat($parent_nesting);self.$attr_accessor("sharing_detection")}(Opal.get_singleton_class(self),$nesting),function($base,$parent_nesting){var $PPMethods_guard_inspect_key$6,$PPMethods_check_inspect_key$7,$PPMethods_push_inspect_key$8,$PPMethods_pop_inspect_key$9,$PPMethods_pp$10,$PPMethods_object_group$13,$PPMethods_object_address_group$14,$PPMethods_comma_breakable$15,$PPMethods_seplist$16,$PPMethods_pp_object$19,$PPMethods_pp_hash$24,self=$module($base,"PPMethods"),$nesting=[self].concat($parent_nesting);Opal.def(self,"$guard_inspect_key",$PPMethods_guard_inspect_key$6=function(){var save,$iter=$PPMethods_guard_inspect_key$6.$$p,$yield=$iter||nil,$writer=nil;return $iter&&($PPMethods_guard_inspect_key$6.$$p=null),$$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$=="](nil)&&($writer=["__recursive_key__",$hash2([],{}).$compare_by_identity()],$send($$($nesting,"Thread").$current(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect")["$=="](nil)&&($writer=["inspect",$hash2([],{}).$compare_by_identity()],$send($$($nesting,"Thread").$current()["$[]"]("__recursive_key__"),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),save=$$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"),function(){try{return $writer=["inspect",$hash2([],{}).$compare_by_identity()],$send($$($nesting,"Thread").$current()["$[]"]("__recursive_key__"),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],Opal.yieldX($yield,[])}finally{$writer=["inspect",save],$send($$($nesting,"Thread").$current()["$[]"]("__recursive_key__"),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}}()},$PPMethods_guard_inspect_key$6.$$arity=0),Opal.def(self,"$check_inspect_key",$PPMethods_check_inspect_key$7=function(id){var $ret_or_1,$ret_or_2=nil;return $truthy($ret_or_1=$truthy($ret_or_2=$$($nesting,"Thread").$current()["$[]"]("__recursive_key__"))?$$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"):$ret_or_2)?$$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect")["$include?"](id):$ret_or_1},$PPMethods_check_inspect_key$7.$$arity=1),Opal.def(self,"$push_inspect_key",$PPMethods_push_inspect_key$8=function(id){var $writer;return $writer=[id,!0],$send($$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect"),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$PPMethods_push_inspect_key$8.$$arity=1),Opal.def(self,"$pop_inspect_key",$PPMethods_pop_inspect_key$9=function(id){return $$($nesting,"Thread").$current()["$[]"]("__recursive_key__")["$[]"]("inspect").$delete(id)},$PPMethods_pop_inspect_key$9.$$arity=1),Opal.def(self,"$pp",$PPMethods_pp$10=function(obj){var $$11,$$12,self=this,$ret_or_3=nil;return $truthy($truthy($ret_or_3=$$$("::","Delegator","skip_raise")?"constant":nil)?obj["$is_a?"]($$$("::","Delegator")):$ret_or_3)&&(obj=obj.$__getobj__()),$truthy(self.$check_inspect_key(obj))?($send(self,"group",[],($$11=function(){var self=null==$$11.$$s?this:$$11.$$s;return obj.$pretty_print_cycle(self)},$$11.$$s=self,$$11.$$arity=0,$$11)),nil):function(){try{return self.$push_inspect_key(obj),$send(self,"group",[],($$12=function(){var self=null==$$12.$$s?this:$$12.$$s;return obj.$pretty_print(self)},$$12.$$s=self,$$12.$$arity=0,$$12))}finally{$truthy($$($nesting,"PP").$sharing_detection())||self.$pop_inspect_key(obj)}}()},$PPMethods_pp$10.$$arity=1),Opal.def(self,"$object_group",$PPMethods_object_group$13=function(obj){var lhs,rhs,$iter=$PPMethods_object_group$13.$$p,block=$iter||nil;return $iter&&($PPMethods_object_group$13.$$p=null),$iter&&($PPMethods_object_group$13.$$p=null),$send(this,"group",[1,(lhs="#<",rhs=obj.$class().$name(),"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)),">"],block.$to_proc())},$PPMethods_object_group$13.$$arity=1),Opal.def(self,"$object_address_group",$PPMethods_object_address_group$14=function(obj){var $iter=$PPMethods_object_address_group$14.$$p,block=$iter||nil,str=nil;return $iter&&($PPMethods_object_address_group$14.$$p=null),$iter&&($PPMethods_object_address_group$14.$$p=null),(str=$$($nesting,"Kernel").$instance_method("to_s").$bind_call(obj))["$chomp!"](">"),$send(this,"group",[1,str,">"],block.$to_proc())},$PPMethods_object_address_group$14.$$arity=1),Opal.def(self,"$comma_breakable",$PPMethods_comma_breakable$15=function(){return this.$text(","),this.$breakable()},$PPMethods_comma_breakable$15.$$arity=0),Opal.def(self,"$seplist",$PPMethods_seplist$16=function(list,sep,iter_method){var $$17,$$18,$iter=$PPMethods_seplist$16.$$p,$yield=$iter||nil,self=this,$ret_or_4=nil,first=nil;return $iter&&($PPMethods_seplist$16.$$p=null),null==sep&&(sep=nil),null==iter_method&&(iter_method="each"),sep=$truthy($ret_or_4=sep)?$ret_or_4:$send(self,"lambda",[],(($$17=function(){return(null==$$17.$$s?this:$$17.$$s).$comma_breakable()}).$$s=self,$$17.$$arity=0,$$17)),first=!0,$send(list,"__send__",[iter_method],($$18=function($a){var v;null==$$18.$$s||$$18.$$s;return v=Opal.slice.call(arguments,0,arguments.length),$truthy(first)?first=!1:sep.$call(),Opal.yieldX($yield,Opal.to_a(v))},$$18.$$s=self,$$18.$$arity=-1,$$18))},$PPMethods_seplist$16.$$arity=-2),Opal.def(self,"$pp_object",$PPMethods_pp_object$19=function(obj){var $$20;return $send(this,"object_address_group",[obj],($$20=function(){var $$21,$$22,self=null==$$20.$$s?this:$$20.$$s;return $send(self,"seplist",[obj.$pretty_print_instance_variables(),$send(self,"lambda",[],($$21=function(){return(null==$$21.$$s?this:$$21.$$s).$text(",")},$$21.$$s=self,$$21.$$arity=0,$$21))],($$22=function(v){var $$23,self=null==$$22.$$s?this:$$22.$$s;return null==v&&(v=nil),self.$breakable(),$truthy($$($nesting,"Symbol")["$==="](v))&&(v=v.$to_s()),self.$text(v),self.$text("="),$send(self,"group",[1],($$23=function(){var self=null==$$23.$$s?this:$$23.$$s;return self.$breakable(""),self.$pp(obj.$instance_eval(v))},$$23.$$s=self,$$23.$$arity=0,$$23))},$$22.$$s=self,$$22.$$arity=1,$$22))},$$20.$$s=this,$$20.$$arity=0,$$20))},$PPMethods_pp_object$19.$$arity=1),Opal.def(self,"$pp_hash",$PPMethods_pp_hash$24=function(obj){var $$25;return $send(this,"group",[1,"{","}"],($$25=function(){var $$26,self=null==$$25.$$s?this:$$25.$$s;return $send(self,"seplist",[obj,nil,"each_pair"],($$26=function(k,v){var $$27,self=null==$$26.$$s?this:$$26.$$s;return null==k&&(k=nil),null==v&&(v=nil),$send(self,"group",[],($$27=function(){var $$28,self=null==$$27.$$s?this:$$27.$$s;return self.$pp(k),self.$text("=>"),$send(self,"group",[1],($$28=function(){var self=null==$$28.$$s?this:$$28.$$s;return self.$breakable(""),self.$pp(v)},$$28.$$s=self,$$28.$$arity=0,$$28))},$$27.$$s=self,$$27.$$arity=0,$$27))},$$26.$$s=self,$$26.$$arity=2,$$26))},$$25.$$s=this,$$25.$$arity=0,$$25))},$PPMethods_pp_hash$24.$$arity=1)}($nesting[0],$nesting),self.$include($$($nesting,"PPMethods")),function($base,$super,$parent_nesting){var self=$klass($base,$super,"SingleLine"),$nesting=[self].concat($parent_nesting);self.$include($$($nesting,"PPMethods"))}($nesting[0],$$$($$($nesting,"PrettyPrint"),"SingleLine"),$nesting),function($base,$parent_nesting){var $ObjectMixin_pretty_print$29,$ObjectMixin_pretty_print_cycle$30,$ObjectMixin_pretty_print_instance_variables$32,$ObjectMixin_pretty_print_inspect$33,self=$module($base,"ObjectMixin"),$nesting=[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$ObjectMixin_pretty_print$29=function(q){var self=this,umethod_method=nil,inspect_method=nil,$ret_or_5=nil,$ret_or_6=nil;umethod_method=$$($nesting,"Object").$instance_method("method");try{inspect_method=umethod_method.$bind_call(self,"inspect")}catch($err){if(!Opal.rescue($err,[$$($nesting,"NameError")]))throw $err;Opal.pop_exception()}return $truthy($truthy($ret_or_5=inspect_method)?inspect_method.$owner()["$!="]($$($nesting,"Kernel")):$ret_or_5)||$truthy($truthy($ret_or_6=inspect_method["$!"]())?self["$respond_to?"]("inspect"):$ret_or_6)?q.$text(self.$inspect()):q.$pp_object(self)},$ObjectMixin_pretty_print$29.$$arity=1),Opal.def(self,"$pretty_print_cycle",$ObjectMixin_pretty_print_cycle$30=function(q){var $$31;return $send(q,"object_address_group",[this],(($$31=function(){null==$$31.$$s||$$31.$$s;return q.$breakable(),q.$text("...")}).$$s=this,$$31.$$arity=0,$$31))},$ObjectMixin_pretty_print_cycle$30.$$arity=1),Opal.def(self,"$pretty_print_instance_variables",$ObjectMixin_pretty_print_instance_variables$32=function(){return this.$instance_variables().$sort()},$ObjectMixin_pretty_print_instance_variables$32.$$arity=0),Opal.def(self,"$pretty_print_inspect",$ObjectMixin_pretty_print_inspect$33=function(){return $$($nesting,"Object").$instance_method("method").$bind_call(this,"pretty_print").$owner()["$=="]($$$($$($nesting,"PP"),"ObjectMixin"))&&this.$raise("pretty_print is not overridden for "+this.$class()),$$($nesting,"PP").$singleline_pp(this,"".$dup())},$ObjectMixin_pretty_print_inspect$33.$$arity=0)}($nesting[0],$nesting)}($nesting[0],$$($nesting,"PrettyPrint"),$nesting),function($base,$super,$parent_nesting){var $Array_pretty_print$34,$Array_pretty_print_cycle$37,self=$klass($base,null,"Array");[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$Array_pretty_print$34=function(q){var $$35;return $send(q,"group",[1,"[","]"],($$35=function(){var $$36,self=null==$$35.$$s?this:$$35.$$s;return $send(q,"seplist",[self],(($$36=function(v){null==$$36.$$s||$$36.$$s;return null==v&&(v=nil),q.$pp(v)}).$$s=self,$$36.$$arity=1,$$36))},$$35.$$s=this,$$35.$$arity=0,$$35))},$Array_pretty_print$34.$$arity=1),Opal.def(self,"$pretty_print_cycle",$Array_pretty_print_cycle$37=function(q){var self=this;return q.$text($truthy(self["$empty?"]())?"[]":"[...]")},$Array_pretty_print_cycle$37.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $Hash_pretty_print$38,$Hash_pretty_print_cycle$39,self=$klass($base,null,"Hash");[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$Hash_pretty_print$38=function(q){return q.$pp_hash(this)},$Hash_pretty_print$38.$$arity=1),Opal.def(self,"$pretty_print_cycle",$Hash_pretty_print_cycle$39=function(q){var self=this;return q.$text($truthy(self["$empty?"]())?"{}":"{...}")},$Hash_pretty_print_cycle$39.$$arity=1)}($nesting[0],0,$nesting),function(self,$parent_nesting){var $pretty_print$40,$nesting=[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$pretty_print$40=function(q){var $$41,h;return h=$hash2([],{}),$send($$($nesting,"ENV").$keys().$sort(),"each",[],(($$41=function(k){var $writer;null==$$41.$$s||$$41.$$s;return null==k&&(k=nil),$writer=[k,$$($nesting,"ENV")["$[]"](k)],$send(h,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$41.$$arity=1,$$41)),q.$pp_hash(h)},$pretty_print$40.$$arity=1)}(Opal.get_singleton_class($$($nesting,"ENV")),$nesting),function($base,$super,$parent_nesting){var $Struct_pretty_print$42,$Struct_pretty_print_cycle$47,self=$klass($base,null,"Struct"),$nesting=[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$Struct_pretty_print$42=function(q){var $$43;return $send(q,"group",[1,this.$sprintf("#<struct %s",$$($nesting,"PP").$mcall(this,$$($nesting,"Kernel"),"class").$name()),">"],($$43=function(){var $$44,$$45,self=null==$$43.$$s?this:$$43.$$s;return $send(q,"seplist",[$$($nesting,"PP").$mcall(self,$$($nesting,"Struct"),"members"),$send(self,"lambda",[],($$44=function(){null==$$44.$$s||$$44.$$s;return q.$text(",")},$$44.$$s=self,$$44.$$arity=0,$$44))],($$45=function(member){var $$46,self=null==$$45.$$s?this:$$45.$$s;return null==member&&(member=nil),q.$breakable(),q.$text(member.$to_s()),q.$text("="),$send(q,"group",[1],($$46=function(){var self=null==$$46.$$s?this:$$46.$$s;return q.$breakable(""),q.$pp(self["$[]"](member))},$$46.$$s=self,$$46.$$arity=0,$$46))},$$45.$$s=self,$$45.$$arity=1,$$45))},$$43.$$s=this,$$43.$$arity=0,$$43))},$Struct_pretty_print$42.$$arity=1),Opal.def(self,"$pretty_print_cycle",$Struct_pretty_print_cycle$47=function(q){return q.$text(this.$sprintf("#<struct %s:...>",$$($nesting,"PP").$mcall(this,$$($nesting,"Kernel"),"class").$name()))},$Struct_pretty_print_cycle$47.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $Range_pretty_print$48,self=$klass($base,null,"Range");[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$Range_pretty_print$48=function(q){var self=this;return q.$pp(self.$begin()),q.$breakable(""),q.$text($truthy(self["$exclude_end?"]())?"...":".."),q.$breakable(""),$truthy(self.$end())?q.$pp(self.$end()):nil},$Range_pretty_print$48.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $String_pretty_print$49,self=$klass($base,null,"String");[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$String_pretty_print$49=function(q){var $$50,lhs,rhs,lines=nil;return lines=this.$lines(),$truthy((lhs=lines.$size(),rhs=1,"number"==typeof lhs&&"number"==typeof rhs?lhs>rhs:lhs["$>"](rhs)))?$send(q,"group",[0,"",""],($$50=function(){var $$51,$$52,self=null==$$50.$$s?this:$$50.$$s;return $send(q,"seplist",[lines,$send(self,"lambda",[],($$51=function(){null==$$51.$$s||$$51.$$s;return q.$text(" +"),q.$breakable()},$$51.$$s=self,$$51.$$arity=0,$$51))],(($$52=function(v){null==$$52.$$s||$$52.$$s;return null==v&&(v=nil),q.$pp(v)}).$$s=self,$$52.$$arity=1,$$52))},$$50.$$s=this,$$50.$$arity=0,$$50)):q.$text(this.$inspect())},$String_pretty_print$49.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $MatchData_pretty_print$53,self=$klass($base,null,"MatchData");[self].concat($parent_nesting);Opal.def(self,"$pretty_print",$MatchData_pretty_print$53=function(q){var $$54,$$56,nc=nil;return nc=[],$send(this.$regexp().$named_captures(),"each",[],($$54=function(name,indexes){var $$55,self=null==$$54.$$s?this:$$54.$$s;return null==name&&(name=nil),null==indexes&&(indexes=nil),$send(indexes,"each",[],(($$55=function(i){var $writer;null==$$55.$$s||$$55.$$s;return null==i&&(i=nil),$writer=[i,name],$send(nc,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$55.$$arity=1,$$55))},$$54.$$s=this,$$54.$$arity=2,$$54)),$send(q,"object_group",[this],($$56=function(){var $$57,$$58,self=null==$$56.$$s?this:$$56.$$s;return q.$breakable(),$send(q,"seplist",[Opal.Range.$new(0,self.$size(),!0),$send(self,"lambda",[],($$57=function(){null==$$57.$$s||$$57.$$s;return q.$breakable()},$$57.$$s=self,$$57.$$arity=0,$$57))],($$58=function(i){var self=null==$$58.$$s?this:$$58.$$s;return null==i&&(i=nil),i["$=="](0)||($truthy(nc["$[]"](i))?q.$text(nc["$[]"](i)):q.$pp(i),q.$text(":")),q.$pp(self["$[]"](i))},$$58.$$s=self,$$58.$$arity=1,$$58))},$$56.$$s=this,$$56.$$arity=0,$$56))},$MatchData_pretty_print$53.$$arity=1)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var self=$klass($base,$super,"Object"),$nesting=[self].concat($parent_nesting);self.$include($$$($$($nesting,"PP"),"ObjectMixin"))}($nesting[0],$$($nesting,"BasicObject"),$nesting),$send([$$($nesting,"Numeric"),$$($nesting,"Symbol"),$$($nesting,"FalseClass"),$$($nesting,"TrueClass"),$$($nesting,"NilClass"),$$($nesting,"Module")],"each",[],($$59=function(c){var $$60,self=null==$$59.$$s?this:$$59.$$s;return null==c&&(c=nil),$send(c,"class_eval",[],($$60=function(){var $pretty_print_cycle$61,self=null==$$60.$$s?this:$$60.$$s;return Opal.def(self,"$pretty_print_cycle",$pretty_print_cycle$61=function(q){return q.$text(this.$inspect())},$pretty_print_cycle$61.$$arity=1),nil&&"pretty_print_cycle"},$$60.$$s=self,$$60.$$arity=0,$$60))},$$59.$$s=self,$$59.$$arity=1,$$59)),$send([$$($nesting,"Numeric"),$$($nesting,"FalseClass"),$$($nesting,"TrueClass"),$$($nesting,"Module")],"each",[],($$62=function(c){var $$63,self=null==$$62.$$s?this:$$62.$$s;return null==c&&(c=nil),$send(c,"class_eval",[],($$63=function(){var $pretty_print$64,self=null==$$63.$$s?this:$$63.$$s;return Opal.def(self,"$pretty_print",$pretty_print$64=function(q){return q.$text(this.$inspect())},$pretty_print$64.$$arity=1),nil&&"pretty_print"},$$63.$$s=self,$$63.$$arity=0,$$63))},$$62.$$s=self,$$62.$$arity=1,$$62)),function($base,$parent_nesting){var $Kernel_pretty_inspect$65,$Kernel_pp$66,self=$module($base,"Kernel"),$nesting=[self].concat($parent_nesting);return Opal.def(self,"$pretty_inspect",$Kernel_pretty_inspect$65=function(){return $$($nesting,"PP").$pp(this,$$($nesting,"StringIO").$new()).$string()},$Kernel_pretty_inspect$65.$$arity=0),Opal.def(self,"$pp",$Kernel_pp$66=function($a){var $post_args,objs,$$67,self=this;return $post_args=Opal.slice.call(arguments,0,arguments.length),$send(objs=$post_args,"each",[],(($$67=function(obj){null==$$67.$$s||$$67.$$s;return null==obj&&(obj=nil),$$($nesting,"PP").$pp(obj)}).$$s=self,$$67.$$arity=1,$$67)),$truthy($rb_le(objs.$size(),1))?objs.$first():objs},$Kernel_pp$66.$$arity=-1),self.$module_function("pp")}($nesting[0],$nesting)};
